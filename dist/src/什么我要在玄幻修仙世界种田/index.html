<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>《什么？我要在玄幻修仙世界种田》 - 状态栏</title>
  <!-- 引入Font Awesome图标库 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
<style>/*!*******************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/什么我要在玄幻修仙世界种田/index.scss ***!
  \*******************************************************************************************************************************************************************************************************************************************/
@import url(https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap);
/*!***********************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/什么我要在玄幻修仙世界种田/index.scss (1) ***!
  \***********************************************************************************************************************************************************************************************************************************************/
/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */
@charset "UTF-8";
@layer properties;
.collapse {
  visibility: collapse;
}
.visible {
  visibility: visible;
}
.absolute {
  position: absolute;
}
.fixed {
  position: fixed;
}
.relative {
  position: relative;
}
.static {
  position: static;
}
.sticky {
  position: sticky;
}
.z-10 {
  z-index: 10;
}
.container {
  width: 100%;
}
.mx-auto {
  margin-inline: auto;
}
.mt-auto {
  margin-top: auto;
}
.mr-auto {
  margin-right: auto;
}
.block {
  display: block;
}
.contents {
  display: contents;
}
.flex {
  display: flex;
}
.grid {
  display: grid;
}
.hidden {
  display: none;
}
.h-full {
  height: 100%;
}
.min-h-\[8rem\] {
  min-height: 8rem;
}
.w-full {
  width: 100%;
}
.max-w-none {
  max-width: none;
}
.flex-1 {
  flex: 1;
}
.flex-shrink {
  flex-shrink: 1;
}
.flex-shrink-0 {
  flex-shrink: 0;
}
.flex-grow {
  flex-grow: 1;
}
.transform {
  transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);
}
.cursor-pointer {
  cursor: pointer;
}
.resize {
  resize: both;
}
.list-inside {
  list-style-position: inside;
}
.list-disc {
  list-style-type: disc;
}
.appearance-none {
  -webkit-appearance: none;
          appearance: none;
}
.grid-cols-1 {
  grid-template-columns: repeat(1, minmax(0, 1fr));
}
.grid-cols-7 {
  grid-template-columns: repeat(7, minmax(0, 1fr));
}
.flex-col {
  flex-direction: column;
}
.flex-wrap {
  flex-wrap: wrap;
}
.items-center {
  align-items: center;
}
.items-start {
  align-items: flex-start;
}
.justify-between {
  justify-content: space-between;
}
.justify-center {
  justify-content: center;
}
.justify-end {
  justify-content: flex-end;
}
.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.overflow-hidden {
  overflow: hidden;
}
.overflow-y-auto {
  overflow-y: auto;
}
.rounded-full {
  border-radius: calc(infinity * 1px);
}
.border {
  border-style: var(--tw-border-style);
  border-width: 1px;
}
.border-2 {
  border-style: var(--tw-border-style);
  border-width: 2px;
}
.border-t {
  border-top-style: var(--tw-border-style);
  border-top-width: 1px;
}
.border-t-2 {
  border-top-style: var(--tw-border-style);
  border-top-width: 2px;
}
.border-b {
  border-bottom-style: var(--tw-border-style);
  border-bottom-width: 1px;
}
.border-b-2 {
  border-bottom-style: var(--tw-border-style);
  border-bottom-width: 2px;
}
.border-l-2 {
  border-left-style: var(--tw-border-style);
  border-left-width: 2px;
}
.border-transparent {
  border-color: transparent;
}
.bg-\[\#fdf6e3\] {
  background-color: #fdf6e3;
}
.text-center {
  text-align: center;
}
.text-right {
  text-align: right;
}
.whitespace-nowrap {
  white-space: nowrap;
}
.whitespace-pre-wrap {
  white-space: pre-wrap;
}
.text-\[\#583e26\] {
  color: #583e26;
}
.italic {
  font-style: italic;
}
.antialiased {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.ring-2 {
  --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
  box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
}
.ring-offset-2 {
  --tw-ring-offset-width: 2px;
  --tw-ring-offset-shadow: var(--tw-ring-inset,) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
}
.outline {
  outline-style: var(--tw-outline-style);
  outline-width: 1px;
}
.filter {
  filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);
}
.backdrop-filter {
  backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
}
.transition {
  transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, backdrop-filter, display, visibility, content-visibility, overlay, pointer-events;
  transition-timing-function: var(--tw-ease, ease);
  transition-duration: var(--tw-duration, 0s);
}
.transition-all {
  transition-property: all;
  transition-timing-function: var(--tw-ease, ease);
  transition-duration: var(--tw-duration, 0s);
}
.transition-colors {
  transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
  transition-timing-function: var(--tw-ease, ease);
  transition-duration: var(--tw-duration, 0s);
}
.transition-transform {
  transition-property: transform, translate, scale, rotate;
  transition-timing-function: var(--tw-ease, ease);
  transition-duration: var(--tw-duration, 0s);
}
.duration-300 {
  --tw-duration: 300ms;
  transition-duration: 300ms;
}
.duration-500 {
  --tw-duration: 500ms;
  transition-duration: 500ms;
}
.group-open\:rotate-180:is(:where(.group):is([open], :popover-open, :open) *) {
  rotate: 180deg;
}
@media (hover: hover) {
  .hover\:scale-105:hover {
    --tw-scale-x: 105%;
    --tw-scale-y: 105%;
    --tw-scale-z: 105%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
}
@media (hover: hover) {
  .hover\:underline:hover {
    text-decoration-line: underline;
  }
}
.focus\:ring-2:focus {
  --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
  box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
}
.focus\:outline-none:focus {
  --tw-outline-style: none;
  outline-style: none;
}
.disabled\:cursor-not-allowed:disabled {
  cursor: not-allowed;
}
body {
  font-family: "Noto Serif SC", serif;
  background-color: var(--bg-primary);
  color: var(--text-primary);
}
:root {
  --bg-primary: #1a1a1a;
  --bg-secondary: #2a2a2a;
  --bg-card: #222222;
  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;
  --border-color: #4b5563;
  --accent-color: #818cf8;
  --accent-color-hover: #6366f1;
}
body.day-mode {
  --bg-primary: #f3f4f6;
  --bg-secondary: #e5e7eb;
  --bg-card: #ffffff;
  --text-primary: #1f2937;
  --text-secondary: #4b5563;
  --border-color: #d1d5db;
}
body.jade-mode {
  --bg-primary: #f0fdf4;
  --bg-secondary: #dcfce7;
  --bg-card: #ffffff;
  --text-primary: #14532d;
  --text-secondary: #166534;
  --border-color: #86efac;
  --accent-color: #22c55e;
  --accent-color-hover: #16a34a;
}
body.classic-mode {
  background-image: url("https://www.transparenttextures.com/patterns/old-paper.png");
  --bg-primary: #fdf6e3;
  --bg-secondary: #f5eeda;
  --bg-card: rgba(245, 238, 218, 0.8);
  --text-primary: #583e26;
  --text-secondary: #6e553c;
  --border-color: #c9bda4;
  --accent-color: #b58900;
  --accent-color-hover: #856703;
}
.theme-transition {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
.card-hover {
  transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
}
.card-hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
}
.bg-main {
  background-color: var(--bg-card);
}
.text-accent {
  color: var(--accent-color);
}
.border-dim {
  border-color: var(--border-color);
}
@supports (color: color-mix(in lab, red, red)) {
  .border-dim {
    border-color: color-mix(in srgb, var(--border-color) 30%, transparent);
  }
}
.text-secondary {
  color: var(--text-secondary);
}
details[open] > summary .group-open\:rotate-180 {
  transform: rotate(180deg);
}
#action-owner {
  color: var(--accent-color);
}
.theme-btn {
  width: 3rem;
  height: 3rem;
  margin: 0 0.5rem;
  transition: all 0.3s ease;
}
.theme-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}
.inner-box {
  padding: 1rem;
}
.flex.flex-col.sm\:flex-row.justify-between.items-start.sm\:items-center {
  margin-bottom: 1.5rem;
}
details.group {
  margin-bottom: 1.5rem;
}
#options-list li {
  background-color: var(--bg-secondary);
}
@supports (color: color-mix(in lab, red, red)) {
  #options-list li {
    background-color: color-mix(in srgb, var(--bg-secondary) 50%, transparent);
  }
}
#options-list li {
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  transition: all 0.2s ease-in-out;
}
#options-list li:hover {
  background-color: var(--accent-color);
  color: var(--bg-card);
  transform: translateX(4px);
}
.progress-bar-bg {
  background-color: var(--bg-secondary);
}
@supports (color: color-mix(in lab, red, red)) {
  .progress-bar-bg {
    background-color: color-mix(in srgb, var(--bg-secondary) 70%, transparent);
  }
}
.progress-bar-bg {
  border: 1px solid var(--border-color);
}
.progress-bar-fg {
  transition: width 0.5s ease-in-out;
}
#custom-action-modal {
  margin-top: 0.75rem;
  transition: all 0.5s ease-in-out;
  max-height: 0;
  opacity: 0;
  transform: translateY(-10px);
  overflow: hidden;
}
#custom-action-modal.is-open {
  max-height: 500px;
  opacity: 1;
  transform: translateY(0);
}
.bg-secondary {
  background-color: var(--bg-secondary);
}
.bg-accent {
  background-color: var(--accent-color);
}
.hover\:bg-accent-hover:hover {
  background-color: var(--accent-color-hover);
}
#custom-action-input {
  color: var(--text-primary);
}
#custom-action-input::placeholder {
  color: var(--text-secondary);
}
#details-modal {
  z-index: 1050;
}
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  backdrop-filter: blur(5px);
}
.modal-overlay:not(.hidden) {
  opacity: 1;
  pointer-events: auto;
}
.modal-content {
  background-color: var(--bg-card);
  color: var(--text-primary);
  padding: 1.5rem 2rem;
  border-radius: 1rem;
  border: 1px solid var(--border-color);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
  width: 90%;
  max-width: 500px;
  max-height: 80vh;
  overflow-y: auto;
  position: relative;
  transform: scale(0.95);
  transition: transform 0.3s ease;
}
.modal-overlay:not(.hidden) .modal-content {
  transform: scale(1);
}
.modal-close-btn {
  position: absolute;
  top: 0.5rem;
  right: 0.75rem;
  background: none;
  border: none;
  font-size: 2rem;
  line-height: 1;
  color: var(--text-secondary);
  cursor: pointer;
  transition: color 0.2s ease;
}
.modal-close-btn:hover {
  color: var(--text-primary);
}
.modal-title {
  display: flex;
  align-items: center;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--accent-color);
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border-color);
}
.modal-title .help-btn {
  width: 1.25rem;
  height: 1.25rem;
  font-size: 0.7rem;
  margin-left: 0.5rem;
  border-radius: 50%;
  background-color: var(--bg-secondary);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  cursor: pointer;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.modal-title .help-btn:hover {
  background-color: var(--accent-color);
  color: var(--bg-card);
  border-color: var(--accent-color);
}
.modal-title .help-btn.active {
  background-color: var(--accent-color-hover);
  color: var(--bg-card);
  border-color: var(--accent-color-hover);
}
.modal-body {
  font-size: 0.95rem;
  line-height: 1.6;
}
.modal-body ul {
  list-style-type: none;
  padding-left: 0;
}
.modal-body li {
  padding: 0.5rem 0;
  border-bottom: 1px solid var(--border-color);
}
@supports (color: color-mix(in lab, red, red)) {
  .modal-body li {
    border-bottom: 1px solid color-mix(in srgb, var(--border-color) 20%, transparent);
  }
}
.modal-body li:last-child {
  border-bottom: none;
}
.modal-body .item-key {
  font-weight: 600;
  color: var(--accent-color);
}
.clickable-item {
  cursor: pointer;
  transition: color 0.2s ease;
}
.clickable-item:hover {
  color: var(--accent-color-hover);
  text-decoration: underline;
}
.global-controls {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 1001;
  display: flex;
  gap: 0.5rem;
}
.control-btn {
  width: 2.5rem;
  height: 2.5rem;
  background-color: var(--bg-card);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}
.control-btn:hover {
  background-color: var(--bg-secondary);
  color: var(--accent-color);
  transform: translateY(-2px);
}
.theme-switcher-dropdown {
  position: relative;
}
.dropdown-content {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  background-color: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  padding: 0.5rem;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
  flex-direction: column;
  gap: 0.25rem;
  width: 120px;
}
.dropdown-content:not(.hidden) {
  display: flex;
}
.dropdown-content .theme-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: 0.5rem;
  border-radius: 0.25rem;
  background: none;
  border: none;
  color: var(--text-primary);
  text-align: left;
}
.dropdown-content .theme-btn:hover {
  background-color: var(--bg-secondary);
  color: var(--accent-color);
}
.tab-btn,
.main-tab-btn {
  padding: 0.5rem 1rem;
  cursor: pointer;
  background: none;
  border: none;
  color: var(--text-secondary);
  border-bottom: 2px solid transparent;
  transition: all 0.2s ease;
  white-space: nowrap;
}
.tab-btn:hover,
.main-tab-btn:hover {
  color: var(--text-primary);
}
.tab-btn.active,
.main-tab-btn.active {
  color: var(--accent-color);
  border-bottom-color: var(--accent-color);
}
.form-field-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.form-field-row input {
  flex-grow: 1;
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 0.25rem;
  padding: 0.25rem 0.5rem;
  color: var(--text-primary);
  font-size: 0.875rem;
}
.form-field-row .remove-field-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 0.25rem;
  transition: color 0.2s ease;
}
.form-field-row .remove-field-btn:hover {
  color: #ef4444;
}
.btn-primary {
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-weight: 600;
  color: var(--bg-card);
  background: linear-gradient(145deg, var(--accent-color), var(--accent-color-hover));
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 1px rgba(255, 255, 255, 0.2);
  transition: all 0.2s ease-in-out;
  cursor: pointer;
}
.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), inset 0 1px 1px rgba(255, 255, 255, 0.2);
}
.btn-primary:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 1px rgba(255, 255, 255, 0.2);
}
.btn-primary:disabled {
  background: var(--bg-secondary);
}
@supports (color: color-mix(in lab, red, red)) {
  .btn-primary:disabled {
    background: color-mix(in srgb, var(--bg-secondary) 50%, #888);
  }
}
.btn-primary:disabled {
  color: var(--text-secondary);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}
.btn-secondary {
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-weight: 600;
  color: var(--text-secondary);
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-color);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease-in-out;
  cursor: pointer;
}
.btn-secondary:hover {
  background-color: var(--bg-secondary);
}
@supports (color: color-mix(in lab, red, red)) {
  .btn-secondary:hover {
    background-color: color-mix(in srgb, var(--bg-secondary) 80%, #fff 20%);
  }
}
.btn-secondary:hover {
  color: var(--text-primary);
  border-color: var(--accent-color);
}
.custom-slider {
  position: relative;
  overflow: hidden;
  width: 100%;
}
.custom-slider-track {
  display: flex;
  transition: transform 0.3s ease-in-out;
}
.custom-slider-slide {
  flex: 0 0 100%;
  width: 100%;
  padding: 0.25rem;
  box-sizing: border-box;
}
.slider-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin-top: 1rem;
}
.slider-nav-btn {
  width: 2.5rem;
  height: 2.5rem;
  background-color: var(--bg-secondary);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
}
.slider-nav-btn:hover:not(:disabled) {
  background-color: var(--accent-color);
  color: var(--bg-card);
}
.slider-nav-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
.slider-counter {
  font-size: 0.875rem;
  color: var(--text-secondary);
  font-variant-numeric: tabular-nums;
}
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
::-webkit-scrollbar-track {
  background: var(--bg-secondary);
}
@supports (color: color-mix(in lab, red, red)) {
  ::-webkit-scrollbar-track {
    background: color-mix(in srgb, var(--bg-secondary) 50%, transparent);
  }
}
::-webkit-scrollbar-track {
  border-radius: 10px;
}
::-webkit-scrollbar-thumb {
  background-color: var(--accent-color);
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover {
  background-color: var(--accent-color-hover);
}
@property --tw-rotate-x {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-y {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-z {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-x {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-y {
  syntax: "*";
  inherits: false;
}
@property --tw-border-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-inset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-ring-inset {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-offset-width {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --tw-ring-offset-color {
  syntax: "*";
  inherits: false;
  initial-value: #fff;
}
@property --tw-ring-offset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-outline-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-drop-shadow {
  syntax: "*";
  inherits: false;
}
@property --tw-drop-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-drop-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-drop-shadow-size {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-duration {
  syntax: "*";
  inherits: false;
}
@property --tw-scale-x {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-y {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-z {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@layer properties {
  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
    *, ::before, ::after, ::backdrop {
      --tw-rotate-x: initial;
      --tw-rotate-y: initial;
      --tw-rotate-z: initial;
      --tw-skew-x: initial;
      --tw-skew-y: initial;
      --tw-border-style: solid;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-color: initial;
      --tw-shadow-alpha: 100%;
      --tw-inset-shadow: 0 0 #0000;
      --tw-inset-shadow-color: initial;
      --tw-inset-shadow-alpha: 100%;
      --tw-ring-color: initial;
      --tw-ring-shadow: 0 0 #0000;
      --tw-inset-ring-color: initial;
      --tw-inset-ring-shadow: 0 0 #0000;
      --tw-ring-inset: initial;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-outline-style: solid;
      --tw-blur: initial;
      --tw-brightness: initial;
      --tw-contrast: initial;
      --tw-grayscale: initial;
      --tw-hue-rotate: initial;
      --tw-invert: initial;
      --tw-opacity: initial;
      --tw-saturate: initial;
      --tw-sepia: initial;
      --tw-drop-shadow: initial;
      --tw-drop-shadow-color: initial;
      --tw-drop-shadow-alpha: 100%;
      --tw-drop-shadow-size: initial;
      --tw-backdrop-blur: initial;
      --tw-backdrop-brightness: initial;
      --tw-backdrop-contrast: initial;
      --tw-backdrop-grayscale: initial;
      --tw-backdrop-hue-rotate: initial;
      --tw-backdrop-invert: initial;
      --tw-backdrop-opacity: initial;
      --tw-backdrop-saturate: initial;
      --tw-backdrop-sepia: initial;
      --tw-duration: initial;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-scale-z: 1;
    }
  }
}
</style></head>

<body class="p-4 sm:p-6 md:p-8 theme-transition">

  <!-- 右上角全局控制器 -->
  <div class="global-controls">
    <!-- 图鉴管理按钮 -->
    <button id="manage-pokedex-btn" class="control-btn" title="图鉴管理">
      <i class="fas fa-book-open"></i>
    </button>


    <!-- 主题切换下拉菜单 -->
    <div class="theme-switcher-dropdown">
      <button id="theme-dropdown-btn" class="control-btn" title="切换主题">
        <i class="fas fa-palette"></i>
      </button>
      <div id="theme-options" class="dropdown-content hidden">
        <button data-theme="night" class="theme-btn"><i class="fas fa-moon mr-2"></i> 夜晚</button>
        <button data-theme="day" class="theme-btn"><i class="fas fa-sun mr-2"></i> 白天</button>
        <button data-theme="jade" class="theme-btn"><i class="fas fa-leaf mr-2"></i> 翠玉</button>
        <button data-theme="classic" class="theme-btn"><i class="fas fa-scroll mr-2"></i> 古典</button>
      </div>
    </div>

    <!-- 版本信息按钮 -->
    <button id="version-info-btn" class="control-btn" title="版本信息">
      <i class="fas fa-code-branch"></i>
    </button>
  </div>

  <div class="max-w-4xl mx-auto space-y-6">

    <!-- 整个状态栏容器 -->
    <div class="bg-main rounded-2xl border border-dim p-4 sm:p-6 shadow-2xl theme-transition">
      <div class="inner-box">
        <!-- 头部信息 -->
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 pb-4 border-b border-dim theme-transition">
          <h2 id="status-bar-title" class="text-2xl font-bold text-accent mb-2 sm:mb-0">
            加载中...
          </h2>
          <div class="text-sm text-secondary space-y-1 sm:space-y-0 sm:space-x-4 sm:flex theme-transition">
            <span class="flex items-center"><span class="emoji mr-2"></span><span id="time-display"></span></span>
            <span class="flex items-center"><span class="emoji mr-2"></span><span id="location-display"></span></span>
          </div>
        </div>

        <!-- 可折叠的状态总览区域 -->
        <details class="group" open>
          <summary class="font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center">
            <span class="flex items-center"><i class="fas fa-users mr-2"></i>状态总览</span>
            <i class="fas fa-chevron-down transition-transform duration-300 group-open:rotate-180"></i>
          </summary>
          <div id="characters-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 overflow-hidden transition-all duration-500 ease-in-out">
            <!-- JS动态填充角色卡片 -->
          </div>
        </details>

        <!-- 分隔线 -->
        <hr class="my-6 border-t border-dim theme-transition">

        <!-- 可折叠的庇护所区域 -->
        <details class="group">
          <summary class="font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center">
            <span class="flex items-center"><i class="fas fa-home mr-2"></i>庇护所</span>
            <i class="fas fa-chevron-down transition-transform duration-300 group-open:rotate-180"></i>
          </summary>
          <div id="shelter-container" class="mt-4 overflow-hidden transition-all duration-500 ease-in-out">
            <!-- JS动态填充庇护所信息 -->
          </div>
        </details>

        <!-- 分隔线 -->
        <hr class="my-6 border-t border-dim theme-transition">

        <!-- 可折叠的妖兽图鉴区域 -->
        <details class="group">
          <summary class="font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center">
            <span class="flex items-center"><i class="fas fa-paw mr-2"></i>妖兽图鉴</span>
            <i class="fas fa-chevron-down transition-transform duration-300 group-open:rotate-180"></i>
          </summary>
          <div id="bestiary-container" class="mt-4 overflow-hidden transition-all duration-500 ease-in-out">
            <!-- JS动态填充妖兽图鉴信息 -->
          </div>
        </details>

        <!-- 分隔线 -->
        <hr class="my-6 border-t border-dim theme-transition">

        <!-- 可折叠的植物图鉴区域 -->
        <details class="group">
          <summary class="font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center">
            <span class="flex items-center"><i class="fas fa-seedling mr-2"></i>植物图鉴</span>
            <i class="fas fa-chevron-down transition-transform duration-300 group-open:rotate-180"></i>
          </summary>
          <div id="herbology-container" class="mt-4 overflow-hidden transition-all duration-500 ease-in-out">
            <!-- JS动态填充植物图鉴信息 -->
          </div>
        </details>

        <!-- 分隔线 -->
        <hr class="my-6 border-t border-dim theme-transition">

        <!-- 可折叠的物品图鉴区域 -->
        <details class="group">
          <summary class="font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center">
            <span class="flex items-center"><i class="fas fa-box-open mr-2"></i>物品图鉴</span>
            <i class="fas fa-chevron-down transition-transform duration-300 group-open:rotate-180"></i>
          </summary>
          <div id="inventory-container" class="mt-4 overflow-hidden transition-all duration-500 ease-in-out">
            <!-- JS动态填充物品图鉴信息 -->
          </div>
        </details>

        <!-- 分隔线 -->
        <hr class="my-6 border-t border-dim theme-transition">

        <!-- 可折叠的系统区域 -->
        <details class="group">
          <summary class="font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center">
            <span class="flex items-center"><i class="fas fa-cogs mr-2"></i>系统</span>
            <i class="fas fa-chevron-down transition-transform duration-300 group-open:rotate-180"></i>
          </summary>
          <div id="system-container" class="mt-4 overflow-hidden transition-all duration-500 ease-in-out">
            <!-- JS动态填充系统信息 -->
          </div>
        </details>

        <!-- 分隔线 -->
        <hr class="my-6 border-t border-dim theme-transition">

        <!-- 行动选项 -->
        <div>
          <h3 class="font-bold text-lg mb-3 flex items-center">
            <i class="fas fa-tasks mr-2"></i><span id="action-owner" class="text-accent"><!-- JS填充 --></span><span>的行动选项</span>
          </h3>

          <ul id="options-list" class="space-y-3 cursor-pointer">
            <!-- JS动态填充选项列表 -->
          </ul>

          <!-- 自定义行动输入对话框 (将被JS移动) -->
          <div id="custom-action-modal" class="hidden">
            <div class="bg-main rounded-lg shadow-xl p-4 border border-dim">
              <h4 class="font-bold text-md mb-3 text-accent flex items-center"><i class="fas fa-pen-nib mr-2"></i>输入你的行动</h4>
              <textarea id="custom-action-input" class="w-full bg-secondary rounded border border-dim p-2 text-primary focus:ring-2 focus:ring-accent focus:outline-none theme-transition" rows="3" placeholder="你想做什么..."></textarea>
              <div class="flex justify-end space-x-3 mt-3">
                <button id="cancel-action-btn" class="px-4 py-2 rounded bg-gray-600 hover:bg-gray-700 transition-colors theme-transition text-sm">取消</button>
                <button id="confirm-action-btn" class="px-4 py-2 rounded bg-accent hover:bg-accent-hover transition-colors theme-transition text-white text-sm">确认行动</button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- 详情展示模态框 -->
  <div id="details-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <button id="modal-close-btn" class="modal-close-btn">&times;</button>
      <h3 id="modal-title" class="modal-title">详情</h3>
      <div id="modal-body" class="modal-body">
        <!-- JS动态填充内容 -->
      </div>
    </div>
  </div>

  <!-- 图鉴管理模态框 -->
  <div id="pokedex-manager-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <button id="pokedex-manager-close-btn" class="modal-close-btn">&times;</button>
      <h3 class="modal-title">
        <span>图鉴管理</span>
        <button id="pokedex-help-btn" class="help-btn" title="帮助">
          <i class="fas fa-question"></i>
        </button>
      </h3>
      <div class="modal-body">
        <!-- 帮助信息容器 -->
        <div id="pokedex-help-content" class="hidden p-3 mb-4 text-xs rounded-lg bg-secondary/50 text-secondary border border-dim">
          <p class="font-bold mb-2 text-primary/80">图鉴管理功能说明:</p>
          <ul class="list-disc list-inside space-y-1">
            <li><b>图鉴总览:</b> 查看、编辑或删除已收录的所有图鉴条目。勾选条目后，点击下方的“注入选中项”按钮，可以将这些信息添加到当前楼层的变量中，让AI在下一次回应时“知道”这些内容。</li>
            <li><b>添加条目:</b> 通过表单或JSON模式，手动向你的全局图鉴数据库中添加新的条目。</li>
            <li><b>待收录条目:</b> 这里会自动列出当前楼层新出现的、但尚未被收录到全局图鉴的条目，方便你一键收录。</li>
            <li><b>远程同步:</b> 与社区服务器进行数据交换，可以分享你独有的条目，也可以从社区获取他人分享的内容来丰富你的图鉴。</li>
          </ul>
        </div>
        <!-- 主功能切换Tabs -->
        <div class="flex border-b border-dim mb-4">
          <button data-tab="view" class="main-tab-btn active">图鉴总览</button>
          <button data-tab="add" class="main-tab-btn">添加条目</button>
        </div>

        <!-- 查看 & 注入 Tab -->
        <div id="pokedex-view-tab" class="main-tab-content">
          <!-- New Discoveries Section -->
          <div id="new-discoveries-section" class="mb-4">
            <h4 class="font-bold text-lg mb-2 text-accent flex justify-between items-center">
              <span><i class="fas fa-lightbulb mr-2"></i>待收录条目</span>
              <button id="approve-discoveries-btn" class="btn-secondary text-xs py-1 px-2">
                <i class="fas fa-check-double mr-1"></i>一键收录选中项
              </button>
            </h4>
            <div id="new-discoveries-list" class="max-h-40 overflow-y-auto pr-2 border border-dim rounded-lg p-2 bg-secondary/30">
              <p class="text-center text-secondary p-4 text-sm">正在检查新发现...</p>
            </div>
          </div>
          <hr class="my-4 border-t border-dim theme-transition">
          <!-- 
            JS动态生成条目示例:
            <li class="p-2 rounded-lg bg-secondary/50 flex justify-between items-center">
              <label class="flex items-center cursor-pointer flex-grow mr-4">
                <input type="checkbox" class="mr-3" data-type="妖兽" data-name="示例妖兽">
                <span class="truncate" title="示例妖兽">示例妖兽</span>
              </label>
              <div class="space-x-2 flex-shrink-0">
                <button class="pokedex-edit-btn text-sm text-accent hover:text-accent-hover" data-type="妖兽" data-name="示例妖兽" title="编辑"><i class="fas fa-pencil-alt"></i></button>
                <button class="pokedex-delete-btn text-sm text-red-500 hover:text-red-400" data-type="妖兽" data-name="示例妖兽" title="删除"><i class="fas fa-trash"></i></button>
              </div>
            </li> 
          -->
          <div id="existing-pokedex-list">
            <p class="text-center text-secondary p-4">正在加载图鉴...</p>
          </div>
          <hr class="my-4 border-t border-dim theme-transition">
          <div id="achievements-pokedex-list">
            <!-- JS将在此处填充成就的 <details> 块 -->
          </div>
        </div>

        <!-- 添加新条目 Tab -->
        <div id="pokedex-add-tab" class="main-tab-content hidden">
          <!-- 模式切换Tabs -->
          <div class="flex border-b border-dim mb-4">
            <button data-mode="form" class="tab-btn active">表单模式</button>
            <button data-mode="json" class="tab-btn">JSON模式</button>
          </div>

          <!-- 表单模式内容 -->
          <div id="form-mode-content" class="tab-content">
            <div class="mb-4">
              <label class="block mb-2 text-sm font-medium">图鉴类型:</label>
              <div class="flex space-x-4">
                <label class="flex items-center">
                  <input type="radio" name="entryType" value="妖兽" class="mr-2" checked> 妖兽
                </label>
                <label class="flex items-center">
                  <input type="radio" name="entryType" value="植物" class="mr-2"> 植物
                </label>
                <label class="flex items-center">
                  <input type="radio" name="entryType" value="物品" class="mr-2"> 物品
                </label>
                <label class="flex items-center">
                  <input type="radio" name="entryType" value="成就" class="mr-2"> 成就
                </label>
              </div>
            </div>
            <div id="form-fields-container" class="space-y-3 max-h-60 overflow-y-auto pr-2">
              <!-- JS will populate this with key-value input fields -->
            </div>
            <div class="mt-3">
              <button id="add-field-btn" class="text-sm text-accent hover:text-accent-hover transition-colors p-1 rounded hover:bg-secondary">
                <i class="fas fa-plus mr-1"></i>添加字段
              </button>
            </div>
          </div>

          <!-- JSON模式内容 -->
          <div id="json-mode-content" class="tab-content hidden">
            <div class="mb-4">
              <label class="block mb-2 text-sm font-medium">图鉴类型 (将应用于所有条目):</label>
              <div class="flex space-x-4">
                <label class="flex items-center">
                  <input type="radio" name="jsonEntryType" value="妖兽" class="mr-2" checked> 妖兽
                </label>
                <label class="flex items-center">
                  <input type="radio" name="jsonEntryType" value="植物" class="mr-2"> 植物
                </label>
                <label class="flex items-center">
                  <input type="radio" name="jsonEntryType" value="物品" class="mr-2"> 物品
                </label>
                <label class="flex items-center">
                  <input type="radio" name="jsonEntryType" value="成就" class="mr-2"> 成就
                </label>
              </div>
            </div>
            <div>
              <label for="json-input" class="block mb-2 text-sm font-medium">JSON数据:</label>
              <textarea id="json-input" class="w-full bg-secondary rounded border border-dim p-2 text-primary focus:ring-2 focus:ring-accent focus:outline-none theme-transition font-mono" rows="8" placeholder='[&#10;  { "名称": "xxx", "等级": "xxx" },&#10;  { "名称": "yyy", "习性": "yyy" }&#10;]'></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="flex justify-end mt-4 pt-4 border-t border-dim">
        <button id="remote-sync-btn" class="btn-secondary mr-auto">
          <i class="fas fa-cloud-upload-alt mr-2"></i>远程同步
        </button>
        <button id="inject-pokedex-btn" class="btn-primary">
          <i class="fas fa-sign-in-alt mr-2"></i>注入选中项
        </button>
        <!-- 
          “确认添加” / “确认更新”按钮。
          该按钮在“添加新条目”标签页下显示。
          JS会根据是新建条目还是编辑条目，动态修改其文本。
        -->
        <button id="submit-entry-btn" class="btn-primary hidden">
          <i class="fas fa-plus mr-2"></i>确认添加
        </button>
      </div>
    </div>
  </div>

  <!-- 远程同步模态框 -->
  <div id="remote-sync-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <button id="remote-sync-close-btn" class="modal-close-btn">&times;</button>
      <h3 class="modal-title">远程同步</h3>
      <div class="modal-body">
        <div class="p-2 mb-4 text-xs text-center rounded-lg bg-secondary/50 text-secondary">
          <i class="fas fa-info-circle mr-1"></i>
          分享功能旨在共建一个丰富的图鉴数据库。请确保您分享的内容准确、无害。
        </div>
        <!-- Tabs for Submit/Fetch -->
        <div class="flex border-b border-dim mb-4">
          <button data-tab="submit" class="main-tab-btn active">分享至社区</button>
          <button data-tab="fetch" class="main-tab-btn">从社区获取</button>
        </div>

        <!-- Submit Tab -->
        <div id="remote-submit-tab" class="main-tab-content">
          <p class="text-sm text-secondary mb-2">以下是您本地独有、尚未分享的条目。请选择要分享到社区的内容：</p>
          <div class="mb-2">
            <label for="provider-name-input" class="block mb-1 text-xs font-medium text-secondary">贡献者署名 (可选):</label>
            <input type="text" id="provider-name-input" class="w-full bg-secondary rounded border border-dim p-1.5 text-sm text-primary focus:ring-2 focus:ring-accent focus:outline-none theme-transition" placeholder="留下你的大名">
          </div>
          <div id="local-diff-list" class="max-h-60 overflow-y-auto pr-2 border border-dim rounded-lg p-2 bg-secondary/30">
            <p class="text-center text-secondary p-4">正在计算差异...</p>
          </div>
        </div>

        <!-- Fetch Tab -->
        <div id="remote-fetch-tab" class="main-tab-content hidden">
          <p class="text-sm text-secondary mb-2">以下是社区拥有、但您本地没有的条目。请选择要获取的内容：</p>
          <div id="remote-diff-list" class="max-h-60 overflow-y-auto pr-2 border border-dim rounded-lg p-2 bg-secondary/30">
            <p class="text-center text-secondary p-4">请先点击下方按钮从社区获取列表。</p>
          </div>
        </div>
      </div>
      <div class="flex justify-between items-center mt-4 pt-4 border-t border-dim">
        <!-- This button will be shown/hidden by JS -->
        <button id="fetch-from-remote-btn" class="btn-secondary hidden">
          <i class="fas fa-cloud-download-alt mr-2"></i>获取社区列表
        </button>
        
        <!-- These containers will be toggled by JS -->
        <div id="submit-to-remote-controls">
          <button id="submit-to-remote-btn" class="btn-primary">
            <i class="fas fa-paper-plane mr-2"></i>分享选中项
          </button>
        </div>
        <div id="import-from-remote-controls" class="hidden">
          <button id="import-from-remote-btn" class="btn-primary">
            <i class="fas fa-download mr-2"></i>导入选中项
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 成就奖励模态框 -->
  <div id="rewards-modal" class="modal-overlay hidden">
    <div class="modal-content">
      <button id="rewards-modal-close-btn" class="modal-close-btn">&times;</button>
      <div class="flex justify-between items-center mb-4 pb-2 border-b border-dim">
        <h3 class="modal-title" style="border-bottom: none; margin-bottom: 0;">兑换奖励</h3>
        <button id="refresh-rewards-btn" class="text-sm text-accent hover:text-accent-hover transition-colors p-1 rounded hover:bg-secondary" title="刷新奖励列表">
          <i class="fas fa-sync-alt"></i> 刷新
        </button>
      </div>
      <div id="rewards-modal-body" class="modal-body">
        <!-- JS动态填充奖励内容 -->
      </div>
      <p class="text-xs text-secondary mt-4 text-center">每日仅可刷新一次，请谨慎选择。</p>
    </div>
  </div>

<script>var __webpack_modules__ = {
  "./src/update-script.ts": 
  /*!******************************!*\
  !*** ./src/update-script.ts ***!
  \******************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   processFileUpdate: () => (/* binding */ processFileUpdate)\n/* harmony export */ });\n/* harmony import */ var toastr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! toastr */ \"toastr\");\n/* harmony import */ var toastr__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/**\n * 处理从远程（如GitHub）获取的文件更新。\n * 根据文件路径判断文件类型，并调用相应的更新函数。\n *\n * @param filePath 文件的来源路径 (例如, 'src/folder/regex-name.json')。\n * @param fileContent 文件的字符串内容。\n */\nasync function processFileUpdate(filePath, fileContent) {\n    try {\n        // 根据文件名判断是正则文件还是世界书文件\n        if (filePath.includes('regex-')) {\n            await updateRegex(filePath, fileContent);\n        }\n        else if (filePath.endsWith('什么？我要在玄幻修仙世界种田？.json')) {\n            await updateWorldbook(filePath, fileContent);\n        }\n        else {\n            console.warn(`跳过不支持的自动更新文件类型: ${filePath}`);\n        }\n    }\n    catch (error) {\n        console.error(`处理文件更新失败 ${filePath}:`, error);\n        toastr__WEBPACK_IMPORTED_MODULE_0___default().error(`处理文件更新失败: ${filePath}. 错误: ${error.message}`);\n    }\n}\n/**\n * 更新酒馆的正则表达式脚本。\n * 使用 `updateTavernRegexesWith` 函数来确保安全和正确的更新。\n *\n * @param filePath 正则表达式JSON文件的路径。\n * @param fileContent 正则表达式JSON文件的内容。\n */\nasync function updateRegex(filePath, fileContent) {\n    console.log(`尝试从 ${filePath} 更新正则表达式`);\n    const newRegexData = JSON.parse(fileContent);\n    if (!newRegexData.scriptName) {\n        throw new Error(`正则表达式文件 ${filePath} 缺少 'scriptName' 字段。`);\n    }\n    await updateTavernRegexesWith((existingRegexes) => {\n        const entryIndex = existingRegexes.findIndex((regex) => regex.script_name === newRegexData.scriptName);\n        if (entryIndex !== -1) {\n            // 如果找到了同名正则，则更新它\n            // 注意：我们需要将新数据中的字段映射到酒馆正则的字段\n            existingRegexes[entryIndex] = {\n                ...existingRegexes[entryIndex], // 保留原有ID等信息\n                find_regex: newRegexData.findRegex,\n                replace_string: newRegexData.replaceString,\n                enabled: !newRegexData.disabled, // JSON中的disabled与酒馆中的enabled相反\n                // 其他字段可以根据需要从 newRegexData 中添加\n            };\n            console.log(`找到并更新了正则表达式: ${newRegexData.scriptName}`);\n        }\n        else {\n            // 如果没有找到，则添加为新的正则表达式\n            // 注意：这里需要构建一个完整的 TavernRegex 对象\n            const newTavernRegex = {\n                id: lodash__WEBPACK_IMPORTED_MODULE_1___default().uniqueId('tavern-regex-'), // 创建一个唯一的ID\n                script_name: newRegexData.scriptName,\n                enabled: !newRegexData.disabled,\n                run_on_edit: newRegexData.runOnEdit || false,\n                scope: \"character\", // 默认为角色正则\n                find_regex: newRegexData.findRegex,\n                replace_string: newRegexData.replaceString,\n                source: {\n                    user_input: true,\n                    ai_output: true,\n                    slash_command: true,\n                    world_info: true,\n                },\n                destination: {\n                    display: true,\n                    prompt: true,\n                },\n                min_depth: newRegexData.minDepth || null,\n                max_depth: newRegexData.maxDepth || null,\n            };\n            existingRegexes.push(newTavernRegex);\n            console.log(`添加了新的正则表达式: ${newRegexData.scriptName}`);\n        }\n        return existingRegexes;\n    });\n    toastr__WEBPACK_IMPORTED_MODULE_0___default().success(`正则表达式 '${newRegexData.scriptName}' 已更新。`);\n    console.log(`成功更新正则表达式: ${newRegexData.scriptName}`);\n}\n/**\n * 从JSON文件更新世界书。\n * 使用酒馆助手提供的 `replaceWorldbook` 函数。\n *\n * @param filePath 世界书JSON文件的路径。\n * @param fileContent 世界书JSON文件的内容。\n */\nasync function updateWorldbook(filePath, fileContent) {\n    console.log(`尝试从 ${filePath} 更新世界书`);\n    // 从文件路径中提取世界书的名称\n    const bookName = filePath.split(/[\\\\/]/).pop()?.replace('.json', '');\n    if (!bookName) {\n        throw new Error(`无法从路径中确定世界书名称: ${filePath}`);\n    }\n    const worldbookFile = JSON.parse(fileContent);\n    if (!worldbookFile.entries || typeof worldbookFile.entries !== 'object') {\n        throw new Error(`无效的世界书格式 ${filePath}. 缺少或无效的 'entries' 属性。`);\n    }\n    // 将 entries 对象转换为数组，以适配酒馆助手函数的要求\n    const entriesArray = Object.values(worldbookFile.entries);\n    await replaceWorldbook(bookName, entriesArray);\n    toastr__WEBPACK_IMPORTED_MODULE_0___default().success(`世界书 '${bookName}' 已更新。`);\n    console.log(`成功更新世界书: ${bookName}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUSxFQUFFLENBQUM7UUFDdEUsTUFBTSxJQUFJLEtBQUssQ0FBQyxZQUFZLFFBQVEsd0JBQXdCLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRUQsaUNBQWlDO0lBQ2pDLE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRTFELE1BQU0sZ0JBQWdCLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBRS9DLHFEQUFjLENBQUMsUUFBUSxRQUFRLFFBQVEsQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ3hDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL3VwZGF0ZS1zY3JpcHQudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0b2FzdHIgZnJvbSAndG9hc3RyJztcclxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcclxuXHJcbi8vIOagueaNrueUqOaIt+ivtOaYju+8jOaIkeS7rOWBh+Wumui/meS6m+S4jumFkummhuWKqeaJi+S6pOS6kueahOWHveaVsOaYr+WFqOWxgOWPr+eUqOeahFxyXG5kZWNsYXJlIGZ1bmN0aW9uIHVwZGF0ZVRhdmVyblJlZ2V4ZXNXaXRoKHVwZGF0ZXI6IChyZWdleGVzOiBhbnlbXSkgPT4gYW55W10pOiBQcm9taXNlPGFueVtdPjtcclxuZGVjbGFyZSBmdW5jdGlvbiByZXBsYWNlV29ybGRib29rKG5hbWU6IHN0cmluZywgZW50cmllczogYW55W10pOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuLyoqXHJcbiAqIOWumuS5ieS4lueVjOS5puaWh+S7tueahOaVsOaNrue7k+aehOexu+Wei1xyXG4gKi9cclxuaW50ZXJmYWNlIFdvcmxkYm9va0ZpbGUge1xyXG4gICAgZW50cmllczoge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlpITnkIbku47ov5znqIvvvIjlpoJHaXRIdWLvvInojrflj5bnmoTmlofku7bmm7TmlrDjgIJcclxuICog5qC55o2u5paH5Lu26Lev5b6E5Yik5pat5paH5Lu257G75Z6L77yM5bm26LCD55So55u45bqU55qE5pu05paw5Ye95pWw44CCXHJcbiAqXHJcbiAqIEBwYXJhbSBmaWxlUGF0aCDmlofku7bnmoTmnaXmupDot6/lvoQgKOS+i+WmgiwgJ3NyYy9mb2xkZXIvcmVnZXgtbmFtZS5qc29uJynjgIJcclxuICogQHBhcmFtIGZpbGVDb250ZW50IOaWh+S7tueahOWtl+espuS4suWGheWuueOAglxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NGaWxlVXBkYXRlKGZpbGVQYXRoOiBzdHJpbmcsIGZpbGVDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8g5qC55o2u5paH5Lu25ZCN5Yik5pat5piv5q2j5YiZ5paH5Lu26L+Y5piv5LiW55WM5Lmm5paH5Lu2XHJcbiAgICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCdyZWdleC0nKSkge1xyXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVSZWdleChmaWxlUGF0aCwgZmlsZUNvbnRlbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZVBhdGguZW5kc1dpdGgoJ+S7gOS5iO+8n+aIkeimgeWcqOeOhOW5u+S/ruS7meS4lueVjOenjeeUsO+8ny5qc29uJykpIHtcclxuICAgICAgICAgICAgYXdhaXQgdXBkYXRlV29ybGRib29rKGZpbGVQYXRoLCBmaWxlQ29udGVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGDot7Pov4fkuI3mlK/mjIHnmoToh6rliqjmm7TmlrDmlofku7bnsbvlnos6ICR7ZmlsZVBhdGh9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOWkhOeQhuaWh+S7tuabtOaWsOWksei0pSAke2ZpbGVQYXRofTpgLCBlcnJvcik7XHJcbiAgICAgICAgdG9hc3RyLmVycm9yKGDlpITnkIbmlofku7bmm7TmlrDlpLHotKU6ICR7ZmlsZVBhdGh9LiDplJnor686ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOabtOaWsOmFkummhueahOato+WImeihqOi+vuW8j+iEmuacrOOAglxyXG4gKiDkvb/nlKggYHVwZGF0ZVRhdmVyblJlZ2V4ZXNXaXRoYCDlh73mlbDmnaXnoa7kv53lronlhajlkozmraPnoa7nmoTmm7TmlrDjgIJcclxuICpcclxuICogQHBhcmFtIGZpbGVQYXRoIOato+WImeihqOi+vuW8j0pTT07mlofku7bnmoTot6/lvoTjgIJcclxuICogQHBhcmFtIGZpbGVDb250ZW50IOato+WImeihqOi+vuW8j0pTT07mlofku7bnmoTlhoXlrrnjgIJcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVJlZ2V4KGZpbGVQYXRoOiBzdHJpbmcsIGZpbGVDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKGDlsJ3or5Xku44gJHtmaWxlUGF0aH0g5pu05paw5q2j5YiZ6KGo6L6+5byPYCk7XHJcbiAgICBjb25zdCBuZXdSZWdleERhdGEgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcclxuXHJcbiAgICBpZiAoIW5ld1JlZ2V4RGF0YS5zY3JpcHROYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDmraPliJnooajovr7lvI/mlofku7YgJHtmaWxlUGF0aH0g57y65bCRICdzY3JpcHROYW1lJyDlrZfmrrXjgIJgKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB1cGRhdGVUYXZlcm5SZWdleGVzV2l0aCgoZXhpc3RpbmdSZWdleGVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW50cnlJbmRleCA9IGV4aXN0aW5nUmVnZXhlcy5maW5kSW5kZXgoXHJcbiAgICAgICAgICAgIChyZWdleCkgPT4gcmVnZXguc2NyaXB0X25hbWUgPT09IG5ld1JlZ2V4RGF0YS5zY3JpcHROYW1lXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKGVudHJ5SW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaJvuWIsOS6huWQjOWQjeato+WIme+8jOWImeabtOaWsOWug1xyXG4gICAgICAgICAgICAvLyDms6jmhI/vvJrmiJHku6zpnIDopoHlsIbmlrDmlbDmja7kuK3nmoTlrZfmrrXmmKDlsITliLDphZLppobmraPliJnnmoTlrZfmrrVcclxuICAgICAgICAgICAgZXhpc3RpbmdSZWdleGVzW2VudHJ5SW5kZXhdID0ge1xyXG4gICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdSZWdleGVzW2VudHJ5SW5kZXhdLCAvLyDkv53nlZnljp/mnIlJROetieS/oeaBr1xyXG4gICAgICAgICAgICAgICAgZmluZF9yZWdleDogbmV3UmVnZXhEYXRhLmZpbmRSZWdleCxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2Vfc3RyaW5nOiBuZXdSZWdleERhdGEucmVwbGFjZVN0cmluZyxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6ICFuZXdSZWdleERhdGEuZGlzYWJsZWQsIC8vIEpTT07kuK3nmoRkaXNhYmxlZOS4jumFkummhuS4reeahGVuYWJsZWTnm7jlj41cclxuICAgICAgICAgICAgICAgIC8vIOWFtuS7luWtl+auteWPr+S7peagueaNrumcgOimgeS7jiBuZXdSZWdleERhdGEg5Lit5re75YqgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmib7liLDlubbmm7TmlrDkuobmraPliJnooajovr7lvI86ICR7bmV3UmVnZXhEYXRhLnNjcmlwdE5hbWV9YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5om+5Yiw77yM5YiZ5re75Yqg5Li65paw55qE5q2j5YiZ6KGo6L6+5byPXHJcbiAgICAgICAgICAgIC8vIOazqOaEj++8mui/memHjOmcgOimgeaehOW7uuS4gOS4quWujOaVtOeahCBUYXZlcm5SZWdleCDlr7nosaFcclxuICAgICAgICAgICAgY29uc3QgbmV3VGF2ZXJuUmVnZXggPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogXy51bmlxdWVJZCgndGF2ZXJuLXJlZ2V4LScpLCAvLyDliJvlu7rkuIDkuKrllK/kuIDnmoRJRFxyXG4gICAgICAgICAgICAgICAgc2NyaXB0X25hbWU6IG5ld1JlZ2V4RGF0YS5zY3JpcHROYW1lLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogIW5ld1JlZ2V4RGF0YS5kaXNhYmxlZCxcclxuICAgICAgICAgICAgICAgIHJ1bl9vbl9lZGl0OiBuZXdSZWdleERhdGEucnVuT25FZGl0IHx8IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IFwiY2hhcmFjdGVyXCIsIC8vIOm7mOiupOS4uuinkuiJsuato+WImVxyXG4gICAgICAgICAgICAgICAgZmluZF9yZWdleDogbmV3UmVnZXhEYXRhLmZpbmRSZWdleCxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2Vfc3RyaW5nOiBuZXdSZWdleERhdGEucmVwbGFjZVN0cmluZyxcclxuICAgICAgICAgICAgICAgIHNvdXJjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfaW5wdXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYWlfb3V0cHV0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsYXNoX2NvbW1hbmQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ybGRfaW5mbzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1pbl9kZXB0aDogbmV3UmVnZXhEYXRhLm1pbkRlcHRoIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYXhfZGVwdGg6IG5ld1JlZ2V4RGF0YS5tYXhEZXB0aCB8fCBudWxsLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBleGlzdGluZ1JlZ2V4ZXMucHVzaChuZXdUYXZlcm5SZWdleCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmt7vliqDkuobmlrDnmoTmraPliJnooajovr7lvI86ICR7bmV3UmVnZXhEYXRhLnNjcmlwdE5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBleGlzdGluZ1JlZ2V4ZXM7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdG9hc3RyLnN1Y2Nlc3MoYOato+WImeihqOi+vuW8jyAnJHtuZXdSZWdleERhdGEuc2NyaXB0TmFtZX0nIOW3suabtOaWsOOAgmApO1xyXG4gICAgY29uc29sZS5sb2coYOaIkOWKn+abtOaWsOato+WImeihqOi+vuW8jzogJHtuZXdSZWdleERhdGEuc2NyaXB0TmFtZX1gKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOS7jkpTT07mlofku7bmm7TmlrDkuJbnlYzkuabjgIJcclxuICog5L2/55So6YWS6aaG5Yqp5omL5o+Q5L6b55qEIGByZXBsYWNlV29ybGRib29rYCDlh73mlbDjgIJcclxuICpcclxuICogQHBhcmFtIGZpbGVQYXRoIOS4lueVjOS5pkpTT07mlofku7bnmoTot6/lvoTjgIJcclxuICogQHBhcmFtIGZpbGVDb250ZW50IOS4lueVjOS5pkpTT07mlofku7bnmoTlhoXlrrnjgIJcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdvcmxkYm9vayhmaWxlUGF0aDogc3RyaW5nLCBmaWxlQ29udGVudDpzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKGDlsJ3or5Xku44gJHtmaWxlUGF0aH0g5pu05paw5LiW55WM5LmmYCk7XHJcbiAgICAvLyDku47mlofku7bot6/lvoTkuK3mj5Dlj5bkuJbnlYzkuabnmoTlkI3np7BcclxuICAgIGNvbnN0IGJvb2tOYW1lID0gZmlsZVBhdGguc3BsaXQoL1tcXFxcL10vKS5wb3AoKT8ucmVwbGFjZSgnLmpzb24nLCAnJyk7XHJcblxyXG4gICAgaWYgKCFib29rTmFtZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg5peg5rOV5LuO6Lev5b6E5Lit56Gu5a6a5LiW55WM5Lmm5ZCN56ewOiAke2ZpbGVQYXRofWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHdvcmxkYm9va0ZpbGU6IFdvcmxkYm9va0ZpbGUgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcclxuXHJcbiAgICBpZiAoIXdvcmxkYm9va0ZpbGUuZW50cmllcyB8fCB0eXBlb2Ygd29ybGRib29rRmlsZS5lbnRyaWVzICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg5peg5pWI55qE5LiW55WM5Lmm5qC85byPICR7ZmlsZVBhdGh9LiDnvLrlsJHmiJbml6DmlYjnmoQgJ2VudHJpZXMnIOWxnuaAp+OAgmApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWwhiBlbnRyaWVzIOWvueixoei9rOaNouS4uuaVsOe7hO+8jOS7pemAgumFjemFkummhuWKqeaJi+WHveaVsOeahOimgeaxglxyXG4gICAgY29uc3QgZW50cmllc0FycmF5ID0gT2JqZWN0LnZhbHVlcyh3b3JsZGJvb2tGaWxlLmVudHJpZXMpO1xyXG5cclxuICAgIGF3YWl0IHJlcGxhY2VXb3JsZGJvb2soYm9va05hbWUsIGVudHJpZXNBcnJheSk7XHJcblxyXG4gICAgdG9hc3RyLnN1Y2Nlc3MoYOS4lueVjOS5piAnJHtib29rTmFtZX0nIOW3suabtOaWsOOAgmApO1xyXG4gICAgY29uc29sZS5sb2coYOaIkOWKn+abtOaWsOS4lueVjOS5pjogJHtib29rTmFtZX1gKTtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/update-script.ts\n\n}");
  },
  "./src/什么我要在玄幻修仙世界种田/index.scss": 
  /*!**************************************!*\
  !*** ./src/什么我要在玄幻修仙世界种田/index.scss ***!
  \**************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL2luZGV4LnNjc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/ku4DkuYjmiJHopoHlnKjnjoTlubvkv67ku5nkuJbnlYznp43nlLAvaW5kZXguc2Nzcz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/index.scss\n\n}");
  },
  "./src/什么我要在玄幻修仙世界种田/index.ts": 
  /*!************************************!*\
  !*** ./src/什么我要在玄幻修仙世界种田/index.ts ***!
  \************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.scss */ \"./src/什么我要在玄幻修仙世界种田/index.scss\");\n/* harmony import */ var _parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parser */ \"./src/什么我要在玄幻修仙世界种田/parser.ts\");\n/* harmony import */ var _pokedex__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pokedex */ \"./src/什么我要在玄幻修仙世界种田/pokedex.ts\");\n/* harmony import */ var _systems__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./systems */ \"./src/什么我要在玄幻修仙世界种田/systems.ts\");\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./version */ \"./src/什么我要在玄幻修仙世界种田/version.ts\");\n\n\n\n\n\nconst triggerAction = async (text, index) => {\n    if (!text || text.trim().length === 0)\n        return;\n    try {\n        // 获取当前楼层的变量\n        const messageId = getCurrentMessageId();\n        const variables = getVariables({ type: 'message', message_id: messageId });\n        // 将行动选择也添加到变量中\n        variables['行动选择'] = index + 1;\n        // 将变量转换为字符串\n        const variablesString = JSON.stringify(variables, null, 2);\n        // 准备发送给AI的引导文本\n        const preamble = `[OOC: 以下是发送给你的、用于驱动剧情的完整游戏状态。请仔细阅读并依据此状态和我选择的行动来生成后续情节。]\\n\\n**当前游戏状态**:\\n这是当前楼层的所有变量信息，它代表了游戏世界的完整快照，包括角色状态、物品、图鉴、系统进度等。请将这些信息作为你生成回应的唯一真实来源。`;\n        // 将引导文本和变量JSON都包裹起来\n        const wrappedContent = `<variables>\\n${preamble}\\n\\n${variablesString}\\n</variables>`;\n        // 准备最终要发送的消息\n        const messageToSend = `${wrappedContent}\\n\\n${text}`;\n        // 使用 /send 命令发送消息\n        const command = `/send ${messageToSend} | /trigger`;\n        await triggerSlash(command);\n        toastr.success(`已选择行动: ${text}`);\n    }\n    catch (error) {\n        console.error(\"行动失败:\", error);\n        toastr.error(\"行动失败，请查看控制台日志。\");\n        // 如果失败，需要恢复选项列表\n        const optionsList = $('#options-list');\n        if (optionsList.hasClass('disabled')) {\n            // 这里需要一个函数来重新渲染选项，暂时先移除disabled状态\n            // 实际应用中可能需要调用 storyRenderer.renderActionOptions()\n            optionsList.removeClass('disabled');\n        }\n    }\n};\nfunction initGlobalControls() {\n    const bodyElement = document.body;\n    const themeDropdownBtn = document.getElementById('theme-dropdown-btn');\n    const themeOptions = document.getElementById('theme-options');\n    const themeButtons = document.querySelectorAll('#theme-options .theme-btn');\n    const savedTheme = localStorage.getItem('storyTheme') || 'night';\n    const switchToTheme = (theme) => {\n        bodyElement.classList.remove('day-mode', 'jade-mode', 'classic-mode');\n        if (theme !== 'night') {\n            bodyElement.classList.add(`${theme}-mode`);\n        }\n        localStorage.setItem('storyTheme', theme);\n    };\n    switchToTheme(savedTheme);\n    themeDropdownBtn?.addEventListener('click', (e) => {\n        e.stopPropagation();\n        themeOptions?.classList.toggle('hidden');\n    });\n    themeButtons.forEach(button => {\n        button.addEventListener('click', () => {\n            const theme = button.getAttribute('data-theme');\n            if (theme)\n                switchToTheme(theme);\n            themeOptions?.classList.add('hidden');\n        });\n    });\n    document.addEventListener('click', (e) => {\n        const dropdownContainer = document.querySelector('.theme-switcher-dropdown');\n        if (dropdownContainer && !dropdownContainer.contains(e.target)) {\n            themeOptions?.classList.add('hidden');\n        }\n    });\n}\nfunction initPokedexManager(storyRenderer, showModalWithData) {\n    const managerBtn = document.getElementById('manage-pokedex-btn');\n    const modal = document.getElementById('pokedex-manager-modal');\n    const closeModalBtn = document.getElementById('pokedex-manager-close-btn');\n    const mainTabs = modal?.querySelectorAll('.main-tab-btn');\n    const viewTabContent = document.getElementById('pokedex-view-tab');\n    const addTabContent = document.getElementById('pokedex-add-tab');\n    const injectBtn = document.getElementById('inject-pokedex-btn');\n    const submitEntryBtn = document.getElementById('submit-entry-btn');\n    const helpBtn = document.getElementById('pokedex-help-btn');\n    const helpContent = document.getElementById('pokedex-help-content');\n    const formModeContent = document.getElementById('form-mode-content');\n    const jsonModeContent = document.getElementById('json-mode-content');\n    const addTabModeButtons = addTabContent?.querySelectorAll('.tab-btn');\n    let currentAddMode = 'form';\n    const formFieldsContainer = document.getElementById('form-fields-container');\n    const addFieldBtn = document.getElementById('add-field-btn');\n    const entryTypeRadios = document.querySelectorAll('input[name=\"entryType\"]');\n    const jsonInput = document.getElementById('json-input');\n    const createFormFieldRow = (key = '', value = '') => {\n        const row = document.createElement('div');\n        row.className = 'form-field-row';\n        row.innerHTML = `\n      <input type=\"text\" class=\"form-key-input\" placeholder=\"属性\" value=\"${key}\">\n      <input type=\"text\" class=\"form-value-input\" placeholder=\"值\" value=\"${value}\">\n      <button class=\"remove-field-btn\" title=\"移除此字段\"><i class=\"fas fa-times\"></i></button>\n    `;\n        row.querySelector('.remove-field-btn')?.addEventListener('click', () => row.remove());\n        return row;\n    };\n    const addField = (key = '', value = '') => {\n        formFieldsContainer?.appendChild(createFormFieldRow(key, value));\n    };\n    const updateFormFields = (type) => {\n        if (!formFieldsContainer)\n            return;\n        formFieldsContainer.innerHTML = '';\n        switch (type) {\n            case '妖兽':\n                addField('名称', '');\n                addField('等级', '');\n                addField('习性', '');\n                break;\n            case '植物':\n                addField('名称', '');\n                addField('品阶', '');\n                addField('功效', '');\n                break;\n            case '物品':\n                addField('名称', '');\n                addField('品阶', '');\n                addField('描述', '');\n                break;\n            case '成就':\n                addField('名称', '');\n                addField('描述', '');\n                addField('日期', '');\n                addField('点数', '0');\n                break;\n            default:\n                addField('名称', '');\n                break;\n        }\n    };\n    const resetAddForm = () => {\n        if (!submitEntryBtn)\n            return;\n        submitEntryBtn.innerHTML = '<i class=\"fas fa-plus mr-2\"></i>确认添加';\n        delete submitEntryBtn.dataset.updateMode;\n        delete submitEntryBtn.dataset.originalName;\n        delete submitEntryBtn.dataset.originalType;\n        const checkedRadio = document.querySelector('input[name=\"entryType\"]:checked');\n        if (checkedRadio)\n            updateFormFields(checkedRadio.value);\n    };\n    const populateViewTab = async () => {\n        if (!viewTabContent)\n            return;\n        const discoveriesSection = document.getElementById('new-discoveries-section');\n        const discoveriesList = document.getElementById('new-discoveries-list');\n        // 1. Populate New Discoveries\n        if (discoveriesList && discoveriesSection) {\n            discoveriesList.innerHTML = `<p class=\"text-center text-secondary p-4 text-sm\">正在检查新发现...</p>`;\n            const messageId = getCurrentMessageId();\n            const messageVars = getVariables({ type: 'message', message_id: messageId });\n            const messagePokedex = _.get(messageVars, '世界.图鉴', {});\n            const globalPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\n            let diffHtml = '';\n            let diffCount = 0;\n            const types = ['妖兽', '植物', '物品'];\n            types.forEach(type => {\n                const messageEntries = messagePokedex[type] || [];\n                const globalNames = new Set(globalPokedex[type].map(e => e.名称));\n                const diffEntries = messageEntries.filter((e) => e.名称 && !globalNames.has(e.名称));\n                if (diffEntries.length > 0) {\n                    diffCount += diffEntries.length;\n                    diffHtml += `<h4 class=\"font-semibold text-primary/90 mt-2 first:mt-0\">${type}</h4><ul>`;\n                    diffEntries.forEach((entry) => {\n                        diffHtml += `<li class=\"p-2 rounded-lg bg-main/50\"><label class=\"flex items-center cursor-pointer\"><input type=\"checkbox\" class=\"mr-3\" data-type=\"${type}\" data-name=\"${entry.名称}\" checked><span>${entry.名称}</span></label></li>`;\n                    });\n                    diffHtml += `</ul>`;\n                }\n            });\n            if (diffCount === 0) {\n                discoveriesSection.style.display = 'none';\n            }\n            else {\n                discoveriesSection.style.display = 'block';\n                discoveriesList.innerHTML = diffHtml;\n            }\n        }\n        // 2. Populate Existing Pokedex\n        const existingPokedexContainer = document.getElementById('existing-pokedex-list');\n        if (!existingPokedexContainer)\n            return;\n        existingPokedexContainer.innerHTML = `<div class=\"flex justify-center items-center p-4\"><div class=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-400\"></div></div>`;\n        const pokedexData = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\n        let html = '';\n        const types = ['妖兽', '植物', '物品'];\n        types.forEach(type => {\n            const entries = pokedexData[type];\n            html += `<details class=\"group\" open><summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center py-2\">${type}图鉴 (${entries.length})<i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i></summary><ul class=\"space-y-2 mt-2\">`;\n            if (entries.length > 0) {\n                entries.forEach(entry => {\n                    html += `\n            <li class=\"p-2 rounded-lg bg-secondary/50 flex justify-between items-center\">\n              <label class=\"flex items-center cursor-pointer flex-grow mr-4\">\n                <input type=\"checkbox\" class=\"mr-3\" data-type=\"${type}\" data-name=\"${entry.名称}\">\n                <span class=\"truncate\" title=\"${entry.名称}\">${entry.名称}</span>\n              </label>\n              <div class=\"space-x-2 flex-shrink-0\">\n                <button class=\"pokedex-view-btn text-sm text-blue-400 hover:text-blue-300 transition-colors p-1\" data-type=\"${type}\" data-name=\"${entry.名称}\" title=\"查看\"><i class=\"fas fa-eye\"></i></button>\n                <button class=\"pokedex-edit-btn text-sm text-accent hover:text-accent-hover transition-colors p-1\" data-type=\"${type}\" data-name=\"${entry.名称}\" title=\"编辑\"><i class=\"fas fa-pencil-alt\"></i></button>\n                <button class=\"pokedex-delete-btn text-sm text-red-500 hover:text-red-400 transition-colors p-1\" data-type=\"${type}\" data-name=\"${entry.名称}\" title=\"删除\"><i class=\"fas fa-trash\"></i></button>\n              </div>\n            </li>`;\n                });\n            }\n            else {\n                html += `<li class=\"text-secondary text-sm italic p-2\">暂无条目</li>`;\n            }\n            html += `</ul></details>`;\n        });\n        existingPokedexContainer.innerHTML = html;\n        // 3. Populate Achievements\n        const achievementsContainer = document.getElementById('achievements-pokedex-list');\n        if (achievementsContainer) {\n            const systemData = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getSystemData();\n            const achievements = systemData.已完成 || [];\n            const points = systemData.成就点数 || 0;\n            let achievementsHtml = `\n        <details class=\"group\" open>\n          <summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center py-2\">\n            成就图鉴 (已解锁 ${achievements.length}, 共 ${points} 点)\n            <i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i>\n          </summary>\n          <ul class=\"space-y-2 mt-2\">\n      `;\n            if (achievements.length > 0) {\n                achievements.forEach((ach) => {\n                    const achName = ach['名称'];\n                    achievementsHtml += `\n            <li class=\"p-3 rounded-lg bg-secondary/50 border border-dim flex justify-between items-center\">\n              <div class=\"flex-grow\">\n                <p class=\"font-semibold text-primary flex justify-between items-center\">\n                  <span><i class=\"fas fa-trophy mr-2 text-yellow-400\"></i>${achName}</span>\n                  <span class=\"text-xs font-normal text-secondary\">${ach['日期'] || ''}</span>\n                </p>\n                <p class=\"text-sm text-secondary mt-1 pl-6\">${ach['描述'] || '没有描述。'}</p>\n              </div>\n              <div class=\"space-x-2 flex-shrink-0 ml-4\">\n                <button class=\"pokedex-edit-btn text-sm text-accent hover:text-accent-hover transition-colors p-1\" data-type=\"成就\" data-name=\"${achName}\" title=\"编辑\"><i class=\"fas fa-pencil-alt\"></i></button>\n                <button class=\"pokedex-delete-btn text-sm text-red-500 hover:text-red-400 transition-colors p-1\" data-type=\"成就\" data-name=\"${achName}\" title=\"删除\"><i class=\"fas fa-trash\"></i></button>\n              </div>\n            </li>\n          `;\n                });\n            }\n            else {\n                achievementsHtml += `<li class=\"text-secondary text-sm italic p-2\">尚未解锁任何成就</li>`;\n            }\n            achievementsHtml += `</ul></details>`;\n            achievementsContainer.innerHTML = achievementsHtml;\n        }\n    };\n    const showModal = async () => {\n        await populateViewTab();\n        modal?.classList.remove('hidden');\n    };\n    const hideModal = () => modal?.classList.add('hidden');\n    managerBtn?.addEventListener('click', showModal);\n    closeModalBtn?.addEventListener('click', hideModal);\n    modal?.addEventListener('click', (e) => {\n        if (e.target === modal)\n            hideModal();\n    });\n    helpBtn?.addEventListener('click', () => {\n        helpContent?.classList.toggle('hidden');\n        helpBtn.classList.toggle('active');\n    });\n    document.getElementById('approve-discoveries-btn')?.addEventListener('click', async () => {\n        const checkboxes = document.querySelectorAll('#new-discoveries-list input[type=\"checkbox\"]:checked');\n        if (checkboxes.length === 0) {\n            toastr.warning('请至少选择一个要收录的条目。');\n            return;\n        }\n        const messageId = getCurrentMessageId();\n        const messageVars = getVariables({ type: 'message', message_id: messageId });\n        const messagePokedex = _.get(messageVars, '世界.图鉴', {});\n        let successCount = 0;\n        for (const cb of checkboxes) {\n            const type = cb.dataset.type;\n            const name = cb.dataset.name;\n            if (type && name && messagePokedex[type]) {\n                const entry = messagePokedex[type].find((e) => e.名称 === name);\n                if (entry) {\n                    if (await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, entry)) {\n                        successCount++;\n                    }\n                }\n            }\n        }\n        if (successCount > 0) {\n            toastr.success(`成功收录了 ${successCount} 个新条目！`);\n            await populateViewTab();\n        }\n    });\n    mainTabs?.forEach(button => {\n        button.addEventListener('click', () => {\n            const tab = button.getAttribute('data-tab');\n            mainTabs.forEach(btn => btn.classList.remove('active'));\n            button.classList.add('active');\n            resetAddForm();\n            viewTabContent?.classList.add('hidden');\n            addTabContent?.classList.add('hidden');\n            injectBtn?.classList.add('hidden');\n            submitEntryBtn?.classList.add('hidden');\n            if (tab === 'view') {\n                viewTabContent?.classList.remove('hidden');\n                injectBtn?.classList.remove('hidden');\n            }\n            else if (tab === 'add') {\n                addTabContent?.classList.remove('hidden');\n                submitEntryBtn?.classList.remove('hidden');\n            }\n        });\n    });\n    injectBtn?.addEventListener('click', async () => {\n        const selectedEntries = {};\n        const checkboxes = modal?.querySelectorAll('#pokedex-view-tab input[type=\"checkbox\"]:checked');\n        if (!checkboxes || checkboxes.length === 0) {\n            toastr.warning('请至少选择一个要注入的条目。');\n            return;\n        }\n        const pokedexData = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\n        checkboxes.forEach(cb => {\n            const type = cb.dataset.type;\n            const name = cb.dataset.name;\n            if (type && name) {\n                const entry = pokedexData[type].find(e => e.名称 === name);\n                if (entry) {\n                    if (!selectedEntries[type]) {\n                        selectedEntries[type] = [];\n                    }\n                    selectedEntries[type].push(entry);\n                }\n            }\n        });\n        if (_.isEmpty(selectedEntries))\n            return;\n        const messageId = getCurrentMessageId();\n        const currentVars = getVariables({ type: 'message', message_id: messageId });\n        const updates = {};\n        for (const [type, entries] of Object.entries(selectedEntries)) {\n            const path = `世界.图鉴.${type}`;\n            const existingEntries = _.get(currentVars, path, []);\n            const newEntries = _.unionBy(existingEntries, entries, '名称');\n            _.set(updates, path, newEntries);\n        }\n        await insertOrAssignVariables(updates, { type: 'message', message_id: messageId });\n        toastr.success('成功注入图鉴到当前楼层！');\n        hideModal();\n        storyRenderer.init();\n    });\n    addTabModeButtons?.forEach(button => {\n        button.addEventListener('click', () => {\n            const mode = button.getAttribute('data-mode');\n            if (!mode || mode === currentAddMode)\n                return;\n            currentAddMode = mode;\n            addTabModeButtons.forEach(btn => btn.classList.remove('active'));\n            button.classList.add('active');\n            if (mode === 'form') {\n                formModeContent?.classList.remove('hidden');\n                jsonModeContent?.classList.add('hidden');\n            }\n            else {\n                formModeContent?.classList.add('hidden');\n                jsonModeContent?.classList.remove('hidden');\n            }\n        });\n    });\n    const checkedRadio = document.querySelector('input[name=\"entryType\"]:checked');\n    if (checkedRadio)\n        updateFormFields(checkedRadio.value);\n    addFieldBtn?.addEventListener('click', () => addField());\n    entryTypeRadios.forEach(radio => {\n        radio.addEventListener('change', (e) => {\n            updateFormFields(e.target.value);\n        });\n    });\n    submitEntryBtn?.addEventListener('click', async () => {\n        const isUpdate = submitEntryBtn.dataset.updateMode === 'true';\n        if (currentAddMode === 'form') {\n            const type = document.querySelector('input[name=\"entryType\"]:checked')?.value;\n            const newEntry = { '名称': '' };\n            const rows = formFieldsContainer?.querySelectorAll('.form-field-row');\n            rows?.forEach(row => {\n                const key = row.querySelector('.form-key-input')?.value.trim();\n                const value = row.querySelector('.form-value-input')?.value.trim();\n                if (key)\n                    newEntry[key] = value;\n            });\n            if (!newEntry.名称) {\n                toastr.warning('“名称”是必填字段！');\n                return;\n            }\n            if (isUpdate) {\n                const originalName = submitEntryBtn.dataset.originalName;\n                const originalType = submitEntryBtn.dataset.originalType;\n                if (!originalName || !originalType || !type) {\n                    toastr.error('更新失败：缺少必要信息。');\n                    return;\n                }\n                if (originalType === type) {\n                    // Type hasn't changed, just update\n                    if (type === '成就') {\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.updateAchievement(originalName, newEntry);\n                    }\n                    else {\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.updatePokedexEntry(type, originalName, newEntry);\n                    }\n                }\n                else {\n                    // Type has changed, so we delete the old and create a new one\n                    if (originalType === '成就') {\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.deleteAchievement(originalName);\n                    }\n                    else {\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.deletePokedexEntry(originalType, originalName);\n                    }\n                    if (type === '成就') {\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createAchievement(newEntry);\n                    }\n                    else {\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, newEntry);\n                    }\n                    toastr.info(`条目已从“${originalType}”移动到“${type}”`);\n                }\n                resetAddForm();\n            }\n            else {\n                // Create new entry\n                if (!type) {\n                    toastr.warning('请选择条目类型！');\n                    return;\n                }\n                if (type === '成就') {\n                    const success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createAchievement(newEntry);\n                    if (success)\n                        updateFormFields(type);\n                }\n                else {\n                    const success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, newEntry);\n                    if (success) {\n                        updateFormFields(type);\n                    }\n                }\n            }\n        }\n        else if (currentAddMode === 'json') { // JSON mode\n            const type = document.querySelector('input[name=\"jsonEntryType\"]:checked')?.value;\n            const jsonString = jsonInput?.value.trim();\n            if (!jsonString) {\n                toastr.warning('请输入JSON数据！');\n                return;\n            }\n            try {\n                const data = JSON.parse(jsonString);\n                const entries = Array.isArray(data) ? data : [data];\n                let successCount = 0;\n                if (type === '成就') {\n                    for (const entry of entries) {\n                        if (await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createAchievement(entry)) {\n                            successCount++;\n                        }\n                    }\n                    if (successCount > 0) {\n                        toastr.success(`成功处理 ${successCount} 个新成就！`);\n                        jsonInput.value = '';\n                    }\n                }\n                else {\n                    for (const entry of entries) {\n                        if (await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, entry)) {\n                            successCount++;\n                        }\n                    }\n                    if (successCount > 0)\n                        jsonInput.value = '';\n                }\n            }\n            catch (error) {\n                toastr.error('JSON解析失败，请检查格式！');\n                console.error(\"JSON parsing failed:\", error);\n            }\n        }\n        await populateViewTab();\n    });\n    viewTabContent?.addEventListener('click', async (e) => {\n        const target = e.target;\n        const deleteButton = target.closest('.pokedex-delete-btn');\n        const editButton = target.closest('.pokedex-edit-btn');\n        const viewButton = target.closest('.pokedex-view-btn');\n        if (viewButton) {\n            const type = viewButton.getAttribute('data-type');\n            const name = viewButton.getAttribute('data-name');\n            if (type && name) {\n                if (type === '成就') {\n                    const achievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\n                    const entry = achievements.find((ach) => ach['名称'] === name);\n                    if (entry)\n                        showModalWithData(entry);\n                }\n                else {\n                    const entry = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.readPokedexEntry(type, name);\n                    if (entry) {\n                        showModalWithData(entry);\n                    }\n                }\n            }\n        }\n        if (deleteButton) {\n            const type = deleteButton.getAttribute('data-type');\n            const name = deleteButton.getAttribute('data-name');\n            if (type && name) {\n                if (confirm(`确定要删除 ${type} 图鉴中的 “${name}” 吗？此操作不可撤销。`)) {\n                    let success = false;\n                    if (type === '成就') {\n                        success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.deleteAchievement(name);\n                    }\n                    else {\n                        success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.deletePokedexEntry(type, name);\n                    }\n                    if (success) {\n                        await populateViewTab();\n                    }\n                }\n            }\n        }\n        if (editButton) {\n            const type = editButton.getAttribute('data-type');\n            const name = editButton.getAttribute('data-name');\n            if (type && name) {\n                let entry = null;\n                if (type === '成就') {\n                    const achievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\n                    entry = achievements.find((ach) => ach['名称'] === name) ?? null;\n                }\n                else {\n                    entry = (await _pokedex__WEBPACK_IMPORTED_MODULE_2__.readPokedexEntry(type, name)) ?? null;\n                }\n                if (entry) {\n                    mainTabs?.forEach(btn => btn.classList.toggle('active', btn.getAttribute('data-tab') === 'add'));\n                    viewTabContent?.classList.add('hidden');\n                    addTabContent?.classList.remove('hidden');\n                    injectBtn?.classList.add('hidden');\n                    submitEntryBtn?.classList.remove('hidden');\n                    addTabModeButtons?.forEach(btn => btn.classList.toggle('active', btn.getAttribute('data-mode') === 'form'));\n                    formModeContent?.classList.remove('hidden');\n                    jsonModeContent?.classList.add('hidden');\n                    currentAddMode = 'form';\n                    document.querySelector(`input[name=\"entryType\"][value=\"${type}\"]`).checked = true;\n                    if (formFieldsContainer)\n                        formFieldsContainer.innerHTML = '';\n                    Object.entries(entry).forEach(([key, value]) => {\n                        addField(key, String(value));\n                    });\n                    submitEntryBtn.innerHTML = '<i class=\"fas fa-check mr-2\"></i>确认更新';\n                    submitEntryBtn.dataset.updateMode = 'true';\n                    submitEntryBtn.dataset.originalName = name;\n                    submitEntryBtn.dataset.originalType = type;\n                }\n            }\n        }\n    });\n}\nclass StoryRenderer {\n    yamlData;\n    rawYamlContent;\n    rootNodeKey;\n    elements;\n    rawJsonContent = null;\n    jsonData = null;\n    globalPokedex = null;\n    constructor() {\n        this.yamlData = null;\n        this.rawYamlContent = \"\";\n        this.rootNodeKey = null;\n        this.elements = {\n            statusBarTitle: document.getElementById('status-bar-title'),\n            timeDisplay: document.getElementById('time-display'),\n            locationDisplay: document.getElementById('location-display'),\n            charactersContainer: document.getElementById('characters-container'),\n            actionOwner: document.getElementById('action-owner'),\n            optionsList: document.getElementById('options-list'),\n            systemContainer: document.getElementById('system-container'),\n            shelterContainer: document.getElementById('shelter-container'),\n            bestiaryContainer: document.getElementById('bestiary-container'),\n            herbologyContainer: document.getElementById('herbology-container'),\n            inventoryContainer: document.getElementById('inventory-container')\n        };\n    }\n    handleCompatibility() {\n        if (!this.rootNodeKey || !this.jsonData)\n            return;\n        const rootData = this.jsonData[this.rootNodeKey];\n        let modified = false;\n        if (!this.findFieldByKeywords(rootData, ['庇护所'])) {\n            rootData['🏡 庇护所'] = {};\n            modified = true;\n        }\n        if (!this.findFieldByKeywords(rootData, ['妖兽图鉴'])) {\n            rootData['🐾 妖兽图鉴'] = { '已发现': 0, '已收录': [] };\n            modified = true;\n        }\n        if (!this.findFieldByKeywords(rootData, ['植物图鉴'])) {\n            rootData['🌿 植物图鉴'] = { '已发现': 0, '已种植': [] };\n            modified = true;\n        }\n        if (modified) {\n            toastr.info('检测到旧版状态栏，已自动补充缺失的字段以兼容。');\n        }\n    }\n    async init() {\n        console.log('[StoryRenderer] Initializing...');\n        this.setLoadingState();\n        try {\n            this.rawJsonContent = this.getRawContentFromChatMessage();\n            console.log('[StoryRenderer] Raw JSON content loaded:', this.rawJsonContent);\n            if (!this.rawJsonContent) {\n                toastr.error('未能在最新消息中找到JSON数据。');\n                return;\n            }\n            let parsedJson;\n            try {\n                parsedJson = JSON.parse(this.rawJsonContent);\n            }\n            catch (error) {\n                console.error('JSON parsing failed:', error);\n                this.handleParsingFailure(this.rawJsonContent, error);\n                return;\n            }\n            this.jsonData = parsedJson;\n            if (!this.jsonData) {\n                toastr.error('JSON数据格式不正确');\n                return;\n            }\n            this.findRootNodeKey();\n            this.handleCompatibility();\n            this.globalPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData(); // Cache the pokedex\n            await this.syncVariables();\n            this.renderAll();\n            const savedTheme = localStorage.getItem('storyTheme') || 'night';\n            const themeButton = document.querySelector(`.theme-btn[data-theme=\"${savedTheme}\"]`);\n            if (themeButton)\n                themeButton.click();\n            toastr.success('状态栏已成功加载并渲染！');\n        }\n        catch (error) {\n            console.error('渲染失败:', error);\n            this.handleError(error);\n        }\n    }\n    getRawContentFromChatMessage() {\n        try {\n            const messageId = getCurrentMessageId();\n            if (messageId === null || messageId === undefined) {\n                toastr.error('无法获取当前消息 ID。');\n                return '';\n            }\n            const message = getChatMessages(messageId)[0];\n            if (!message || !message.message)\n                return '';\n            return (0,_parser__WEBPACK_IMPORTED_MODULE_1__.extractJsonFromStatusBar)(message.message);\n        }\n        catch (e) {\n            console.error(\"获取聊天消息失败:\", e);\n            toastr.error('获取或处理聊天消息时出错，请检查控制台。');\n            return '';\n        }\n    }\n    setLoadingState() {\n        if (this.elements.charactersContainer)\n            this.elements.charactersContainer.innerHTML = this.createSpinner();\n        if (this.elements.optionsList)\n            this.elements.optionsList.innerHTML = `<li>${this.createSpinner()}</li>`;\n    }\n    createSpinner() {\n        return `<div class=\"flex justify-center items-center p-4\"><div class=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-400\"></div></div>`;\n    }\n    findRootNodeKey() {\n        const keys = Object.keys(this.jsonData);\n        this.rootNodeKey = keys.find(key => key.includes('状态总览') || key.includes('角色状态总览')) || keys[0];\n        if (!this.rootNodeKey) {\n            toastr.error('未找到根节点');\n            return;\n        }\n        if (this.elements.statusBarTitle)\n            this.elements.statusBarTitle.textContent = \"状态总览\";\n    }\n    findFieldByKeywords(data, keywords) {\n        if (!data || typeof data !== 'object')\n            return null;\n        const fields = Object.keys(data);\n        for (const field of fields) {\n            for (const keyword of keywords) {\n                if (field.toLowerCase().includes(keyword.toLowerCase()))\n                    return field;\n            }\n        }\n        return null;\n    }\n    renderAll() {\n        if (!this.rootNodeKey)\n            return;\n        const rootData = this.jsonData[this.rootNodeKey];\n        this.renderHeaderInfo(rootData);\n        this.renderCharacters(rootData);\n        this.renderShelter(rootData);\n        this.renderPokedexFromMessageVars();\n        this.renderSystem(rootData);\n        this.renderActionOptions(rootData);\n    }\n    renderHeaderInfo(data) {\n        const dateTimeField = this.findFieldByKeywords(data, ['日期', '时间']);\n        const locationField = this.findFieldByKeywords(data, ['地点', '环境']);\n        const timeDisplayParent = this.elements.timeDisplay?.parentNode;\n        const locationDisplayParent = this.elements.locationDisplay?.parentNode;\n        if (dateTimeField && this.elements.timeDisplay && timeDisplayParent) {\n            this.elements.timeDisplay.textContent = this.formatNodeName(data[dateTimeField], true);\n            const emojiEl = timeDisplayParent.querySelector('.emoji');\n            if (emojiEl)\n                emojiEl.textContent = this.extractEmojis(data[dateTimeField])[0] || '🗓️';\n        }\n        if (locationField && this.elements.locationDisplay && locationDisplayParent) {\n            this.elements.locationDisplay.textContent = this.formatNodeName(data[locationField], true);\n            const emojiEl = locationDisplayParent.querySelector('.emoji');\n            if (emojiEl)\n                emojiEl.textContent = this.extractEmojis(data[locationField])[0] || '🏞️';\n        }\n    }\n    renderCharacters(data) {\n        const charListKey = this.findFieldByKeywords(data, ['角色', '列表', '人物']);\n        if (this.elements.charactersContainer) {\n            this.elements.charactersContainer.innerHTML = '';\n            if (charListKey && Array.isArray(data[charListKey])) {\n                data[charListKey].forEach((charData) => {\n                    const card = this.createCharacterCard(charData);\n                    if (card)\n                        this.elements.charactersContainer.appendChild(card);\n                });\n            }\n            else {\n                this.elements.charactersContainer.innerHTML = this.createEmptyState('没有角色数据');\n            }\n        }\n    }\n    renderSystem(data) {\n        const systemContainer = this.elements.systemContainer;\n        if (systemContainer) {\n            const messageId = getCurrentMessageId();\n            const variables = getVariables({ type: 'message', message_id: messageId });\n            const systemData = _.get(variables, '世界.系统', null);\n            (0,_systems__WEBPACK_IMPORTED_MODULE_3__.renderSystem)(systemData, systemContainer);\n        }\n    }\n    renderShelter(data) {\n        const shelterKey = this.findFieldByKeywords(data, ['庇护所']);\n        if (this.elements.shelterContainer) {\n            this.elements.shelterContainer.innerHTML = '';\n            if (shelterKey && typeof data[shelterKey] === 'object' && data[shelterKey] !== null) {\n                const shelterData = data[shelterKey];\n                const card = this.createCharacterCard({ [shelterKey]: shelterData });\n                if (card)\n                    this.elements.shelterContainer.appendChild(card);\n            }\n            else {\n                this.elements.shelterContainer.innerHTML = this.createEmptyState('暂无庇护所信息');\n            }\n        }\n    }\n    renderPokedexFromMessageVars() {\n        const messageId = getCurrentMessageId();\n        const variables = getVariables({ type: 'message', message_id: messageId });\n        const pokedexData = _.get(variables, '世界.图鉴', {});\n        const renderSinglePokedex = (container, data, name, emptyText) => {\n            if (container) {\n                container.innerHTML = '';\n                if (data && data.length > 0) {\n                    const card = this.createCharacterCard({ [`${name}图鉴 (已发现 ${data.length})`]: data });\n                    if (card)\n                        container.appendChild(card);\n                }\n                else {\n                    container.innerHTML = this.createEmptyState(emptyText);\n                }\n            }\n        };\n        renderSinglePokedex(this.elements.bestiaryContainer, pokedexData['妖兽'], '妖兽', '妖兽图鉴待解锁');\n        renderSinglePokedex(this.elements.herbologyContainer, pokedexData['植物'], '植物', '植物图鉴待解锁');\n        renderSinglePokedex(this.elements.inventoryContainer, pokedexData['物品'], '物品', '物品图鉴是空的');\n    }\n    async syncVariables() {\n        if (!this.rootNodeKey || !this.jsonData)\n            return;\n        try {\n            const currentMessageId = getCurrentMessageId();\n            if (currentMessageId === null) {\n                console.warn('[StoryRenderer] 无法获取当前消息ID，跳过同步。');\n                return;\n            }\n            const rootData = this.jsonData[this.rootNodeKey];\n            const currentVars = getVariables({ type: 'message', message_id: currentMessageId });\n            const lastSyncId = _.get(currentVars, '世界.lastSyncMessageId', -1);\n            // 核心逻辑：只有当当前消息ID大于等于最后同步ID时才执行更新\n            if (currentMessageId >= lastSyncId) {\n                const updates = {};\n                const sectionsToSync = [\n                    { keyWords: ['庇护所'], varPath: '世界.庇护所' },\n                    { keyWords: ['妖兽图鉴'], varPath: '世界.图鉴.妖兽' },\n                    { keyWords: ['植物图鉴'], varPath: '世界.图鉴.植物' },\n                    { keyWords: ['物品图鉴'], varPath: '世界.图鉴.物品' }\n                ];\n                // 单独处理系统，确保它只在变量不存在时从JSON初始化一次\n                const systemDataInJson = this.findFieldByKeywords(rootData, ['系统']);\n                if (systemDataInJson && rootData[systemDataInJson]) {\n                    const newSystemData = rootData[systemDataInJson];\n                    const currentSystemData = _.get(currentVars, '世界.系统', {});\n                    // 检查是否有新成就解锁\n                    if (newSystemData['新成就']) {\n                        const newAchievements = Array.isArray(newSystemData['新成就']) ? newSystemData['新成就'] : [newSystemData['新成就']];\n                        const updatedAchievements = _.cloneDeep(_.get(currentSystemData, '已完成', []));\n                        let updatedPoints = _.get(currentSystemData, '成就点数', 0);\n                        newAchievements.forEach((ach) => {\n                            // 避免重复添加\n                            if (!updatedAchievements.some((existingAch) => existingAch['名称'] === ach['名称'])) {\n                                // 动态地将所有字段添加进去，除了点数\n                                const achievementData = { ...ach };\n                                delete achievementData['点数'];\n                                updatedAchievements.push(achievementData);\n                                updatedPoints += ach['点数'] || 0;\n                                toastr.success(`解锁新成就：${ach['名称']}`, '恭喜！');\n                            }\n                        });\n                        // 更新系统数据\n                        currentSystemData['已完成'] = updatedAchievements;\n                        currentSystemData['成就点数'] = updatedPoints;\n                        if (newSystemData['提示'])\n                            currentSystemData['提示'] = newSystemData['提示'];\n                        updates['世界.系统'] = currentSystemData;\n                        console.log(`[StoryRenderer] 检测到新成就，已合并并更新系统变量。`);\n                    }\n                    else if (newSystemData['今日已签到'] === true) {\n                        const today = new Date().getDate();\n                        const yesterday = new Date();\n                        yesterday.setDate(today - 1);\n                        const signedInDays = _.cloneDeep(_.get(currentSystemData, '已签到', []));\n                        if (!signedInDays.includes(today)) {\n                            signedInDays.push(today);\n                        }\n                        let consecutiveDays = _.get(currentSystemData, '连续签到', 0);\n                        if (signedInDays.includes(yesterday.getDate())) {\n                            consecutiveDays++;\n                        }\n                        else {\n                            consecutiveDays = 1;\n                        }\n                        currentSystemData['已签到'] = signedInDays;\n                        currentSystemData['连续签到'] = consecutiveDays;\n                        if (newSystemData['提示'])\n                            currentSystemData['提示'] = newSystemData['提示'];\n                        // 处理签到奖励\n                        if (newSystemData['奖励']) {\n                            const rewardText = newSystemData['奖励'];\n                            const match = rewardText.match(/【(.+?)】x(\\d+)/);\n                            if (match) {\n                                const itemName = match[1];\n                                const itemAmount = parseInt(match[2], 10);\n                                // 假设只有一个角色，找到角色数据并更新物品\n                                const charListKey = this.findFieldByKeywords(rootData, ['角色', '列表', '人物']);\n                                if (charListKey && Array.isArray(rootData[charListKey]) && rootData[charListKey].length > 0) {\n                                    const charContainer = rootData[charListKey][0];\n                                    const charDataKey = Object.keys(charContainer)[0];\n                                    const charData = charContainer[charDataKey];\n                                    const nameKey = this.findFieldByKeywords(charData, ['姓名', '名称']);\n                                    if (nameKey) {\n                                        const charName = this.formatNodeName(charData[nameKey], true);\n                                        const itemsVarPath = `角色.${charName}.物品`;\n                                        const currentItems = _.cloneDeep(_.get(currentVars, itemsVarPath, []));\n                                        // 检查物品是否已存在\n                                        const existingItemIndex = currentItems.findIndex((item) => item.includes(itemName));\n                                        if (existingItemIndex > -1) {\n                                            // 更新数量\n                                            const existingItemText = currentItems[existingItemIndex];\n                                            const existingAmountMatch = existingItemText.match(/x(\\d+)/);\n                                            const existingAmount = existingAmountMatch ? parseInt(existingAmountMatch[1], 10) : 1;\n                                            const newAmount = existingAmount + itemAmount;\n                                            currentItems[existingItemIndex] = `【${itemName}】x${newAmount}`;\n                                        }\n                                        else {\n                                            // 添加新物品\n                                            currentItems.push(`【${itemName}】x${itemAmount}`);\n                                        }\n                                        updates[itemsVarPath] = currentItems;\n                                        console.log(`[StoryRenderer] 已将签到奖励“${rewardText}”添加到角色“${charName}”的物品变量中。`);\n                                    }\n                                }\n                            }\n                        }\n                        updates['世界.系统'] = currentSystemData;\n                        console.log(`[StoryRenderer] 检测到签到事件，已更新签到数据。`);\n                    }\n                    else if (newSystemData['技能提升']) {\n                        const skillUpdates = Array.isArray(newSystemData['技能提升']) ? newSystemData['技能提升'] : [newSystemData['技能提升']];\n                        const currentSkills = _.cloneDeep(_.get(currentSystemData, '技能', []));\n                        skillUpdates.forEach((update) => {\n                            const skillIndex = currentSkills.findIndex((s) => s['名称'] === update['名称']);\n                            if (skillIndex > -1) {\n                                // 更新现有技能\n                                const skill = currentSkills[skillIndex];\n                                const currentExp = skill['熟练度'] || { value: 0, max: 100 };\n                                currentExp.value += update['熟练度增加'] || 0;\n                                // 处理升级\n                                while (currentExp.value >= currentExp.max) {\n                                    currentExp.value -= currentExp.max;\n                                    skill['等级'] = (skill['等级'] || 1) + 1;\n                                    // 升级后熟练度上限可能会增加，这里简化处理，实际可扩展\n                                    currentExp.max = Math.floor(currentExp.max * 1.5);\n                                    toastr.success(`你的技能【${skill['名称']}】升级了！`, '恭喜！');\n                                }\n                                skill['熟练度'] = currentExp;\n                            }\n                            else {\n                                // 添加新技能\n                                currentSkills.push({\n                                    '名称': update['名称'],\n                                    '等级': 1,\n                                    '熟练度': { value: update['熟练度增加'] || 0, max: 100 }\n                                });\n                                toastr.info(`你学会了新技能：【${update['名称']}】！`);\n                            }\n                        });\n                        currentSystemData['技能'] = currentSkills;\n                        if (newSystemData['提示'])\n                            currentSystemData['提示'] = newSystemData['提示'];\n                        updates['世界.系统'] = currentSystemData;\n                        console.log(`[StoryRenderer] 检测到技能提升事件，已更新技能数据。`);\n                    }\n                    else if (newSystemData['物品交换']) {\n                        const exchange = newSystemData['物品交换'];\n                        if (exchange['成功']) {\n                            const charListKey = this.findFieldByKeywords(rootData, ['角色', '列表', '人物']);\n                            if (charListKey && Array.isArray(rootData[charListKey]) && rootData[charListKey].length > 0) {\n                                const charContainer = rootData[charListKey][0];\n                                const charDataKey = Object.keys(charContainer)[0];\n                                const charData = charContainer[charDataKey];\n                                const nameKey = this.findFieldByKeywords(charData, ['姓名', '名称']);\n                                if (nameKey) {\n                                    const charName = this.formatNodeName(charData[nameKey], true);\n                                    const itemsVarPath = `角色.${charName}.物品`;\n                                    const currentItems = _.cloneDeep(_.get(currentVars, itemsVarPath, []));\n                                    // 处理失去的物品\n                                    (exchange['交换物品']['失去'] || []).forEach((itemText) => {\n                                        const match = itemText.match(/【(.+?)】x(\\d+)/);\n                                        if (match) {\n                                            const itemName = match[1];\n                                            const amountToRemove = parseInt(match[2], 10);\n                                            const existingItemIndex = currentItems.findIndex((item) => item.includes(itemName));\n                                            if (existingItemIndex > -1) {\n                                                const existingItemText = currentItems[existingItemIndex];\n                                                const existingAmountMatch = existingItemText.match(/x(\\d+)/);\n                                                const existingAmount = existingAmountMatch ? parseInt(existingAmountMatch[1], 10) : 1;\n                                                const newAmount = existingAmount - amountToRemove;\n                                                if (newAmount > 0) {\n                                                    currentItems[existingItemIndex] = `【${itemName}】x${newAmount}`;\n                                                }\n                                                else {\n                                                    currentItems.splice(existingItemIndex, 1);\n                                                }\n                                            }\n                                        }\n                                    });\n                                    // 处理获得的物品\n                                    (exchange['交换物品']['获得'] || []).forEach((itemText) => {\n                                        const match = itemText.match(/【(.+?)】x(\\d+)/);\n                                        if (match) {\n                                            const itemName = match[1];\n                                            const amountToAdd = parseInt(match[2], 10);\n                                            const existingItemIndex = currentItems.findIndex((item) => item.includes(itemName));\n                                            if (existingItemIndex > -1) {\n                                                const existingItemText = currentItems[existingItemIndex];\n                                                const existingAmountMatch = existingItemText.match(/x(\\d+)/);\n                                                const existingAmount = existingAmountMatch ? parseInt(existingAmountMatch[1], 10) : 1;\n                                                const newAmount = existingAmount + amountToAdd;\n                                                currentItems[existingItemIndex] = `【${itemName}】x${newAmount}`;\n                                            }\n                                            else {\n                                                currentItems.push(`【${itemName}】x${amountToAdd}`);\n                                            }\n                                        }\n                                    });\n                                    updates[itemsVarPath] = currentItems;\n                                }\n                            }\n                            toastr.success(exchange['提示'] || '交换成功！');\n                        }\n                        else {\n                            toastr.warning(exchange['提示'] || '交换失败。');\n                        }\n                        // 不管成功与否，都更新系统提示\n                        if (newSystemData['提示'])\n                            currentSystemData['提示'] = newSystemData['提示'];\n                        updates['世界.系统'] = currentSystemData;\n                        console.log(`[StoryRenderer] 检测到物品交换事件，已处理。`);\n                    }\n                    else if (newSystemData['物品变化']) {\n                        const change = newSystemData['物品变化'];\n                        const charListKey = this.findFieldByKeywords(rootData, ['角色', '列表', '人物']);\n                        if (charListKey && Array.isArray(rootData[charListKey]) && rootData[charListKey].length > 0) {\n                            const charContainer = rootData[charListKey][0];\n                            const charDataKey = Object.keys(charContainer)[0];\n                            const charData = charContainer[charDataKey];\n                            const nameKey = this.findFieldByKeywords(charData, ['姓名', '名称']);\n                            if (nameKey) {\n                                const charName = this.formatNodeName(charData[nameKey], true);\n                                const itemsVarPath = `角色.${charName}.物品`;\n                                const currentItems = _.cloneDeep(_.get(currentVars, itemsVarPath, []));\n                                // 统一处理物品数量变化的函数\n                                const updateItemCount = (itemList, amountModifier) => {\n                                    (itemList || []).forEach((itemText) => {\n                                        const match = itemText.match(/【(.+?)】x(\\d+)/);\n                                        if (match) {\n                                            const itemName = match[1];\n                                            const amount = parseInt(match[2], 10) * amountModifier;\n                                            const existingItemIndex = currentItems.findIndex((item) => item.includes(`【${itemName}】`));\n                                            if (existingItemIndex > -1) {\n                                                const existingItemText = currentItems[existingItemIndex];\n                                                const existingAmountMatch = existingItemText.match(/x(\\d+)/);\n                                                const existingAmount = existingAmountMatch ? parseInt(existingAmountMatch[1], 10) : 1;\n                                                const newAmount = existingAmount + amount;\n                                                if (newAmount > 0) {\n                                                    currentItems[existingItemIndex] = `【${itemName}】x${newAmount}`;\n                                                }\n                                                else {\n                                                    currentItems.splice(existingItemIndex, 1);\n                                                }\n                                            }\n                                            else if (amount > 0) {\n                                                currentItems.push(`【${itemName}】x${amount}`);\n                                            }\n                                        }\n                                    });\n                                };\n                                updateItemCount(change['失去'], -1);\n                                updateItemCount(change['获得'], 1);\n                                updates[itemsVarPath] = currentItems;\n                            }\n                        }\n                        toastr.info(change['提示'] || '物品发生了变化。');\n                        if (newSystemData['提示'])\n                            currentSystemData['提示'] = newSystemData['提示'];\n                        updates['世界.系统'] = currentSystemData;\n                        console.log(`[StoryRenderer] 检测到物品变化事件，已处理。`);\n                    }\n                    else if (newSystemData['庇护所升级']) {\n                        const upgrade = newSystemData['庇护所升级'];\n                        const shelterVarPath = '世界.庇护所';\n                        const currentShelter = _.cloneDeep(_.get(currentVars, shelterVarPath, {}));\n                        // 合并新旧数据\n                        Object.keys(upgrade).forEach(key => {\n                            if (key === '新增功能') {\n                                const newFeatures = Array.isArray(upgrade[key]) ? upgrade[key] : [upgrade[key]];\n                                const existingFeatures = currentShelter['功能'] || [];\n                                currentShelter['功能'] = _.union(existingFeatures, newFeatures);\n                            }\n                            else if (key !== '提示') {\n                                currentShelter[key] = upgrade[key];\n                            }\n                        });\n                        updates[shelterVarPath] = currentShelter;\n                        toastr.success(upgrade['提示'] || '庇护所已更新！', '家园新貌');\n                        if (newSystemData['提示'])\n                            currentSystemData['提示'] = newSystemData['提示'];\n                        updates['世界.系统'] = currentSystemData;\n                        console.log(`[StoryRenderer] 检测到庇护所升级事件，已处理。`);\n                    }\n                    else if (newSystemData['新物品发现']) {\n                        const newItems = Array.isArray(newSystemData['新物品发现']) ? newSystemData['新物品发现'] : [newSystemData['新物品发现']];\n                        const currentPokedex = _.cloneDeep(_.get(currentVars, '世界.图鉴.物品', []));\n                        newItems.forEach((item) => {\n                            if (!currentPokedex.some((existing) => existing['名称'] === item['名称'])) {\n                                currentPokedex.push(item);\n                                toastr.info(`新的物品“${item['名称']}”已添加到图鉴！`);\n                            }\n                        });\n                        updates['世界.图鉴.物品'] = currentPokedex;\n                        console.log(`[StoryRenderer] 检测到新物品发现事件，已更新物品图鉴。`);\n                    }\n                    else if (!_.has(currentVars, '世界.系统')) {\n                        // 如果变量中没有系统数据，则尝试从JSON进行初始化\n                        const systemDataInJson = this.findFieldByKeywords(rootData, ['系统']);\n                        if (systemDataInJson && rootData[systemDataInJson]) {\n                            updates['世界.系统'] = rootData[systemDataInJson];\n                            console.log(`[StoryRenderer] '世界.系统' 变量不存在，从JSON进行初始化。`);\n                        }\n                    }\n                }\n                for (const section of sectionsToSync) {\n                    const dataKey = this.findFieldByKeywords(rootData, section.keyWords);\n                    if (dataKey && rootData[dataKey]) {\n                        const newData = rootData[dataKey];\n                        // For pokedex, we need to merge arrays, not replace them\n                        if (section.varPath.includes('图鉴')) {\n                            const oldData = _.get(currentVars, section.varPath, []);\n                            const combinedData = _.unionBy(oldData, newData['已收录'] || [], '名称');\n                            if (!_.isEqual(oldData, combinedData)) {\n                                _.set(updates, section.varPath, combinedData);\n                            }\n                        }\n                        else {\n                            const oldData = _.get(currentVars, section.varPath);\n                            if (!_.isEqual(newData, oldData)) {\n                                _.set(updates, section.varPath, newData);\n                            }\n                        }\n                    }\n                }\n                // 同步角色物品\n                const charListKey = this.findFieldByKeywords(rootData, ['角色', '列表', '人物']);\n                if (charListKey && Array.isArray(rootData[charListKey])) {\n                    rootData[charListKey].forEach((charContainer) => {\n                        const charDataKey = Object.keys(charContainer)[0];\n                        const charData = charContainer[charDataKey];\n                        if (charData && typeof charData === 'object') {\n                            const nameKey = this.findFieldByKeywords(charData, ['姓名', '名称']);\n                            const itemsKey = this.findFieldByKeywords(charData, ['物品', '核心物品']);\n                            if (nameKey && itemsKey && charData[nameKey] && Array.isArray(charData[itemsKey])) {\n                                const charName = this.formatNodeName(charData[nameKey], true);\n                                const newItems = charData[itemsKey];\n                                const varPath = `角色.${charName}.物品`;\n                                const oldItems = _.get(currentVars, varPath);\n                                if (!_.isEqual(newItems, oldItems)) {\n                                    _.set(updates, varPath, newItems);\n                                }\n                            }\n                        }\n                    });\n                }\n                if (!_.isEmpty(updates)) {\n                    console.log(`[StoryRenderer] Message ${currentMessageId} > ${lastSyncId}. 检测到变量变化，正在更新:`, updates);\n                    // 将 lastSyncMessageId 也加入到更新中\n                    updates['世界.lastSyncMessageId'] = currentMessageId;\n                    await insertOrAssignVariables(updates, { type: 'message', message_id: currentMessageId });\n                    toastr.info(`状态栏(M${currentMessageId})已同步楼层变量。`);\n                }\n                else {\n                    console.log(`[StoryRenderer] Message ${currentMessageId} >= ${lastSyncId}. 未检测到变量变化。`);\n                }\n            }\n            else {\n                console.log(`[StoryRenderer] 跳过旧的状态栏(M${currentMessageId})同步，最新记录为 M${lastSyncId}。`);\n            }\n        }\n        catch (error) {\n            console.error('变量同步失败:', error);\n            toastr.error('变量同步失败，请查看控制台。');\n        }\n    }\n    createCharacterCard(charData) {\n        const titleKey = Object.keys(charData)[0];\n        const attributes = charData[titleKey];\n        if (!titleKey || !attributes)\n            return null;\n        const card = document.createElement('div');\n        card.className = 'bg-main rounded-xl border border-dim p-3.5 shadow-sm card-hover theme-transition';\n        const h3 = document.createElement('h3');\n        h3.className = 'font-bold text-lg mb-2 pb-1 border-b border-dim theme-transition';\n        h3.innerHTML = `${this.extractEmojis(titleKey)[0] || ''} ${this.formatNodeName(titleKey, true)}`;\n        card.appendChild(h3);\n        const list = document.createElement('ul');\n        list.className = 'space-y-2 text-sm';\n        card.appendChild(list);\n        if (typeof attributes === 'object' && attributes !== null && !Array.isArray(attributes)) {\n            Object.entries(attributes).forEach(([key, value]) => {\n                list.appendChild(this.createAttributeItem(key, value));\n            });\n        }\n        else if (Array.isArray(attributes)) { // Handle case where attributes is an array of entries\n            attributes.forEach(entry => {\n                const entryName = entry['名称'] || '未知条目';\n                const li = document.createElement('li');\n                li.className = 'clickable-item';\n                li.dataset.details = JSON.stringify(entry);\n                li.innerHTML = `• ${this.formatNodeName(entryName)}`;\n                list.appendChild(li);\n            });\n        }\n        return card;\n    }\n    createAttributeItem(key, value) {\n        const item = document.createElement('li');\n        const emoji = this.extractEmojis(key)[0] || '🔸';\n        const keyHtml = `<span class=\"font-medium text-accent\">${emoji} ${this.formatNodeName(key, true)}:</span>`;\n        const isCoreItems = key.includes('核心物品');\n        if (typeof value === 'object' && value !== null && !Array.isArray(value) && 'value' in value && 'max' in value && typeof value.value === 'number' && typeof value.max === 'number') {\n            item.innerHTML = keyHtml;\n            const percentage = (value.value / value.max) * 100;\n            const container = document.createElement('div');\n            container.className = 'flex items-center space-x-2 mt-1';\n            const progressBarWrapper = document.createElement('div');\n            progressBarWrapper.className = 'progress-bar-bg w-full rounded-full h-2.5';\n            const progressBar = document.createElement('div');\n            progressBar.className = 'progress-bar-fg h-2.5 rounded-full';\n            progressBar.style.width = `${percentage}%`;\n            if (percentage < 25)\n                progressBar.classList.add('bg-red-500');\n            else if (percentage < 50)\n                progressBar.classList.add('bg-yellow-500');\n            else\n                progressBar.classList.add('bg-green-500');\n            progressBarWrapper.appendChild(progressBar);\n            const progressText = document.createElement('span');\n            progressText.className = 'text-xs text-secondary font-mono';\n            progressText.textContent = `${value.value} / ${value.max}`;\n            container.appendChild(progressBarWrapper);\n            container.appendChild(progressText);\n            item.appendChild(container);\n        }\n        else if (typeof value === 'object' && value !== null) {\n            item.innerHTML = keyHtml;\n            const subList = document.createElement('ul');\n            subList.className = 'list-disc list-inside ml-4 mt-1 space-y-1';\n            if (Array.isArray(value)) {\n                value.forEach(subValue => {\n                    const subItem = document.createElement('li');\n                    let text;\n                    if (isCoreItems && typeof subValue === 'string') {\n                        const itemName = this.formatNodeName(subValue, true).replace(/【|】|x\\d+/g, '').trim();\n                        const pokedexEntry = this.globalPokedex?.['物品']?.find(e => e.名称 === itemName);\n                        if (pokedexEntry) {\n                            subItem.classList.add('clickable-item');\n                            subItem.dataset.details = JSON.stringify(pokedexEntry);\n                        }\n                        text = this.formatNodeName(String(subValue));\n                    }\n                    else if (typeof subValue === 'object' && subValue !== null) {\n                        subItem.classList.add('clickable-item');\n                        subItem.dataset.details = JSON.stringify(subValue);\n                        const nameKey = Object.keys(subValue).find(k => k.includes('名称') || k.includes('姓名'));\n                        text = nameKey ? this.formatNodeName(String(subValue[nameKey])) : '点击查看详情';\n                    }\n                    else {\n                        text = this.formatNodeName(String(subValue));\n                    }\n                    subItem.innerHTML = `${this.extractEmojis(text)[0] || '•'} ${this.formatNodeName(text, true)}`;\n                    subList.appendChild(subItem);\n                });\n            }\n            else {\n                Object.entries(value).forEach(([subKey, subValue]) => {\n                    const subItem = this.createAttributeItem(subKey, subValue);\n                    subList.appendChild(subItem);\n                });\n            }\n            item.appendChild(subList);\n        }\n        else {\n            item.innerHTML = `${keyHtml} ${this.formatNodeName(String(value))}`;\n        }\n        return item;\n    }\n    renderActionOptions(data) {\n        const actionKey = this.findFieldByKeywords(data, ['行动']);\n        if (this.elements.optionsList) {\n            this.elements.optionsList.innerHTML = '';\n            if (actionKey && data[actionKey]) {\n                const actionData = data[actionKey];\n                const ownerKey = this.findFieldByKeywords(actionData, ['行动人', '角色']);\n                const optionsKey = this.findFieldByKeywords(actionData, ['可选行动', '选项']);\n                if (ownerKey && this.elements.actionOwner) {\n                    this.elements.actionOwner.textContent = this.formatNodeName(actionData[ownerKey]);\n                }\n                if (optionsKey && Array.isArray(actionData[optionsKey])) {\n                    actionData[optionsKey].forEach((optionText, index) => {\n                        const item = document.createElement('li');\n                        item.className = 'pl-2 py-1 border-l-2 border-dim ml-1 hover:border-indigo-400/70 transition-colors theme-transition';\n                        const cleanText = this.formatNodeName(optionText, true);\n                        item.innerHTML = `${this.extractEmojis(optionText)[0] || '▶️'} ${cleanText}`;\n                        item.dataset.optionIndex = index.toString();\n                        item.dataset.optionText = cleanText;\n                        this.elements.optionsList.appendChild(item);\n                    });\n                }\n                const customActionItem = document.createElement('li');\n                customActionItem.className = 'pl-2 py-1 border-l-2 border-dim ml-1 hover:border-indigo-400/70 transition-colors theme-transition mt-4';\n                customActionItem.innerHTML = `<i class=\"fas fa-pen-nib mr-2 text-accent\"></i> 自定义行动...`;\n                customActionItem.dataset.actionType = 'custom';\n                this.elements.optionsList.appendChild(customActionItem);\n            }\n            else {\n                this.elements.optionsList.innerHTML = this.createEmptyState('没有可用行动');\n            }\n        }\n    }\n    createEmptyState(message) {\n        return `<li class=\"text-center py-4 text-secondary theme-transition\"><i class=\"fas fa-info-circle mr-1\"></i>${message}</li>`;\n    }\n    handleError(error) {\n        console.error('渲染错误:', error);\n        const errorHtml = `<div class=\"bg-red-900/20 border border-red-800/30 text-red-400 px-4 py-3 rounded relative\" role=\"alert\">\n            <strong class=\"font-bold\">加载失败: </strong>\n            <span class=\"block sm:inline\">${error.message}</span>\n        </div>`;\n        if (this.elements.charactersContainer)\n            this.elements.charactersContainer.innerHTML = errorHtml;\n        if (this.elements.optionsList)\n            this.elements.optionsList.innerHTML = `<li>${errorHtml}</li>`;\n        const actionOwnerParent = this.elements.actionOwner?.parentElement;\n        if (actionOwnerParent)\n            actionOwnerParent.style.display = 'none';\n    }\n    handleParsingFailure(rawText, error) {\n        if (this.elements.statusBarTitle)\n            this.elements.statusBarTitle.textContent = 'JSON解析失败';\n        const safeRawText = String(rawText || '');\n        let errorMessage = \"未知错误\";\n        if (error instanceof Error) {\n            errorMessage = error.message;\n        }\n        else {\n            errorMessage = String(error);\n        }\n        const errorHtml = `\n            <div class=\"bg-orange-800/20 border border-orange-700/30 text-orange-300 px-4 py-3 rounded-lg relative\" role=\"alert\">\n                <strong class=\"font-bold\">解析失败:</strong>\n                <span class=\"block sm:inline\">${errorMessage}</span>\n                <p class=\"mt-2 text-sm\">已为您显示原始输出内容，请检查格式：</p>\n            </div>\n            <pre class=\"bg-gray-900/50 text-white p-4 rounded-lg mt-2 whitespace-pre-wrap text-xs leading-relaxed\"><code>${safeRawText.replace(/</g, '<').replace(/>/g, '>')}</code></pre>\n        `;\n        if (this.elements.charactersContainer) {\n            this.elements.charactersContainer.innerHTML = errorHtml;\n            this.elements.charactersContainer.classList.remove('md:grid-cols-2');\n        }\n        if (this.elements.optionsList)\n            this.elements.optionsList.innerHTML = '';\n        const actionOwnerParent = this.elements.actionOwner?.parentElement;\n        if (actionOwnerParent)\n            actionOwnerParent.style.display = 'none';\n    }\n    extractEmojis(text) {\n        if (!_.isString(text)) {\n            return [];\n        }\n        const emojiRegex = /[\\u{1F600}-\\u{1F64F}\\u{1F300}-\\u{1F5FF}\\u{1F900}-\\u{1F9FF}\\u{1FA70}-\\u{1FAFF}\\u{1F680}-\\u{1F6FF}\\u{1F1E0}-\\u{1F1FF}\\u{2600}-\\u{26FF}\\u{2700}-\\u{27BF}]/gu;\n        return text.match(emojiRegex) || [];\n    }\n    formatNodeName(name, removeAllEmoji = false) {\n        if (!_.isString(name) && !_.isNumber(name)) {\n            return '';\n        }\n        let cleanName = _.toString(name);\n        cleanName = _.replace(cleanName, /^\\d+\\.\\s*/, '');\n        if (removeAllEmoji) {\n            const emojiRegex = /[\\u{1F600}-\\u{1F64F}\\u{1F300}-\\u{1F5FF}\\u{1F680}-\\u{1F6FF}\\u{1F1E0}-\\u{1F1FF}\\u{2600}-\\u{26FF}\\u{2700}-\\u{27BF}]/gu;\n            cleanName = _.replace(cleanName, emojiRegex, '');\n        }\n        return _.trim(cleanName);\n    }\n}\nfunction initCustomActionModal() {\n    const modal = $('#custom-action-modal');\n    const input = $('#custom-action-input');\n    const confirmBtn = $('#confirm-action-btn');\n    const cancelBtn = $('#cancel-action-btn');\n    const optionsList = $('#options-list');\n    let currentTarget = null;\n    const showModal = (target) => {\n        currentTarget = target;\n        modal.insertAfter(target);\n        modal.removeClass('hidden').addClass('is-open');\n        input.val('').trigger('focus');\n    };\n    const hideModal = () => {\n        if (currentTarget) {\n            modal.removeClass('is-open').addClass('hidden');\n            optionsList.append(modal);\n            currentTarget = null;\n        }\n    };\n    const confirmAction = async () => {\n        const userInput = input.val().trim();\n        if (userInput) {\n            hideModal();\n            const messageId = getCurrentMessageId();\n            const variables = getVariables({ type: 'message', message_id: messageId });\n            const variablesString = JSON.stringify(variables, null, 2);\n            const command = `/send ${userInput}\\n\\n<variables>\\n${variablesString}\\n</variables> | /trigger`;\n            toastr.info('正在执行自定义行动...');\n            await triggerSlash(command);\n            toastr.success('自定义行动已发送！');\n        }\n        else {\n            toastr.warning('请输入行动内容。');\n        }\n    };\n    cancelBtn.on('click', hideModal);\n    confirmBtn.on('click', confirmAction);\n    return { showModal };\n}\nfunction initDetailsModal() {\n    const modalOverlay = document.getElementById('details-modal');\n    const modalTitle = document.getElementById('modal-title');\n    const modalBody = document.getElementById('modal-body');\n    const closeModalBtn = document.getElementById('modal-close-btn');\n    if (!modalOverlay || !modalTitle || !modalBody || !closeModalBtn) {\n        throw new Error('详情模态框的必要DOM元素未找到！');\n    }\n    const hideModal = () => modalOverlay.classList.add('hidden');\n    closeModalBtn.addEventListener('click', hideModal);\n    modalOverlay.addEventListener('click', (e) => {\n        if (e.target === modalOverlay)\n            hideModal();\n    });\n    const showModalWithData = (data) => {\n        if (typeof data === 'object' && data !== null) {\n            const titleKey = Object.keys(data).find(k => k.includes('名称') || k.includes('姓名'));\n            modalTitle.textContent = titleKey ? data[titleKey] : '详情';\n            let bodyHtml = '<ul>';\n            for (const [key, value] of Object.entries(data)) {\n                bodyHtml += `<li><span class=\"item-key\">${key}:</span> ${value}</li>`;\n            }\n            bodyHtml += '</ul>';\n            modalBody.innerHTML = bodyHtml;\n        }\n        else {\n            modalTitle.textContent = '详情';\n            modalBody.textContent = String(data);\n        }\n        modalOverlay.classList.remove('hidden');\n    };\n    document.body.addEventListener('click', (e) => {\n        const target = e.target;\n        const clickableItem = target.closest('.clickable-item');\n        if (clickableItem) {\n            const dataString = clickableItem.dataset.details;\n            if (dataString) {\n                try {\n                    const data = JSON.parse(dataString);\n                    showModalWithData(data);\n                }\n                catch (err) {\n                    console.error(\"解析详情数据失败:\", err);\n                    toastr.error(\"无法显示详情。\");\n                }\n            }\n        }\n    });\n    return { showModalWithData };\n}\nasync function requestSystemRefresh(systemName, button) {\n    const originalContent = button.html();\n    button.prop('disabled', true).find('i').addClass('fa-spin');\n    const command = `/send [SYSTEM] 【${systemName}系统】：“让我看看……有什么新东西可以给你……”（玩家请求刷新${systemName}列表） | /trigger`;\n    toastr.info(`正在请求刷新${systemName}...`);\n    try {\n        await triggerSlash(command);\n        toastr.success(`刷新请求已发送！`);\n    }\n    catch (error) {\n        console.error(`刷新${systemName}失败:`, error);\n        toastr.error(\"请求失败，请查看控制台。\");\n    }\n    finally {\n        setTimeout(() => {\n            button.prop('disabled', false).html(originalContent);\n        }, 1000);\n    }\n}\nfunction initRewardsModal() {\n    const modal = document.getElementById('rewards-modal');\n    const closeModalBtn = document.getElementById('rewards-modal-close-btn');\n    const modalBody = document.getElementById('rewards-modal-body');\n    const refreshBtn = document.getElementById('refresh-rewards-btn');\n    const hideModal = () => modal?.classList.add('hidden');\n    closeModalBtn?.addEventListener('click', hideModal);\n    modal?.addEventListener('click', (e) => {\n        if (e.target === modal)\n            hideModal();\n    });\n    refreshBtn?.addEventListener('click', (e) => {\n        requestSystemRefresh('成就奖励', $(e.currentTarget));\n    });\n    const showModalWithRewards = (rewardsJsonString, currentPoints) => {\n        if (!modalBody)\n            return;\n        try {\n            const rewardsData = JSON.parse(rewardsJsonString);\n            let html = `<p class=\"text-sm text-secondary mb-4\">${rewardsData.description || ''}</p>`;\n            const isMobile = window.innerWidth < 768;\n            rewardsData.tiers?.forEach((tier) => {\n                html += `\n          <details class=\"group border-t border-dim mt-4 pt-2\" ${isMobile ? '' : 'open'}>\n            <summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center py-2\">\n              <span>${tier.tier_name || '奖励'} <span class=\"text-sm text-secondary font-normal\">(${tier.cost_range || ''})</span></span>\n              <i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i>\n            </summary>\n            <ul class=\"space-y-3 mt-2\">\n        `;\n                tier.rewards?.forEach((reward) => {\n                    const canAfford = currentPoints >= reward.cost;\n                    html += `\n            <li class=\"p-4 rounded-lg bg-secondary border border-dim\">\n              <div class=\"flex justify-between items-start\">\n                <div>\n                  <p class=\"font-semibold text-primary\">${reward.name || '未知奖励'}</p>\n                  <p class=\"text-xs text-secondary mt-1\">${reward.description || ''}</p>\n                </div>\n                <button \n                  class=\"btn-primary redeem-btn whitespace-nowrap ml-4 text-sm\"\n                  data-name=\"${reward.name}\" \n                  data-cost=\"${reward.cost}\"\n                  ${!canAfford ? 'disabled' : ''}\n                >\n                  ${reward.cost} <i class=\"fas fa-star text-xs\"></i>\n                </button>\n              </div>\n            </li>\n          `;\n                });\n                html += '</ul></details>';\n            });\n            modalBody.innerHTML = html;\n        }\n        catch (error) {\n            console.error(\"解析奖励JSON失败:\", error);\n            toastr.error(\"无法解析奖励列表。\");\n            modalBody.innerHTML = `<p class=\"text-red-400\">加载奖励失败，请检查世界书条目格式。</p>`;\n        }\n        modal?.classList.remove('hidden');\n    };\n    modalBody?.addEventListener('click', async (e) => {\n        const target = e.target;\n        if (target.classList.contains('redeem-btn')) {\n            const itemName = target.dataset.name;\n            const itemCost = parseInt(target.dataset.cost || '0', 10);\n            const command = `/send [SYSTEM] Player wants to redeem the reward: \"${itemName}\" (Cost: ${itemCost} points). | /trigger`;\n            toastr.info(`正在尝试兑换: ${itemName}...`);\n            try {\n                await triggerSlash(command);\n                toastr.success(`兑换请求已发送！`);\n                hideModal();\n            }\n            catch (error) {\n                console.error(\"兑换失败:\", error);\n                toastr.error(\"兑换失败，请查看控制台。\");\n            }\n        }\n    });\n    return { showModalWithRewards };\n}\nfunction initRemoteSyncModal(showModalWithData) {\n    const openModalBtn = document.getElementById('remote-sync-btn');\n    const modal = document.getElementById('remote-sync-modal');\n    const closeModalBtn = document.getElementById('remote-sync-close-btn');\n    const tabs = modal?.querySelectorAll('.main-tab-btn');\n    const submitTab = document.getElementById('remote-submit-tab');\n    const fetchTab = document.getElementById('remote-fetch-tab');\n    const localDiffList = document.getElementById('local-diff-list');\n    const remoteDiffList = document.getElementById('remote-diff-list');\n    const fetchRemoteBtn = document.getElementById('fetch-from-remote-btn');\n    const submitControls = document.getElementById('submit-to-remote-controls');\n    const importControls = document.getElementById('import-from-remote-controls');\n    const submitToRemoteBtn = document.getElementById('submit-to-remote-btn');\n    const importFromRemoteBtn = document.getElementById('import-from-remote-btn');\n    let remoteDataCache = null;\n    const showModal = async () => {\n        modal?.classList.remove('hidden');\n        // Default to submit tab\n        tabs?.forEach(t => t.getAttribute('data-tab') === 'submit' ? t.classList.add('active') : t.classList.remove('active'));\n        submitTab?.classList.remove('hidden');\n        fetchTab?.classList.add('hidden');\n        submitControls?.classList.remove('hidden');\n        importControls?.classList.add('hidden');\n        fetchRemoteBtn?.classList.add('hidden');\n        await populateSubmitList();\n    };\n    const hideModal = () => modal?.classList.add('hidden');\n    const populateSubmitList = async () => {\n        if (!localDiffList)\n            return;\n        localDiffList.innerHTML = `<p class=\"text-center text-secondary p-4\">正在计算差异...</p>`;\n        const localPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\n        const localAchievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\n        const remote = remoteDataCache || await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getRemotePokedex();\n        if (remote)\n            remoteDataCache = remote;\n        let diffHtml = '';\n        let diffCount = 0;\n        const types = ['妖兽', '植物', '物品', '成就'];\n        types.forEach(type => {\n            const localEntries = type === '成就' ? localAchievements : localPokedex[type];\n            const remoteEntries = remote ? (remote[type] || []) : [];\n            const remoteNames = new Set(remoteEntries.map(e => e.名称));\n            const diffEntries = localEntries.filter(e => !remoteNames.has(e.名称));\n            if (diffEntries.length > 0) {\n                diffCount += diffEntries.length;\n                diffHtml += `<h4 class=\"font-semibold text-primary/90 mt-2 first:mt-0\">${type}</h4><ul>`;\n                diffEntries.forEach(entry => {\n                    diffHtml += `\n            <li class=\"p-2 rounded-lg bg-main/50 flex justify-between items-center\">\n              <label class=\"flex items-center cursor-pointer flex-grow mr-4\">\n                <input type=\"checkbox\" class=\"mr-3\" data-type=\"${type}\" data-name=\"${entry.名称}\">\n                <span class=\"truncate\" title=\"${entry.名称}\">${entry.名称}</span>\n              </label>\n              <div class=\"space-x-2 flex-shrink-0\">\n                <button class=\"pokedex-view-btn text-sm text-blue-400 hover:text-blue-300 transition-colors p-1\" data-type=\"${type}\" data-name=\"${entry.名称}\" data-source=\"local\" title=\"查看\"><i class=\"fas fa-eye\"></i></button>\n              </div>\n            </li>`;\n                });\n                diffHtml += `</ul>`;\n            }\n        });\n        if (diffCount === 0) {\n            localDiffList.innerHTML = `<p class=\"text-center text-secondary p-4\">恭喜！您的本地图鉴已全部同步至社区。</p>`;\n        }\n        else {\n            localDiffList.innerHTML = diffHtml;\n        }\n    };\n    openModalBtn?.addEventListener('click', showModal);\n    closeModalBtn?.addEventListener('click', hideModal);\n    modal?.addEventListener('click', async (e) => {\n        if (e.target === modal) {\n            hideModal();\n            return;\n        }\n        const target = e.target;\n        const viewButton = target.closest('.pokedex-view-btn');\n        if (viewButton) {\n            const type = viewButton.getAttribute('data-type');\n            const name = viewButton.getAttribute('data-name');\n            const source = viewButton.getAttribute('data-source');\n            if (type && name && source) {\n                let entry;\n                if (source === 'local') {\n                    if (type === '成就') {\n                        const localAchievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\n                        entry = localAchievements.find(e => e.名称 === name);\n                    }\n                    else {\n                        const localPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\n                        entry = localPokedex[type]?.find(e => e.名称 === name);\n                    }\n                }\n                else if (source === 'remote' && remoteDataCache) {\n                    entry = (remoteDataCache[type] || []).find(e => e.名称 === name);\n                }\n                if (entry) {\n                    showModalWithData(entry);\n                }\n                else {\n                    toastr.warning('无法找到该条目的详细信息。');\n                }\n            }\n        }\n    });\n    tabs?.forEach(button => {\n        button.addEventListener('click', () => {\n            tabs.forEach(btn => btn.classList.remove('active'));\n            button.classList.add('active');\n            const tab = button.getAttribute('data-tab');\n            if (tab === 'submit') {\n                submitTab?.classList.remove('hidden');\n                fetchTab?.classList.add('hidden');\n                submitControls?.classList.remove('hidden');\n                importControls?.classList.add('hidden');\n                fetchRemoteBtn?.classList.add('hidden');\n                populateSubmitList();\n            }\n            else {\n                submitTab?.classList.add('hidden');\n                fetchTab?.classList.remove('hidden');\n                submitControls?.classList.add('hidden');\n                importControls?.classList.remove('hidden');\n                fetchRemoteBtn?.classList.remove('hidden');\n                if (remoteDiffList)\n                    remoteDiffList.innerHTML = `<p class=\"text-center text-secondary p-4\">请先点击下方按钮从社区获取列表。</p>`;\n            }\n        });\n    });\n    fetchRemoteBtn?.addEventListener('click', async () => {\n        if (!remoteDiffList)\n            return;\n        remoteDiffList.innerHTML = `<p class=\"text-center text-secondary p-4\">正在从社区获取...</p>`;\n        const localPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\n        const localAchievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\n        const remote = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getRemotePokedex();\n        if (!remote) {\n            remoteDiffList.innerHTML = `<p class=\"text-center text-red-400 p-4\">获取失败，请检查服务器连接或查看控制台。</p>`;\n            return;\n        }\n        remoteDataCache = remote;\n        let diffHtml = '';\n        let diffCount = 0;\n        const types = ['妖兽', '植物', '物品', '成就'];\n        types.forEach(type => {\n            const localEntries = type === '成就' ? localAchievements : localPokedex[type];\n            const localNames = new Set(localEntries.map(e => e.名称));\n            const remoteEntries = remote[type] || [];\n            const diffEntries = remoteEntries.filter(e => !localNames.has(e.名称));\n            if (diffEntries.length > 0) {\n                diffCount += diffEntries.length;\n                diffHtml += `<h4 class=\"font-semibold text-primary/90 mt-2 first:mt-0\">${type}</h4><ul>`;\n                diffEntries.forEach(entry => {\n                    diffHtml += `\n            <li class=\"p-2 rounded-lg bg-main/50 flex justify-between items-center\">\n              <label class=\"flex items-center cursor-pointer flex-grow mr-4\">\n                <input type=\"checkbox\" class=\"mr-3\" data-type=\"${type}\" data-name=\"${entry.名称}\">\n                <span class=\"truncate\" title=\"${entry.名称}\">${entry.名称}</span>\n              </label>\n              <div class=\"space-x-2 flex-shrink-0\">\n                <button class=\"pokedex-view-btn text-sm text-blue-400 hover:text-blue-300 transition-colors p-1\" data-type=\"${type}\" data-name=\"${entry.名称}\" data-source=\"remote\" title=\"查看\"><i class=\"fas fa-eye\"></i></button>\n              </div>\n            </li>`;\n                });\n                diffHtml += `</ul>`;\n            }\n        });\n        if (diffCount === 0) {\n            remoteDiffList.innerHTML = `<p class=\"text-center text-secondary p-4\">恭喜！您的本地图鉴与社区保持同步。</p>`;\n        }\n        else {\n            remoteDiffList.innerHTML = diffHtml;\n        }\n    });\n    submitToRemoteBtn?.addEventListener('click', async () => {\n        const checkboxes = localDiffList?.querySelectorAll('input[type=\"checkbox\"]:checked');\n        if (!checkboxes || checkboxes.length === 0) {\n            toastr.warning('请至少选择一个要分享的条目。');\n            return;\n        }\n        const providerInput = document.getElementById('provider-name-input');\n        const providerName = providerInput?.value.trim() || undefined; // Use undefined if empty\n        const localPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\n        const localAchievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\n        let successCount = 0;\n        for (const cb of checkboxes) {\n            const type = cb.dataset.type;\n            const name = cb.dataset.name;\n            if (type && name) {\n                const entry = type === '成就'\n                    ? localAchievements.find(e => e.名称 === name)\n                    : localPokedex[type].find(e => e.名称 === name);\n                if (entry) {\n                    await _pokedex__WEBPACK_IMPORTED_MODULE_2__.submitToHuggingFace(type, entry, providerName);\n                    successCount++;\n                }\n            }\n        }\n        if (successCount > 0) {\n            toastr.success(`成功分享了 ${successCount} 个条目！`);\n            remoteDataCache = null; // Invalidate cache\n            await populateSubmitList();\n        }\n    });\n    importFromRemoteBtn?.addEventListener('click', async () => {\n        const checkboxes = remoteDiffList?.querySelectorAll('input[type=\"checkbox\"]:checked');\n        if (!checkboxes || checkboxes.length === 0 || !remoteDataCache) {\n            toastr.warning('请至少选择一个要导入的条目。');\n            return;\n        }\n        let successCount = 0;\n        for (const cb of checkboxes) {\n            const type = cb.dataset.type;\n            const name = cb.dataset.name;\n            if (type && name) {\n                const entry = (remoteDataCache[type] || []).find(e => e.名称 === name);\n                if (entry) {\n                    let success = false;\n                    if (type === '成就') {\n                        success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createAchievement(entry);\n                    }\n                    else {\n                        success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, entry);\n                    }\n                    if (success) {\n                        successCount++;\n                    }\n                }\n            }\n        }\n        if (successCount > 0) {\n            toastr.success(`成功导入了 ${successCount} 个新条目到您的本地图鉴！`);\n            hideModal();\n        }\n    });\n}\nasync function initVersionChecker() {\n    const $versionBtn = $('#version-info-btn');\n    if (!$versionBtn.length)\n        return;\n    const updateInfo = await (0,_version__WEBPACK_IMPORTED_MODULE_4__.checkForUpdates)();\n    if (updateInfo?.hasUpdate) {\n        // Add a small notification dot\n        $versionBtn.append('<span class=\"absolute top-0 right-0 block h-2 w-2 rounded-full ring-2 ring-white bg-red-500\"></span>');\n    }\n    $versionBtn.on('click', async () => {\n        const info = await (0,_version__WEBPACK_IMPORTED_MODULE_4__.checkForUpdates)();\n        if (info?.hasUpdate && info.changelogHtml) {\n            (0,_version__WEBPACK_IMPORTED_MODULE_4__.showChangelogModal)(info.changelogHtml);\n        }\n        else if (info) {\n            toastr.success(`你当前使用的是最新版本 (${info.remoteVersion})。`, '已是最新');\n        }\n    });\n}\n$(() => {\n    initGlobalControls();\n    const storyRenderer = new StoryRenderer();\n    const { showModalWithData } = initDetailsModal();\n    initVersionChecker();\n    initPokedexManager(storyRenderer, showModalWithData);\n    initRemoteSyncModal(showModalWithData);\n    storyRenderer.init();\n    const customActionModal = initCustomActionModal();\n    const rewardsModal = initRewardsModal();\n    $(document).on('click', '#redeem-rewards-btn', async () => {\n        try {\n            toastr.info('正在获取奖励列表...');\n            const bookName = \"什么？我要在玄幻修仙世界种田？\";\n            const entryKey = \"成就系统的奖励\";\n            const worldbook = await getWorldbook(bookName);\n            const entry = worldbook.find(e => e.name === entryKey);\n            if (entry && entry.content) {\n                const messageId = getCurrentMessageId();\n                const currentVars = getVariables({ type: 'message', message_id: messageId });\n                const currentPoints = _.get(currentVars, '世界.系统.成就点数', 0);\n                rewardsModal.showModalWithRewards(entry.content, currentPoints);\n            }\n            else {\n                toastr.warning('未找到可兑换的奖励信息。');\n            }\n        }\n        catch (error) {\n            console.error(\"获取奖励失败:\", error);\n            toastr.error(\"获取奖励列表失败，请查看控制台。\");\n        }\n    });\n    $(document).on('click', '#sign-in-btn', async (e) => {\n        const target = $(e.currentTarget);\n        target.prop('disabled', true);\n        const messageId = getCurrentMessageId();\n        const variables = getVariables({ type: 'message', message_id: messageId });\n        const systemData = _.get(variables, '世界.系统', {});\n        const consecutiveDays = systemData['连续签到'] || 0;\n        const monthlyCard = systemData['月卡'] || '未激活';\n        let signInMessage = `[SYSTEM] 玩家要进行每日签到。`;\n        if (monthlyCard !== '未激活') {\n            signInMessage += `\\n当前月卡状态: ${monthlyCard}。`;\n        }\n        signInMessage += `\\n当前已连续签到: ${consecutiveDays}天。`;\n        const command = `/send ${signInMessage} | /trigger`;\n        try {\n            await triggerSlash(command);\n            toastr.success(`签到请求已发送！`);\n            const today = new Date().getDate();\n            const calendarGrid = $('#calendar-grid');\n            const todayCell = calendarGrid.find(`[data-day=\"${today}\"]`);\n            if (todayCell.length) {\n                todayCell.removeClass('bg-accent/30 text-accent font-bold ring-2 ring-accent')\n                    .addClass('bg-green-500/50 text-white')\n                    .html('<i class=\"fas fa-check\"></i>')\n                    .attr('title', `第${today}天：已签到`);\n            }\n            target.html('<i class=\"fas fa-calendar-check mr-2\"></i>今日已签到');\n        }\n        catch (error) {\n            console.error(\"签到失败:\", error);\n            toastr.error(\"签到失败，请查看控制台。\");\n            target.prop('disabled', false);\n        }\n    });\n    $(document).on('click', '#activate-monthly-card-btn', async (e) => {\n        const target = $(e.currentTarget);\n        target.prop('disabled', true).text('询问中...');\n        const command = `/send [SYSTEM] 玩家想要激活签到系统的月卡，请告知激活条件和效果。 | /trigger`;\n        toastr.info(`正在询问激活条件...`);\n        try {\n            await triggerSlash(command);\n            toastr.success(`请求已发送！`);\n        }\n        catch (error) {\n            console.error(\"激活月卡失败:\", error);\n            toastr.error(\"请求失败，请查看控制台。\");\n            target.prop('disabled', false).text('激活');\n        }\n    });\n    $('#options-list').on('click', async (e) => {\n        const targetLi = $(e.target).closest('li');\n        if (!targetLi.length)\n            return;\n        const optionsList = $('#options-list');\n        if (optionsList.hasClass('disabled')) {\n            toastr.info('正在等待回应，请稍后...');\n            return;\n        }\n        const actionType = targetLi.data('actionType');\n        if (actionType === 'custom') {\n            customActionModal.showModal(targetLi);\n        }\n        else {\n            const optionText = targetLi.data('optionText');\n            const optionIndex = parseInt(targetLi.data('optionIndex'), 10);\n            if (optionText && !isNaN(optionIndex)) {\n                // 禁用所有选项并显示加载状态\n                optionsList.addClass('disabled').html(`\n          <li class=\"text-center py-4 text-secondary theme-transition\">\n            <div class=\"flex justify-center items-center\">\n              <div class=\"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-indigo-400 mr-3\"></div>\n              <span>等待彼界的回应...</span>\n            </div>\n          </li>\n        `);\n                await triggerAction(optionText, optionIndex);\n                // 此时不需要做任何事，因为界面将随新消息一起重新渲染\n            }\n        }\n    });\n    $(document).on('click', '.barter-btn', async (e) => {\n        const target = $(e.currentTarget);\n        target.prop('disabled', true);\n        const originalText = target.html();\n        target.html('<i class=\"fas fa-spinner fa-spin\"></i>');\n        const itemName = target.data('name');\n        const itemCost = parseInt(target.data('cost') || '0', 10);\n        if (!itemName || isNaN(itemCost)) {\n            toastr.error('无法获取物品信息。');\n            target.prop('disabled', false).html(originalText);\n            return;\n        }\n        const messageId = getCurrentMessageId();\n        const variables = getVariables({ type: 'message', message_id: messageId });\n        const myItems = _.get(variables, '世界.系统.我的物品', []);\n        const totalValue = _.sumBy(myItems, (item) => (item['数量'] || 0) * (item['价值'] || 0));\n        const command = `/send [SYSTEM] 【以物换物系统】：“嘿，朋友！我看到你想用你那堆价值 ${totalValue} 的宝贝，来换我的【${itemName}】（价值 ${itemCost}）。让我想想……” | /trigger`;\n        toastr.info(`正在尝试换取: ${itemName}...`);\n        try {\n            await triggerSlash(command);\n            toastr.success(`换取请求已发送！`);\n        }\n        catch (error) {\n            console.error(\"换取失败:\", error);\n            toastr.error(\"换取失败，请查看控制台。\");\n            target.prop('disabled', false).html(originalText);\n        }\n    });\n    $(document).on('click', '#refresh-barter-btn', async (e) => {\n        requestSystemRefresh('以物换物', $(e.currentTarget));\n    });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzQjtBQUM4QjtBQUVmO0FBQ0k7QUFDdUI7QUFFaEUsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUFFLElBQVksRUFBRSxLQUFhLEVBQUUsRUFBRTtJQUMxRCxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEtBQUssQ0FBQztRQUFFLE9BQU87SUFFOUMsSUFBSSxDQUFDO1FBQ0gsWUFBWTtRQUNaLE1BQU0sU0FBUyxHQUFHLG1CQUFtQixFQUFFLENBQUM7UUFDeEMsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUUzRSxlQUFlO1FBQ2YsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7UUFFOUIsWUFBWTtRQUNaLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztRQUUzRCxlQUFlO1FBQ2YsTUFBTSxRQUFRLEdBQUcsK0lBQStJLENBQUM7UUFFakssb0JBQW9CO1FBQ3BCLE1BQU0sY0FBYyxHQUFHLGdCQUFnQixRQUFRLE9BQU8sZUFBZSxnQkFBZ0IsQ0FBQztRQUV0RixhQUFhO1FBQ2IsTUFBTSxhQUFhLEdBQUcsR0FBRyxjQUFjLE9BQU8sSUFBSSxFQUFFLENBQUM7UUFFckQsa0JBQWtCO1FBQ2xCLE1BQU0sT0FBTyxHQUFHLFNBQVMsYUFBYSxhQUFhLENBQUM7UUFDcEQsTUFBTSxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFNUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7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QTRCLENBQUMsQ0FBQyxDQUFDO0lBQ2xFLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+S7gOS5iOaIkeimgeWcqOeOhOW5u+S/ruS7meS4lueVjOenjeeUsC9pbmRleC50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuL2luZGV4LnNjc3MnO1xuaW1wb3J0IHsgZXh0cmFjdEpzb25Gcm9tU3RhdHVzQmFyIH0gZnJvbSAnLi9wYXJzZXInO1xuaW1wb3J0IHR5cGUgeyBQb2tlZGV4RGF0YSwgUG9rZWRleEVudHJ5LCBQb2tlZGV4VHlwZSwgUmVtb3RlUG9rZWRleERhdGEsIFNoYXJlYWJsZVR5cGUgfSBmcm9tICcuL3Bva2VkZXgnO1xuaW1wb3J0ICogYXMgUG9rZWRleCBmcm9tICcuL3Bva2VkZXgnO1xuaW1wb3J0IHsgcmVuZGVyU3lzdGVtIH0gZnJvbSAnLi9zeXN0ZW1zJztcbmltcG9ydCB7IGNoZWNrRm9yVXBkYXRlcywgc2hvd0NoYW5nZWxvZ01vZGFsIH0gZnJvbSAnLi92ZXJzaW9uJztcblxuY29uc3QgdHJpZ2dlckFjdGlvbiA9IGFzeW5jICh0ZXh0OiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgaWYgKCF0ZXh0IHx8IHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gIHRyeSB7XG4gICAgLy8g6I635Y+W5b2T5YmN5qW85bGC55qE5Y+Y6YePXG4gICAgY29uc3QgbWVzc2FnZUlkID0gZ2V0Q3VycmVudE1lc3NhZ2VJZCgpO1xuICAgIGNvbnN0IHZhcmlhYmxlcyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuXG4gICAgLy8g5bCG6KGM5Yqo6YCJ5oup5Lmf5re75Yqg5Yiw5Y+Y6YeP5LitXG4gICAgdmFyaWFibGVzWyfooYzliqjpgInmi6knXSA9IGluZGV4ICsgMTtcbiAgICBcbiAgICAvLyDlsIblj5jph4/ovazmjaLkuLrlrZfnrKbkuLJcbiAgICBjb25zdCB2YXJpYWJsZXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeSh2YXJpYWJsZXMsIG51bGwsIDIpO1xuXG4gICAgLy8g5YeG5aSH5Y+R6YCB57uZQUnnmoTlvJXlr7zmlofmnKxcbiAgICBjb25zdCBwcmVhbWJsZSA9IGBbT09DOiDku6XkuIvmmK/lj5HpgIHnu5nkvaDnmoTjgIHnlKjkuo7pqbHliqjliafmg4XnmoTlrozmlbTmuLjmiI/nirbmgIHjgILor7fku5Tnu4bpmIXor7vlubbkvp3mja7mraTnirbmgIHlkozmiJHpgInmi6nnmoTooYzliqjmnaXnlJ/miJDlkI7nu63mg4XoioLjgIJdXFxuXFxuKirlvZPliY3muLjmiI/nirbmgIEqKjpcXG7ov5nmmK/lvZPliY3mpbzlsYLnmoTmiYDmnInlj5jph4/kv6Hmga/vvIzlroPku6PooajkuobmuLjmiI/kuJbnlYznmoTlrozmlbTlv6vnhafvvIzljIXmi6zop5LoibLnirbmgIHjgIHnianlk4HjgIHlm77pibTjgIHns7vnu5/ov5vluqbnrYnjgILor7flsIbov5nkupvkv6Hmga/kvZzkuLrkvaDnlJ/miJDlm57lupTnmoTllK/kuIDnnJ/lrp7mnaXmupDjgIJgO1xuICAgIFxuICAgIC8vIOWwhuW8leWvvOaWh+acrOWSjOWPmOmHj0pTT07pg73ljIXoo7notbfmnaVcbiAgICBjb25zdCB3cmFwcGVkQ29udGVudCA9IGA8dmFyaWFibGVzPlxcbiR7cHJlYW1ibGV9XFxuXFxuJHt2YXJpYWJsZXNTdHJpbmd9XFxuPC92YXJpYWJsZXM+YDtcblxuICAgIC8vIOWHhuWkh+acgOe7iOimgeWPkemAgeeahOa2iOaBr1xuICAgIGNvbnN0IG1lc3NhZ2VUb1NlbmQgPSBgJHt3cmFwcGVkQ29udGVudH1cXG5cXG4ke3RleHR9YDtcblxuICAgIC8vIOS9v+eUqCAvc2VuZCDlkb3ku6Tlj5HpgIHmtojmga9cbiAgICBjb25zdCBjb21tYW5kID0gYC9zZW5kICR7bWVzc2FnZVRvU2VuZH0gfCAvdHJpZ2dlcmA7XG4gICAgYXdhaXQgdHJpZ2dlclNsYXNoKGNvbW1hbmQpO1xuICAgIFxuICAgIHRvYXN0ci5zdWNjZXNzKGDlt7LpgInmi6nooYzliqg6ICR7dGV4dH1gKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi6KGM5Yqo5aSx6LSlOlwiLCBlcnJvcik7XG4gICAgdG9hc3RyLmVycm9yKFwi6KGM5Yqo5aSx6LSl77yM6K+35p+l55yL5o6n5Yi25Y+w5pel5b+X44CCXCIpO1xuICAgIC8vIOWmguaenOWksei0pe+8jOmcgOimgeaBouWkjemAiemhueWIl+ihqFxuICAgIGNvbnN0IG9wdGlvbnNMaXN0ID0gJCgnI29wdGlvbnMtbGlzdCcpO1xuICAgIGlmIChvcHRpb25zTGlzdC5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuICAgICAgLy8g6L+Z6YeM6ZyA6KaB5LiA5Liq5Ye95pWw5p2l6YeN5paw5riy5p+T6YCJ6aG577yM5pqC5pe25YWI56e76ZmkZGlzYWJsZWTnirbmgIFcbiAgICAgIC8vIOWunumZheW6lOeUqOS4reWPr+iDvemcgOimgeiwg+eUqCBzdG9yeVJlbmRlcmVyLnJlbmRlckFjdGlvbk9wdGlvbnMoKVxuICAgICAgb3B0aW9uc0xpc3QucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7IFxuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gaW5pdEdsb2JhbENvbnRyb2xzKCkge1xuICBjb25zdCBib2R5RWxlbWVudCA9IGRvY3VtZW50LmJvZHk7XG4gIGNvbnN0IHRoZW1lRHJvcGRvd25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWUtZHJvcGRvd24tYnRuJyk7XG4gIGNvbnN0IHRoZW1lT3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVtZS1vcHRpb25zJyk7XG4gIGNvbnN0IHRoZW1lQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyN0aGVtZS1vcHRpb25zIC50aGVtZS1idG4nKTtcbiAgY29uc3Qgc2F2ZWRUaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdG9yeVRoZW1lJykgfHwgJ25pZ2h0JztcblxuICBjb25zdCBzd2l0Y2hUb1RoZW1lID0gKHRoZW1lOiBzdHJpbmcpID0+IHtcbiAgICBib2R5RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkYXktbW9kZScsICdqYWRlLW1vZGUnLCAnY2xhc3NpYy1tb2RlJyk7XG4gICAgaWYgKHRoZW1lICE9PSAnbmlnaHQnKSB7XG4gICAgICBib2R5RWxlbWVudC5jbGFzc0xpc3QuYWRkKGAke3RoZW1lfS1tb2RlYCk7XG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdG9yeVRoZW1lJywgdGhlbWUpO1xuICB9O1xuXG4gIHN3aXRjaFRvVGhlbWUoc2F2ZWRUaGVtZSk7XG5cbiAgdGhlbWVEcm9wZG93bkJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhlbWVPcHRpb25zPy5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgfSk7XG5cbiAgdGhlbWVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCB0aGVtZSA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnKTtcbiAgICAgIGlmICh0aGVtZSkgc3dpdGNoVG9UaGVtZSh0aGVtZSk7XG4gICAgICB0aGVtZU9wdGlvbnM/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgZHJvcGRvd25Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGhlbWUtc3dpdGNoZXItZHJvcGRvd24nKTtcbiAgICBpZiAoZHJvcGRvd25Db250YWluZXIgJiYgIWRyb3Bkb3duQ29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSB7XG4gICAgICB0aGVtZU9wdGlvbnM/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRQb2tlZGV4TWFuYWdlcihzdG9yeVJlbmRlcmVyOiBTdG9yeVJlbmRlcmVyLCBzaG93TW9kYWxXaXRoRGF0YTogKGRhdGE6IGFueSkgPT4gdm9pZCkge1xuICBjb25zdCBtYW5hZ2VyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hbmFnZS1wb2tlZGV4LWJ0bicpO1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2tlZGV4LW1hbmFnZXItbW9kYWwnKTtcbiAgY29uc3QgY2xvc2VNb2RhbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2tlZGV4LW1hbmFnZXItY2xvc2UtYnRuJyk7XG4gIGNvbnN0IG1haW5UYWJzID0gbW9kYWw/LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYWluLXRhYi1idG4nKTtcbiAgY29uc3Qgdmlld1RhYkNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9rZWRleC12aWV3LXRhYicpO1xuICBjb25zdCBhZGRUYWJDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bva2VkZXgtYWRkLXRhYicpO1xuICBjb25zdCBpbmplY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5qZWN0LXBva2VkZXgtYnRuJyk7XG4gIGNvbnN0IHN1Ym1pdEVudHJ5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdC1lbnRyeS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgY29uc3QgaGVscEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2tlZGV4LWhlbHAtYnRuJyk7XG4gIGNvbnN0IGhlbHBDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bva2VkZXgtaGVscC1jb250ZW50Jyk7XG5cbiAgY29uc3QgZm9ybU1vZGVDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tbW9kZS1jb250ZW50Jyk7XG4gIGNvbnN0IGpzb25Nb2RlQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uLW1vZGUtY29udGVudCcpO1xuICBjb25zdCBhZGRUYWJNb2RlQnV0dG9ucyA9IGFkZFRhYkNvbnRlbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnRuJyk7XG4gIGxldCBjdXJyZW50QWRkTW9kZSA9ICdmb3JtJztcblxuICBjb25zdCBmb3JtRmllbGRzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tZmllbGRzLWNvbnRhaW5lcicpO1xuICBjb25zdCBhZGRGaWVsZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmllbGQtYnRuJyk7XG4gIGNvbnN0IGVudHJ5VHlwZVJhZGlvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJlbnRyeVR5cGVcIl0nKTtcbiAgY29uc3QganNvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24taW5wdXQnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXG4gIGNvbnN0IGNyZWF0ZUZvcm1GaWVsZFJvdyA9IChrZXkgPSAnJywgdmFsdWUgPSAnJyk6IEhUTUxFbGVtZW50ID0+IHtcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3cuY2xhc3NOYW1lID0gJ2Zvcm0tZmllbGQtcm93JztcbiAgICByb3cuaW5uZXJIVE1MID0gYFxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWtleS1pbnB1dFwiIHBsYWNlaG9sZGVyPVwi5bGe5oCnXCIgdmFsdWU9XCIke2tleX1cIj5cbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS12YWx1ZS1pbnB1dFwiIHBsYWNlaG9sZGVyPVwi5YC8XCIgdmFsdWU9XCIke3ZhbHVlfVwiPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlbW92ZS1maWVsZC1idG5cIiB0aXRsZT1cIuenu+mZpOatpOWtl+autVwiPjxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPjwvYnV0dG9uPlxuICAgIGA7XG4gICAgcm93LnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUtZmllbGQtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcm93LnJlbW92ZSgpKTtcbiAgICByZXR1cm4gcm93O1xuICB9O1xuXG4gIGNvbnN0IGFkZEZpZWxkID0gKGtleSA9ICcnLCB2YWx1ZSA9ICcnKSA9PiB7XG4gICAgZm9ybUZpZWxkc0NvbnRhaW5lcj8uYXBwZW5kQ2hpbGQoY3JlYXRlRm9ybUZpZWxkUm93KGtleSwgdmFsdWUpKTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVGb3JtRmllbGRzID0gKHR5cGU6IHN0cmluZykgPT4ge1xuICAgIGlmICghZm9ybUZpZWxkc0NvbnRhaW5lcikgcmV0dXJuO1xuICAgIGZvcm1GaWVsZHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICflppblhb0nOiBhZGRGaWVsZCgn5ZCN56ewJywgJycpOyBhZGRGaWVsZCgn562J57qnJywgJycpOyBhZGRGaWVsZCgn5Lmg5oCnJywgJycpOyBicmVhaztcbiAgICAgIGNhc2UgJ+akjeeJqSc6IGFkZEZpZWxkKCflkI3np7AnLCAnJyk7IGFkZEZpZWxkKCflk4HpmLYnLCAnJyk7IGFkZEZpZWxkKCflip/mlYgnLCAnJyk7IGJyZWFrO1xuICAgICAgY2FzZSAn54mp5ZOBJzogYWRkRmllbGQoJ+WQjeensCcsICcnKTsgYWRkRmllbGQoJ+WTgemYticsICcnKTsgYWRkRmllbGQoJ+aPj+i/sCcsICcnKTsgYnJlYWs7XG4gICAgICBjYXNlICfmiJDlsLEnOiBhZGRGaWVsZCgn5ZCN56ewJywgJycpOyBhZGRGaWVsZCgn5o+P6L+wJywgJycpOyBhZGRGaWVsZCgn5pel5pyfJywgJycpOyBhZGRGaWVsZCgn54K55pWwJywgJzAnKTsgYnJlYWs7XG4gICAgICBkZWZhdWx0OiBhZGRGaWVsZCgn5ZCN56ewJywgJycpOyBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVzZXRBZGRGb3JtID0gKCkgPT4ge1xuICAgIGlmICghc3VibWl0RW50cnlCdG4pIHJldHVybjtcbiAgICBzdWJtaXRFbnRyeUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYXMgZmEtcGx1cyBtci0yXCI+PC9pPuehruiupOa3u+WKoCc7XG4gICAgZGVsZXRlIHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQudXBkYXRlTW9kZTtcbiAgICBkZWxldGUgc3VibWl0RW50cnlCdG4uZGF0YXNldC5vcmlnaW5hbE5hbWU7XG4gICAgZGVsZXRlIHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQub3JpZ2luYWxUeXBlO1xuICAgIGNvbnN0IGNoZWNrZWRSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJlbnRyeVR5cGVcIl06Y2hlY2tlZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaWYgKGNoZWNrZWRSYWRpbykgdXBkYXRlRm9ybUZpZWxkcyhjaGVja2VkUmFkaW8udmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IHBvcHVsYXRlVmlld1RhYiA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXZpZXdUYWJDb250ZW50KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgZGlzY292ZXJpZXNTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1kaXNjb3Zlcmllcy1zZWN0aW9uJyk7XG4gICAgY29uc3QgZGlzY292ZXJpZXNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1kaXNjb3Zlcmllcy1saXN0Jyk7XG5cbiAgICAvLyAxLiBQb3B1bGF0ZSBOZXcgRGlzY292ZXJpZXNcbiAgICBpZiAoZGlzY292ZXJpZXNMaXN0ICYmIGRpc2NvdmVyaWVzU2VjdGlvbikge1xuICAgICAgZGlzY292ZXJpZXNMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc2Vjb25kYXJ5IHAtNCB0ZXh0LXNtXCI+5q2j5Zyo5qOA5p+l5paw5Y+R546wLi4uPC9wPmA7XG4gICAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgICBjb25zdCBtZXNzYWdlVmFycyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZVBva2VkZXggPSBfLmdldChtZXNzYWdlVmFycywgJ+S4lueVjC7lm77pibQnLCB7fSk7XG4gICAgICBjb25zdCBnbG9iYWxQb2tlZGV4ID0gYXdhaXQgUG9rZWRleC5nZXRQb2tlZGV4RGF0YSgpO1xuICAgICAgXG4gICAgICBsZXQgZGlmZkh0bWwgPSAnJztcbiAgICAgIGxldCBkaWZmQ291bnQgPSAwO1xuICAgICAgY29uc3QgdHlwZXM6IFBva2VkZXhUeXBlW10gPSBbJ+WmluWFvScsICfmpI3niaknLCAn54mp5ZOBJ107XG5cbiAgICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFbnRyaWVzID0gbWVzc2FnZVBva2VkZXhbdHlwZV0gfHwgW107XG4gICAgICAgIGNvbnN0IGdsb2JhbE5hbWVzID0gbmV3IFNldChnbG9iYWxQb2tlZGV4W3R5cGVdLm1hcChlID0+IGUu5ZCN56ewKSk7XG4gICAgICAgIGNvbnN0IGRpZmZFbnRyaWVzID0gbWVzc2FnZUVudHJpZXMuZmlsdGVyKChlOiBQb2tlZGV4RW50cnkpID0+IGUu5ZCN56ewICYmICFnbG9iYWxOYW1lcy5oYXMoZS7lkI3np7ApKTtcblxuICAgICAgICBpZiAoZGlmZkVudHJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGRpZmZDb3VudCArPSBkaWZmRW50cmllcy5sZW5ndGg7XG4gICAgICAgICAgZGlmZkh0bWwgKz0gYDxoNCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5LzkwIG10LTIgZmlyc3Q6bXQtMFwiPiR7dHlwZX08L2g0Pjx1bD5gO1xuICAgICAgICAgIGRpZmZFbnRyaWVzLmZvckVhY2goKGVudHJ5OiBQb2tlZGV4RW50cnkpID0+IHtcbiAgICAgICAgICAgIGRpZmZIdG1sICs9IGA8bGkgY2xhc3M9XCJwLTIgcm91bmRlZC1sZyBiZy1tYWluLzUwXCI+PGxhYmVsIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJtci0zXCIgZGF0YS10eXBlPVwiJHt0eXBlfVwiIGRhdGEtbmFtZT1cIiR7ZW50cnku5ZCN56ewfVwiIGNoZWNrZWQ+PHNwYW4+JHtlbnRyeS7lkI3np7B9PC9zcGFuPjwvbGFiZWw+PC9saT5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRpZmZIdG1sICs9IGA8L3VsPmA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZGlmZkNvdW50ID09PSAwKSB7XG4gICAgICAgIGRpc2NvdmVyaWVzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzY292ZXJpZXNTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBkaXNjb3Zlcmllc0xpc3QuaW5uZXJIVE1MID0gZGlmZkh0bWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMi4gUG9wdWxhdGUgRXhpc3RpbmcgUG9rZWRleFxuICAgIGNvbnN0IGV4aXN0aW5nUG9rZWRleENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGlzdGluZy1wb2tlZGV4LWxpc3QnKTtcbiAgICBpZiAoIWV4aXN0aW5nUG9rZWRleENvbnRhaW5lcikgcmV0dXJuO1xuICAgIGV4aXN0aW5nUG9rZWRleENvbnRhaW5lci5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHAtNFwiPjxkaXYgY2xhc3M9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1pbmRpZ28tNDAwXCI+PC9kaXY+PC9kaXY+YDtcbiAgICBjb25zdCBwb2tlZGV4RGF0YSA9IGF3YWl0IFBva2VkZXguZ2V0UG9rZWRleERhdGEoKTtcbiAgICBsZXQgaHRtbCA9ICcnO1xuICAgIGNvbnN0IHR5cGVzOiBQb2tlZGV4VHlwZVtdID0gWyflppblhb0nLCAn5qSN54mpJywgJ+eJqeWTgSddO1xuICAgIFxuICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gcG9rZWRleERhdGFbdHlwZV07XG4gICAgICBodG1sICs9IGA8ZGV0YWlscyBjbGFzcz1cImdyb3VwXCIgb3Blbj48c3VtbWFyeSBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWxnIGN1cnNvci1wb2ludGVyIGhvdmVyOnRleHQtYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIHRoZW1lLXRyYW5zaXRpb24gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHB5LTJcIj4ke3R5cGV95Zu+6Ym0ICgke2VudHJpZXMubGVuZ3RofSk8aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLWRvd24gdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMzAwIGdyb3VwLW9wZW46cm90YXRlLTE4MFwiPjwvaT48L3N1bW1hcnk+PHVsIGNsYXNzPVwic3BhY2UteS0yIG10LTJcIj5gO1xuICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgIGh0bWwgKz0gYFxuICAgICAgICAgICAgPGxpIGNsYXNzPVwicC0yIHJvdW5kZWQtbGcgYmctc2Vjb25kYXJ5LzUwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciBmbGV4LWdyb3cgbXItNFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm1yLTNcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cnVuY2F0ZVwiIHRpdGxlPVwiJHtlbnRyeS7lkI3np7B9XCI+JHtlbnRyeS7lkI3np7B9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteC0yIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicG9rZWRleC12aWV3LWJ0biB0ZXh0LXNtIHRleHQtYmx1ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCIgdGl0bGU9XCLmn6XnnItcIj48aSBjbGFzcz1cImZhcyBmYS1leWVcIj48L2k+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBva2VkZXgtZWRpdC1idG4gdGV4dC1zbSB0ZXh0LWFjY2VudCBob3Zlcjp0ZXh0LWFjY2VudC1ob3ZlciB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCIgdGl0bGU9XCLnvJbovpFcIj48aSBjbGFzcz1cImZhcyBmYS1wZW5jaWwtYWx0XCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwb2tlZGV4LWRlbGV0ZS1idG4gdGV4dC1zbSB0ZXh0LXJlZC01MDAgaG92ZXI6dGV4dC1yZWQtNDAwIHRyYW5zaXRpb24tY29sb3JzIHAtMVwiIGRhdGEtdHlwZT1cIiR7dHlwZX1cIiBkYXRhLW5hbWU9XCIke2VudHJ5LuWQjeensH1cIiB0aXRsZT1cIuWIoOmZpFwiPjxpIGNsYXNzPVwiZmFzIGZhLXRyYXNoXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbGk+YDtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBodG1sICs9IGA8bGkgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeSB0ZXh0LXNtIGl0YWxpYyBwLTJcIj7mmoLml6DmnaHnm648L2xpPmA7XG4gICAgICB9XG4gICAgICBodG1sICs9IGA8L3VsPjwvZGV0YWlscz5gO1xuICAgIH0pO1xuICAgIGV4aXN0aW5nUG9rZWRleENvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgLy8gMy4gUG9wdWxhdGUgQWNoaWV2ZW1lbnRzXG4gICAgY29uc3QgYWNoaWV2ZW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjaGlldmVtZW50cy1wb2tlZGV4LWxpc3QnKTtcbiAgICBpZiAoYWNoaWV2ZW1lbnRzQ29udGFpbmVyKSB7XG4gICAgICBjb25zdCBzeXN0ZW1EYXRhID0gYXdhaXQgUG9rZWRleC5nZXRTeXN0ZW1EYXRhKCk7XG4gICAgICBjb25zdCBhY2hpZXZlbWVudHMgPSBzeXN0ZW1EYXRhLuW3suWujOaIkCB8fCBbXTtcbiAgICAgIGNvbnN0IHBvaW50cyA9IHN5c3RlbURhdGEu5oiQ5bCx54K55pWwIHx8IDA7XG5cbiAgICAgIGxldCBhY2hpZXZlbWVudHNIdG1sID0gYFxuICAgICAgICA8ZGV0YWlscyBjbGFzcz1cImdyb3VwXCIgb3Blbj5cbiAgICAgICAgICA8c3VtbWFyeSBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWxnIGN1cnNvci1wb2ludGVyIGhvdmVyOnRleHQtYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIHRoZW1lLXRyYW5zaXRpb24gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHB5LTJcIj5cbiAgICAgICAgICAgIOaIkOWwseWbvumJtCAo5bey6Kej6ZSBICR7YWNoaWV2ZW1lbnRzLmxlbmd0aH0sIOWFsSAke3BvaW50c30g54K5KVxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtY2hldnJvbi1kb3duIHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTMwMCBncm91cC1vcGVuOnJvdGF0ZS0xODBcIj48L2k+XG4gICAgICAgICAgPC9zdW1tYXJ5PlxuICAgICAgICAgIDx1bCBjbGFzcz1cInNwYWNlLXktMiBtdC0yXCI+XG4gICAgICBgO1xuXG4gICAgICBpZiAoYWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWNoaWV2ZW1lbnRzLmZvckVhY2goKGFjaDogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgYWNoTmFtZSA9IGFjaFsn5ZCN56ewJ107XG4gICAgICAgICAgYWNoaWV2ZW1lbnRzSHRtbCArPSBgXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJwLTMgcm91bmRlZC1sZyBiZy1zZWNvbmRhcnkvNTAgYm9yZGVyIGJvcmRlci1kaW0gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWdyb3dcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5IGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4+PGkgY2xhc3M9XCJmYXMgZmEtdHJvcGh5IG1yLTIgdGV4dC15ZWxsb3ctNDAwXCI+PC9pPiR7YWNoTmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQteHMgZm9udC1ub3JtYWwgdGV4dC1zZWNvbmRhcnlcIj4ke2FjaFsn5pel5pyfJ10gfHwgJyd9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtc20gdGV4dC1zZWNvbmRhcnkgbXQtMSBwbC02XCI+JHthY2hbJ+aPj+i/sCddIHx8ICfmsqHmnInmj4/ov7DjgIInfTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS14LTIgZmxleC1zaHJpbmstMCBtbC00XCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBva2VkZXgtZWRpdC1idG4gdGV4dC1zbSB0ZXh0LWFjY2VudCBob3Zlcjp0ZXh0LWFjY2VudC1ob3ZlciB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCLmiJDlsLFcIiBkYXRhLW5hbWU9XCIke2FjaE5hbWV9XCIgdGl0bGU9XCLnvJbovpFcIj48aSBjbGFzcz1cImZhcyBmYS1wZW5jaWwtYWx0XCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwb2tlZGV4LWRlbGV0ZS1idG4gdGV4dC1zbSB0ZXh0LXJlZC01MDAgaG92ZXI6dGV4dC1yZWQtNDAwIHRyYW5zaXRpb24tY29sb3JzIHAtMVwiIGRhdGEtdHlwZT1cIuaIkOWwsVwiIGRhdGEtbmFtZT1cIiR7YWNoTmFtZX1cIiB0aXRsZT1cIuWIoOmZpFwiPjxpIGNsYXNzPVwiZmFzIGZhLXRyYXNoXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgYDtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY2hpZXZlbWVudHNIdG1sICs9IGA8bGkgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeSB0ZXh0LXNtIGl0YWxpYyBwLTJcIj7lsJrmnKrop6PplIHku7vkvZXmiJDlsLE8L2xpPmA7XG4gICAgICB9XG5cbiAgICAgIGFjaGlldmVtZW50c0h0bWwgKz0gYDwvdWw+PC9kZXRhaWxzPmA7XG4gICAgICBhY2hpZXZlbWVudHNDb250YWluZXIuaW5uZXJIVE1MID0gYWNoaWV2ZW1lbnRzSHRtbDtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2hvd01vZGFsID0gYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHBvcHVsYXRlVmlld1RhYigpO1xuICAgIG1vZGFsPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgfTtcbiAgY29uc3QgaGlkZU1vZGFsID0gKCkgPT4gbW9kYWw/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gIG1hbmFnZXJCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd01vZGFsKTtcbiAgY2xvc2VNb2RhbEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xuICBtb2RhbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIGhpZGVNb2RhbCgpO1xuICB9KTtcblxuICBoZWxwQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBoZWxwQ29udGVudD8uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgaGVscEJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgfSk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcHJvdmUtZGlzY292ZXJpZXMtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCcjbmV3LWRpc2NvdmVyaWVzLWxpc3QgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQnKTtcbiAgICBpZiAoY2hlY2tib3hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRvYXN0ci53YXJuaW5nKCfor7foh7PlsJHpgInmi6nkuIDkuKropoHmlLblvZXnmoTmnaHnm67jgIInKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgY29uc3QgbWVzc2FnZVZhcnMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICBjb25zdCBtZXNzYWdlUG9rZWRleCA9IF8uZ2V0KG1lc3NhZ2VWYXJzLCAn5LiW55WMLuWbvumJtCcsIHt9KTtcbiAgICBsZXQgc3VjY2Vzc0NvdW50ID0gMDtcblxuICAgIGZvciAoY29uc3QgY2Igb2YgY2hlY2tib3hlcykge1xuICAgICAgY29uc3QgdHlwZSA9IGNiLmRhdGFzZXQudHlwZSBhcyBQb2tlZGV4VHlwZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBjYi5kYXRhc2V0Lm5hbWU7XG4gICAgICBpZiAodHlwZSAmJiBuYW1lICYmIG1lc3NhZ2VQb2tlZGV4W3R5cGVdKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gbWVzc2FnZVBva2VkZXhbdHlwZV0uZmluZCgoZTogUG9rZWRleEVudHJ5KSA9PiBlLuWQjeensCA9PT0gbmFtZSk7XG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgIGlmIChhd2FpdCBQb2tlZGV4LmNyZWF0ZVBva2VkZXhFbnRyeSh0eXBlLCBlbnRyeSkpIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NDb3VudCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdWNjZXNzQ291bnQgPiAwKSB7XG4gICAgICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5pS25b2V5LqGICR7c3VjY2Vzc0NvdW50fSDkuKrmlrDmnaHnm67vvIFgKTtcbiAgICAgIGF3YWl0IHBvcHVsYXRlVmlld1RhYigpO1xuICAgIH1cbiAgfSk7XG5cbiAgbWFpblRhYnM/LmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCB0YWIgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXRhYicpO1xuICAgICAgbWFpblRhYnMuZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIFxuICAgICAgcmVzZXRBZGRGb3JtKCk7XG5cbiAgICAgIHZpZXdUYWJDb250ZW50Py5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIGFkZFRhYkNvbnRlbnQ/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgaW5qZWN0QnRuPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIHN1Ym1pdEVudHJ5QnRuPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblxuICAgICAgaWYgKHRhYiA9PT0gJ3ZpZXcnKSB7XG4gICAgICAgIHZpZXdUYWJDb250ZW50Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgaW5qZWN0QnRuPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSBpZiAodGFiID09PSAnYWRkJykge1xuICAgICAgICBhZGRUYWJDb250ZW50Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgc3VibWl0RW50cnlCdG4/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBpbmplY3RCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGVkRW50cmllczogeyBba2V5IGluIFBva2VkZXhUeXBlXT86IFBva2VkZXhFbnRyeVtdIH0gPSB7fTtcbiAgICBjb25zdCBjaGVja2JveGVzID0gbW9kYWw/LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oJyNwb2tlZGV4LXZpZXctdGFiIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJyk7XG4gICAgXG4gICAgaWYgKCFjaGVja2JveGVzIHx8IGNoZWNrYm94ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0b2FzdHIud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5Liq6KaB5rOo5YWl55qE5p2h55uu44CCJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9rZWRleERhdGEgPSBhd2FpdCBQb2tlZGV4LmdldFBva2VkZXhEYXRhKCk7XG5cbiAgICBjaGVja2JveGVzLmZvckVhY2goY2IgPT4ge1xuICAgICAgY29uc3QgdHlwZSA9IGNiLmRhdGFzZXQudHlwZSBhcyBQb2tlZGV4VHlwZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBjYi5kYXRhc2V0Lm5hbWU7XG4gICAgICBpZiAodHlwZSAmJiBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gcG9rZWRleERhdGFbdHlwZV0uZmluZChlID0+IGUu5ZCN56ewID09PSBuYW1lKTtcbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgaWYgKCFzZWxlY3RlZEVudHJpZXNbdHlwZV0pIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRW50cmllc1t0eXBlXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxlY3RlZEVudHJpZXNbdHlwZV0hLnB1c2goZW50cnkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoXy5pc0VtcHR5KHNlbGVjdGVkRW50cmllcykpIHJldHVybjtcblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGdldEN1cnJlbnRNZXNzYWdlSWQoKTtcbiAgICBjb25zdCBjdXJyZW50VmFycyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IFt0eXBlLCBlbnRyaWVzXSBvZiBPYmplY3QuZW50cmllcyhzZWxlY3RlZEVudHJpZXMpKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBg5LiW55WMLuWbvumJtC4ke3R5cGV9YDtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdFbnRyaWVzID0gXy5nZXQoY3VycmVudFZhcnMsIHBhdGgsIFtdKTtcbiAgICAgICAgY29uc3QgbmV3RW50cmllcyA9IF8udW5pb25CeShleGlzdGluZ0VudHJpZXMsIGVudHJpZXMsICflkI3np7AnKTtcbiAgICAgICAgXy5zZXQodXBkYXRlcywgcGF0aCwgbmV3RW50cmllcyk7XG4gICAgfVxuXG4gICAgYXdhaXQgaW5zZXJ0T3JBc3NpZ25WYXJpYWJsZXModXBkYXRlcywgeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICB0b2FzdHIuc3VjY2Vzcygn5oiQ5Yqf5rOo5YWl5Zu+6Ym05Yiw5b2T5YmN5qW85bGC77yBJyk7XG4gICAgaGlkZU1vZGFsKCk7XG4gICAgc3RvcnlSZW5kZXJlci5pbml0KCk7XG4gIH0pO1xuXG4gIGFkZFRhYk1vZGVCdXR0b25zPy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9kZSA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScpO1xuICAgICAgaWYgKCFtb2RlIHx8IG1vZGUgPT09IGN1cnJlbnRBZGRNb2RlKSByZXR1cm47XG4gICAgICBjdXJyZW50QWRkTW9kZSA9IG1vZGU7XG4gICAgICBhZGRUYWJNb2RlQnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgaWYgKG1vZGUgPT09ICdmb3JtJykge1xuICAgICAgICBmb3JtTW9kZUNvbnRlbnQ/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICBqc29uTW9kZUNvbnRlbnQ/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9ybU1vZGVDb250ZW50Py5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAganNvbk1vZGVDb250ZW50Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIFxuICBjb25zdCBjaGVja2VkUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZW50cnlUeXBlXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICBpZiAoY2hlY2tlZFJhZGlvKSB1cGRhdGVGb3JtRmllbGRzKGNoZWNrZWRSYWRpby52YWx1ZSk7XG5cbiAgYWRkRmllbGRCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gYWRkRmllbGQoKSk7XG4gIGVudHJ5VHlwZVJhZGlvcy5mb3JFYWNoKHJhZGlvID0+IHtcbiAgICByYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgdXBkYXRlRm9ybUZpZWxkcygoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpXG4gICAgfSk7XG4gIH0pO1xuXG4gIHN1Ym1pdEVudHJ5QnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBpc1VwZGF0ZSA9IHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQudXBkYXRlTW9kZSA9PT0gJ3RydWUnO1xuXG4gICAgaWYgKGN1cnJlbnRBZGRNb2RlID09PSAnZm9ybScpIHtcbiAgICAgIGNvbnN0IHR5cGUgPSAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImVudHJ5VHlwZVwiXTpjaGVja2VkJykgYXMgSFRNTElucHV0RWxlbWVudCk/LnZhbHVlO1xuICAgICAgY29uc3QgbmV3RW50cnk6IFBva2VkZXhFbnRyeSA9IHsgJ+WQjeensCc6ICcnIH07XG4gICAgICBjb25zdCByb3dzID0gZm9ybUZpZWxkc0NvbnRhaW5lcj8ucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tZmllbGQtcm93Jyk7XG4gICAgICByb3dzPy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IChyb3cucXVlcnlTZWxlY3RvcignLmZvcm0ta2V5LWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCk/LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSAocm93LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXZhbHVlLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCk/LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgaWYgKGtleSkgbmV3RW50cnlba2V5XSA9IHZhbHVlO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghbmV3RW50cnku5ZCN56ewKSB7XG4gICAgICAgIHRvYXN0ci53YXJuaW5nKCfigJzlkI3np7DigJ3mmK/lv4XloavlrZfmrrXvvIEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxOYW1lID0gc3VibWl0RW50cnlCdG4uZGF0YXNldC5vcmlnaW5hbE5hbWU7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVHlwZSA9IHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQub3JpZ2luYWxUeXBlO1xuXG4gICAgICAgIGlmICghb3JpZ2luYWxOYW1lIHx8ICFvcmlnaW5hbFR5cGUgfHwgIXR5cGUpIHtcbiAgICAgICAgICB0b2FzdHIuZXJyb3IoJ+abtOaWsOWksei0pe+8mue8uuWwkeW/heimgeS/oeaBr+OAgicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmlnaW5hbFR5cGUgPT09IHR5cGUpIHtcbiAgICAgICAgICAvLyBUeXBlIGhhc24ndCBjaGFuZ2VkLCBqdXN0IHVwZGF0ZVxuICAgICAgICAgIGlmICh0eXBlID09PSAn5oiQ5bCxJykge1xuICAgICAgICAgICAgYXdhaXQgUG9rZWRleC51cGRhdGVBY2hpZXZlbWVudChvcmlnaW5hbE5hbWUsIG5ld0VudHJ5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgUG9rZWRleC51cGRhdGVQb2tlZGV4RW50cnkodHlwZSBhcyBQb2tlZGV4VHlwZSwgb3JpZ2luYWxOYW1lLCBuZXdFbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFR5cGUgaGFzIGNoYW5nZWQsIHNvIHdlIGRlbGV0ZSB0aGUgb2xkIGFuZCBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgaWYgKG9yaWdpbmFsVHlwZSA9PT0gJ+aIkOWwsScpIHtcbiAgICAgICAgICAgIGF3YWl0IFBva2VkZXguZGVsZXRlQWNoaWV2ZW1lbnQob3JpZ2luYWxOYW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgUG9rZWRleC5kZWxldGVQb2tlZGV4RW50cnkob3JpZ2luYWxUeXBlIGFzIFBva2VkZXhUeXBlLCBvcmlnaW5hbE5hbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlID09PSAn5oiQ5bCxJykge1xuICAgICAgICAgICAgYXdhaXQgUG9rZWRleC5jcmVhdGVBY2hpZXZlbWVudChuZXdFbnRyeSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IFBva2VkZXguY3JlYXRlUG9rZWRleEVudHJ5KHR5cGUgYXMgUG9rZWRleFR5cGUsIG5ld0VudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9hc3RyLmluZm8oYOadoeebruW3suS7juKAnCR7b3JpZ2luYWxUeXBlfeKAneenu+WKqOWIsOKAnCR7dHlwZX3igJ1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXNldEFkZEZvcm0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENyZWF0ZSBuZXcgZW50cnlcbiAgICAgICAgaWYgKCF0eXBlKSB7XG4gICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+ivt+mAieaLqeadoeebruexu+Wei++8gScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ+aIkOWwsScpIHtcbiAgICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgUG9rZWRleC5jcmVhdGVBY2hpZXZlbWVudChuZXdFbnRyeSk7XG4gICAgICAgICAgaWYgKHN1Y2Nlc3MpIHVwZGF0ZUZvcm1GaWVsZHModHlwZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IFBva2VkZXguY3JlYXRlUG9rZWRleEVudHJ5KHR5cGUgYXMgUG9rZWRleFR5cGUsIG5ld0VudHJ5KTtcbiAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgdXBkYXRlRm9ybUZpZWxkcyh0eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRBZGRNb2RlID09PSAnanNvbicpIHsgLy8gSlNPTiBtb2RlXG4gICAgICBjb25zdCB0eXBlID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJqc29uRW50cnlUeXBlXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KT8udmFsdWUgYXMgUG9rZWRleFR5cGUgfCAn5oiQ5bCxJztcbiAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBqc29uSW5wdXQ/LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICghanNvblN0cmluZykge1xuICAgICAgICB0b2FzdHIud2FybmluZygn6K+36L6T5YWlSlNPTuaVsOaNru+8gScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xuICAgICAgICBsZXQgc3VjY2Vzc0NvdW50ID0gMDtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ+aIkOWwsScpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCBQb2tlZGV4LmNyZWF0ZUFjaGlldmVtZW50KGVudHJ5KSkge1xuICAgICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN1Y2Nlc3NDb3VudCA+IDApIHtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKGDmiJDlip/lpITnkIYgJHtzdWNjZXNzQ291bnR9IOS4quaWsOaIkOWwse+8gWApO1xuICAgICAgICAgICAganNvbklucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgICAgaWYgKGF3YWl0IFBva2VkZXguY3JlYXRlUG9rZWRleEVudHJ5KHR5cGUsIGVudHJ5KSkge1xuICAgICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN1Y2Nlc3NDb3VudCA+IDApIGpzb25JbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ0pTT07op6PmnpDlpLHotKXvvIzor7fmo4Dmn6XmoLzlvI/vvIEnKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkpTT04gcGFyc2luZyBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgcG9wdWxhdGVWaWV3VGFiKCk7XG4gIH0pO1xuXG4gIHZpZXdUYWJDb250ZW50Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5wb2tlZGV4LWRlbGV0ZS1idG4nKTtcbiAgICBjb25zdCBlZGl0QnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5wb2tlZGV4LWVkaXQtYnRuJyk7XG4gICAgY29uc3Qgdmlld0J1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcucG9rZWRleC12aWV3LWJ0bicpO1xuXG4gICAgaWYgKHZpZXdCdXR0b24pIHtcbiAgICAgIGNvbnN0IHR5cGUgPSB2aWV3QnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJykgYXMgUG9rZWRleFR5cGUgfCAn5oiQ5bCxJztcbiAgICAgIGNvbnN0IG5hbWUgPSB2aWV3QnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICBpZiAodHlwZSAmJiBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlID09PSAn5oiQ5bCxJykge1xuICAgICAgICAgIGNvbnN0IGFjaGlldmVtZW50cyA9IGF3YWl0IFBva2VkZXguZ2V0QWNoaWV2ZW1lbnRzKCk7XG4gICAgICAgICAgY29uc3QgZW50cnkgPSBhY2hpZXZlbWVudHMuZmluZCgoYWNoOiBhbnkpID0+IGFjaFsn5ZCN56ewJ10gPT09IG5hbWUpO1xuICAgICAgICAgIGlmIChlbnRyeSkgc2hvd01vZGFsV2l0aERhdGEoZW50cnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgUG9rZWRleC5yZWFkUG9rZWRleEVudHJ5KHR5cGUsIG5hbWUpO1xuICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgc2hvd01vZGFsV2l0aERhdGEoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWxldGVCdXR0b24pIHtcbiAgICAgIGNvbnN0IHR5cGUgPSBkZWxldGVCdXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKSBhcyBQb2tlZGV4VHlwZSB8ICfmiJDlsLEnO1xuICAgICAgY29uc3QgbmFtZSA9IGRlbGV0ZUJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgaWYgKHR5cGUgJiYgbmFtZSkge1xuICAgICAgICBpZiAoY29uZmlybShg56Gu5a6a6KaB5Yig6ZmkICR7dHlwZX0g5Zu+6Ym05Lit55qEIOKAnCR7bmFtZX3igJ0g5ZCX77yf5q2k5pON5L2c5LiN5Y+v5pKk6ZSA44CCYCkpIHtcbiAgICAgICAgICBsZXQgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgIGlmICh0eXBlID09PSAn5oiQ5bCxJykge1xuICAgICAgICAgICAgc3VjY2VzcyA9IGF3YWl0IFBva2VkZXguZGVsZXRlQWNoaWV2ZW1lbnQobmFtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSBhd2FpdCBQb2tlZGV4LmRlbGV0ZVBva2VkZXhFbnRyeSh0eXBlLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGF3YWl0IHBvcHVsYXRlVmlld1RhYigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlZGl0QnV0dG9uKSB7XG4gICAgICBjb25zdCB0eXBlID0gZWRpdEJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpIGFzIFBva2VkZXhUeXBlIHwgJ+aIkOWwsSc7XG4gICAgICBjb25zdCBuYW1lID0gZWRpdEJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgaWYgKHR5cGUgJiYgbmFtZSkge1xuICAgICAgICBsZXQgZW50cnk6IFBva2VkZXhFbnRyeSB8IG51bGwgPSBudWxsO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ+aIkOWwsScpIHtcbiAgICAgICAgICBjb25zdCBhY2hpZXZlbWVudHMgPSBhd2FpdCBQb2tlZGV4LmdldEFjaGlldmVtZW50cygpO1xuICAgICAgICAgIGVudHJ5ID0gYWNoaWV2ZW1lbnRzLmZpbmQoKGFjaDogYW55KSA9PiBhY2hbJ+WQjeensCddID09PSBuYW1lKSA/PyBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVudHJ5ID0gKGF3YWl0IFBva2VkZXgucmVhZFBva2VkZXhFbnRyeSh0eXBlIGFzIFBva2VkZXhUeXBlLCBuYW1lKSkgPz8gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgIG1haW5UYWJzPy5mb3JFYWNoKGJ0biA9PiBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS10YWInKSA9PT0gJ2FkZCcpKTtcbiAgICAgICAgICB2aWV3VGFiQ29udGVudD8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgYWRkVGFiQ29udGVudD8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgaW5qZWN0QnRuPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICBzdWJtaXRFbnRyeUJ0bj8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG5cbiAgICAgICAgICBhZGRUYWJNb2RlQnV0dG9ucz8uZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScpID09PSAnZm9ybScpKTtcbiAgICAgICAgICBmb3JtTW9kZUNvbnRlbnQ/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgIGpzb25Nb2RlQ29udGVudD8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgY3VycmVudEFkZE1vZGUgPSAnZm9ybSc7XG5cbiAgICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaW5wdXRbbmFtZT1cImVudHJ5VHlwZVwiXVt2YWx1ZT1cIiR7dHlwZX1cIl1gKSBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZm9ybUZpZWxkc0NvbnRhaW5lcikgZm9ybUZpZWxkc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnRyeSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBhZGRGaWVsZChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc3VibWl0RW50cnlCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrIG1yLTJcIj48L2k+56Gu6K6k5pu05pawJztcbiAgICAgICAgICBzdWJtaXRFbnRyeUJ0bi5kYXRhc2V0LnVwZGF0ZU1vZGUgPSAndHJ1ZSc7XG4gICAgICAgICAgc3VibWl0RW50cnlCdG4uZGF0YXNldC5vcmlnaW5hbE5hbWUgPSBuYW1lO1xuICAgICAgICAgIHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQub3JpZ2luYWxUeXBlID0gdHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmNsYXNzIFN0b3J5UmVuZGVyZXIge1xuICBwcml2YXRlIHlhbWxEYXRhOiBhbnk7XG4gIHByaXZhdGUgcmF3WWFtbENvbnRlbnQ6IHN0cmluZztcbiAgcHJpdmF0ZSByb290Tm9kZUtleTogc3RyaW5nIHwgbnVsbDtcbiAgcHJpdmF0ZSBlbGVtZW50czoge1xuICAgIHN0YXR1c0JhclRpdGxlOiBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgdGltZURpc3BsYXk6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBsb2NhdGlvbkRpc3BsYXk6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBjaGFyYWN0ZXJzQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgYWN0aW9uT3duZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBvcHRpb25zTGlzdDogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIHN5c3RlbUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIHNoZWx0ZXJDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBiZXN0aWFyeUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIGhlcmJvbG9neUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIGludmVudG9yeUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuICB9O1xuICBwcml2YXRlIHJhd0pzb25Db250ZW50OiBhbnkgPSBudWxsO1xuICBwcml2YXRlIGpzb25EYXRhOiBhbnkgPSBudWxsO1xuICBwcml2YXRlIGdsb2JhbFBva2VkZXg6IFBva2VkZXhEYXRhIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy55YW1sRGF0YSA9IG51bGw7XG4gICAgdGhpcy5yYXdZYW1sQ29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5yb290Tm9kZUtleSA9IG51bGw7XG4gICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgIHN0YXR1c0JhclRpdGxlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzLWJhci10aXRsZScpLFxuICAgICAgdGltZURpc3BsYXk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLWRpc3BsYXknKSxcbiAgICAgIGxvY2F0aW9uRGlzcGxheTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uLWRpc3BsYXknKSxcbiAgICAgIGNoYXJhY3RlcnNDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFyYWN0ZXJzLWNvbnRhaW5lcicpLFxuICAgICAgYWN0aW9uT3duZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3Rpb24tb3duZXInKSxcbiAgICAgIG9wdGlvbnNMaXN0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3B0aW9ucy1saXN0JyksXG4gICAgc3lzdGVtQ29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3lzdGVtLWNvbnRhaW5lcicpLFxuICAgIHNoZWx0ZXJDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGVsdGVyLWNvbnRhaW5lcicpLFxuICAgIGJlc3RpYXJ5Q29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmVzdGlhcnktY29udGFpbmVyJyksXG4gICAgaGVyYm9sb2d5Q29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYm9sb2d5LWNvbnRhaW5lcicpLFxuICAgIGludmVudG9yeUNvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ludmVudG9yeS1jb250YWluZXInKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNvbXBhdGliaWxpdHkoKSB7XG4gICAgaWYgKCF0aGlzLnJvb3ROb2RlS2V5IHx8ICF0aGlzLmpzb25EYXRhKSByZXR1cm47XG4gICAgY29uc3Qgcm9vdERhdGEgPSB0aGlzLmpzb25EYXRhW3RoaXMucm9vdE5vZGVLZXldO1xuICAgIGxldCBtb2RpZmllZCA9IGZhbHNlO1xuXG4gICAgaWYgKCF0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMocm9vdERhdGEsIFsn5bqH5oqk5omAJ10pKSB7XG4gICAgICByb290RGF0YVsn8J+PoSDluofmiqTmiYAnXSA9IHt9O1xuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuZmluZEZpZWxkQnlLZXl3b3Jkcyhyb290RGF0YSwgWyflppblhb3lm77pibQnXSkpIHtcbiAgICAgIHJvb3REYXRhWyfwn5C+IOWmluWFveWbvumJtCddID0geyAn5bey5Y+R546wJzogMCwgJ+W3suaUtuW9lSc6IFtdIH07XG4gICAgICBtb2RpZmllZCA9IHRydWU7XG4gICAgfVxuICAgIGlmICghdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKHJvb3REYXRhLCBbJ+akjeeJqeWbvumJtCddKSkge1xuICAgICAgcm9vdERhdGFbJ/CfjL8g5qSN54mp5Zu+6Ym0J10gPSB7ICflt7Llj5HnjrAnOiAwLCAn5bey56eN5qSNJzogW10gfTtcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG1vZGlmaWVkKSB7XG4gICAgICB0b2FzdHIuaW5mbygn5qOA5rWL5Yiw5pen54mI54q25oCB5qCP77yM5bey6Ieq5Yqo6KGl5YWF57y65aSx55qE5a2X5q615Lul5YW85a6544CCJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBjb25zb2xlLmxvZygnW1N0b3J5UmVuZGVyZXJdIEluaXRpYWxpemluZy4uLicpO1xuICAgIHRoaXMuc2V0TG9hZGluZ1N0YXRlKCk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmF3SnNvbkNvbnRlbnQgPSB0aGlzLmdldFJhd0NvbnRlbnRGcm9tQ2hhdE1lc3NhZ2UoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdbU3RvcnlSZW5kZXJlcl0gUmF3IEpTT04gY29udGVudCBsb2FkZWQ6JywgdGhpcy5yYXdKc29uQ29udGVudCk7XG5cbiAgICAgIGlmICghdGhpcy5yYXdKc29uQ29udGVudCkge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+acquiDveWcqOacgOaWsOa2iOaBr+S4reaJvuWIsEpTT07mlbDmja7jgIInKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgcGFyc2VkSnNvbjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBhcnNlZEpzb24gPSBKU09OLnBhcnNlKHRoaXMucmF3SnNvbkNvbnRlbnQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSlNPTiBwYXJzaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgIHRoaXMuaGFuZGxlUGFyc2luZ0ZhaWx1cmUodGhpcy5yYXdKc29uQ29udGVudCwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuanNvbkRhdGEgPSBwYXJzZWRKc29uO1xuICAgICAgaWYgKCF0aGlzLmpzb25EYXRhKSB7XG4gICAgICAgICAgdG9hc3RyLmVycm9yKCdKU09O5pWw5o2u5qC85byP5LiN5q2j56GuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmZpbmRSb290Tm9kZUtleSgpO1xuICAgICAgdGhpcy5oYW5kbGVDb21wYXRpYmlsaXR5KCk7XG4gICAgICB0aGlzLmdsb2JhbFBva2VkZXggPSBhd2FpdCBQb2tlZGV4LmdldFBva2VkZXhEYXRhKCk7IC8vIENhY2hlIHRoZSBwb2tlZGV4XG4gICAgICBhd2FpdCB0aGlzLnN5bmNWYXJpYWJsZXMoKTtcbiAgICAgIHRoaXMucmVuZGVyQWxsKCk7XG5cbiAgICAgIGNvbnN0IHNhdmVkVGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RvcnlUaGVtZScpIHx8ICduaWdodCc7XG4gICAgICBjb25zdCB0aGVtZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50aGVtZS1idG5bZGF0YS10aGVtZT1cIiR7c2F2ZWRUaGVtZX1cIl1gKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmICh0aGVtZUJ1dHRvbikgdGhlbWVCdXR0b24uY2xpY2soKTtcblxuICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ+eKtuaAgeagj+W3suaIkOWKn+WKoOi9veW5tua4suafk++8gScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfmuLLmn5PlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciBhcyBFcnJvcik7XG4gICAgfVxuICB9XG5cbiAgZ2V0UmF3Q29udGVudEZyb21DaGF0TWVzc2FnZSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVzc2FnZUlkID0gZ2V0Q3VycmVudE1lc3NhZ2VJZCgpO1xuICAgICAgaWYgKG1lc3NhZ2VJZCA9PT0gbnVsbCB8fCBtZXNzYWdlSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+aXoOazleiOt+WPluW9k+WJjea2iOaBryBJROOAgicpO1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICBjb25zdCBtZXNzYWdlID0gZ2V0Q2hhdE1lc3NhZ2VzKG1lc3NhZ2VJZClbMF07XG4gICAgICBpZiAoIW1lc3NhZ2UgfHwgIW1lc3NhZ2UubWVzc2FnZSkgcmV0dXJuICcnO1xuICAgICAgcmV0dXJuIGV4dHJhY3RKc29uRnJvbVN0YXR1c0JhcihtZXNzYWdlLm1lc3NhZ2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLojrflj5bogYrlpKnmtojmga/lpLHotKU6XCIsIGUpO1xuICAgICAgdG9hc3RyLmVycm9yKCfojrflj5bmiJblpITnkIbogYrlpKnmtojmga/ml7blh7rplJnvvIzor7fmo4Dmn6XmjqfliLblj7DjgIInKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICBzZXRMb2FkaW5nU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMuY2hhcmFjdGVyc0NvbnRhaW5lcikgdGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMuY3JlYXRlU3Bpbm5lcigpO1xuICAgIGlmICh0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0KSB0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0LmlubmVySFRNTCA9IGA8bGk+JHt0aGlzLmNyZWF0ZVNwaW5uZXIoKX08L2xpPmA7XG4gIH1cblxuICBjcmVhdGVTcGlubmVyKCkge1xuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHAtNFwiPjxkaXYgY2xhc3M9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1pbmRpZ28tNDAwXCI+PC9kaXY+PC9kaXY+YDtcbiAgfVxuXG4gIGZpbmRSb290Tm9kZUtleSgpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5qc29uRGF0YSk7XG4gICAgdGhpcy5yb290Tm9kZUtleSA9IGtleXMuZmluZChrZXkgPT4ga2V5LmluY2x1ZGVzKCfnirbmgIHmgLvop4gnKSB8fCBrZXkuaW5jbHVkZXMoJ+inkuiJsueKtuaAgeaAu+iniCcpKSB8fCBrZXlzWzBdO1xuICAgIGlmICghdGhpcy5yb290Tm9kZUtleSkge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+acquaJvuWIsOagueiKgueCuScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmVsZW1lbnRzLnN0YXR1c0JhclRpdGxlKSB0aGlzLmVsZW1lbnRzLnN0YXR1c0JhclRpdGxlLnRleHRDb250ZW50ID0gXCLnirbmgIHmgLvop4hcIjtcbiAgfVxuXG4gIGZpbmRGaWVsZEJ5S2V5d29yZHMoZGF0YTogYW55LCBrZXl3b3Jkczogc3RyaW5nW10pIHtcbiAgICBpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgZm9yIChjb25zdCBrZXl3b3JkIG9mIGtleXdvcmRzKSB7XG4gICAgICAgIGlmIChmaWVsZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSkpIHJldHVybiBmaWVsZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZW5kZXJBbGwoKSB7XG4gICAgaWYgKCF0aGlzLnJvb3ROb2RlS2V5KSByZXR1cm47XG4gICAgY29uc3Qgcm9vdERhdGEgPSB0aGlzLmpzb25EYXRhW3RoaXMucm9vdE5vZGVLZXldO1xuICAgIHRoaXMucmVuZGVySGVhZGVySW5mbyhyb290RGF0YSk7XG4gICAgdGhpcy5yZW5kZXJDaGFyYWN0ZXJzKHJvb3REYXRhKTtcbiAgICB0aGlzLnJlbmRlclNoZWx0ZXIocm9vdERhdGEpO1xuICAgIHRoaXMucmVuZGVyUG9rZWRleEZyb21NZXNzYWdlVmFycygpO1xuICAgIHRoaXMucmVuZGVyU3lzdGVtKHJvb3REYXRhKTtcbiAgICB0aGlzLnJlbmRlckFjdGlvbk9wdGlvbnMocm9vdERhdGEpO1xuICB9XG5cbiAgcmVuZGVySGVhZGVySW5mbyhkYXRhOiBhbnkpIHtcbiAgICBjb25zdCBkYXRlVGltZUZpZWxkID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGRhdGEsIFsn5pel5pyfJywgJ+aXtumXtCddKTtcbiAgICBjb25zdCBsb2NhdGlvbkZpZWxkID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGRhdGEsIFsn5Zyw54K5JywgJ+eOr+WigyddKTtcbiAgICBjb25zdCB0aW1lRGlzcGxheVBhcmVudCA9IHRoaXMuZWxlbWVudHMudGltZURpc3BsYXk/LnBhcmVudE5vZGU7XG4gICAgY29uc3QgbG9jYXRpb25EaXNwbGF5UGFyZW50ID0gdGhpcy5lbGVtZW50cy5sb2NhdGlvbkRpc3BsYXk/LnBhcmVudE5vZGU7XG5cbiAgICBpZiAoZGF0ZVRpbWVGaWVsZCAmJiB0aGlzLmVsZW1lbnRzLnRpbWVEaXNwbGF5ICYmIHRpbWVEaXNwbGF5UGFyZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLnRpbWVEaXNwbGF5LnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXROb2RlTmFtZShkYXRhW2RhdGVUaW1lRmllbGRdLCB0cnVlKTtcbiAgICAgIGNvbnN0IGVtb2ppRWwgPSB0aW1lRGlzcGxheVBhcmVudC5xdWVyeVNlbGVjdG9yKCcuZW1vamknKTtcbiAgICAgIGlmIChlbW9qaUVsKSBlbW9qaUVsLnRleHRDb250ZW50ID0gdGhpcy5leHRyYWN0RW1vamlzKGRhdGFbZGF0ZVRpbWVGaWVsZF0pWzBdIHx8ICfwn5eT77iPJztcbiAgICB9XG4gICAgaWYgKGxvY2F0aW9uRmllbGQgJiYgdGhpcy5lbGVtZW50cy5sb2NhdGlvbkRpc3BsYXkgJiYgbG9jYXRpb25EaXNwbGF5UGFyZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmxvY2F0aW9uRGlzcGxheS50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0Tm9kZU5hbWUoZGF0YVtsb2NhdGlvbkZpZWxkXSwgdHJ1ZSk7XG4gICAgICBjb25zdCBlbW9qaUVsID0gbG9jYXRpb25EaXNwbGF5UGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbW9qaScpO1xuICAgICAgaWYgKGVtb2ppRWwpIGVtb2ppRWwudGV4dENvbnRlbnQgPSB0aGlzLmV4dHJhY3RFbW9qaXMoZGF0YVtsb2NhdGlvbkZpZWxkXSlbMF0gfHwgJ/Cfj57vuI8nO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckNoYXJhY3RlcnMoZGF0YTogYW55KSB7XG4gICAgY29uc3QgY2hhckxpc3RLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMoZGF0YSwgWyfop5LoibInLCAn5YiX6KGoJywgJ+S6uueJqSddKTtcbiAgICBpZiAodGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNoYXJhY3RlcnNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICBpZiAoY2hhckxpc3RLZXkgJiYgQXJyYXkuaXNBcnJheShkYXRhW2NoYXJMaXN0S2V5XSkpIHtcbiAgICAgICAgZGF0YVtjaGFyTGlzdEtleV0uZm9yRWFjaCgoY2hhckRhdGE6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmNyZWF0ZUNoYXJhY3RlckNhcmQoY2hhckRhdGEpO1xuICAgICAgICAgIGlmIChjYXJkKSB0aGlzLmVsZW1lbnRzLmNoYXJhY3RlcnNDb250YWluZXIhLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuY2hhcmFjdGVyc0NvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZUVtcHR5U3RhdGUoJ+ayoeacieinkuiJsuaVsOaNricpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlclN5c3RlbShkYXRhOiBhbnkpIHtcbiAgICBjb25zdCBzeXN0ZW1Db250YWluZXIgPSB0aGlzLmVsZW1lbnRzLnN5c3RlbUNvbnRhaW5lcjtcbiAgICBpZiAoc3lzdGVtQ29udGFpbmVyKSB7XG4gICAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgICBjb25zdCB2YXJpYWJsZXMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICAgIGNvbnN0IHN5c3RlbURhdGEgPSBfLmdldCh2YXJpYWJsZXMsICfkuJbnlYwu57O757ufJywgbnVsbCk7XG4gICAgICByZW5kZXJTeXN0ZW0oc3lzdGVtRGF0YSwgc3lzdGVtQ29udGFpbmVyKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJTaGVsdGVyKGRhdGE6IGFueSkge1xuICAgIGNvbnN0IHNoZWx0ZXJLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMoZGF0YSwgWyfluofmiqTmiYAnXSk7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMuc2hlbHRlckNvbnRhaW5lcikge1xuICAgICAgdGhpcy5lbGVtZW50cy5zaGVsdGVyQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgaWYgKHNoZWx0ZXJLZXkgJiYgdHlwZW9mIGRhdGFbc2hlbHRlcktleV0gPT09ICdvYmplY3QnICYmIGRhdGFbc2hlbHRlcktleV0gIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgc2hlbHRlckRhdGEgPSBkYXRhW3NoZWx0ZXJLZXldO1xuICAgICAgICBjb25zdCBjYXJkID0gdGhpcy5jcmVhdGVDaGFyYWN0ZXJDYXJkKHsgW3NoZWx0ZXJLZXldOiBzaGVsdGVyRGF0YSB9KTtcbiAgICAgICAgaWYgKGNhcmQpIHRoaXMuZWxlbWVudHMuc2hlbHRlckNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuc2hlbHRlckNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZUVtcHR5U3RhdGUoJ+aaguaXoOW6h+aKpOaJgOS/oeaBrycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlclBva2VkZXhGcm9tTWVzc2FnZVZhcnMoKSB7XG4gICAgY29uc3QgbWVzc2FnZUlkID0gZ2V0Q3VycmVudE1lc3NhZ2VJZCgpO1xuICAgIGNvbnN0IHZhcmlhYmxlcyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuICAgIGNvbnN0IHBva2VkZXhEYXRhID0gXy5nZXQodmFyaWFibGVzLCAn5LiW55WMLuWbvumJtCcsIHt9KTtcblxuICAgIGNvbnN0IHJlbmRlclNpbmdsZVBva2VkZXggPSAoY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwsIGRhdGE6IGFueSwgbmFtZTogc3RyaW5nLCBlbXB0eVRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmNyZWF0ZUNoYXJhY3RlckNhcmQoeyBbYCR7bmFtZX3lm77pibQgKOW3suWPkeeOsCAke2RhdGEubGVuZ3RofSlgXTogZGF0YSB9KTtcbiAgICAgICAgICBpZiAoY2FyZCkgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZUVtcHR5U3RhdGUoZW1wdHlUZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZW5kZXJTaW5nbGVQb2tlZGV4KHRoaXMuZWxlbWVudHMuYmVzdGlhcnlDb250YWluZXIsIHBva2VkZXhEYXRhWyflppblhb0nXSwgJ+WmluWFvScsICflppblhb3lm77pibTlvoXop6PplIEnKTtcbiAgICByZW5kZXJTaW5nbGVQb2tlZGV4KHRoaXMuZWxlbWVudHMuaGVyYm9sb2d5Q29udGFpbmVyLCBwb2tlZGV4RGF0YVsn5qSN54mpJ10sICfmpI3niaknLCAn5qSN54mp5Zu+6Ym05b6F6Kej6ZSBJyk7XG4gICAgcmVuZGVyU2luZ2xlUG9rZWRleCh0aGlzLmVsZW1lbnRzLmludmVudG9yeUNvbnRhaW5lciwgcG9rZWRleERhdGFbJ+eJqeWTgSddLCAn54mp5ZOBJywgJ+eJqeWTgeWbvumJtOaYr+epuueahCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzeW5jVmFyaWFibGVzKCkge1xuICAgIGlmICghdGhpcy5yb290Tm9kZUtleSB8fCAhdGhpcy5qc29uRGF0YSkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRNZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgICBpZiAoY3VycmVudE1lc3NhZ2VJZCA9PT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1tTdG9yeVJlbmRlcmVyXSDml6Dms5Xojrflj5blvZPliY3mtojmga9JRO+8jOi3s+i/h+WQjOatpeOAgicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJvb3REYXRhID0gdGhpcy5qc29uRGF0YVt0aGlzLnJvb3ROb2RlS2V5XTtcbiAgICAgIGNvbnN0IGN1cnJlbnRWYXJzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBjdXJyZW50TWVzc2FnZUlkIH0pO1xuICAgICAgY29uc3QgbGFzdFN5bmNJZCA9IF8uZ2V0KGN1cnJlbnRWYXJzLCAn5LiW55WMLmxhc3RTeW5jTWVzc2FnZUlkJywgLTEpO1xuXG4gICAgICAvLyDmoLjlv4PpgLvovpHvvJrlj6rmnInlvZPlvZPliY3mtojmga9JROWkp+S6juetieS6juacgOWQjuWQjOatpUlE5pe25omN5omn6KGM5pu05pawXG4gICAgICBpZiAoY3VycmVudE1lc3NhZ2VJZCA+PSBsYXN0U3luY0lkKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAgICAgICBjb25zdCBzZWN0aW9uc1RvU3luYyA9IFtcbiAgICAgICAgICB7IGtleVdvcmRzOiBbJ+W6h+aKpOaJgCddLCB2YXJQYXRoOiAn5LiW55WMLuW6h+aKpOaJgCcgfSxcbiAgICAgICAgICB7IGtleVdvcmRzOiBbJ+WmluWFveWbvumJtCddLCB2YXJQYXRoOiAn5LiW55WMLuWbvumJtC7lppblhb0nIH0sXG4gICAgICAgICAgeyBrZXlXb3JkczogWyfmpI3nianlm77pibQnXSwgdmFyUGF0aDogJ+S4lueVjC7lm77pibQu5qSN54mpJyB9LFxuICAgICAgICAgIHsga2V5V29yZHM6IFsn54mp5ZOB5Zu+6Ym0J10sIHZhclBhdGg6ICfkuJbnlYwu5Zu+6Ym0LueJqeWTgScgfVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIOWNleeLrOWkhOeQhuezu+e7n++8jOehruS/neWug+WPquWcqOWPmOmHj+S4jeWtmOWcqOaXtuS7jkpTT07liJ3lp4vljJbkuIDmrKFcbiAgICAgICAgY29uc3Qgc3lzdGVtRGF0YUluSnNvbiA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3Jkcyhyb290RGF0YSwgWyfns7vnu58nXSk7XG4gICAgICAgIGlmIChzeXN0ZW1EYXRhSW5Kc29uICYmIHJvb3REYXRhW3N5c3RlbURhdGFJbkpzb25dKSB7XG4gICAgICAgICAgY29uc3QgbmV3U3lzdGVtRGF0YSA9IHJvb3REYXRhW3N5c3RlbURhdGFJbkpzb25dO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRTeXN0ZW1EYXRhID0gXy5nZXQoY3VycmVudFZhcnMsICfkuJbnlYwu57O757ufJywge30pO1xuXG4gICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJ5paw5oiQ5bCx6Kej6ZSBXG4gICAgICAgICAgaWYgKG5ld1N5c3RlbURhdGFbJ+aWsOaIkOWwsSddKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdBY2hpZXZlbWVudHMgPSBBcnJheS5pc0FycmF5KG5ld1N5c3RlbURhdGFbJ+aWsOaIkOWwsSddKSA/IG5ld1N5c3RlbURhdGFbJ+aWsOaIkOWwsSddIDogW25ld1N5c3RlbURhdGFbJ+aWsOaIkOWwsSddXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEFjaGlldmVtZW50cyA9IF8uY2xvbmVEZWVwKF8uZ2V0KGN1cnJlbnRTeXN0ZW1EYXRhLCAn5bey5a6M5oiQJywgW10pKTtcbiAgICAgICAgICAgIGxldCB1cGRhdGVkUG9pbnRzID0gXy5nZXQoY3VycmVudFN5c3RlbURhdGEsICfmiJDlsLHngrnmlbAnLCAwKTtcblxuICAgICAgICAgICAgbmV3QWNoaWV2ZW1lbnRzLmZvckVhY2goKGFjaDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIC8vIOmBv+WFjemHjeWkjea3u+WKoFxuICAgICAgICAgICAgICBpZiAoIXVwZGF0ZWRBY2hpZXZlbWVudHMuc29tZSgoZXhpc3RpbmdBY2g6IGFueSkgPT4gZXhpc3RpbmdBY2hbJ+WQjeensCddID09PSBhY2hbJ+WQjeensCddKSkge1xuICAgICAgICAgICAgICAgIC8vIOWKqOaAgeWcsOWwhuaJgOacieWtl+autea3u+WKoOi/m+WOu++8jOmZpOS6hueCueaVsFxuICAgICAgICAgICAgICAgIGNvbnN0IGFjaGlldmVtZW50RGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHsgLi4uYWNoIH07XG4gICAgICAgICAgICAgICAgZGVsZXRlIGFjaGlldmVtZW50RGF0YVsn54K55pWwJ107XG4gICAgICAgICAgICAgICAgdXBkYXRlZEFjaGlldmVtZW50cy5wdXNoKGFjaGlldmVtZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdXBkYXRlZFBvaW50cyArPSBhY2hbJ+eCueaVsCddIHx8IDA7XG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOino+mUgeaWsOaIkOWwse+8miR7YWNoWyflkI3np7AnXX1gLCAn5oGt5Zac77yBJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDmm7TmlrDns7vnu5/mlbDmja5cbiAgICAgICAgICAgIGN1cnJlbnRTeXN0ZW1EYXRhWyflt7LlrozmiJAnXSA9IHVwZGF0ZWRBY2hpZXZlbWVudHM7XG4gICAgICAgICAgICBjdXJyZW50U3lzdGVtRGF0YVsn5oiQ5bCx54K55pWwJ10gPSB1cGRhdGVkUG9pbnRzO1xuICAgICAgICAgICAgaWYobmV3U3lzdGVtRGF0YVsn5o+Q56S6J10pIGN1cnJlbnRTeXN0ZW1EYXRhWyfmj5DnpLonXSA9IG5ld1N5c3RlbURhdGFbJ+aPkOekuiddO1xuICAgICAgICAgICAgdXBkYXRlc1sn5LiW55WMLuezu+e7nyddID0gY3VycmVudFN5c3RlbURhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdIOajgOa1i+WIsOaWsOaIkOWwse+8jOW3suWQiOW5tuW5tuabtOaWsOezu+e7n+WPmOmHj+OAgmApO1xuXG4gICAgICAgICAgfSBlbHNlIGlmIChuZXdTeXN0ZW1EYXRhWyfku4rml6Xlt7Lnrb7liLAnXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLmdldERhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB5ZXN0ZXJkYXkuc2V0RGF0ZSh0b2RheSAtIDEpO1xuXG4gICAgICAgICAgICBjb25zdCBzaWduZWRJbkRheXMgPSBfLmNsb25lRGVlcChfLmdldChjdXJyZW50U3lzdGVtRGF0YSwgJ+W3suetvuWIsCcsIFtdKSk7XG4gICAgICAgICAgICBpZiAoIXNpZ25lZEluRGF5cy5pbmNsdWRlcyh0b2RheSkpIHtcbiAgICAgICAgICAgICAgc2lnbmVkSW5EYXlzLnB1c2godG9kYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgY29uc2VjdXRpdmVEYXlzID0gXy5nZXQoY3VycmVudFN5c3RlbURhdGEsICfov57nu63nrb7liLAnLCAwKTtcbiAgICAgICAgICAgIGlmIChzaWduZWRJbkRheXMuaW5jbHVkZXMoeWVzdGVyZGF5LmdldERhdGUoKSkpIHtcbiAgICAgICAgICAgICAgY29uc2VjdXRpdmVEYXlzKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zZWN1dGl2ZURheXMgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdXJyZW50U3lzdGVtRGF0YVsn5bey562+5YiwJ10gPSBzaWduZWRJbkRheXM7XG4gICAgICAgICAgICBjdXJyZW50U3lzdGVtRGF0YVsn6L+e57ut562+5YiwJ10gPSBjb25zZWN1dGl2ZURheXM7XG4gICAgICAgICAgICBpZihuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXSkgY3VycmVudFN5c3RlbURhdGFbJ+aPkOekuiddID0gbmV3U3lzdGVtRGF0YVsn5o+Q56S6J107XG5cbiAgICAgICAgICAgIC8vIOWkhOeQhuetvuWIsOWlluWKsVxuICAgICAgICAgICAgaWYgKG5ld1N5c3RlbURhdGFbJ+WlluWKsSddKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJld2FyZFRleHQgPSBuZXdTeXN0ZW1EYXRhWyflpZblirEnXTtcbiAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSByZXdhcmRUZXh0Lm1hdGNoKC/jgJAoLis/KeOAkXgoXFxkKykvKTtcbiAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtQW1vdW50ID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDlgYforr7lj6rmnInkuIDkuKrop5LoibLvvIzmib7liLDop5LoibLmlbDmja7lubbmm7TmlrDnianlk4FcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyTGlzdEtleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3Jkcyhyb290RGF0YSwgWyfop5LoibInLCAn5YiX6KGoJywgJ+S6uueJqSddKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhckxpc3RLZXkgJiYgQXJyYXkuaXNBcnJheShyb290RGF0YVtjaGFyTGlzdEtleV0pICYmIHJvb3REYXRhW2NoYXJMaXN0S2V5XS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjaGFyQ29udGFpbmVyID0gcm9vdERhdGFbY2hhckxpc3RLZXldWzBdO1xuICAgICAgICAgICAgICAgICAgY29uc3QgY2hhckRhdGFLZXkgPSBPYmplY3Qua2V5cyhjaGFyQ29udGFpbmVyKVswXTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhID0gY2hhckNvbnRhaW5lcltjaGFyRGF0YUtleV07XG4gICAgICAgICAgICAgICAgICBjb25zdCBuYW1lS2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGNoYXJEYXRhLCBbJ+Wnk+WQjScsICflkI3np7AnXSk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChuYW1lS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJOYW1lID0gdGhpcy5mb3JtYXROb2RlTmFtZShjaGFyRGF0YVtuYW1lS2V5XSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zVmFyUGF0aCA9IGDop5LoibIuJHtjaGFyTmFtZX0u54mp5ZOBYDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW1zID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsIGl0ZW1zVmFyUGF0aCwgW10pKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIOajgOafpeeJqeWTgeaYr+WQpuW3suWtmOWcqFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0l0ZW1JbmRleCA9IGN1cnJlbnRJdGVtcy5maW5kSW5kZXgoKGl0ZW06IHN0cmluZykgPT4gaXRlbS5pbmNsdWRlcyhpdGVtTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdJdGVtSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOaVsOmHj1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbVRleHQgPSBjdXJyZW50SXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQW1vdW50TWF0Y2ggPSBleGlzdGluZ0l0ZW1UZXh0Lm1hdGNoKC94KFxcZCspLyk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBbW91bnQgPSBleGlzdGluZ0Ftb3VudE1hdGNoID8gcGFyc2VJbnQoZXhpc3RpbmdBbW91bnRNYXRjaFsxXSwgMTApIDogMTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBbW91bnQgPSBleGlzdGluZ0Ftb3VudCArIGl0ZW1BbW91bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zW2V4aXN0aW5nSXRlbUluZGV4XSA9IGDjgJAke2l0ZW1OYW1lfeOAkXgke25ld0Ftb3VudH1gO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoOaWsOeJqeWTgVxuICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5wdXNoKGDjgJAke2l0ZW1OYW1lfeOAkXgke2l0ZW1BbW91bnR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlc1tpdGVtc1ZhclBhdGhdID0gY3VycmVudEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdIOW3suWwhuetvuWIsOWlluWKseKAnCR7cmV3YXJkVGV4dH3igJ3mt7vliqDliLDop5LoibLigJwke2NoYXJOYW1lfeKAneeahOeJqeWTgeWPmOmHj+S4reOAgmApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGVzWyfkuJbnlYwu57O757ufJ10gPSBjdXJyZW50U3lzdGVtRGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU3RvcnlSZW5kZXJlcl0g5qOA5rWL5Yiw562+5Yiw5LqL5Lu277yM5bey5pu05paw562+5Yiw5pWw5o2u44CCYCk7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1N5c3RlbURhdGFbJ+aKgOiDveaPkOWNhyddKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbFVwZGF0ZXMgPSBBcnJheS5pc0FycmF5KG5ld1N5c3RlbURhdGFbJ+aKgOiDveaPkOWNhyddKSA/IG5ld1N5c3RlbURhdGFbJ+aKgOiDveaPkOWNhyddIDogW25ld1N5c3RlbURhdGFbJ+aKgOiDveaPkOWNhyddXTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTa2lsbHMgPSBfLmNsb25lRGVlcChfLmdldChjdXJyZW50U3lzdGVtRGF0YSwgJ+aKgOiDvScsIFtdKSk7XG5cbiAgICAgICAgICAgIHNraWxsVXBkYXRlcy5mb3JFYWNoKCh1cGRhdGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBza2lsbEluZGV4ID0gY3VycmVudFNraWxscy5maW5kSW5kZXgoKHM6IGFueSkgPT4gc1sn5ZCN56ewJ10gPT09IHVwZGF0ZVsn5ZCN56ewJ10pO1xuICAgICAgICAgICAgICBpZiAoc2tpbGxJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8g5pu05paw546w5pyJ5oqA6IO9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBjdXJyZW50U2tpbGxzW3NraWxsSW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFeHAgPSBza2lsbFsn54af57uD5bqmJ10gfHwgeyB2YWx1ZTogMCwgbWF4OiAxMDAgfTtcbiAgICAgICAgICAgICAgICBjdXJyZW50RXhwLnZhbHVlICs9IHVwZGF0ZVsn54af57uD5bqm5aKe5YqgJ10gfHwgMDtcblxuICAgICAgICAgICAgICAgIC8vIOWkhOeQhuWNh+e6p1xuICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RXhwLnZhbHVlID49IGN1cnJlbnRFeHAubWF4KSB7XG4gICAgICAgICAgICAgICAgICBjdXJyZW50RXhwLnZhbHVlIC09IGN1cnJlbnRFeHAubWF4O1xuICAgICAgICAgICAgICAgICAgc2tpbGxbJ+etiee6pyddID0gKHNraWxsWyfnrYnnuqcnXSB8fCAxKSArIDE7XG4gICAgICAgICAgICAgICAgICAvLyDljYfnuqflkI7nhp/nu4PluqbkuIrpmZDlj6/og73kvJrlop7liqDvvIzov5nph4znroDljJblpITnkIbvvIzlrp7pmYXlj6/mianlsZVcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRFeHAubWF4ID0gTWF0aC5mbG9vcihjdXJyZW50RXhwLm1heCAqIDEuNSk7IFxuICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOS9oOeahOaKgOiDveOAkCR7c2tpbGxbJ+WQjeensCddfeOAkeWNh+e6p+S6hu+8gWAsICfmga3llpzvvIEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2tpbGxbJ+eGn+e7g+W6piddID0gY3VycmVudEV4cDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDmt7vliqDmlrDmioDog71cbiAgICAgICAgICAgICAgICBjdXJyZW50U2tpbGxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgJ+WQjeensCc6IHVwZGF0ZVsn5ZCN56ewJ10sXG4gICAgICAgICAgICAgICAgICAn562J57qnJzogMSxcbiAgICAgICAgICAgICAgICAgICfnhp/nu4PluqYnOiB7IHZhbHVlOiB1cGRhdGVbJ+eGn+e7g+W6puWinuWKoCddIHx8IDAsIG1heDogMTAwIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0b2FzdHIuaW5mbyhg5L2g5a2m5Lya5LqG5paw5oqA6IO977ya44CQJHt1cGRhdGVbJ+WQjeensCddfeOAke+8gWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY3VycmVudFN5c3RlbURhdGFbJ+aKgOiDvSddID0gY3VycmVudFNraWxscztcbiAgICAgICAgICAgIGlmKG5ld1N5c3RlbURhdGFbJ+aPkOekuiddKSBjdXJyZW50U3lzdGVtRGF0YVsn5o+Q56S6J10gPSBuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXTtcbiAgICAgICAgICAgIHVwZGF0ZXNbJ+S4lueVjC7ns7vnu58nXSA9IGN1cnJlbnRTeXN0ZW1EYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSDmo4DmtYvliLDmioDog73mj5DljYfkuovku7bvvIzlt7Lmm7TmlrDmioDog73mlbDmja7jgIJgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAobmV3U3lzdGVtRGF0YVsn54mp5ZOB5Lqk5o2iJ10pIHtcbiAgICAgICAgICAgIGNvbnN0IGV4Y2hhbmdlID0gbmV3U3lzdGVtRGF0YVsn54mp5ZOB5Lqk5o2iJ107XG4gICAgICAgICAgICBpZiAoZXhjaGFuZ2VbJ+aIkOWKnyddKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJMaXN0S2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKHJvb3REYXRhLCBbJ+inkuiJsicsICfliJfooagnLCAn5Lq654mpJ10pO1xuICAgICAgICAgICAgICBpZiAoY2hhckxpc3RLZXkgJiYgQXJyYXkuaXNBcnJheShyb290RGF0YVtjaGFyTGlzdEtleV0pICYmIHJvb3REYXRhW2NoYXJMaXN0S2V5XS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhckNvbnRhaW5lciA9IHJvb3REYXRhW2NoYXJMaXN0S2V5XVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyRGF0YUtleSA9IE9iamVjdC5rZXlzKGNoYXJDb250YWluZXIpWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhID0gY2hhckNvbnRhaW5lcltjaGFyRGF0YUtleV07XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZUtleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3JkcyhjaGFyRGF0YSwgWyflp5PlkI0nLCAn5ZCN56ewJ10pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChuYW1lS2V5KSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjaGFyTmFtZSA9IHRoaXMuZm9ybWF0Tm9kZU5hbWUoY2hhckRhdGFbbmFtZUtleV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXNWYXJQYXRoID0gYOinkuiJsi4ke2NoYXJOYW1lfS7nianlk4FgO1xuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW1zID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsIGl0ZW1zVmFyUGF0aCwgW10pKTtcblxuICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5aSx5Y6755qE54mp5ZOBXG4gICAgICAgICAgICAgICAgICAoZXhjaGFuZ2VbJ+S6pOaNoueJqeWTgSddWyflpLHljrsnXSB8fCBbXSkuZm9yRWFjaCgoaXRlbVRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC/jgJAoLis/KeOAkXgoXFxkKykvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb1JlbW92ZSA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtSW5kZXggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KChpdGVtOiBzdHJpbmcpID0+IGl0ZW0uaW5jbHVkZXMoaXRlbU5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdJdGVtSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtVGV4dCA9IGN1cnJlbnRJdGVtc1tleGlzdGluZ0l0ZW1JbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0Ftb3VudE1hdGNoID0gZXhpc3RpbmdJdGVtVGV4dC5tYXRjaCgveChcXGQrKS8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBbW91bnQgPSBleGlzdGluZ0Ftb3VudE1hdGNoID8gcGFyc2VJbnQoZXhpc3RpbmdBbW91bnRNYXRjaFsxXSwgMTApIDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Ftb3VudCA9IGV4aXN0aW5nQW1vdW50IC0gYW1vdW50VG9SZW1vdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3QW1vdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdID0gYOOAkCR7aXRlbU5hbWV944CReCR7bmV3QW1vdW50fWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbXMuc3BsaWNlKGV4aXN0aW5nSXRlbUluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAvLyDlpITnkIbojrflvpfnmoTnianlk4FcbiAgICAgICAgICAgICAgICAgIChleGNoYW5nZVsn5Lqk5o2i54mp5ZOBJ11bJ+iOt+W+lyddIHx8IFtdKS5mb3JFYWNoKChpdGVtVGV4dDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gaXRlbVRleHQubWF0Y2goL+OAkCguKz8p44CReChcXGQrKS8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtTmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudFRvQWRkID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0l0ZW1JbmRleCA9IGN1cnJlbnRJdGVtcy5maW5kSW5kZXgoKGl0ZW06IHN0cmluZykgPT4gaXRlbS5pbmNsdWRlcyhpdGVtTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0l0ZW1JbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0l0ZW1UZXh0ID0gY3VycmVudEl0ZW1zW2V4aXN0aW5nSXRlbUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQW1vdW50TWF0Y2ggPSBleGlzdGluZ0l0ZW1UZXh0Lm1hdGNoKC94KFxcZCspLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0Ftb3VudCA9IGV4aXN0aW5nQW1vdW50TWF0Y2ggPyBwYXJzZUludChleGlzdGluZ0Ftb3VudE1hdGNoWzFdLCAxMCkgOiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QW1vdW50ID0gZXhpc3RpbmdBbW91bnQgKyBhbW91bnRUb0FkZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtc1tleGlzdGluZ0l0ZW1JbmRleF0gPSBg44CQJHtpdGVtTmFtZX3jgJF4JHtuZXdBbW91bnR9YDtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zLnB1c2goYOOAkCR7aXRlbU5hbWV944CReCR7YW1vdW50VG9BZGR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZXNbaXRlbXNWYXJQYXRoXSA9IGN1cnJlbnRJdGVtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoZXhjaGFuZ2VbJ+aPkOekuiddIHx8ICfkuqTmjaLmiJDlip/vvIEnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKGV4Y2hhbmdlWyfmj5DnpLonXSB8fCAn5Lqk5o2i5aSx6LSl44CCJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDkuI3nrqHmiJDlip/kuI7lkKbvvIzpg73mm7TmlrDns7vnu5/mj5DnpLpcbiAgICAgICAgICAgIGlmKG5ld1N5c3RlbURhdGFbJ+aPkOekuiddKSBjdXJyZW50U3lzdGVtRGF0YVsn5o+Q56S6J10gPSBuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXTtcbiAgICAgICAgICAgIHVwZGF0ZXNbJ+S4lueVjC7ns7vnu58nXSA9IGN1cnJlbnRTeXN0ZW1EYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSDmo4DmtYvliLDnianlk4HkuqTmjaLkuovku7bvvIzlt7LlpITnkIbjgIJgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAobmV3U3lzdGVtRGF0YVsn54mp5ZOB5Y+Y5YyWJ10pIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZSA9IG5ld1N5c3RlbURhdGFbJ+eJqeWTgeWPmOWMliddO1xuICAgICAgICAgICAgY29uc3QgY2hhckxpc3RLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMocm9vdERhdGEsIFsn6KeS6ImyJywgJ+WIl+ihqCcsICfkurrniaknXSk7XG4gICAgICAgICAgICBpZiAoY2hhckxpc3RLZXkgJiYgQXJyYXkuaXNBcnJheShyb290RGF0YVtjaGFyTGlzdEtleV0pICYmIHJvb3REYXRhW2NoYXJMaXN0S2V5XS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJDb250YWluZXIgPSByb290RGF0YVtjaGFyTGlzdEtleV1bMF07XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhS2V5ID0gT2JqZWN0LmtleXMoY2hhckNvbnRhaW5lcilbMF07XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhID0gY2hhckNvbnRhaW5lcltjaGFyRGF0YUtleV07XG4gICAgICAgICAgICAgIGNvbnN0IG5hbWVLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMoY2hhckRhdGEsIFsn5aeT5ZCNJywgJ+WQjeensCddKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChuYW1lS2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhck5hbWUgPSB0aGlzLmZvcm1hdE5vZGVOYW1lKGNoYXJEYXRhW25hbWVLZXldLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtc1ZhclBhdGggPSBg6KeS6ImyLiR7Y2hhck5hbWV9LueJqeWTgWA7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW1zID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsIGl0ZW1zVmFyUGF0aCwgW10pKTtcblxuICAgICAgICAgICAgICAgIC8vIOe7n+S4gOWkhOeQhueJqeWTgeaVsOmHj+WPmOWMlueahOWHveaVsFxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUl0ZW1Db3VudCA9IChpdGVtTGlzdDogc3RyaW5nW10sIGFtb3VudE1vZGlmaWVyOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgIChpdGVtTGlzdCB8fCBbXSkuZm9yRWFjaCgoaXRlbVRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC/jgJAoLis/KeOAkXgoXFxkKykvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUludChtYXRjaFsyXSwgMTApICogYW1vdW50TW9kaWZpZXI7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtSW5kZXggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KChpdGVtOiBzdHJpbmcpID0+IGl0ZW0uaW5jbHVkZXMoYOOAkCR7aXRlbU5hbWV944CRYCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nSXRlbUluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbVRleHQgPSBjdXJyZW50SXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBbW91bnRNYXRjaCA9IGV4aXN0aW5nSXRlbVRleHQubWF0Y2goL3goXFxkKykvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQW1vdW50ID0gZXhpc3RpbmdBbW91bnRNYXRjaCA/IHBhcnNlSW50KGV4aXN0aW5nQW1vdW50TWF0Y2hbMV0sIDEwKSA6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBbW91bnQgPSBleGlzdGluZ0Ftb3VudCArIGFtb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbW91bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtc1tleGlzdGluZ0l0ZW1JbmRleF0gPSBg44CQJHtpdGVtTmFtZX3jgJF4JHtuZXdBbW91bnR9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5zcGxpY2UoZXhpc3RpbmdJdGVtSW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYW1vdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zLnB1c2goYOOAkCR7aXRlbU5hbWV944CReCR7YW1vdW50fWApO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHVwZGF0ZUl0ZW1Db3VudChjaGFuZ2VbJ+WkseWOuyddLCAtMSk7XG4gICAgICAgICAgICAgICAgdXBkYXRlSXRlbUNvdW50KGNoYW5nZVsn6I635b6XJ10sIDEpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHVwZGF0ZXNbaXRlbXNWYXJQYXRoXSA9IGN1cnJlbnRJdGVtcztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9hc3RyLmluZm8oY2hhbmdlWyfmj5DnpLonXSB8fCAn54mp5ZOB5Y+R55Sf5LqG5Y+Y5YyW44CCJyk7XG4gICAgICAgICAgICBpZihuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXSkgY3VycmVudFN5c3RlbURhdGFbJ+aPkOekuiddID0gbmV3U3lzdGVtRGF0YVsn5o+Q56S6J107XG4gICAgICAgICAgICB1cGRhdGVzWyfkuJbnlYwu57O757ufJ10gPSBjdXJyZW50U3lzdGVtRGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU3RvcnlSZW5kZXJlcl0g5qOA5rWL5Yiw54mp5ZOB5Y+Y5YyW5LqL5Lu277yM5bey5aSE55CG44CCYCk7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1N5c3RlbURhdGFbJ+W6h+aKpOaJgOWNh+e6pyddKSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlID0gbmV3U3lzdGVtRGF0YVsn5bqH5oqk5omA5Y2H57qnJ107XG4gICAgICAgICAgICBjb25zdCBzaGVsdGVyVmFyUGF0aCA9ICfkuJbnlYwu5bqH5oqk5omAJztcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTaGVsdGVyID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsIHNoZWx0ZXJWYXJQYXRoLCB7fSkpO1xuXG4gICAgICAgICAgICAvLyDlkIjlubbmlrDml6fmlbDmja5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHVwZ3JhZGUpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ+aWsOWinuWKn+iDvScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkodXBncmFkZVtrZXldKSA/IHVwZ3JhZGVba2V5XSA6IFt1cGdyYWRlW2tleV1dO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmVhdHVyZXMgPSBjdXJyZW50U2hlbHRlclsn5Yqf6IO9J10gfHwgW107XG4gICAgICAgICAgICAgICAgY3VycmVudFNoZWx0ZXJbJ+WKn+iDvSddID0gXy51bmlvbihleGlzdGluZ0ZlYXR1cmVzLCBuZXdGZWF0dXJlcyk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ICE9PSAn5o+Q56S6Jykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTaGVsdGVyW2tleV0gPSB1cGdyYWRlW2tleV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGVzW3NoZWx0ZXJWYXJQYXRoXSA9IGN1cnJlbnRTaGVsdGVyO1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3ModXBncmFkZVsn5o+Q56S6J10gfHwgJ+W6h+aKpOaJgOW3suabtOaWsO+8gScsICflrrblm63mlrDosownKTtcbiAgICAgICAgICAgIGlmKG5ld1N5c3RlbURhdGFbJ+aPkOekuiddKSBjdXJyZW50U3lzdGVtRGF0YVsn5o+Q56S6J10gPSBuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXTtcbiAgICAgICAgICAgIHVwZGF0ZXNbJ+S4lueVjC7ns7vnu58nXSA9IGN1cnJlbnRTeXN0ZW1EYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSDmo4DmtYvliLDluofmiqTmiYDljYfnuqfkuovku7bvvIzlt7LlpITnkIbjgIJgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAobmV3U3lzdGVtRGF0YVsn5paw54mp5ZOB5Y+R546wJ10pIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW1zID0gQXJyYXkuaXNBcnJheShuZXdTeXN0ZW1EYXRhWyfmlrDnianlk4Hlj5HnjrAnXSkgPyBuZXdTeXN0ZW1EYXRhWyfmlrDnianlk4Hlj5HnjrAnXSA6IFtuZXdTeXN0ZW1EYXRhWyfmlrDnianlk4Hlj5HnjrAnXV07XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UG9rZWRleCA9IF8uY2xvbmVEZWVwKF8uZ2V0KGN1cnJlbnRWYXJzLCAn5LiW55WMLuWbvumJtC7nianlk4EnLCBbXSkpO1xuXG4gICAgICAgICAgICBuZXdJdGVtcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFjdXJyZW50UG9rZWRleC5zb21lKChleGlzdGluZzogYW55KSA9PiBleGlzdGluZ1sn5ZCN56ewJ10gPT09IGl0ZW1bJ+WQjeensCddKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQb2tlZGV4LnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgdG9hc3RyLmluZm8oYOaWsOeahOeJqeWTgeKAnCR7aXRlbVsn5ZCN56ewJ1194oCd5bey5re75Yqg5Yiw5Zu+6Ym077yBYCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXBkYXRlc1sn5LiW55WMLuWbvumJtC7nianlk4EnXSA9IGN1cnJlbnRQb2tlZGV4O1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSDmo4DmtYvliLDmlrDnianlk4Hlj5HnjrDkuovku7bvvIzlt7Lmm7TmlrDnianlk4Hlm77pibTjgIJgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAoIV8uaGFzKGN1cnJlbnRWYXJzLCAn5LiW55WMLuezu+e7nycpKSB7XG4gICAgICAgICAgICAvLyDlpoLmnpzlj5jph4/kuK3msqHmnInns7vnu5/mlbDmja7vvIzliJnlsJ3or5Xku45KU09O6L+b6KGM5Yid5aeL5YyWXG4gICAgICAgICAgICBjb25zdCBzeXN0ZW1EYXRhSW5Kc29uID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKHJvb3REYXRhLCBbJ+ezu+e7nyddKTtcbiAgICAgICAgICAgIGlmIChzeXN0ZW1EYXRhSW5Kc29uICYmIHJvb3REYXRhW3N5c3RlbURhdGFJbkpzb25dKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlc1sn5LiW55WMLuezu+e7nyddID0gcm9vdERhdGFbc3lzdGVtRGF0YUluSnNvbl07XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSAn5LiW55WMLuezu+e7nycg5Y+Y6YeP5LiN5a2Y5Zyo77yM5LuOSlNPTui/m+ihjOWIneWni+WMluOAgmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzZWN0aW9uc1RvU3luYykge1xuICAgICAgICAgIGNvbnN0IGRhdGFLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMocm9vdERhdGEsIHNlY3Rpb24ua2V5V29yZHMpO1xuICAgICAgICAgIGlmIChkYXRhS2V5ICYmIHJvb3REYXRhW2RhdGFLZXldKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdEYXRhID0gcm9vdERhdGFbZGF0YUtleV07XG4gICAgICAgICAgICAvLyBGb3IgcG9rZWRleCwgd2UgbmVlZCB0byBtZXJnZSBhcnJheXMsIG5vdCByZXBsYWNlIHRoZW1cbiAgICAgICAgICAgIGlmIChzZWN0aW9uLnZhclBhdGguaW5jbHVkZXMoJ+WbvumJtCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkRGF0YSA9IF8uZ2V0KGN1cnJlbnRWYXJzLCBzZWN0aW9uLnZhclBhdGgsIFtdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21iaW5lZERhdGEgPSBfLnVuaW9uQnkob2xkRGF0YSwgbmV3RGF0YVsn5bey5pS25b2VJ10gfHwgW10sICflkI3np7AnKTtcbiAgICAgICAgICAgICAgICBpZiAoIV8uaXNFcXVhbChvbGREYXRhLCBjb21iaW5lZERhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uc2V0KHVwZGF0ZXMsIHNlY3Rpb24udmFyUGF0aCwgY29tYmluZWREYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZERhdGEgPSBfLmdldChjdXJyZW50VmFycywgc2VjdGlvbi52YXJQYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoIV8uaXNFcXVhbChuZXdEYXRhLCBvbGREYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBfLnNldCh1cGRhdGVzLCBzZWN0aW9uLnZhclBhdGgsIG5ld0RhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlkIzmraXop5LoibLnianlk4FcbiAgICAgICAgY29uc3QgY2hhckxpc3RLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMocm9vdERhdGEsIFsn6KeS6ImyJywgJ+WIl+ihqCcsICfkurrniaknXSk7XG4gICAgICAgIGlmIChjaGFyTGlzdEtleSAmJiBBcnJheS5pc0FycmF5KHJvb3REYXRhW2NoYXJMaXN0S2V5XSkpIHtcbiAgICAgICAgICByb290RGF0YVtjaGFyTGlzdEtleV0uZm9yRWFjaCgoY2hhckNvbnRhaW5lcjogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGFyRGF0YUtleSA9IE9iamVjdC5rZXlzKGNoYXJDb250YWluZXIpWzBdO1xuICAgICAgICAgICAgY29uc3QgY2hhckRhdGEgPSBjaGFyQ29udGFpbmVyW2NoYXJEYXRhS2V5XTtcblxuICAgICAgICAgICAgaWYgKGNoYXJEYXRhICYmIHR5cGVvZiBjaGFyRGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgbmFtZUtleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3JkcyhjaGFyRGF0YSwgWyflp5PlkI0nLCAn5ZCN56ewJ10pO1xuICAgICAgICAgICAgICBjb25zdCBpdGVtc0tleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3JkcyhjaGFyRGF0YSwgWyfnianlk4EnLCAn5qC45b+D54mp5ZOBJ10pO1xuXG4gICAgICAgICAgICAgIGlmIChuYW1lS2V5ICYmIGl0ZW1zS2V5ICYmIGNoYXJEYXRhW25hbWVLZXldICYmIEFycmF5LmlzQXJyYXkoY2hhckRhdGFbaXRlbXNLZXldKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJOYW1lID0gdGhpcy5mb3JtYXROb2RlTmFtZShjaGFyRGF0YVtuYW1lS2V5XSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3SXRlbXMgPSBjaGFyRGF0YVtpdGVtc0tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgdmFyUGF0aCA9IGDop5LoibIuJHtjaGFyTmFtZX0u54mp5ZOBYDtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRJdGVtcyA9IF8uZ2V0KGN1cnJlbnRWYXJzLCB2YXJQYXRoKTtcblxuICAgICAgICAgICAgICAgIGlmICghXy5pc0VxdWFsKG5ld0l0ZW1zLCBvbGRJdGVtcykpIHtcbiAgICAgICAgICAgICAgICAgIF8uc2V0KHVwZGF0ZXMsIHZhclBhdGgsIG5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghXy5pc0VtcHR5KHVwZGF0ZXMpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSBNZXNzYWdlICR7Y3VycmVudE1lc3NhZ2VJZH0gPiAke2xhc3RTeW5jSWR9LiDmo4DmtYvliLDlj5jph4/lj5jljJbvvIzmraPlnKjmm7TmlrA6YCwgdXBkYXRlcyk7XG4gICAgICAgICAgLy8g5bCGIGxhc3RTeW5jTWVzc2FnZUlkIOS5n+WKoOWFpeWIsOabtOaWsOS4rVxuICAgICAgICAgIHVwZGF0ZXNbJ+S4lueVjC5sYXN0U3luY01lc3NhZ2VJZCddID0gY3VycmVudE1lc3NhZ2VJZDtcbiAgICAgICAgICBhd2FpdCBpbnNlcnRPckFzc2lnblZhcmlhYmxlcyh1cGRhdGVzLCB7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogY3VycmVudE1lc3NhZ2VJZCB9KTtcbiAgICAgICAgICB0b2FzdHIuaW5mbyhg54q25oCB5qCPKE0ke2N1cnJlbnRNZXNzYWdlSWR9KeW3suWQjOatpealvOWxguWPmOmHj+OAgmApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbU3RvcnlSZW5kZXJlcl0gTWVzc2FnZSAke2N1cnJlbnRNZXNzYWdlSWR9ID49ICR7bGFzdFN5bmNJZH0uIOacquajgOa1i+WIsOWPmOmHj+WPmOWMluOAgmApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdIOi3s+i/h+aXp+eahOeKtuaAgeagjyhNJHtjdXJyZW50TWVzc2FnZUlkfSnlkIzmraXvvIzmnIDmlrDorrDlvZXkuLogTSR7bGFzdFN5bmNJZH3jgIJgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5Y+Y6YeP5ZCM5q2l5aSx6LSlOicsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcign5Y+Y6YeP5ZCM5q2l5aSx6LSl77yM6K+35p+l55yL5o6n5Yi25Y+w44CCJyk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ2hhcmFjdGVyQ2FyZChjaGFyRGF0YTogYW55KSB7XG4gICAgY29uc3QgdGl0bGVLZXkgPSBPYmplY3Qua2V5cyhjaGFyRGF0YSlbMF07XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IGNoYXJEYXRhW3RpdGxlS2V5XTtcbiAgICBpZiAoIXRpdGxlS2V5IHx8ICFhdHRyaWJ1dGVzKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjYXJkLmNsYXNzTmFtZSA9ICdiZy1tYWluIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1kaW0gcC0zLjUgc2hhZG93LXNtIGNhcmQtaG92ZXIgdGhlbWUtdHJhbnNpdGlvbic7XG5cbiAgICBjb25zdCBoMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgaDMuY2xhc3NOYW1lID0gJ2ZvbnQtYm9sZCB0ZXh0LWxnIG1iLTIgcGItMSBib3JkZXItYiBib3JkZXItZGltIHRoZW1lLXRyYW5zaXRpb24nO1xuICAgIGgzLmlubmVySFRNTCA9IGAke3RoaXMuZXh0cmFjdEVtb2ppcyh0aXRsZUtleSlbMF0gfHwgJyd9ICR7dGhpcy5mb3JtYXROb2RlTmFtZSh0aXRsZUtleSwgdHJ1ZSl9YDtcbiAgICBjYXJkLmFwcGVuZENoaWxkKGgzKTtcblxuICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIGxpc3QuY2xhc3NOYW1lID0gJ3NwYWNlLXktMiB0ZXh0LXNtJztcbiAgICBjYXJkLmFwcGVuZENoaWxkKGxpc3QpO1xuXG4gICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzID09PSAnb2JqZWN0JyAmJiBhdHRyaWJ1dGVzICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGF0dHJpYnV0ZXMpKSB7XG4gICAgICBPYmplY3QuZW50cmllcyhhdHRyaWJ1dGVzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgbGlzdC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUF0dHJpYnV0ZUl0ZW0oa2V5LCB2YWx1ZSkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGF0dHJpYnV0ZXMpKSB7IC8vIEhhbmRsZSBjYXNlIHdoZXJlIGF0dHJpYnV0ZXMgaXMgYW4gYXJyYXkgb2YgZW50cmllc1xuICAgICAgICBhdHRyaWJ1dGVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZW50cnlOYW1lID0gZW50cnlbJ+WQjeensCddIHx8ICfmnKrnn6XmnaHnm64nO1xuICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbGkuY2xhc3NOYW1lID0gJ2NsaWNrYWJsZS1pdGVtJztcbiAgICAgICAgICAgIGxpLmRhdGFzZXQuZGV0YWlscyA9IEpTT04uc3RyaW5naWZ5KGVudHJ5KTtcbiAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IGDigKIgJHt0aGlzLmZvcm1hdE5vZGVOYW1lKGVudHJ5TmFtZSl9YDtcbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cblxuICBjcmVhdGVBdHRyaWJ1dGVJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogSFRNTExJRWxlbWVudCB7XG4gICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgY29uc3QgZW1vamkgPSB0aGlzLmV4dHJhY3RFbW9qaXMoa2V5KVswXSB8fCAn8J+UuCc7XG4gICAgY29uc3Qga2V5SHRtbCA9IGA8c3BhbiBjbGFzcz1cImZvbnQtbWVkaXVtIHRleHQtYWNjZW50XCI+JHtlbW9qaX0gJHt0aGlzLmZvcm1hdE5vZGVOYW1lKGtleSwgdHJ1ZSl9Ojwvc3Bhbj5gO1xuICAgIGNvbnN0IGlzQ29yZUl0ZW1zID0ga2V5LmluY2x1ZGVzKCfmoLjlv4Pnianlk4EnKTtcblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiAndmFsdWUnIGluIHZhbHVlICYmICdtYXgnIGluIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS52YWx1ZSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHZhbHVlLm1heCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGl0ZW0uaW5uZXJIVE1MID0ga2V5SHRtbDtcbiAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAodmFsdWUudmFsdWUgLyB2YWx1ZS5tYXgpICogMTAwO1xuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ2ZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBtdC0xJztcbiAgICAgIGNvbnN0IHByb2dyZXNzQmFyV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgcHJvZ3Jlc3NCYXJXcmFwcGVyLmNsYXNzTmFtZSA9ICdwcm9ncmVzcy1iYXItYmcgdy1mdWxsIHJvdW5kZWQtZnVsbCBoLTIuNSc7XG4gICAgICBjb25zdCBwcm9ncmVzc0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgcHJvZ3Jlc3NCYXIuY2xhc3NOYW1lID0gJ3Byb2dyZXNzLWJhci1mZyBoLTIuNSByb3VuZGVkLWZ1bGwnO1xuICAgICAgcHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBgJHtwZXJjZW50YWdlfSVgO1xuICAgICAgaWYgKHBlcmNlbnRhZ2UgPCAyNSkgcHJvZ3Jlc3NCYXIuY2xhc3NMaXN0LmFkZCgnYmctcmVkLTUwMCcpO1xuICAgICAgZWxzZSBpZiAocGVyY2VudGFnZSA8IDUwKSBwcm9ncmVzc0Jhci5jbGFzc0xpc3QuYWRkKCdiZy15ZWxsb3ctNTAwJyk7XG4gICAgICBlbHNlIHByb2dyZXNzQmFyLmNsYXNzTGlzdC5hZGQoJ2JnLWdyZWVuLTUwMCcpO1xuICAgICAgcHJvZ3Jlc3NCYXJXcmFwcGVyLmFwcGVuZENoaWxkKHByb2dyZXNzQmFyKTtcbiAgICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIHByb2dyZXNzVGV4dC5jbGFzc05hbWUgPSAndGV4dC14cyB0ZXh0LXNlY29uZGFyeSBmb250LW1vbm8nO1xuICAgICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYCR7dmFsdWUudmFsdWV9IC8gJHt2YWx1ZS5tYXh9YDtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9ncmVzc0JhcldyYXBwZXIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByb2dyZXNzVGV4dCk7XG4gICAgICBpdGVtLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICBpdGVtLmlubmVySFRNTCA9IGtleUh0bWw7XG4gICAgICBjb25zdCBzdWJMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgIHN1Ykxpc3QuY2xhc3NOYW1lID0gJ2xpc3QtZGlzYyBsaXN0LWluc2lkZSBtbC00IG10LTEgc3BhY2UteS0xJztcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZS5mb3JFYWNoKHN1YlZhbHVlID0+IHtcbiAgICAgICAgICBjb25zdCBzdWJJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICBsZXQgdGV4dDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaXNDb3JlSXRlbXMgJiYgdHlwZW9mIHN1YlZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPSB0aGlzLmZvcm1hdE5vZGVOYW1lKHN1YlZhbHVlLCB0cnVlKS5yZXBsYWNlKC/jgJB844CRfHhcXGQrL2csICcnKS50cmltKCk7XG4gICAgICAgICAgICBjb25zdCBwb2tlZGV4RW50cnkgPSB0aGlzLmdsb2JhbFBva2VkZXg/Llsn54mp5ZOBJ10/LmZpbmQoZSA9PiBlLuWQjeensCA9PT0gaXRlbU5hbWUpO1xuICAgICAgICAgICAgaWYgKHBva2VkZXhFbnRyeSkge1xuICAgICAgICAgICAgICBzdWJJdGVtLmNsYXNzTGlzdC5hZGQoJ2NsaWNrYWJsZS1pdGVtJyk7XG4gICAgICAgICAgICAgIHN1Ykl0ZW0uZGF0YXNldC5kZXRhaWxzID0gSlNPTi5zdHJpbmdpZnkocG9rZWRleEVudHJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHQgPSB0aGlzLmZvcm1hdE5vZGVOYW1lKFN0cmluZyhzdWJWYWx1ZSkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN1YlZhbHVlID09PSAnb2JqZWN0JyAmJiBzdWJWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc3ViSXRlbS5jbGFzc0xpc3QuYWRkKCdjbGlja2FibGUtaXRlbScpO1xuICAgICAgICAgICAgc3ViSXRlbS5kYXRhc2V0LmRldGFpbHMgPSBKU09OLnN0cmluZ2lmeShzdWJWYWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBuYW1lS2V5ID0gT2JqZWN0LmtleXMoc3ViVmFsdWUpLmZpbmQoayA9PiBrLmluY2x1ZGVzKCflkI3np7AnKSB8fCBrLmluY2x1ZGVzKCflp5PlkI0nKSk7XG4gICAgICAgICAgICB0ZXh0ID0gbmFtZUtleSA/IHRoaXMuZm9ybWF0Tm9kZU5hbWUoU3RyaW5nKHN1YlZhbHVlW25hbWVLZXldKSkgOiAn54K55Ye75p+l55yL6K+m5oOFJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dCA9IHRoaXMuZm9ybWF0Tm9kZU5hbWUoU3RyaW5nKHN1YlZhbHVlKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1Ykl0ZW0uaW5uZXJIVE1MID0gYCR7dGhpcy5leHRyYWN0RW1vamlzKHRleHQpWzBdIHx8ICfigKInfSAke3RoaXMuZm9ybWF0Tm9kZU5hbWUodGV4dCwgdHJ1ZSl9YDtcbiAgICAgICAgICBzdWJMaXN0LmFwcGVuZENoaWxkKHN1Ykl0ZW0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5mb3JFYWNoKChbc3ViS2V5LCBzdWJWYWx1ZV0pID0+IHtcbiAgICAgICAgICBjb25zdCBzdWJJdGVtID0gdGhpcy5jcmVhdGVBdHRyaWJ1dGVJdGVtKHN1YktleSwgc3ViVmFsdWUpO1xuICAgICAgICAgIHN1Ykxpc3QuYXBwZW5kQ2hpbGQoc3ViSXRlbSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaXRlbS5hcHBlbmRDaGlsZChzdWJMaXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlbS5pbm5lckhUTUwgPSBgJHtrZXlIdG1sfSAke3RoaXMuZm9ybWF0Tm9kZU5hbWUoU3RyaW5nKHZhbHVlKSl9YDtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cblxuICByZW5kZXJBY3Rpb25PcHRpb25zKGRhdGE6IGFueSkge1xuICAgIGNvbnN0IGFjdGlvbktleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3JkcyhkYXRhLCBbJ+ihjOWKqCddKTtcbiAgICBpZiAodGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdCkge1xuICAgICAgdGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdC5pbm5lckhUTUwgPSAnJztcbiAgICAgIGlmIChhY3Rpb25LZXkgJiYgZGF0YVthY3Rpb25LZXldKSB7XG4gICAgICAgIGNvbnN0IGFjdGlvbkRhdGEgPSBkYXRhW2FjdGlvbktleV07XG4gICAgICAgIGNvbnN0IG93bmVyS2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGFjdGlvbkRhdGEsIFsn6KGM5Yqo5Lq6JywgJ+inkuiJsiddKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uc0tleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3JkcyhhY3Rpb25EYXRhLCBbJ+WPr+mAieihjOWKqCcsICfpgInpobknXSk7XG5cbiAgICAgICAgaWYgKG93bmVyS2V5ICYmIHRoaXMuZWxlbWVudHMuYWN0aW9uT3duZXIpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzLmFjdGlvbk93bmVyLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXROb2RlTmFtZShhY3Rpb25EYXRhW293bmVyS2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnNLZXkgJiYgQXJyYXkuaXNBcnJheShhY3Rpb25EYXRhW29wdGlvbnNLZXldKSkge1xuICAgICAgICAgIGFjdGlvbkRhdGFbb3B0aW9uc0tleV0uZm9yRWFjaCgob3B0aW9uVGV4dDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gJ3BsLTIgcHktMSBib3JkZXItbC0yIGJvcmRlci1kaW0gbWwtMSBob3Zlcjpib3JkZXItaW5kaWdvLTQwMC83MCB0cmFuc2l0aW9uLWNvbG9ycyB0aGVtZS10cmFuc2l0aW9uJztcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuVGV4dCA9IHRoaXMuZm9ybWF0Tm9kZU5hbWUob3B0aW9uVGV4dCwgdHJ1ZSk7XG4gICAgICAgICAgICBpdGVtLmlubmVySFRNTCA9IGAke3RoaXMuZXh0cmFjdEVtb2ppcyhvcHRpb25UZXh0KVswXSB8fCAn4pa277iPJ30gJHtjbGVhblRleHR9YDtcbiAgICAgICAgICAgIGl0ZW0uZGF0YXNldC5vcHRpb25JbmRleCA9IGluZGV4LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpdGVtLmRhdGFzZXQub3B0aW9uVGV4dCA9IGNsZWFuVGV4dDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMub3B0aW9uc0xpc3QhLmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjdXN0b21BY3Rpb25JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgY3VzdG9tQWN0aW9uSXRlbS5jbGFzc05hbWUgPSAncGwtMiBweS0xIGJvcmRlci1sLTIgYm9yZGVyLWRpbSBtbC0xIGhvdmVyOmJvcmRlci1pbmRpZ28tNDAwLzcwIHRyYW5zaXRpb24tY29sb3JzIHRoZW1lLXRyYW5zaXRpb24gbXQtNCc7XG4gICAgICAgIGN1c3RvbUFjdGlvbkl0ZW0uaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLXBlbi1uaWIgbXItMiB0ZXh0LWFjY2VudFwiPjwvaT4g6Ieq5a6a5LmJ6KGM5YqoLi4uYDtcbiAgICAgICAgY3VzdG9tQWN0aW9uSXRlbS5kYXRhc2V0LmFjdGlvblR5cGUgPSAnY3VzdG9tJztcbiAgICAgICAgdGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdCEuYXBwZW5kQ2hpbGQoY3VzdG9tQWN0aW9uSXRlbSk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMub3B0aW9uc0xpc3QuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVFbXB0eVN0YXRlKCfmsqHmnInlj6/nlKjooYzliqgnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjcmVhdGVFbXB0eVN0YXRlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHJldHVybiBgPGxpIGNsYXNzPVwidGV4dC1jZW50ZXIgcHktNCB0ZXh0LXNlY29uZGFyeSB0aGVtZS10cmFuc2l0aW9uXCI+PGkgY2xhc3M9XCJmYXMgZmEtaW5mby1jaXJjbGUgbXItMVwiPjwvaT4ke21lc3NhZ2V9PC9saT5gO1xuICB9XG5cbiAgaGFuZGxlRXJyb3IoZXJyb3I6IEVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign5riy5p+T6ZSZ6K+vOicsIGVycm9yKTtcbiAgICBjb25zdCBlcnJvckh0bWwgPSBgPGRpdiBjbGFzcz1cImJnLXJlZC05MDAvMjAgYm9yZGVyIGJvcmRlci1yZWQtODAwLzMwIHRleHQtcmVkLTQwMCBweC00IHB5LTMgcm91bmRlZCByZWxhdGl2ZVwiIHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cImZvbnQtYm9sZFwiPuWKoOi9veWksei0pTogPC9zdHJvbmc+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJsb2NrIHNtOmlubGluZVwiPiR7ZXJyb3IubWVzc2FnZX08L3NwYW4+XG4gICAgICAgIDwvZGl2PmA7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMuY2hhcmFjdGVyc0NvbnRhaW5lcikgdGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyLmlubmVySFRNTCA9IGVycm9ySHRtbDtcbiAgICBpZiAodGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdCkgdGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdC5pbm5lckhUTUwgPSBgPGxpPiR7ZXJyb3JIdG1sfTwvbGk+YDtcbiAgICBjb25zdCBhY3Rpb25Pd25lclBhcmVudCA9IHRoaXMuZWxlbWVudHMuYWN0aW9uT3duZXI/LnBhcmVudEVsZW1lbnQ7XG4gICAgaWYgKGFjdGlvbk93bmVyUGFyZW50KSBhY3Rpb25Pd25lclBhcmVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG4gIGhhbmRsZVBhcnNpbmdGYWlsdXJlKHJhd1RleHQ6IHN0cmluZywgZXJyb3I6IHVua25vd24pIHtcbiAgICBpZiAodGhpcy5lbGVtZW50cy5zdGF0dXNCYXJUaXRsZSkgdGhpcy5lbGVtZW50cy5zdGF0dXNCYXJUaXRsZS50ZXh0Q29udGVudCA9ICdKU09O6Kej5p6Q5aSx6LSlJztcbiAgICBjb25zdCBzYWZlUmF3VGV4dCA9IFN0cmluZyhyYXdUZXh0IHx8ICcnKTtcbiAgICBcbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gXCLmnKrnn6XplJnor69cIjtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFN0cmluZyhlcnJvcik7XG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3JIdG1sID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJnLW9yYW5nZS04MDAvMjAgYm9yZGVyIGJvcmRlci1vcmFuZ2UtNzAwLzMwIHRleHQtb3JhbmdlLTMwMCBweC00IHB5LTMgcm91bmRlZC1sZyByZWxhdGl2ZVwiIHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgICAgIDxzdHJvbmcgY2xhc3M9XCJmb250LWJvbGRcIj7op6PmnpDlpLHotKU6PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJibG9jayBzbTppbmxpbmVcIj4ke2Vycm9yTWVzc2FnZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJtdC0yIHRleHQtc21cIj7lt7LkuLrmgqjmmL7npLrljp/lp4vovpPlh7rlhoXlrrnvvIzor7fmo4Dmn6XmoLzlvI/vvJo8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJiZy1ncmF5LTkwMC81MCB0ZXh0LXdoaXRlIHAtNCByb3VuZGVkLWxnIG10LTIgd2hpdGVzcGFjZS1wcmUtd3JhcCB0ZXh0LXhzIGxlYWRpbmctcmVsYXhlZFwiPjxjb2RlPiR7c2FmZVJhd1RleHQucmVwbGFjZSgvPC9nLCAnPCcpLnJlcGxhY2UoLz4vZywgJz4nKX08L2NvZGU+PC9wcmU+XG4gICAgICAgIGA7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMuY2hhcmFjdGVyc0NvbnRhaW5lcikge1xuICAgICAgdGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyLmlubmVySFRNTCA9IGVycm9ySHRtbDtcbiAgICAgIHRoaXMuZWxlbWVudHMuY2hhcmFjdGVyc0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdtZDpncmlkLWNvbHMtMicpO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdCkgdGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdC5pbm5lckhUTUwgPSAnJztcbiAgICBjb25zdCBhY3Rpb25Pd25lclBhcmVudCA9IHRoaXMuZWxlbWVudHMuYWN0aW9uT3duZXI/LnBhcmVudEVsZW1lbnQ7XG4gICAgaWYgKGFjdGlvbk93bmVyUGFyZW50KSBhY3Rpb25Pd25lclBhcmVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG5cbiAgZXh0cmFjdEVtb2ppcyh0ZXh0OiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCFfLmlzU3RyaW5nKHRleHQpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IGVtb2ppUmVnZXggPSAvW1xcdXsxRjYwMH0tXFx1ezFGNjRGfVxcdXsxRjMwMH0tXFx1ezFGNUZGfVxcdXsxRjkwMH0tXFx1ezFGOUZGfVxcdXsxRkE3MH0tXFx1ezFGQUZGfVxcdXsxRjY4MH0tXFx1ezFGNkZGfVxcdXsxRjFFMH0tXFx1ezFGMUZGfVxcdXsyNjAwfS1cXHV7MjZGRn1cXHV7MjcwMH0tXFx1ezI3QkZ9XS9ndTtcbiAgICByZXR1cm4gdGV4dC5tYXRjaChlbW9qaVJlZ2V4KSB8fCBbXTtcbiAgfVxuXG4gIGZvcm1hdE5vZGVOYW1lKG5hbWU6IGFueSwgcmVtb3ZlQWxsRW1vamkgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgaWYgKCFfLmlzU3RyaW5nKG5hbWUpICYmICFfLmlzTnVtYmVyKG5hbWUpKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGxldCBjbGVhbk5hbWUgPSBfLnRvU3RyaW5nKG5hbWUpO1xuICAgIGNsZWFuTmFtZSA9IF8ucmVwbGFjZShjbGVhbk5hbWUsIC9eXFxkK1xcLlxccyovLCAnJyk7XG4gICAgaWYgKHJlbW92ZUFsbEVtb2ppKSB7XG4gICAgICBjb25zdCBlbW9qaVJlZ2V4ID0gL1tcXHV7MUY2MDB9LVxcdXsxRjY0Rn1cXHV7MUYzMDB9LVxcdXsxRjVGRn1cXHV7MUY2ODB9LVxcdXsxRjZGRn1cXHV7MUYxRTB9LVxcdXsxRjFGRn1cXHV7MjYwMH0tXFx1ezI2RkZ9XFx1ezI3MDB9LVxcdXsyN0JGfV0vZ3U7XG4gICAgICBjbGVhbk5hbWUgPSBfLnJlcGxhY2UoY2xlYW5OYW1lLCBlbW9qaVJlZ2V4LCAnJyk7XG4gICAgfVxuICAgIHJldHVybiBfLnRyaW0oY2xlYW5OYW1lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0Q3VzdG9tQWN0aW9uTW9kYWwoKSB7XG4gIGNvbnN0IG1vZGFsID0gJCgnI2N1c3RvbS1hY3Rpb24tbW9kYWwnKTtcbiAgY29uc3QgaW5wdXQgPSAkKCcjY3VzdG9tLWFjdGlvbi1pbnB1dCcpO1xuICBjb25zdCBjb25maXJtQnRuID0gJCgnI2NvbmZpcm0tYWN0aW9uLWJ0bicpO1xuICBjb25zdCBjYW5jZWxCdG4gPSAkKCcjY2FuY2VsLWFjdGlvbi1idG4nKTtcbiAgY29uc3Qgb3B0aW9uc0xpc3QgPSAkKCcjb3B0aW9ucy1saXN0Jyk7XG4gIGxldCBjdXJyZW50VGFyZ2V0OiBKUXVlcnk8SFRNTEVsZW1lbnQ+IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3Qgc2hvd01vZGFsID0gKHRhcmdldDogSlF1ZXJ5PEhUTUxFbGVtZW50PikgPT4ge1xuICAgIGN1cnJlbnRUYXJnZXQgPSB0YXJnZXQ7XG4gICAgbW9kYWwuaW5zZXJ0QWZ0ZXIodGFyZ2V0KTtcbiAgICBtb2RhbC5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICBpbnB1dC52YWwoJycpLnRyaWdnZXIoJ2ZvY3VzJyk7XG4gIH07XG5cbiAgY29uc3QgaGlkZU1vZGFsID0gKCkgPT4ge1xuICAgIGlmIChjdXJyZW50VGFyZ2V0KSB7XG4gICAgICBtb2RhbC5yZW1vdmVDbGFzcygnaXMtb3BlbicpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIG9wdGlvbnNMaXN0LmFwcGVuZChtb2RhbCk7XG4gICAgICBjdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY29uZmlybUFjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VySW5wdXQgPSAoaW5wdXQudmFsKCkgYXMgc3RyaW5nKS50cmltKCk7XG4gICAgaWYgKHVzZXJJbnB1dCkge1xuICAgICAgaGlkZU1vZGFsKCk7XG4gICAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgICBjb25zdCB2YXJpYWJsZXMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICAgIGNvbnN0IHZhcmlhYmxlc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KHZhcmlhYmxlcywgbnVsbCwgMik7XG4gICAgICBjb25zdCBjb21tYW5kID0gYC9zZW5kICR7dXNlcklucHV0fVxcblxcbjx2YXJpYWJsZXM+XFxuJHt2YXJpYWJsZXNTdHJpbmd9XFxuPC92YXJpYWJsZXM+IHwgL3RyaWdnZXJgO1xuICAgICAgXG4gICAgICB0b2FzdHIuaW5mbygn5q2j5Zyo5omn6KGM6Ieq5a6a5LmJ6KGM5YqoLi4uJyk7XG4gICAgICBhd2FpdCB0cmlnZ2VyU2xhc2goY29tbWFuZCk7XG4gICAgICB0b2FzdHIuc3VjY2Vzcygn6Ieq5a6a5LmJ6KGM5Yqo5bey5Y+R6YCB77yBJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvYXN0ci53YXJuaW5nKCfor7fovpPlhaXooYzliqjlhoXlrrnjgIInKTtcbiAgICB9XG4gIH07XG5cbiAgY2FuY2VsQnRuLm9uKCdjbGljaycsIGhpZGVNb2RhbCk7XG4gIGNvbmZpcm1CdG4ub24oJ2NsaWNrJywgY29uZmlybUFjdGlvbik7XG5cbiAgcmV0dXJuIHsgc2hvd01vZGFsIH07XG59XG5cbmZ1bmN0aW9uIGluaXREZXRhaWxzTW9kYWwoKTogeyBzaG93TW9kYWxXaXRoRGF0YTogKGRhdGE6IGFueSkgPT4gdm9pZCB9IHtcbiAgY29uc3QgbW9kYWxPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtbW9kYWwnKTtcbiAgY29uc3QgbW9kYWxUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC10aXRsZScpO1xuICBjb25zdCBtb2RhbEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtYm9keScpO1xuICBjb25zdCBjbG9zZU1vZGFsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWNsb3NlLWJ0bicpO1xuXG4gIGlmICghbW9kYWxPdmVybGF5IHx8ICFtb2RhbFRpdGxlIHx8ICFtb2RhbEJvZHkgfHwgIWNsb3NlTW9kYWxCdG4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+ivpuaDheaooeaAgeahhueahOW/heimgURPTeWFg+e0oOacquaJvuWIsO+8gScpO1xuICB9XG5cbiAgY29uc3QgaGlkZU1vZGFsID0gKCkgPT4gbW9kYWxPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gIGNsb3NlTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xuICBtb2RhbE92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWxPdmVybGF5KSBoaWRlTW9kYWwoKTtcbiAgfSk7XG5cbiAgY29uc3Qgc2hvd01vZGFsV2l0aERhdGEgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsKSB7XG4gICAgICBjb25zdCB0aXRsZUtleSA9IE9iamVjdC5rZXlzKGRhdGEpLmZpbmQoayA9PiBrLmluY2x1ZGVzKCflkI3np7AnKSB8fCBrLmluY2x1ZGVzKCflp5PlkI0nKSk7XG4gICAgICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gdGl0bGVLZXkgPyBkYXRhW3RpdGxlS2V5XSA6ICfor6bmg4UnO1xuICAgICAgXG4gICAgICBsZXQgYm9keUh0bWwgPSAnPHVsPic7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICBib2R5SHRtbCArPSBgPGxpPjxzcGFuIGNsYXNzPVwiaXRlbS1rZXlcIj4ke2tleX06PC9zcGFuPiAke3ZhbHVlfTwvbGk+YDtcbiAgICAgIH1cbiAgICAgIGJvZHlIdG1sICs9ICc8L3VsPic7XG4gICAgICBtb2RhbEJvZHkuaW5uZXJIVE1MID0gYm9keUh0bWw7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9ICfor6bmg4UnO1xuICAgICAgbW9kYWxCb2R5LnRleHRDb250ZW50ID0gU3RyaW5nKGRhdGEpO1xuICAgIH1cbiAgICBtb2RhbE92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gIH07XG5cbiAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgY2xpY2thYmxlSXRlbSA9IHRhcmdldC5jbG9zZXN0KCcuY2xpY2thYmxlLWl0ZW0nKTtcbiAgICBpZiAoY2xpY2thYmxlSXRlbSkge1xuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IChjbGlja2FibGVJdGVtIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmRldGFpbHM7XG4gICAgICBpZiAoZGF0YVN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpO1xuICAgICAgICAgIHNob3dNb2RhbFdpdGhEYXRhKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwi6Kej5p6Q6K+m5oOF5pWw5o2u5aSx6LSlOlwiLCBlcnIpO1xuICAgICAgICAgIHRvYXN0ci5lcnJvcihcIuaXoOazleaYvuekuuivpuaDheOAglwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHsgc2hvd01vZGFsV2l0aERhdGEgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFN5c3RlbVJlZnJlc2goc3lzdGVtTmFtZTogc3RyaW5nLCBidXR0b246IEpRdWVyeTxIVE1MRWxlbWVudD4pIHtcbiAgY29uc3Qgb3JpZ2luYWxDb250ZW50ID0gYnV0dG9uLmh0bWwoKTtcbiAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSkuZmluZCgnaScpLmFkZENsYXNzKCdmYS1zcGluJyk7XG4gIFxuICBjb25zdCBjb21tYW5kID0gYC9zZW5kIFtTWVNURU1dIOOAkCR7c3lzdGVtTmFtZX3ns7vnu5/jgJHvvJrigJzorqnmiJHnnIvnnIvigKbigKbmnInku4DkuYjmlrDkuJzopb/lj6/ku6Xnu5nkvaDigKbigKbigJ3vvIjnjqnlrrbor7fmsYLliLfmlrAke3N5c3RlbU5hbWV95YiX6KGo77yJIHwgL3RyaWdnZXJgO1xuICB0b2FzdHIuaW5mbyhg5q2j5Zyo6K+35rGC5Yi35pawJHtzeXN0ZW1OYW1lfS4uLmApO1xuICB0cnkge1xuICAgIGF3YWl0IHRyaWdnZXJTbGFzaChjb21tYW5kKTtcbiAgICB0b2FzdHIuc3VjY2Vzcyhg5Yi35paw6K+35rGC5bey5Y+R6YCB77yBYCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihg5Yi35pawJHtzeXN0ZW1OYW1lfeWksei0pTpgLCBlcnJvcik7XG4gICAgdG9hc3RyLmVycm9yKFwi6K+35rGC5aSx6LSl77yM6K+35p+l55yL5o6n5Yi25Y+w44CCXCIpO1xuICB9IGZpbmFsbHkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLmh0bWwob3JpZ2luYWxDb250ZW50KTtcbiAgICB9LCAxMDAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0UmV3YXJkc01vZGFsKCkge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXdhcmRzLW1vZGFsJyk7XG4gIGNvbnN0IGNsb3NlTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV3YXJkcy1tb2RhbC1jbG9zZS1idG4nKTtcbiAgY29uc3QgbW9kYWxCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jld2FyZHMtbW9kYWwtYm9keScpO1xuICBjb25zdCByZWZyZXNoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZnJlc2gtcmV3YXJkcy1idG4nKTtcblxuICBjb25zdCBoaWRlTW9kYWwgPSAoKSA9PiBtb2RhbD8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgY2xvc2VNb2RhbEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xuICBtb2RhbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIGhpZGVNb2RhbCgpO1xuICB9KTtcblxuICByZWZyZXNoQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgcmVxdWVzdFN5c3RlbVJlZnJlc2goJ+aIkOWwseWlluWKsScsICQoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KSk7XG4gIH0pO1xuXG4gIGNvbnN0IHNob3dNb2RhbFdpdGhSZXdhcmRzID0gKHJld2FyZHNKc29uU3RyaW5nOiBzdHJpbmcsIGN1cnJlbnRQb2ludHM6IG51bWJlcikgPT4ge1xuICAgIGlmICghbW9kYWxCb2R5KSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmV3YXJkc0RhdGEgPSBKU09OLnBhcnNlKHJld2FyZHNKc29uU3RyaW5nKTtcbiAgICAgIGxldCBodG1sID0gYDxwIGNsYXNzPVwidGV4dC1zbSB0ZXh0LXNlY29uZGFyeSBtYi00XCI+JHtyZXdhcmRzRGF0YS5kZXNjcmlwdGlvbiB8fCAnJ308L3A+YDtcbiAgICAgIGNvbnN0IGlzTW9iaWxlID0gd2luZG93LmlubmVyV2lkdGggPCA3Njg7XG5cbiAgICAgIHJld2FyZHNEYXRhLnRpZXJzPy5mb3JFYWNoKCh0aWVyOiBhbnkpID0+IHtcbiAgICAgICAgaHRtbCArPSBgXG4gICAgICAgICAgPGRldGFpbHMgY2xhc3M9XCJncm91cCBib3JkZXItdCBib3JkZXItZGltIG10LTQgcHQtMlwiICR7aXNNb2JpbGUgPyAnJyA6ICdvcGVuJ30+XG4gICAgICAgICAgICA8c3VtbWFyeSBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWxnIGN1cnNvci1wb2ludGVyIGhvdmVyOnRleHQtYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIHRoZW1lLXRyYW5zaXRpb24gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHB5LTJcIj5cbiAgICAgICAgICAgICAgPHNwYW4+JHt0aWVyLnRpZXJfbmFtZSB8fCAn5aWW5YqxJ30gPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtIHRleHQtc2Vjb25kYXJ5IGZvbnQtbm9ybWFsXCI+KCR7dGllci5jb3N0X3JhbmdlIHx8ICcnfSk8L3NwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLWRvd24gdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMzAwIGdyb3VwLW9wZW46cm90YXRlLTE4MFwiPjwvaT5cbiAgICAgICAgICAgIDwvc3VtbWFyeT5cbiAgICAgICAgICAgIDx1bCBjbGFzcz1cInNwYWNlLXktMyBtdC0yXCI+XG4gICAgICAgIGA7XG4gICAgICAgIFxuICAgICAgICB0aWVyLnJld2FyZHM/LmZvckVhY2goKHJld2FyZDogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FuQWZmb3JkID0gY3VycmVudFBvaW50cyA+PSByZXdhcmQuY29zdDtcbiAgICAgICAgICBodG1sICs9IGBcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cInAtNCByb3VuZGVkLWxnIGJnLXNlY29uZGFyeSBib3JkZXIgYm9yZGVyLWRpbVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb250LXNlbWlib2xkIHRleHQtcHJpbWFyeVwiPiR7cmV3YXJkLm5hbWUgfHwgJ+acquefpeWlluWKsSd9PC9wPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtc2Vjb25kYXJ5IG10LTFcIj4ke3Jld2FyZC5kZXNjcmlwdGlvbiB8fCAnJ308L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuLXByaW1hcnkgcmVkZWVtLWJ0biB3aGl0ZXNwYWNlLW5vd3JhcCBtbC00IHRleHQtc21cIlxuICAgICAgICAgICAgICAgICAgZGF0YS1uYW1lPVwiJHtyZXdhcmQubmFtZX1cIiBcbiAgICAgICAgICAgICAgICAgIGRhdGEtY29zdD1cIiR7cmV3YXJkLmNvc3R9XCJcbiAgICAgICAgICAgICAgICAgICR7IWNhbkFmZm9yZCA/ICdkaXNhYmxlZCcgOiAnJ31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAke3Jld2FyZC5jb3N0fSA8aSBjbGFzcz1cImZhcyBmYS1zdGFyIHRleHQteHNcIj48L2k+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICBgO1xuICAgICAgICB9KTtcbiAgICAgICAgaHRtbCArPSAnPC91bD48L2RldGFpbHM+JztcbiAgICAgIH0pO1xuXG4gICAgICBtb2RhbEJvZHkuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuino+aekOWlluWKsUpTT07lpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcihcIuaXoOazleino+aekOWlluWKseWIl+ihqOOAglwiKTtcbiAgICAgIG1vZGFsQm9keS5pbm5lckhUTUwgPSBgPHAgY2xhc3M9XCJ0ZXh0LXJlZC00MDBcIj7liqDovb3lpZblirHlpLHotKXvvIzor7fmo4Dmn6XkuJbnlYzkuabmnaHnm67moLzlvI/jgII8L3A+YDtcbiAgICB9XG4gICAgXG4gICAgbW9kYWw/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICB9O1xuXG4gIG1vZGFsQm9keT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZWRlZW0tYnRuJykpIHtcbiAgICAgIGNvbnN0IGl0ZW1OYW1lID0gdGFyZ2V0LmRhdGFzZXQubmFtZTtcbiAgICAgIGNvbnN0IGl0ZW1Db3N0ID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQuY29zdCB8fCAnMCcsIDEwKTtcbiAgICAgIFxuICAgICAgY29uc3QgY29tbWFuZCA9IGAvc2VuZCBbU1lTVEVNXSBQbGF5ZXIgd2FudHMgdG8gcmVkZWVtIHRoZSByZXdhcmQ6IFwiJHtpdGVtTmFtZX1cIiAoQ29zdDogJHtpdGVtQ29zdH0gcG9pbnRzKS4gfCAvdHJpZ2dlcmA7XG4gICAgICB0b2FzdHIuaW5mbyhg5q2j5Zyo5bCd6K+V5YWR5o2iOiAke2l0ZW1OYW1lfS4uLmApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdHJpZ2dlclNsYXNoKGNvbW1hbmQpO1xuICAgICAgICB0b2FzdHIuc3VjY2Vzcyhg5YWR5o2i6K+35rGC5bey5Y+R6YCB77yBYCk7XG4gICAgICAgIGhpZGVNb2RhbCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuWFkeaNouWksei0pTpcIiwgZXJyb3IpO1xuICAgICAgICB0b2FzdHIuZXJyb3IoXCLlhZHmjaLlpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7DjgIJcIik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4geyBzaG93TW9kYWxXaXRoUmV3YXJkcyB9O1xufVxuXG5mdW5jdGlvbiBpbml0UmVtb3RlU3luY01vZGFsKHNob3dNb2RhbFdpdGhEYXRhOiAoZGF0YTogYW55KSA9PiB2b2lkKSB7XG4gIGNvbnN0IG9wZW5Nb2RhbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW1vdGUtc3luYy1idG4nKTtcbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlLXN5bmMtbW9kYWwnKTtcbiAgY29uc3QgY2xvc2VNb2RhbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW1vdGUtc3luYy1jbG9zZS1idG4nKTtcbiAgXG4gIGNvbnN0IHRhYnMgPSBtb2RhbD8ucXVlcnlTZWxlY3RvckFsbCgnLm1haW4tdGFiLWJ0bicpO1xuICBjb25zdCBzdWJtaXRUYWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlLXN1Ym1pdC10YWInKTtcbiAgY29uc3QgZmV0Y2hUYWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlLWZldGNoLXRhYicpO1xuICBcbiAgY29uc3QgbG9jYWxEaWZmTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhbC1kaWZmLWxpc3QnKTtcbiAgY29uc3QgcmVtb3RlRGlmZkxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlLWRpZmYtbGlzdCcpO1xuXG4gIGNvbnN0IGZldGNoUmVtb3RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZldGNoLWZyb20tcmVtb3RlLWJ0bicpO1xuICBjb25zdCBzdWJtaXRDb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXQtdG8tcmVtb3RlLWNvbnRyb2xzJyk7XG4gIGNvbnN0IGltcG9ydENvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydC1mcm9tLXJlbW90ZS1jb250cm9scycpO1xuICBjb25zdCBzdWJtaXRUb1JlbW90ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXQtdG8tcmVtb3RlLWJ0bicpO1xuICBjb25zdCBpbXBvcnRGcm9tUmVtb3RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydC1mcm9tLXJlbW90ZS1idG4nKTtcblxuICBsZXQgcmVtb3RlRGF0YUNhY2hlOiBSZW1vdGVQb2tlZGV4RGF0YSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0IHNob3dNb2RhbCA9IGFzeW5jICgpID0+IHtcbiAgICBtb2RhbD8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgLy8gRGVmYXVsdCB0byBzdWJtaXQgdGFiXG4gICAgdGFicz8uZm9yRWFjaCh0ID0+IHQuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYicpID09PSAnc3VibWl0JyA/IHQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJykgOiB0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcbiAgICBzdWJtaXRUYWI/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIGZldGNoVGFiPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBzdWJtaXRDb250cm9scz8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgaW1wb3J0Q29udHJvbHM/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIGZldGNoUmVtb3RlQnRuPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBhd2FpdCBwb3B1bGF0ZVN1Ym1pdExpc3QoKTtcbiAgfTtcblxuICBjb25zdCBoaWRlTW9kYWwgPSAoKSA9PiBtb2RhbD8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgY29uc3QgcG9wdWxhdGVTdWJtaXRMaXN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbG9jYWxEaWZmTGlzdCkgcmV0dXJuO1xuICAgIGxvY2FsRGlmZkxpc3QuaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1zZWNvbmRhcnkgcC00XCI+5q2j5Zyo6K6h566X5beu5byCLi4uPC9wPmA7XG4gICAgXG4gICAgY29uc3QgbG9jYWxQb2tlZGV4ID0gYXdhaXQgUG9rZWRleC5nZXRQb2tlZGV4RGF0YSgpO1xuICAgIGNvbnN0IGxvY2FsQWNoaWV2ZW1lbnRzID0gYXdhaXQgUG9rZWRleC5nZXRBY2hpZXZlbWVudHMoKTtcbiAgICBjb25zdCByZW1vdGUgPSByZW1vdGVEYXRhQ2FjaGUgfHwgYXdhaXQgUG9rZWRleC5nZXRSZW1vdGVQb2tlZGV4KCk7XG4gICAgaWYgKHJlbW90ZSkgcmVtb3RlRGF0YUNhY2hlID0gcmVtb3RlO1xuXG4gICAgbGV0IGRpZmZIdG1sID0gJyc7XG4gICAgbGV0IGRpZmZDb3VudCA9IDA7XG4gICAgY29uc3QgdHlwZXM6IFNoYXJlYWJsZVR5cGVbXSA9IFsn5aaW5YW9JywgJ+akjeeJqScsICfnianlk4EnLCAn5oiQ5bCxJ107XG5cbiAgICB0eXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgY29uc3QgbG9jYWxFbnRyaWVzID0gdHlwZSA9PT0gJ+aIkOWwsScgPyBsb2NhbEFjaGlldmVtZW50cyA6IGxvY2FsUG9rZWRleFt0eXBlXTtcbiAgICAgIGNvbnN0IHJlbW90ZUVudHJpZXMgPSByZW1vdGUgPyAocmVtb3RlW3R5cGUgYXMga2V5b2YgUmVtb3RlUG9rZWRleERhdGFdIHx8IFtdKSA6IFtdO1xuICAgICAgY29uc3QgcmVtb3RlTmFtZXMgPSBuZXcgU2V0KHJlbW90ZUVudHJpZXMubWFwKGUgPT4gZS7lkI3np7ApKTtcbiAgICAgIGNvbnN0IGRpZmZFbnRyaWVzID0gbG9jYWxFbnRyaWVzLmZpbHRlcihlID0+ICFyZW1vdGVOYW1lcy5oYXMoZS7lkI3np7ApKTtcbiAgICAgIFxuICAgICAgaWYgKGRpZmZFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGlmZkNvdW50ICs9IGRpZmZFbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgZGlmZkh0bWwgKz0gYDxoNCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5LzkwIG10LTIgZmlyc3Q6bXQtMFwiPiR7dHlwZX08L2g0Pjx1bD5gO1xuICAgICAgICBkaWZmRW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICBkaWZmSHRtbCArPSBgXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJwLTIgcm91bmRlZC1sZyBiZy1tYWluLzUwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciBmbGV4LWdyb3cgbXItNFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm1yLTNcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cnVuY2F0ZVwiIHRpdGxlPVwiJHtlbnRyeS7lkI3np7B9XCI+JHtlbnRyeS7lkI3np7B9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteC0yIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicG9rZWRleC12aWV3LWJ0biB0ZXh0LXNtIHRleHQtYmx1ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCIgZGF0YS1zb3VyY2U9XCJsb2NhbFwiIHRpdGxlPVwi5p+l55yLXCI+PGkgY2xhc3M9XCJmYXMgZmEtZXllXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbGk+YDtcbiAgICAgICAgfSk7XG4gICAgICAgIGRpZmZIdG1sICs9IGA8L3VsPmA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoZGlmZkNvdW50ID09PSAwKSB7XG4gICAgICBsb2NhbERpZmZMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc2Vjb25kYXJ5IHAtNFwiPuaBreWWnO+8geaCqOeahOacrOWcsOWbvumJtOW3suWFqOmDqOWQjOatpeiHs+ekvuWMuuOAgjwvcD5gO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbERpZmZMaXN0LmlubmVySFRNTCA9IGRpZmZIdG1sO1xuICAgIH1cbiAgfTtcblxuICBvcGVuTW9kYWxCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd01vZGFsKTtcbiAgY2xvc2VNb2RhbEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xuICBtb2RhbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIHtcbiAgICAgIGhpZGVNb2RhbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IHZpZXdCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLnBva2VkZXgtdmlldy1idG4nKTtcblxuICAgIGlmICh2aWV3QnV0dG9uKSB7XG4gICAgICBjb25zdCB0eXBlID0gdmlld0J1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpIGFzIFNoYXJlYWJsZVR5cGU7XG4gICAgICBjb25zdCBuYW1lID0gdmlld0J1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgY29uc3Qgc291cmNlID0gdmlld0J1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtc291cmNlJyk7XG5cbiAgICAgIGlmICh0eXBlICYmIG5hbWUgJiYgc291cmNlKSB7XG4gICAgICAgIGxldCBlbnRyeTogUG9rZWRleEVudHJ5IHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc291cmNlID09PSAnbG9jYWwnKSB7XG4gICAgICAgICAgaWYgKHR5cGUgPT09ICfmiJDlsLEnKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbEFjaGlldmVtZW50cyA9IGF3YWl0IFBva2VkZXguZ2V0QWNoaWV2ZW1lbnRzKCk7XG4gICAgICAgICAgICBlbnRyeSA9IGxvY2FsQWNoaWV2ZW1lbnRzLmZpbmQoZSA9PiBlLuWQjeensCA9PT0gbmFtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsUG9rZWRleCA9IGF3YWl0IFBva2VkZXguZ2V0UG9rZWRleERhdGEoKTtcbiAgICAgICAgICAgIGVudHJ5ID0gbG9jYWxQb2tlZGV4W3R5cGUgYXMgUG9rZWRleFR5cGVdPy5maW5kKGUgPT4gZS7lkI3np7AgPT09IG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT09ICdyZW1vdGUnICYmIHJlbW90ZURhdGFDYWNoZSkge1xuICAgICAgICAgIGVudHJ5ID0gKHJlbW90ZURhdGFDYWNoZVt0eXBlIGFzIGtleW9mIFJlbW90ZVBva2VkZXhEYXRhXSB8fCBbXSkuZmluZChlID0+IGUu5ZCN56ewID09PSBuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgIHNob3dNb2RhbFdpdGhEYXRhKGVudHJ5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2FzdHIud2FybmluZygn5peg5rOV5om+5Yiw6K+l5p2h55uu55qE6K+m57uG5L+h5oGv44CCJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHRhYnM/LmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0YWJzLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBjb25zdCB0YWIgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXRhYicpO1xuICAgICAgaWYgKHRhYiA9PT0gJ3N1Ym1pdCcpIHtcbiAgICAgICAgc3VibWl0VGFiPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgZmV0Y2hUYWI/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBzdWJtaXRDb250cm9scz8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIGltcG9ydENvbnRyb2xzPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgZmV0Y2hSZW1vdGVCdG4/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBwb3B1bGF0ZVN1Ym1pdExpc3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ym1pdFRhYj8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIGZldGNoVGFiPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgc3VibWl0Q29udHJvbHM/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBpbXBvcnRDb250cm9scz8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIGZldGNoUmVtb3RlQnRuPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgaWYocmVtb3RlRGlmZkxpc3QpIHJlbW90ZURpZmZMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc2Vjb25kYXJ5IHAtNFwiPuivt+WFiOeCueWHu+S4i+aWueaMiemSruS7juekvuWMuuiOt+WPluWIl+ihqOOAgjwvcD5gO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBmZXRjaFJlbW90ZUJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFyZW1vdGVEaWZmTGlzdCkgcmV0dXJuO1xuICAgIHJlbW90ZURpZmZMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc2Vjb25kYXJ5IHAtNFwiPuato+WcqOS7juekvuWMuuiOt+WPli4uLjwvcD5gO1xuICAgIFxuICAgIGNvbnN0IGxvY2FsUG9rZWRleCA9IGF3YWl0IFBva2VkZXguZ2V0UG9rZWRleERhdGEoKTtcbiAgICBjb25zdCBsb2NhbEFjaGlldmVtZW50cyA9IGF3YWl0IFBva2VkZXguZ2V0QWNoaWV2ZW1lbnRzKCk7XG4gICAgY29uc3QgcmVtb3RlID0gYXdhaXQgUG9rZWRleC5nZXRSZW1vdGVQb2tlZGV4KCk7XG4gICAgaWYgKCFyZW1vdGUpIHtcbiAgICAgIHJlbW90ZURpZmZMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtcmVkLTQwMCBwLTRcIj7ojrflj5blpLHotKXvvIzor7fmo4Dmn6XmnI3liqHlmajov57mjqXmiJbmn6XnnIvmjqfliLblj7DjgII8L3A+YDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVtb3RlRGF0YUNhY2hlID0gcmVtb3RlO1xuXG4gICAgbGV0IGRpZmZIdG1sID0gJyc7XG4gICAgbGV0IGRpZmZDb3VudCA9IDA7XG4gICAgY29uc3QgdHlwZXM6IFNoYXJlYWJsZVR5cGVbXSA9IFsn5aaW5YW9JywgJ+akjeeJqScsICfnianlk4EnLCAn5oiQ5bCxJ107XG5cbiAgICB0eXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgY29uc3QgbG9jYWxFbnRyaWVzID0gdHlwZSA9PT0gJ+aIkOWwsScgPyBsb2NhbEFjaGlldmVtZW50cyA6IGxvY2FsUG9rZWRleFt0eXBlXTtcbiAgICAgIGNvbnN0IGxvY2FsTmFtZXMgPSBuZXcgU2V0KGxvY2FsRW50cmllcy5tYXAoZSA9PiBlLuWQjeensCkpO1xuICAgICAgY29uc3QgcmVtb3RlRW50cmllcyA9IHJlbW90ZVt0eXBlIGFzIGtleW9mIFJlbW90ZVBva2VkZXhEYXRhXSB8fCBbXTtcbiAgICAgIGNvbnN0IGRpZmZFbnRyaWVzID0gcmVtb3RlRW50cmllcy5maWx0ZXIoZSA9PiAhbG9jYWxOYW1lcy5oYXMoZS7lkI3np7ApKTtcbiAgICAgIFxuICAgICAgaWYgKGRpZmZFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGlmZkNvdW50ICs9IGRpZmZFbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgZGlmZkh0bWwgKz0gYDxoNCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5LzkwIG10LTIgZmlyc3Q6bXQtMFwiPiR7dHlwZX08L2g0Pjx1bD5gO1xuICAgICAgICBkaWZmRW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICBkaWZmSHRtbCArPSBgXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJwLTIgcm91bmRlZC1sZyBiZy1tYWluLzUwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciBmbGV4LWdyb3cgbXItNFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm1yLTNcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cnVuY2F0ZVwiIHRpdGxlPVwiJHtlbnRyeS7lkI3np7B9XCI+JHtlbnRyeS7lkI3np7B9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteC0yIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicG9rZWRleC12aWV3LWJ0biB0ZXh0LXNtIHRleHQtYmx1ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCIgZGF0YS1zb3VyY2U9XCJyZW1vdGVcIiB0aXRsZT1cIuafpeeci1wiPjxpIGNsYXNzPVwiZmFzIGZhLWV5ZVwiPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2xpPmA7XG4gICAgICAgIH0pO1xuICAgICAgICBkaWZmSHRtbCArPSBgPC91bD5gO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGRpZmZDb3VudCA9PT0gMCkge1xuICAgICAgcmVtb3RlRGlmZkxpc3QuaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1zZWNvbmRhcnkgcC00XCI+5oGt5Zac77yB5oKo55qE5pys5Zyw5Zu+6Ym05LiO56S+5Yy65L+d5oyB5ZCM5q2l44CCPC9wPmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW90ZURpZmZMaXN0LmlubmVySFRNTCA9IGRpZmZIdG1sO1xuICAgIH1cbiAgfSk7XG5cbiAgc3VibWl0VG9SZW1vdGVCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBsb2NhbERpZmZMaXN0Py5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpO1xuICAgIGlmICghY2hlY2tib3hlcyB8fCBjaGVja2JveGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdG9hc3RyLndhcm5pbmcoJ+ivt+iHs+WwkemAieaLqeS4gOS4quimgeWIhuS6q+eahOadoeebruOAgicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwcm92aWRlcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb3ZpZGVyLW5hbWUtaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHByb3ZpZGVyTmFtZSA9IHByb3ZpZGVySW5wdXQ/LnZhbHVlLnRyaW0oKSB8fCB1bmRlZmluZWQ7IC8vIFVzZSB1bmRlZmluZWQgaWYgZW1wdHlcblxuICAgIGNvbnN0IGxvY2FsUG9rZWRleCA9IGF3YWl0IFBva2VkZXguZ2V0UG9rZWRleERhdGEoKTtcbiAgICBjb25zdCBsb2NhbEFjaGlldmVtZW50cyA9IGF3YWl0IFBva2VkZXguZ2V0QWNoaWV2ZW1lbnRzKCk7XG4gICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGNiIG9mIGNoZWNrYm94ZXMpIHtcbiAgICAgIGNvbnN0IHR5cGUgPSBjYi5kYXRhc2V0LnR5cGUgYXMgU2hhcmVhYmxlVHlwZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBjYi5kYXRhc2V0Lm5hbWU7XG4gICAgICBpZiAodHlwZSAmJiBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdHlwZSA9PT0gJ+aIkOWwsSdcbiAgICAgICAgICA/IGxvY2FsQWNoaWV2ZW1lbnRzLmZpbmQoZSA9PiBlLuWQjeensCA9PT0gbmFtZSlcbiAgICAgICAgICA6IGxvY2FsUG9rZWRleFt0eXBlXS5maW5kKGUgPT4gZS7lkI3np7AgPT09IG5hbWUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgYXdhaXQgUG9rZWRleC5zdWJtaXRUb0h1Z2dpbmdGYWNlKHR5cGUsIGVudHJ5LCBwcm92aWRlck5hbWUpO1xuICAgICAgICAgIHN1Y2Nlc3NDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChzdWNjZXNzQ291bnQgPiAwKSB7XG4gICAgICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5YiG5Lqr5LqGICR7c3VjY2Vzc0NvdW50fSDkuKrmnaHnm67vvIFgKTtcbiAgICAgIHJlbW90ZURhdGFDYWNoZSA9IG51bGw7IC8vIEludmFsaWRhdGUgY2FjaGVcbiAgICAgIGF3YWl0IHBvcHVsYXRlU3VibWl0TGlzdCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaW1wb3J0RnJvbVJlbW90ZUJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IHJlbW90ZURpZmZMaXN0Py5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpO1xuICAgIGlmICghY2hlY2tib3hlcyB8fCBjaGVja2JveGVzLmxlbmd0aCA9PT0gMCB8fCAhcmVtb3RlRGF0YUNhY2hlKSB7XG4gICAgICB0b2FzdHIud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5Liq6KaB5a+85YWl55qE5p2h55uu44CCJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBjYiBvZiBjaGVja2JveGVzKSB7XG4gICAgICBjb25zdCB0eXBlID0gY2IuZGF0YXNldC50eXBlIGFzIFNoYXJlYWJsZVR5cGU7XG4gICAgICBjb25zdCBuYW1lID0gY2IuZGF0YXNldC5uYW1lO1xuICAgICAgaWYgKHR5cGUgJiYgbmFtZSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IChyZW1vdGVEYXRhQ2FjaGVbdHlwZSBhcyBrZXlvZiBSZW1vdGVQb2tlZGV4RGF0YV0gfHwgW10pLmZpbmQoZSA9PiBlLuWQjeensCA9PT0gbmFtZSk7XG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgIGxldCBzdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHR5cGUgPT09ICfmiJDlsLEnKSB7XG4gICAgICAgICAgICBzdWNjZXNzID0gYXdhaXQgUG9rZWRleC5jcmVhdGVBY2hpZXZlbWVudChlbnRyeSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSBhd2FpdCBQb2tlZGV4LmNyZWF0ZVBva2VkZXhFbnRyeSh0eXBlLCBlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VjY2Vzc0NvdW50ID4gMCkge1xuICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOaIkOWKn+WvvOWFpeS6hiAke3N1Y2Nlc3NDb3VudH0g5Liq5paw5p2h55uu5Yiw5oKo55qE5pys5Zyw5Zu+6Ym077yBYCk7XG4gICAgICBoaWRlTW9kYWwoKTtcbiAgICB9XG4gIH0pO1xuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRWZXJzaW9uQ2hlY2tlcigpIHtcbiAgY29uc3QgJHZlcnNpb25CdG4gPSAkKCcjdmVyc2lvbi1pbmZvLWJ0bicpO1xuICBpZiAoISR2ZXJzaW9uQnRuLmxlbmd0aCkgcmV0dXJuO1xuXG4gIGNvbnN0IHVwZGF0ZUluZm8gPSBhd2FpdCBjaGVja0ZvclVwZGF0ZXMoKTtcblxuICBpZiAodXBkYXRlSW5mbz8uaGFzVXBkYXRlKSB7XG4gICAgLy8gQWRkIGEgc21hbGwgbm90aWZpY2F0aW9uIGRvdFxuICAgICR2ZXJzaW9uQnRuLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJhYnNvbHV0ZSB0b3AtMCByaWdodC0wIGJsb2NrIGgtMiB3LTIgcm91bmRlZC1mdWxsIHJpbmctMiByaW5nLXdoaXRlIGJnLXJlZC01MDBcIj48L3NwYW4+Jyk7XG4gIH1cblxuICAkdmVyc2lvbkJ0bi5vbignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IGNoZWNrRm9yVXBkYXRlcygpO1xuICAgIGlmIChpbmZvPy5oYXNVcGRhdGUgJiYgaW5mby5jaGFuZ2Vsb2dIdG1sKSB7XG4gICAgICBzaG93Q2hhbmdlbG9nTW9kYWwoaW5mby5jaGFuZ2Vsb2dIdG1sKTtcbiAgICB9IGVsc2UgaWYgKGluZm8pIHtcbiAgICAgIHRvYXN0ci5zdWNjZXNzKGDkvaDlvZPliY3kvb/nlKjnmoTmmK/mnIDmlrDniYjmnKwgKCR7aW5mby5yZW1vdGVWZXJzaW9ufSnjgIJgLCAn5bey5piv5pyA5pawJyk7XG4gICAgfVxuICB9KTtcbn1cblxuJCgoKSA9PiB7XG4gIGluaXRHbG9iYWxDb250cm9scygpO1xuICBjb25zdCBzdG9yeVJlbmRlcmVyID0gbmV3IFN0b3J5UmVuZGVyZXIoKTtcbiAgY29uc3QgeyBzaG93TW9kYWxXaXRoRGF0YSB9ID0gaW5pdERldGFpbHNNb2RhbCgpO1xuICBpbml0VmVyc2lvbkNoZWNrZXIoKTtcbiAgaW5pdFBva2VkZXhNYW5hZ2VyKHN0b3J5UmVuZGVyZXIsIHNob3dNb2RhbFdpdGhEYXRhKTtcbiAgaW5pdFJlbW90ZVN5bmNNb2RhbChzaG93TW9kYWxXaXRoRGF0YSk7XG4gIHN0b3J5UmVuZGVyZXIuaW5pdCgpO1xuICBjb25zdCBjdXN0b21BY3Rpb25Nb2RhbCA9IGluaXRDdXN0b21BY3Rpb25Nb2RhbCgpO1xuICBjb25zdCByZXdhcmRzTW9kYWwgPSBpbml0UmV3YXJkc01vZGFsKCk7XG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNyZWRlZW0tcmV3YXJkcy1idG4nLCBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHRvYXN0ci5pbmZvKCfmraPlnKjojrflj5blpZblirHliJfooaguLi4nKTtcbiAgICAgIGNvbnN0IGJvb2tOYW1lID0gXCLku4DkuYjvvJ/miJHopoHlnKjnjoTlubvkv67ku5nkuJbnlYznp43nlLDvvJ9cIjtcbiAgICAgIGNvbnN0IGVudHJ5S2V5ID0gXCLmiJDlsLHns7vnu5/nmoTlpZblirFcIjtcbiAgICAgIGNvbnN0IHdvcmxkYm9vayA9IGF3YWl0IGdldFdvcmxkYm9vayhib29rTmFtZSk7XG4gICAgICBjb25zdCBlbnRyeSA9IHdvcmxkYm9vay5maW5kKGUgPT4gZS5uYW1lID09PSBlbnRyeUtleSk7XG4gICAgICBcbiAgICAgIGlmIChlbnRyeSAmJiBlbnRyeS5jb250ZW50KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGdldEN1cnJlbnRNZXNzYWdlSWQoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFZhcnMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICAgICAgY29uc3QgY3VycmVudFBvaW50cyA9IF8uZ2V0KGN1cnJlbnRWYXJzLCAn5LiW55WMLuezu+e7ny7miJDlsLHngrnmlbAnLCAwKTtcbiAgICAgICAgcmV3YXJkc01vZGFsLnNob3dNb2RhbFdpdGhSZXdhcmRzKGVudHJ5LmNvbnRlbnQsIGN1cnJlbnRQb2ludHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+acquaJvuWIsOWPr+WFkeaNoueahOWlluWKseS/oeaBr+OAgicpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi6I635Y+W5aWW5Yqx5aSx6LSlOlwiLCBlcnJvcik7XG4gICAgICB0b2FzdHIuZXJyb3IoXCLojrflj5blpZblirHliJfooajlpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7DjgIJcIik7XG4gICAgfVxuICB9KTtcblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3NpZ24taW4tYnRuJywgYXN5bmMgKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgdGFyZ2V0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cbiAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgY29uc3QgdmFyaWFibGVzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBtZXNzYWdlSWQgfSk7XG4gICAgY29uc3Qgc3lzdGVtRGF0YSA9IF8uZ2V0KHZhcmlhYmxlcywgJ+S4lueVjC7ns7vnu58nLCB7fSk7XG4gICAgY29uc3QgY29uc2VjdXRpdmVEYXlzID0gc3lzdGVtRGF0YVsn6L+e57ut562+5YiwJ10gfHwgMDtcbiAgICBjb25zdCBtb250aGx5Q2FyZCA9IHN5c3RlbURhdGFbJ+aciOWNoSddIHx8ICfmnKrmv4DmtLsnO1xuXG4gICAgbGV0IHNpZ25Jbk1lc3NhZ2UgPSBgW1NZU1RFTV0g546p5a626KaB6L+b6KGM5q+P5pel562+5Yiw44CCYDtcbiAgICBpZiAobW9udGhseUNhcmQgIT09ICfmnKrmv4DmtLsnKSB7XG4gICAgICAgIHNpZ25Jbk1lc3NhZ2UgKz0gYFxcbuW9k+WJjeaciOWNoeeKtuaAgTogJHttb250aGx5Q2FyZH3jgIJgO1xuICAgIH1cbiAgICBzaWduSW5NZXNzYWdlICs9IGBcXG7lvZPliY3lt7Lov57nu63nrb7liLA6ICR7Y29uc2VjdXRpdmVEYXlzfeWkqeOAgmA7XG5cbiAgICBjb25zdCBjb21tYW5kID0gYC9zZW5kICR7c2lnbkluTWVzc2FnZX0gfCAvdHJpZ2dlcmA7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRyaWdnZXJTbGFzaChjb21tYW5kKTtcbiAgICAgIHRvYXN0ci5zdWNjZXNzKGDnrb7liLDor7fmsYLlt7Llj5HpgIHvvIFgKTtcbiAgICAgIFxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLmdldERhdGUoKTtcbiAgICAgIGNvbnN0IGNhbGVuZGFyR3JpZCA9ICQoJyNjYWxlbmRhci1ncmlkJyk7XG4gICAgICBjb25zdCB0b2RheUNlbGwgPSBjYWxlbmRhckdyaWQuZmluZChgW2RhdGEtZGF5PVwiJHt0b2RheX1cIl1gKTtcbiAgICAgIFxuICAgICAgaWYgKHRvZGF5Q2VsbC5sZW5ndGgpIHtcbiAgICAgICAgdG9kYXlDZWxsLnJlbW92ZUNsYXNzKCdiZy1hY2NlbnQvMzAgdGV4dC1hY2NlbnQgZm9udC1ib2xkIHJpbmctMiByaW5nLWFjY2VudCcpXG4gICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnYmctZ3JlZW4tNTAwLzUwIHRleHQtd2hpdGUnKVxuICAgICAgICAgICAgICAgICAuaHRtbCgnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JylcbiAgICAgICAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgYOesrCR7dG9kYXl95aSp77ya5bey562+5YiwYCk7XG4gICAgICB9XG4gICAgICB0YXJnZXQuaHRtbCgnPGkgY2xhc3M9XCJmYXMgZmEtY2FsZW5kYXItY2hlY2sgbXItMlwiPjwvaT7ku4rml6Xlt7Lnrb7liLAnKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi562+5Yiw5aSx6LSlOlwiLCBlcnJvcik7XG4gICAgICB0b2FzdHIuZXJyb3IoXCLnrb7liLDlpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7DjgIJcIik7XG4gICAgICB0YXJnZXQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuICB9KTtcblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2FjdGl2YXRlLW1vbnRobHktY2FyZC1idG4nLCBhc3luYyAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICB0YXJnZXQucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS50ZXh0KCfor6Lpl67kuK0uLi4nKTtcblxuICAgIGNvbnN0IGNvbW1hbmQgPSBgL3NlbmQgW1NZU1RFTV0g546p5a625oOz6KaB5r+A5rS7562+5Yiw57O757uf55qE5pyI5Y2h77yM6K+35ZGK55+l5r+A5rS75p2h5Lu25ZKM5pWI5p6c44CCIHwgL3RyaWdnZXJgO1xuICAgIHRvYXN0ci5pbmZvKGDmraPlnKjor6Lpl67mv4DmtLvmnaHku7YuLi5gKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdHJpZ2dlclNsYXNoKGNvbW1hbmQpO1xuICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOivt+axguW3suWPkemAge+8gWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi5r+A5rS75pyI5Y2h5aSx6LSlOlwiLCBlcnJvcik7XG4gICAgICB0b2FzdHIuZXJyb3IoXCLor7fmsYLlpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7DjgIJcIik7XG4gICAgICB0YXJnZXQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSkudGV4dCgn5r+A5rS7Jyk7XG4gICAgfVxuICB9KTtcblxuICAkKCcjb3B0aW9ucy1saXN0Jykub24oJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXRMaSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJyk7XG4gICAgaWYgKCF0YXJnZXRMaS5sZW5ndGgpIHJldHVybjtcblxuICAgIGNvbnN0IG9wdGlvbnNMaXN0ID0gJCgnI29wdGlvbnMtbGlzdCcpO1xuICAgIGlmIChvcHRpb25zTGlzdC5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuICAgICAgdG9hc3RyLmluZm8oJ+ato+WcqOetieW+heWbnuW6lO+8jOivt+eojeWQji4uLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvblR5cGUgPSB0YXJnZXRMaS5kYXRhKCdhY3Rpb25UeXBlJyk7XG5cbiAgICBpZiAoYWN0aW9uVHlwZSA9PT0gJ2N1c3RvbScpIHtcbiAgICAgIGN1c3RvbUFjdGlvbk1vZGFsLnNob3dNb2RhbCh0YXJnZXRMaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG9wdGlvblRleHQgPSB0YXJnZXRMaS5kYXRhKCdvcHRpb25UZXh0Jyk7XG4gICAgICBjb25zdCBvcHRpb25JbmRleCA9IHBhcnNlSW50KHRhcmdldExpLmRhdGEoJ29wdGlvbkluZGV4JyksIDEwKTtcblxuICAgICAgaWYgKG9wdGlvblRleHQgJiYgIWlzTmFOKG9wdGlvbkluZGV4KSkge1xuICAgICAgICAvLyDnpoHnlKjmiYDmnInpgInpobnlubbmmL7npLrliqDovb3nirbmgIFcbiAgICAgICAgb3B0aW9uc0xpc3QuYWRkQ2xhc3MoJ2Rpc2FibGVkJykuaHRtbChgXG4gICAgICAgICAgPGxpIGNsYXNzPVwidGV4dC1jZW50ZXIgcHktNCB0ZXh0LXNlY29uZGFyeSB0aGVtZS10cmFuc2l0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC01IHctNSBib3JkZXItdC0yIGJvcmRlci1iLTIgYm9yZGVyLWluZGlnby00MDAgbXItM1wiPjwvZGl2PlxuICAgICAgICAgICAgICA8c3Bhbj7nrYnlvoXlvbznlYznmoTlm57lupQuLi48L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICBgKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHRyaWdnZXJBY3Rpb24ob3B0aW9uVGV4dCwgb3B0aW9uSW5kZXgpO1xuICAgICAgICAvLyDmraTml7bkuI3pnIDopoHlgZrku7vkvZXkuovvvIzlm6DkuLrnlYzpnaLlsIbpmo/mlrDmtojmga/kuIDotbfph43mlrDmuLLmn5NcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYmFydGVyLWJ0bicsIGFzeW5jIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHRhcmdldC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IHRhcmdldC5odG1sKCk7XG4gICAgdGFyZ2V0Lmh0bWwoJzxpIGNsYXNzPVwiZmFzIGZhLXNwaW5uZXIgZmEtc3BpblwiPjwvaT4nKTtcblxuICAgIGNvbnN0IGl0ZW1OYW1lID0gdGFyZ2V0LmRhdGEoJ25hbWUnKTtcbiAgICBjb25zdCBpdGVtQ29zdCA9IHBhcnNlSW50KHRhcmdldC5kYXRhKCdjb3N0JykgfHwgJzAnLCAxMCk7XG5cbiAgICBpZiAoIWl0ZW1OYW1lIHx8IGlzTmFOKGl0ZW1Db3N0KSkge1xuICAgICAgdG9hc3RyLmVycm9yKCfml6Dms5Xojrflj5bnianlk4Hkv6Hmga/jgIInKTtcbiAgICAgIHRhcmdldC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS5odG1sKG9yaWdpbmFsVGV4dCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2FnZUlkID0gZ2V0Q3VycmVudE1lc3NhZ2VJZCgpO1xuICAgIGNvbnN0IHZhcmlhYmxlcyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuICAgIGNvbnN0IG15SXRlbXMgPSBfLmdldCh2YXJpYWJsZXMsICfkuJbnlYwu57O757ufLuaIkeeahOeJqeWTgScsIFtdKTtcbiAgICBjb25zdCB0b3RhbFZhbHVlID0gXy5zdW1CeShteUl0ZW1zLCAoaXRlbTogYW55KSA9PiAoaXRlbVsn5pWw6YePJ10gfHwgMCkgKiAoaXRlbVsn5Lu35YC8J10gfHwgMCkpO1xuXG4gICAgY29uc3QgY29tbWFuZCA9IGAvc2VuZCBbU1lTVEVNXSDjgJDku6XnianmjaLnianns7vnu5/jgJHvvJrigJzlmL/vvIzmnIvlj4vvvIHmiJHnnIvliLDkvaDmg7PnlKjkvaDpgqPloIbku7flgLwgJHt0b3RhbFZhbHVlfSDnmoTlrp3otJ3vvIzmnaXmjaLmiJHnmoTjgJAke2l0ZW1OYW1lfeOAke+8iOS7t+WAvCAke2l0ZW1Db3N0fe+8ieOAguiuqeaIkeaDs+aDs+KApuKApuKAnSB8IC90cmlnZ2VyYDtcbiAgICB0b2FzdHIuaW5mbyhg5q2j5Zyo5bCd6K+V5o2i5Y+WOiAke2l0ZW1OYW1lfS4uLmApO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0cmlnZ2VyU2xhc2goY29tbWFuZCk7XG4gICAgICB0b2FzdHIuc3VjY2Vzcyhg5o2i5Y+W6K+35rGC5bey5Y+R6YCB77yBYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLmjaLlj5blpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcihcIuaNouWPluWksei0pe+8jOivt+afpeeci+aOp+WItuWPsOOAglwiKTtcbiAgICAgIHRhcmdldC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS5odG1sKG9yaWdpbmFsVGV4dCk7XG4gICAgfVxuICB9KTtcblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3JlZnJlc2gtYmFydGVyLWJ0bicsIGFzeW5jIChlKSA9PiB7XG4gICAgcmVxdWVzdFN5c3RlbVJlZnJlc2goJ+S7peeJqeaNoueJqScsICQoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/index.ts\n\n}");
  },
  "./src/什么我要在玄幻修仙世界种田/parser.ts": 
  /*!*************************************!*\
  !*** ./src/什么我要在玄幻修仙世界种田/parser.ts ***!
  \*************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractJsonFromStatusBar: () => (/* binding */ extractJsonFromStatusBar)\n/* harmony export */ });\n/**\n * 从完整的消息文本中严格提取 <statusbar>...</statusbar> 块内的 JSON 内容。\n * @param messageContent - 完整的聊天消息字符串。\n * @returns 清理后的 JSON 字符串，如果找不到或无效则返回空字符串。\n */\nfunction extractJsonFromStatusBar(messageContent) {\n    if (!messageContent) {\n        return '';\n    }\n    // 第一层过滤: 严格查找并提取 <statusbar>...</statusbar> 之间的内容\n    const startIndex = messageContent.indexOf('<statusbar>');\n    const endIndex = messageContent.indexOf('</statusbar>');\n    if (startIndex === -1 || endIndex === -1 || endIndex <= startIndex) {\n        console.error('未在消息中找到有效的 <statusbar>...</statusbar> 结构。');\n        return '';\n    }\n    const contentToProcess = messageContent.substring(startIndex + '<statusbar>'.length, endIndex);\n    // 从 <statusbar> 块内初步提取可能包含 JSON 的字符串\n    let potentialJsonString;\n    const jsonRegex = /```json\\s*([\\s\\S]*?)\\s*```/;\n    const match = contentToProcess.match(jsonRegex);\n    if (match && match[1]) {\n        potentialJsonString = match[1].trim();\n    }\n    else {\n        potentialJsonString = contentToProcess.trim();\n    }\n    // 第二层保险: 从初步提取的字符串中，精确地只获取第一个 '{' 和最后一个 '}' 之间的内容\n    const firstBracket = potentialJsonString.indexOf('{');\n    const lastBracket = potentialJsonString.lastIndexOf('}');\n    if (firstBracket === -1 || lastBracket === -1 || lastBracket <= firstBracket) {\n        console.error('在 <statusbar> 块内未找到有效的JSON对象结构。内容:', contentToProcess);\n        return '';\n    }\n    const finalJsonString = potentialJsonString.substring(firstBracket, lastBracket + 1);\n    // 清理并返回最终的 JSON 字符串 (移除尾随逗号)\n    return finalJsonString.replace(/,(?=\\s*?[\\]}])/g, '');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3BhcnNlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7R0FJRztBQUNJLFNBQVMsd0JBQXdCLENBQUMsY0FBc0I7SUFDN0QsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3BCLE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUVELGtEQUFrRDtJQUNsRCxNQUFNLFVBQVUsR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3pELE1BQU0sUUFBUSxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7SUFFeEQsSUFBSSxVQUFVLEtBQUssQ0FBQyxDQUFDLElBQUksUUFBUSxLQUFLLENBQUMsQ0FBQyxJQUFJLFFBQVEsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUNuRSxPQUFPLENBQUMsS0FBSyxDQUFDLDJDQUEyQyxDQUFDLENBQUM7UUFDM0QsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBRUQsTUFBTSxnQkFBZ0IsR0FBRyxjQUFjLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxhQUFhLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRS9GLHFDQUFxQztJQUNyQyxJQUFJLG1CQUFtQixDQUFDO0lBQ3hCLE1BQU0sU0FBUyxHQUFHLDRCQUE0QixDQUFDO0lBQy9DLE1BQU0sS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUVoRCxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUN0QixtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDeEMsQ0FBQztTQUFNLENBQUM7UUFDTixtQkFBbUIsR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBRUQsa0RBQWtEO0lBQ2xELE1BQU0sWUFBWSxHQUFHLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0RCxNQUFNLFdBQVcsR0FBRyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFekQsSUFBSSxZQUFZLEtBQUssQ0FBQyxDQUFDLElBQUksV0FBVyxLQUFLLENBQUMsQ0FBQyxJQUFJLFdBQVcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUM3RSxPQUFPLENBQUMsS0FBSyxDQUFDLG9DQUFvQyxFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFDdEUsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBRUQsTUFBTSxlQUFlLEdBQUcsbUJBQW1CLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFFckYsNkJBQTZCO0lBQzdCLE9BQU8sZUFBZSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN4RCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/ku4DkuYjmiJHopoHlnKjnjoTlubvkv67ku5nkuJbnlYznp43nlLAvcGFyc2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOS7juWujOaVtOeahOa2iOaBr+aWh+acrOS4reS4peagvOaPkOWPliA8c3RhdHVzYmFyPi4uLjwvc3RhdHVzYmFyPiDlnZflhoXnmoQgSlNPTiDlhoXlrrnjgIJcbiAqIEBwYXJhbSBtZXNzYWdlQ29udGVudCAtIOWujOaVtOeahOiBiuWkqea2iOaBr+Wtl+espuS4suOAglxuICogQHJldHVybnMg5riF55CG5ZCO55qEIEpTT04g5a2X56ym5Liy77yM5aaC5p6c5om+5LiN5Yiw5oiW5peg5pWI5YiZ6L+U5Zue56m65a2X56ym5Liy44CCXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0SnNvbkZyb21TdGF0dXNCYXIobWVzc2FnZUNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghbWVzc2FnZUNvbnRlbnQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvLyDnrKzkuIDlsYLov4fmu6Q6IOS4peagvOafpeaJvuW5tuaPkOWPliA8c3RhdHVzYmFyPi4uLjwvc3RhdHVzYmFyPiDkuYvpl7TnmoTlhoXlrrlcbiAgY29uc3Qgc3RhcnRJbmRleCA9IG1lc3NhZ2VDb250ZW50LmluZGV4T2YoJzxzdGF0dXNiYXI+Jyk7XG4gIGNvbnN0IGVuZEluZGV4ID0gbWVzc2FnZUNvbnRlbnQuaW5kZXhPZignPC9zdGF0dXNiYXI+Jyk7XG5cbiAgaWYgKHN0YXJ0SW5kZXggPT09IC0xIHx8IGVuZEluZGV4ID09PSAtMSB8fCBlbmRJbmRleCA8PSBzdGFydEluZGV4KSB7XG4gICAgY29uc29sZS5lcnJvcign5pyq5Zyo5raI5oGv5Lit5om+5Yiw5pyJ5pWI55qEIDxzdGF0dXNiYXI+Li4uPC9zdGF0dXNiYXI+IOe7k+aehOOAgicpO1xuICAgIHJldHVybiAnJztcbiAgfVxuICBcbiAgY29uc3QgY29udGVudFRvUHJvY2VzcyA9IG1lc3NhZ2VDb250ZW50LnN1YnN0cmluZyhzdGFydEluZGV4ICsgJzxzdGF0dXNiYXI+Jy5sZW5ndGgsIGVuZEluZGV4KTtcblxuICAvLyDku44gPHN0YXR1c2Jhcj4g5Z2X5YaF5Yid5q2l5o+Q5Y+W5Y+v6IO95YyF5ZCrIEpTT04g55qE5a2X56ym5LiyXG4gIGxldCBwb3RlbnRpYWxKc29uU3RyaW5nO1xuICBjb25zdCBqc29uUmVnZXggPSAvYGBganNvblxccyooW1xcc1xcU10qPylcXHMqYGBgLztcbiAgY29uc3QgbWF0Y2ggPSBjb250ZW50VG9Qcm9jZXNzLm1hdGNoKGpzb25SZWdleCk7XG5cbiAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgcG90ZW50aWFsSnNvblN0cmluZyA9IG1hdGNoWzFdLnRyaW0oKTtcbiAgfSBlbHNlIHtcbiAgICBwb3RlbnRpYWxKc29uU3RyaW5nID0gY29udGVudFRvUHJvY2Vzcy50cmltKCk7XG4gIH1cblxuICAvLyDnrKzkuozlsYLkv53pmak6IOS7juWIneatpeaPkOWPlueahOWtl+espuS4suS4re+8jOeyvuehruWcsOWPquiOt+WPluesrOS4gOS4qiAneycg5ZKM5pyA5ZCO5LiA5LiqICd9JyDkuYvpl7TnmoTlhoXlrrlcbiAgY29uc3QgZmlyc3RCcmFja2V0ID0gcG90ZW50aWFsSnNvblN0cmluZy5pbmRleE9mKCd7Jyk7XG4gIGNvbnN0IGxhc3RCcmFja2V0ID0gcG90ZW50aWFsSnNvblN0cmluZy5sYXN0SW5kZXhPZignfScpO1xuXG4gIGlmIChmaXJzdEJyYWNrZXQgPT09IC0xIHx8IGxhc3RCcmFja2V0ID09PSAtMSB8fCBsYXN0QnJhY2tldCA8PSBmaXJzdEJyYWNrZXQpIHtcbiAgICBjb25zb2xlLmVycm9yKCflnKggPHN0YXR1c2Jhcj4g5Z2X5YaF5pyq5om+5Yiw5pyJ5pWI55qESlNPTuWvueixoee7k+aehOOAguWGheWuuTonLCBjb250ZW50VG9Qcm9jZXNzKTtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBjb25zdCBmaW5hbEpzb25TdHJpbmcgPSBwb3RlbnRpYWxKc29uU3RyaW5nLnN1YnN0cmluZyhmaXJzdEJyYWNrZXQsIGxhc3RCcmFja2V0ICsgMSk7XG4gIFxuICAvLyDmuIXnkIblubbov5Tlm57mnIDnu4jnmoQgSlNPTiDlrZfnrKbkuLIgKOenu+mZpOWwvumaj+mAl+WPtylcbiAgcmV0dXJuIGZpbmFsSnNvblN0cmluZy5yZXBsYWNlKC8sKD89XFxzKj9bXFxdfV0pL2csICcnKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/parser.ts\n\n}");
  },
  "./src/什么我要在玄幻修仙世界种田/pokedex.ts": 
  /*!**************************************!*\
  !*** ./src/什么我要在玄幻修仙世界种田/pokedex.ts ***!
  \**************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAchievement: () => (/* binding */ createAchievement),\n/* harmony export */   createPokedexEntry: () => (/* binding */ createPokedexEntry),\n/* harmony export */   deleteAchievement: () => (/* binding */ deleteAchievement),\n/* harmony export */   deletePokedexEntry: () => (/* binding */ deletePokedexEntry),\n/* harmony export */   getAchievements: () => (/* binding */ getAchievements),\n/* harmony export */   getPokedexData: () => (/* binding */ getPokedexData),\n/* harmony export */   getRemotePokedex: () => (/* binding */ getRemotePokedex),\n/* harmony export */   getSystemData: () => (/* binding */ getSystemData),\n/* harmony export */   readPokedexEntry: () => (/* binding */ readPokedexEntry),\n/* harmony export */   submitToHuggingFace: () => (/* binding */ submitToHuggingFace),\n/* harmony export */   updateAchievement: () => (/* binding */ updateAchievement),\n/* harmony export */   updatePokedexEntry: () => (/* binding */ updatePokedexEntry)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n\nconst POKEDEX_VARIABLE_PATH = '世界.图鉴';\n/**\n * 从全局变量中获取完整的图鉴数据\n * @returns {Promise<PokedexData>}\n */\nasync function getPokedexData() {\n    const variables = getVariables({ type: 'global' });\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().get(variables, POKEDEX_VARIABLE_PATH, { 妖兽: [], 植物: [], 物品: [] });\n}\n/**\n * 将完整的图鉴数据保存回全局变量\n * @param {PokedexData} data - The full pokedex data object.\n */\nasync function savePokedexData(data) {\n    await insertOrAssignVariables({ [POKEDEX_VARIABLE_PATH]: data }, { type: 'global' });\n}\n/**\n * 创建一个新的图鉴条目\n * @param {PokedexType} type - The type of the entry ('妖兽', '植物', '物品').\n * @param {PokedexEntry} entryData - The data for the new entry.\n * @returns {Promise<boolean>} - True if creation was successful, false otherwise.\n */\nasync function createPokedexEntry(type, entryData) {\n    if (!entryData.名称) {\n        toastr.error('创建失败：条目必须包含“名称”字段。');\n        return false;\n    }\n    const pokedex = await getPokedexData();\n    if (pokedex[type].some(entry => entry.名称 === entryData.名称)) {\n        toastr.warning(`创建失败：名为“${entryData.名称}”的${type}已存在。`);\n        return false;\n    }\n    pokedex[type].push(entryData);\n    await savePokedexData(pokedex);\n    toastr.success(`成功添加【${entryData.名称}】到${type}图鉴！`);\n    return true;\n}\n/**\n * 根据名称读取一个特定的图鉴条目\n * @param {PokedexType} type - The type of the entry.\n * @param {string} name - The name of the entry to read.\n * @returns {Promise<PokedexEntry | undefined>}\n */\nasync function readPokedexEntry(type, name) {\n    const pokedex = await getPokedexData();\n    return pokedex[type].find(entry => entry.名称 === name);\n}\n/**\n * 更新一个现有的图鉴条目\n * @param {PokedexType} type - The type of the entry.\n * @param {string} originalName - The original name of the entry to update.\n * @param {PokedexEntry} updatedData - The new data for the entry.\n * @returns {Promise<boolean>} - True if update was successful, false otherwise.\n */\nasync function updatePokedexEntry(type, originalName, updatedData) {\n    if (!updatedData.名称) {\n        toastr.error('更新失败：条目必须包含“名称”字段。');\n        return false;\n    }\n    const pokedex = await getPokedexData();\n    const entryIndex = pokedex[type].findIndex(entry => entry.名称 === originalName);\n    if (entryIndex === -1) {\n        toastr.error(`更新失败：未找到名为“${originalName}”的${type}。`);\n        return false;\n    }\n    // Check for name collision if the name is changed\n    if (originalName !== updatedData.名称 && pokedex[type].some(entry => entry.名称 === updatedData.名称)) {\n        toastr.warning(`更新失败：名为“${updatedData.名称}”的${type}已存在。`);\n        return false;\n    }\n    pokedex[type][entryIndex] = updatedData;\n    await savePokedexData(pokedex);\n    toastr.success(`成功更新【${updatedData.名称}】！`);\n    return true;\n}\n/**\n * 删除一个图鉴条目\n * @param {PokedexType} type - The type of the entry.\n * @param {string} name - The name of the entry to delete.\n * @returns {Promise<boolean>} - True if deletion was successful, false otherwise.\n */\nasync function deletePokedexEntry(type, name) {\n    let deleteOccurred = false;\n    await updateVariablesWith(variables => {\n        const pokedex = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(variables, POKEDEX_VARIABLE_PATH, { 妖兽: [], 植物: [], 物品: [] });\n        const initialLength = pokedex[type].length;\n        pokedex[type] = pokedex[type].filter((entry) => entry.名称 !== name);\n        if (pokedex[type].length < initialLength) {\n            deleteOccurred = true;\n            lodash__WEBPACK_IMPORTED_MODULE_0___default().set(variables, POKEDEX_VARIABLE_PATH, pokedex);\n        }\n        return variables;\n    }, { type: 'global' });\n    if (deleteOccurred) {\n        toastr.success(`成功删除【${name}】！`);\n    }\n    else {\n        toastr.warning(`删除失败：未找到名为“${name}”的${type}。`);\n    }\n    return deleteOccurred;\n}\n/**\n * 提交新条目到后端服务器\n * @param {PokedexType} type - The type of the entry.\n * @param {PokedexEntry} entryData - The data of the new entry.\n * @param {string} [provider] - Optional name of the provider.\n */\nasync function submitToHuggingFace(type, entryData, provider) {\n    const HUGGING_FACE_API_ENDPOINT = 'https://www-api-forum.rc6s3wcue.nyat.app:59690/api/pokedex';\n    try {\n        // 如果有提供者，则添加到条目数据中\n        const entryWithProvider = provider ? { ...entryData, '贡献者': provider } : entryData;\n        // 构造与服务器Zod schema匹配的数据格式\n        const payload = {\n            type: type,\n            entry: entryWithProvider,\n        };\n        console.log('[Pokedex] Submitting to server:', payload);\n        const response = await fetch(HUGGING_FACE_API_ENDPOINT, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(payload),\n        });\n        if (!response.ok) {\n            const errorData = await response.json();\n            console.error('Server responded with an error:', errorData);\n            throw new Error(`服务器返回错误: ${response.status} - ${errorData.message || '未知错误'}`);\n        }\n        const result = await response.json();\n        console.log('[Pokedex] Submission successful:', result);\n        toastr.info('新条目已成功分享到社区！');\n    }\n    catch (error) {\n        console.error('[Pokedex] Failed to submit to server:', error);\n        toastr.error(`分享新条目失败: ${error instanceof Error ? error.message : '请查看控制台'}`);\n    }\n}\n/**\n * 从后端服务器获取完整的图鉴数据\n * @returns {Promise<RemotePokedexData | null>}\n */\nasync function getRemotePokedex() {\n    const HUGGING_FACE_API_ENDPOINT = 'https://www-api-forum.rc6s3wcue.nyat.app:59690/api/pokedex';\n    try {\n        const response = await fetch(HUGGING_FACE_API_ENDPOINT, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        });\n        if (!response.ok) {\n            throw new Error(`服务器返回错误: ${response.status}`);\n        }\n        const data = await response.json();\n        // 为空数据提供默认值\n        const validatedData = {\n            妖兽: data['妖兽'] || [],\n            植物: data['植物'] || [],\n            物品: data['物品'] || [],\n            成就: data['成就'] || [],\n        };\n        return validatedData;\n    }\n    catch (error) {\n        console.error('[Pokedex] Failed to fetch from server:', error);\n        toastr.error(`从社区获取数据失败: ${error instanceof Error ? error.message : '请查看控制台'}`);\n        return null;\n    }\n}\nconst ACHIEVEMENT_VARIABLE_PATH = '世界.系统';\n/**\n * 从全局变量中获取完整的系统数据\n * @returns {Promise<any>}\n */\nasync function getSystemData() {\n    const variables = getVariables({ type: 'global' });\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().get(variables, ACHIEVEMENT_VARIABLE_PATH, { 已完成: [], 成就点数: 0 });\n}\n/**\n * 将完整的系统数据保存回全局变量\n * @param {any} data - The full system data object.\n */\nasync function saveSystemData(data) {\n    await insertOrAssignVariables({ [ACHIEVEMENT_VARIABLE_PATH]: data }, { type: 'global' });\n}\n/**\n * 从全局变量中获取所有成就\n * @returns {Promise<PokedexEntry[]>}\n */\nasync function getAchievements() {\n    const systemData = await getSystemData();\n    return systemData.已完成 || [];\n}\n/**\n * 创建一个新成就\n * @param {PokedexEntry} entryData - The data for the new achievement.\n * @returns {Promise<boolean>} - True if creation was successful, false otherwise.\n */\nasync function createAchievement(entryData) {\n    if (!entryData.名称) {\n        toastr.error('创建失败：成就必须包含“名称”字段。');\n        return false;\n    }\n    const systemData = await getSystemData();\n    const achievements = systemData.已完成 || [];\n    if (achievements.some((ach) => ach.名称 === entryData.名称)) {\n        toastr.warning(`创建失败：名为“${entryData.名称}”的成就已存在。`);\n        return false;\n    }\n    achievements.push(entryData);\n    systemData.已完成 = achievements;\n    // 如果条目数据中有点数，则增加总点数\n    const pointsToAdd = Number(entryData['点数'] || 0);\n    if (!isNaN(pointsToAdd)) {\n        systemData.成就点数 = (systemData.成就点数 || 0) + pointsToAdd;\n    }\n    await saveSystemData(systemData);\n    toastr.success(`成功添加新成就【${entryData.名称}】！`);\n    return true;\n}\n/**\n * 更新一个现有的成就\n * @param {string} originalName - The original name of the achievement to update.\n * @param {PokedexEntry} updatedData - The new data for the achievement.\n * @returns {Promise<boolean>} - True if update was successful, false otherwise.\n */\nasync function updateAchievement(originalName, updatedData) {\n    if (!updatedData.名称) {\n        toastr.error('更新失败：成就必须包含“名称”字段。');\n        return false;\n    }\n    const systemData = await getSystemData();\n    const achievements = systemData.已完成 || [];\n    const entryIndex = achievements.findIndex((ach) => ach.名称 === originalName);\n    if (entryIndex === -1) {\n        toastr.error(`更新失败：未找到名为“${originalName}”的成就。`);\n        return false;\n    }\n    if (originalName !== updatedData.名称 && achievements.some((ach) => ach.名称 === updatedData.名称)) {\n        toastr.warning(`更新失败：名为“${updatedData.名称}”的成就已存在。`);\n        return false;\n    }\n    const oldEntry = achievements[entryIndex];\n    const oldPoints = Number(oldEntry['点数'] || 0);\n    const newPoints = Number(updatedData['点数'] || 0);\n    achievements[entryIndex] = updatedData;\n    systemData.已完成 = achievements;\n    // 更新总点数\n    if (!isNaN(oldPoints) && !isNaN(newPoints)) {\n        systemData.成就点数 = (systemData.成就点数 || 0) - oldPoints + newPoints;\n    }\n    await saveSystemData(systemData);\n    toastr.success(`成功更新成就【${updatedData.名称}】！`);\n    return true;\n}\n/**\n * 删除一个成就\n * @param {string} name - The name of the achievement to delete.\n * @returns {Promise<boolean>} - True if deletion was successful, false otherwise.\n */\nasync function deleteAchievement(name) {\n    let deleteOccurred = false;\n    await updateVariablesWith(variables => {\n        const systemData = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(variables, ACHIEVEMENT_VARIABLE_PATH, { 已完成: [], 成就点数: 0 });\n        const achievements = systemData.已完成 || [];\n        const initialLength = achievements.length;\n        const entryToDelete = achievements.find((ach) => ach.名称 === name);\n        if (!entryToDelete) {\n            return variables; // No change\n        }\n        systemData.已完成 = achievements.filter((ach) => ach.名称 !== name);\n        if (systemData.已完成.length < initialLength) {\n            deleteOccurred = true;\n            const pointsToRemove = Number(entryToDelete['点数'] || 0);\n            if (!isNaN(pointsToRemove)) {\n                systemData.成就点数 = (systemData.成就点数 || 0) - pointsToRemove;\n            }\n            lodash__WEBPACK_IMPORTED_MODULE_0___default().set(variables, ACHIEVEMENT_VARIABLE_PATH, systemData);\n        }\n        return variables;\n    }, { type: 'global' });\n    if (deleteOccurred) {\n        toastr.success(`成功删除成就【${name}】！`);\n    }\n    else {\n        toastr.warning(`删除失败：未找到名为“${name}”的成就。`);\n    }\n    return deleteOccurred;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3Bva2VkZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUI7QUFldkIsTUFBTSxxQkFBcUIsR0FBRyxPQUFPLENBQUM7QUFFdEM7OztHQUdHO0FBQ0ksS0FBSyxVQUFVLGNBQWM7SUFDbEMsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7SUFDbkQsT0FBTyxpREFBSyxDQUFDLFNBQVMsRUFBRSxxQkFBcUIsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUM3RSxDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsS0FBSyxVQUFVLGVBQWUsQ0FBQyxJQUFpQjtJQUM5QyxNQUFNLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7QUFDdkYsQ0FBQztBQUVEOzs7OztHQUtHO0FBQ0ksS0FBSyxVQUFVLGtCQUFrQixDQUFDLElBQWlCLEVBQUUsU0FBdUI7SUFDakYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNsQixNQUFNLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFDbkMsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBQ0QsTUFBTSxPQUFPLEdBQUcsTUFBTSxjQUFjLEVBQUUsQ0FBQztJQUN2QyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1FBQzNELE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxTQUFTLENBQUMs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QUMsQ0FBQztJQUM1QyxDQUFDO0lBQ0QsT0FBTyxjQUFjLENBQUM7QUFDeEIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3Bva2VkZXgudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XHJcblxyXG4vLyDlrprkuYnlm77pibTmnaHnm67lkoznsbvlnovnmoTln7rmnKznu5PmnoRcclxuZXhwb3J0IHR5cGUgUG9rZWRleEVudHJ5ID0geyBba2V5OiBzdHJpbmddOiBhbnk7IOWQjeensDogc3RyaW5nIH07XHJcbmV4cG9ydCB0eXBlIFBva2VkZXhUeXBlID0gJ+WmluWFvScgfCAn5qSN54mpJyB8ICfnianlk4EnO1xyXG5leHBvcnQgdHlwZSBTaGFyZWFibGVUeXBlID0gUG9rZWRleFR5cGUgfCAn5oiQ5bCxJztcclxuZXhwb3J0IHR5cGUgUG9rZWRleERhdGEgPSB7XHJcbiAg5aaW5YW9OiBQb2tlZGV4RW50cnlbXTtcclxuICDmpI3niak6IFBva2VkZXhFbnRyeVtdO1xyXG4gIOeJqeWTgTogUG9rZWRleEVudHJ5W107XHJcbn07XHJcbmV4cG9ydCB0eXBlIFJlbW90ZVBva2VkZXhEYXRhID0gUG9rZWRleERhdGEgJiB7XHJcbiAg5oiQ5bCxOiBQb2tlZGV4RW50cnlbXTtcclxufTtcclxuXHJcbmNvbnN0IFBPS0VERVhfVkFSSUFCTEVfUEFUSCA9ICfkuJbnlYwu5Zu+6Ym0JztcclxuXHJcbi8qKlxyXG4gKiDku47lhajlsYDlj5jph4/kuK3ojrflj5blrozmlbTnmoTlm77pibTmlbDmja5cclxuICogQHJldHVybnMge1Byb21pc2U8UG9rZWRleERhdGE+fVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBva2VkZXhEYXRhKCk6IFByb21pc2U8UG9rZWRleERhdGE+IHtcclxuICBjb25zdCB2YXJpYWJsZXMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnZ2xvYmFsJyB9KTtcclxuICByZXR1cm4gXy5nZXQodmFyaWFibGVzLCBQT0tFREVYX1ZBUklBQkxFX1BBVEgsIHsg5aaW5YW9OiBbXSwg5qSN54mpOiBbXSwg54mp5ZOBOiBbXSB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWwhuWujOaVtOeahOWbvumJtOaVsOaNruS/neWtmOWbnuWFqOWxgOWPmOmHj1xyXG4gKiBAcGFyYW0ge1Bva2VkZXhEYXRhfSBkYXRhIC0gVGhlIGZ1bGwgcG9rZWRleCBkYXRhIG9iamVjdC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNhdmVQb2tlZGV4RGF0YShkYXRhOiBQb2tlZGV4RGF0YSk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGF3YWl0IGluc2VydE9yQXNzaWduVmFyaWFibGVzKHsgW1BPS0VERVhfVkFSSUFCTEVfUEFUSF06IGRhdGEgfSwgeyB0eXBlOiAnZ2xvYmFsJyB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWIm+W7uuS4gOS4quaWsOeahOWbvumJtOadoeebrlxyXG4gKiBAcGFyYW0ge1Bva2VkZXhUeXBlfSB0eXBlIC0gVGhlIHR5cGUgb2YgdGhlIGVudHJ5ICgn5aaW5YW9JywgJ+akjeeJqScsICfnianlk4EnKS5cclxuICogQHBhcmFtIHtQb2tlZGV4RW50cnl9IGVudHJ5RGF0YSAtIFRoZSBkYXRhIGZvciB0aGUgbmV3IGVudHJ5LlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBUcnVlIGlmIGNyZWF0aW9uIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUG9rZWRleEVudHJ5KHR5cGU6IFBva2VkZXhUeXBlLCBlbnRyeURhdGE6IFBva2VkZXhFbnRyeSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIGlmICghZW50cnlEYXRhLuWQjeensCkge1xyXG4gICAgdG9hc3RyLmVycm9yKCfliJvlu7rlpLHotKXvvJrmnaHnm67lv4XpobvljIXlkKvigJzlkI3np7DigJ3lrZfmrrXjgIInKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgY29uc3QgcG9rZWRleCA9IGF3YWl0IGdldFBva2VkZXhEYXRhKCk7XHJcbiAgaWYgKHBva2VkZXhbdHlwZV0uc29tZShlbnRyeSA9PiBlbnRyeS7lkI3np7AgPT09IGVudHJ5RGF0YS7lkI3np7ApKSB7XHJcbiAgICB0b2FzdHIud2FybmluZyhg5Yib5bu65aSx6LSl77ya5ZCN5Li64oCcJHtlbnRyeURhdGEu5ZCN56ewfeKAneeahCR7dHlwZX3lt7LlrZjlnKjjgIJgKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgcG9rZWRleFt0eXBlXS5wdXNoKGVudHJ5RGF0YSk7XHJcbiAgYXdhaXQgc2F2ZVBva2VkZXhEYXRhKHBva2VkZXgpO1xyXG4gIHRvYXN0ci5zdWNjZXNzKGDmiJDlip/mt7vliqDjgJAke2VudHJ5RGF0YS7lkI3np7B944CR5YiwJHt0eXBlfeWbvumJtO+8gWApO1xyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICog5qC55o2u5ZCN56ew6K+75Y+W5LiA5Liq54m55a6a55qE5Zu+6Ym05p2h55uuXHJcbiAqIEBwYXJhbSB7UG9rZWRleFR5cGV9IHR5cGUgLSBUaGUgdHlwZSBvZiB0aGUgZW50cnkuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGVudHJ5IHRvIHJlYWQuXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPFBva2VkZXhFbnRyeSB8IHVuZGVmaW5lZD59XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZFBva2VkZXhFbnRyeSh0eXBlOiBQb2tlZGV4VHlwZSwgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxQb2tlZGV4RW50cnkgfCB1bmRlZmluZWQ+IHtcclxuICBjb25zdCBwb2tlZGV4ID0gYXdhaXQgZ2V0UG9rZWRleERhdGEoKTtcclxuICByZXR1cm4gcG9rZWRleFt0eXBlXS5maW5kKGVudHJ5ID0+IGVudHJ5LuWQjeensCA9PT0gbmFtZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmm7TmlrDkuIDkuKrnjrDmnInnmoTlm77pibTmnaHnm65cclxuICogQHBhcmFtIHtQb2tlZGV4VHlwZX0gdHlwZSAtIFRoZSB0eXBlIG9mIHRoZSBlbnRyeS5cclxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbmFsTmFtZSAtIFRoZSBvcmlnaW5hbCBuYW1lIG9mIHRoZSBlbnRyeSB0byB1cGRhdGUuXHJcbiAqIEBwYXJhbSB7UG9rZWRleEVudHJ5fSB1cGRhdGVkRGF0YSAtIFRoZSBuZXcgZGF0YSBmb3IgdGhlIGVudHJ5LlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBUcnVlIGlmIHVwZGF0ZSB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBva2VkZXhFbnRyeSh0eXBlOiBQb2tlZGV4VHlwZSwgb3JpZ2luYWxOYW1lOiBzdHJpbmcsIHVwZGF0ZWREYXRhOiBQb2tlZGV4RW50cnkpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBpZiAoIXVwZGF0ZWREYXRhLuWQjeensCkge1xyXG4gICAgdG9hc3RyLmVycm9yKCfmm7TmlrDlpLHotKXvvJrmnaHnm67lv4XpobvljIXlkKvigJzlkI3np7DigJ3lrZfmrrXjgIInKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgY29uc3QgcG9rZWRleCA9IGF3YWl0IGdldFBva2VkZXhEYXRhKCk7XHJcbiAgY29uc3QgZW50cnlJbmRleCA9IHBva2VkZXhbdHlwZV0uZmluZEluZGV4KGVudHJ5ID0+IGVudHJ5LuWQjeensCA9PT0gb3JpZ2luYWxOYW1lKTtcclxuXHJcbiAgaWYgKGVudHJ5SW5kZXggPT09IC0xKSB7XHJcbiAgICB0b2FzdHIuZXJyb3IoYOabtOaWsOWksei0pe+8muacquaJvuWIsOWQjeS4uuKAnCR7b3JpZ2luYWxOYW1lfeKAneeahCR7dHlwZX3jgIJgKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGZvciBuYW1lIGNvbGxpc2lvbiBpZiB0aGUgbmFtZSBpcyBjaGFuZ2VkXHJcbiAgaWYgKG9yaWdpbmFsTmFtZSAhPT0gdXBkYXRlZERhdGEu5ZCN56ewICYmIHBva2VkZXhbdHlwZV0uc29tZShlbnRyeSA9PiBlbnRyeS7lkI3np7AgPT09IHVwZGF0ZWREYXRhLuWQjeensCkpIHtcclxuICAgIHRvYXN0ci53YXJuaW5nKGDmm7TmlrDlpLHotKXvvJrlkI3kuLrigJwke3VwZGF0ZWREYXRhLuWQjeensH3igJ3nmoQke3R5cGV95bey5a2Y5Zyo44CCYCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBwb2tlZGV4W3R5cGVdW2VudHJ5SW5kZXhdID0gdXBkYXRlZERhdGE7XHJcbiAgYXdhaXQgc2F2ZVBva2VkZXhEYXRhKHBva2VkZXgpO1xyXG4gIHRvYXN0ci5zdWNjZXNzKGDmiJDlip/mm7TmlrDjgJAke3VwZGF0ZWREYXRhLuWQjeensH3jgJHvvIFgKTtcclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWIoOmZpOS4gOS4quWbvumJtOadoeebrlxyXG4gKiBAcGFyYW0ge1Bva2VkZXhUeXBlfSB0eXBlIC0gVGhlIHR5cGUgb2YgdGhlIGVudHJ5LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBlbnRyeSB0byBkZWxldGUuXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSAtIFRydWUgaWYgZGVsZXRpb24gd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZS5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQb2tlZGV4RW50cnkodHlwZTogUG9rZWRleFR5cGUsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIGxldCBkZWxldGVPY2N1cnJlZCA9IGZhbHNlO1xyXG4gIGF3YWl0IHVwZGF0ZVZhcmlhYmxlc1dpdGgodmFyaWFibGVzID0+IHtcclxuICAgIGNvbnN0IHBva2VkZXggPSBfLmdldCh2YXJpYWJsZXMsIFBPS0VERVhfVkFSSUFCTEVfUEFUSCwgeyDlppblhb06IFtdLCDmpI3niak6IFtdLCDnianlk4E6IFtdIH0pO1xyXG4gICAgY29uc3QgaW5pdGlhbExlbmd0aCA9IHBva2VkZXhbdHlwZV0ubGVuZ3RoO1xyXG4gICAgcG9rZWRleFt0eXBlXSA9IHBva2VkZXhbdHlwZV0uZmlsdGVyKChlbnRyeTogUG9rZWRleEVudHJ5KSA9PiBlbnRyeS7lkI3np7AgIT09IG5hbWUpO1xyXG4gICAgaWYgKHBva2VkZXhbdHlwZV0ubGVuZ3RoIDwgaW5pdGlhbExlbmd0aCkge1xyXG4gICAgICBkZWxldGVPY2N1cnJlZCA9IHRydWU7XHJcbiAgICAgIF8uc2V0KHZhcmlhYmxlcywgUE9LRURFWF9WQVJJQUJMRV9QQVRILCBwb2tlZGV4KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YXJpYWJsZXM7XHJcbiAgfSwgeyB0eXBlOiAnZ2xvYmFsJyB9KTtcclxuXHJcbiAgaWYgKGRlbGV0ZU9jY3VycmVkKSB7XHJcbiAgICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5Yig6Zmk44CQJHtuYW1lfeOAke+8gWApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0b2FzdHIud2FybmluZyhg5Yig6Zmk5aSx6LSl77ya5pyq5om+5Yiw5ZCN5Li64oCcJHtuYW1lfeKAneeahCR7dHlwZX3jgIJgKTtcclxuICB9XHJcbiAgcmV0dXJuIGRlbGV0ZU9jY3VycmVkO1xyXG59XHJcblxyXG4vKipcclxuICog5o+Q5Lqk5paw5p2h55uu5Yiw5ZCO56uv5pyN5Yqh5ZmoXHJcbiAqIEBwYXJhbSB7UG9rZWRleFR5cGV9IHR5cGUgLSBUaGUgdHlwZSBvZiB0aGUgZW50cnkuXHJcbiAqIEBwYXJhbSB7UG9rZWRleEVudHJ5fSBlbnRyeURhdGEgLSBUaGUgZGF0YSBvZiB0aGUgbmV3IGVudHJ5LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW3Byb3ZpZGVyXSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIHByb3ZpZGVyLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdFRvSHVnZ2luZ0ZhY2UodHlwZTogU2hhcmVhYmxlVHlwZSwgZW50cnlEYXRhOiBQb2tlZGV4RW50cnksIHByb3ZpZGVyPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgSFVHR0lOR19GQUNFX0FQSV9FTkRQT0lOVCA9ICdodHRwczovL3d3dy1hcGktZm9ydW0ucmM2czN3Y3VlLm55YXQuYXBwOjU5NjkwL2FwaS9wb2tlZGV4JztcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIOWmguaenOacieaPkOS+m+iAhe+8jOWImea3u+WKoOWIsOadoeebruaVsOaNruS4rVxyXG4gICAgY29uc3QgZW50cnlXaXRoUHJvdmlkZXIgPSBwcm92aWRlciA/IHsgLi4uZW50cnlEYXRhLCAn6LSh54yu6ICFJzogcHJvdmlkZXIgfSA6IGVudHJ5RGF0YTtcclxuXHJcbiAgICAvLyDmnoTpgKDkuI7mnI3liqHlmahab2Qgc2NoZW1h5Yy56YWN55qE5pWw5o2u5qC85byPXHJcbiAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICBlbnRyeTogZW50cnlXaXRoUHJvdmlkZXIsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdbUG9rZWRleF0gU3VibWl0dGluZyB0byBzZXJ2ZXI6JywgcGF5bG9hZCk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChIVUdHSU5HX0ZBQ0VfQVBJX0VORFBPSU5ULCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgY29uc29sZS5lcnJvcignU2VydmVyIHJlc3BvbmRlZCB3aXRoIGFuIGVycm9yOicsIGVycm9yRGF0YSk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihg5pyN5Yqh5Zmo6L+U5Zue6ZSZ6K+vOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yRGF0YS5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGNvbnNvbGUubG9nKCdbUG9rZWRleF0gU3VibWlzc2lvbiBzdWNjZXNzZnVsOicsIHJlc3VsdCk7XHJcbiAgICB0b2FzdHIuaW5mbygn5paw5p2h55uu5bey5oiQ5Yqf5YiG5Lqr5Yiw56S+5Yy677yBJyk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbUG9rZWRleF0gRmFpbGVkIHRvIHN1Ym1pdCB0byBzZXJ2ZXI6JywgZXJyb3IpO1xyXG4gICAgdG9hc3RyLmVycm9yKGDliIbkuqvmlrDmnaHnm67lpLHotKU6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn6K+35p+l55yL5o6n5Yi25Y+wJ31gKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDku47lkI7nq6/mnI3liqHlmajojrflj5blrozmlbTnmoTlm77pibTmlbDmja5cclxuICogQHJldHVybnMge1Byb21pc2U8UmVtb3RlUG9rZWRleERhdGEgfCBudWxsPn1cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZW1vdGVQb2tlZGV4KCk6IFByb21pc2U8UmVtb3RlUG9rZWRleERhdGEgfCBudWxsPiB7XHJcbiAgY29uc3QgSFVHR0lOR19GQUNFX0FQSV9FTkRQT0lOVCA9ICdodHRwczovL3d3dy1hcGktZm9ydW0ucmM2czN3Y3VlLm55YXQuYXBwOjU5NjkwL2FwaS9wb2tlZGV4JztcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goSFVHR0lOR19GQUNFX0FQSV9FTkRQT0lOVCwge1xyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGDmnI3liqHlmajov5Tlm57plJnor686ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAvLyDkuLrnqbrmlbDmja7mj5Dkvpvpu5jorqTlgLxcclxuICAgIGNvbnN0IHZhbGlkYXRlZERhdGE6IFJlbW90ZVBva2VkZXhEYXRhID0ge1xyXG4gICAgICDlppblhb06IGRhdGFbJ+WmluWFvSddIHx8IFtdLFxyXG4gICAgICDmpI3niak6IGRhdGFbJ+akjeeJqSddIHx8IFtdLFxyXG4gICAgICDnianlk4E6IGRhdGFbJ+eJqeWTgSddIHx8IFtdLFxyXG4gICAgICDmiJDlsLE6IGRhdGFbJ+aIkOWwsSddIHx8IFtdLFxyXG4gICAgfTtcclxuICAgIHJldHVybiB2YWxpZGF0ZWREYXRhO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignW1Bva2VkZXhdIEZhaWxlZCB0byBmZXRjaCBmcm9tIHNlcnZlcjonLCBlcnJvcik7XHJcbiAgICB0b2FzdHIuZXJyb3IoYOS7juekvuWMuuiOt+WPluaVsOaNruWksei0pTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfor7fmn6XnnIvmjqfliLblj7AnfWApO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBBQ0hJRVZFTUVOVF9WQVJJQUJMRV9QQVRIID0gJ+S4lueVjC7ns7vnu58nO1xyXG5cclxuLyoqXHJcbiAqIOS7juWFqOWxgOWPmOmHj+S4reiOt+WPluWujOaVtOeahOezu+e7n+aVsOaNrlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN5c3RlbURhdGEoKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCB2YXJpYWJsZXMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnZ2xvYmFsJyB9KTtcclxuICByZXR1cm4gXy5nZXQodmFyaWFibGVzLCBBQ0hJRVZFTUVOVF9WQVJJQUJMRV9QQVRILCB7IOW3suWujOaIkDogW10sIOaIkOWwseeCueaVsDogMCB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWwhuWujOaVtOeahOezu+e7n+aVsOaNruS/neWtmOWbnuWFqOWxgOWPmOmHj1xyXG4gKiBAcGFyYW0ge2FueX0gZGF0YSAtIFRoZSBmdWxsIHN5c3RlbSBkYXRhIG9iamVjdC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNhdmVTeXN0ZW1EYXRhKGRhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGF3YWl0IGluc2VydE9yQXNzaWduVmFyaWFibGVzKHsgW0FDSElFVkVNRU5UX1ZBUklBQkxFX1BBVEhdOiBkYXRhIH0sIHsgdHlwZTogJ2dsb2JhbCcgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDku47lhajlsYDlj5jph4/kuK3ojrflj5bmiYDmnInmiJDlsLFcclxuICogQHJldHVybnMge1Byb21pc2U8UG9rZWRleEVudHJ5W10+fVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjaGlldmVtZW50cygpOiBQcm9taXNlPFBva2VkZXhFbnRyeVtdPiB7XHJcbiAgY29uc3Qgc3lzdGVtRGF0YSA9IGF3YWl0IGdldFN5c3RlbURhdGEoKTtcclxuICByZXR1cm4gc3lzdGVtRGF0YS7lt7LlrozmiJAgfHwgW107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDliJvlu7rkuIDkuKrmlrDmiJDlsLFcclxuICogQHBhcmFtIHtQb2tlZGV4RW50cnl9IGVudHJ5RGF0YSAtIFRoZSBkYXRhIGZvciB0aGUgbmV3IGFjaGlldmVtZW50LlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBUcnVlIGlmIGNyZWF0aW9uIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNoaWV2ZW1lbnQoZW50cnlEYXRhOiBQb2tlZGV4RW50cnkpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBpZiAoIWVudHJ5RGF0YS7lkI3np7ApIHtcclxuICAgIHRvYXN0ci5lcnJvcign5Yib5bu65aSx6LSl77ya5oiQ5bCx5b+F6aG75YyF5ZCr4oCc5ZCN56ew4oCd5a2X5q6144CCJyk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGNvbnN0IHN5c3RlbURhdGEgPSBhd2FpdCBnZXRTeXN0ZW1EYXRhKCk7XHJcbiAgY29uc3QgYWNoaWV2ZW1lbnRzID0gc3lzdGVtRGF0YS7lt7LlrozmiJAgfHwgW107XHJcblxyXG4gIGlmIChhY2hpZXZlbWVudHMuc29tZSgoYWNoOiBQb2tlZGV4RW50cnkpID0+IGFjaC7lkI3np7AgPT09IGVudHJ5RGF0YS7lkI3np7ApKSB7XHJcbiAgICB0b2FzdHIud2FybmluZyhg5Yib5bu65aSx6LSl77ya5ZCN5Li64oCcJHtlbnRyeURhdGEu5ZCN56ewfeKAneeahOaIkOWwseW3suWtmOWcqOOAgmApO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBcclxuICBhY2hpZXZlbWVudHMucHVzaChlbnRyeURhdGEpO1xyXG4gIHN5c3RlbURhdGEu5bey5a6M5oiQID0gYWNoaWV2ZW1lbnRzO1xyXG4gIFxyXG4gIC8vIOWmguaenOadoeebruaVsOaNruS4reacieeCueaVsO+8jOWImeWinuWKoOaAu+eCueaVsFxyXG4gIGNvbnN0IHBvaW50c1RvQWRkID0gTnVtYmVyKGVudHJ5RGF0YVsn54K55pWwJ10gfHwgMCk7XHJcbiAgaWYgKCFpc05hTihwb2ludHNUb0FkZCkpIHtcclxuICAgICAgc3lzdGVtRGF0YS7miJDlsLHngrnmlbAgPSAoc3lzdGVtRGF0YS7miJDlsLHngrnmlbAgfHwgMCkgKyBwb2ludHNUb0FkZDtcclxuICB9XHJcblxyXG4gIGF3YWl0IHNhdmVTeXN0ZW1EYXRhKHN5c3RlbURhdGEpO1xyXG4gIHRvYXN0ci5zdWNjZXNzKGDmiJDlip/mt7vliqDmlrDmiJDlsLHjgJAke2VudHJ5RGF0YS7lkI3np7B944CR77yBYCk7XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmm7TmlrDkuIDkuKrnjrDmnInnmoTmiJDlsLFcclxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbmFsTmFtZSAtIFRoZSBvcmlnaW5hbCBuYW1lIG9mIHRoZSBhY2hpZXZlbWVudCB0byB1cGRhdGUuXHJcbiAqIEBwYXJhbSB7UG9rZWRleEVudHJ5fSB1cGRhdGVkRGF0YSAtIFRoZSBuZXcgZGF0YSBmb3IgdGhlIGFjaGlldmVtZW50LlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBUcnVlIGlmIHVwZGF0ZSB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFjaGlldmVtZW50KG9yaWdpbmFsTmFtZTogc3RyaW5nLCB1cGRhdGVkRGF0YTogUG9rZWRleEVudHJ5KTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgaWYgKCF1cGRhdGVkRGF0YS7lkI3np7ApIHtcclxuICAgIHRvYXN0ci5lcnJvcign5pu05paw5aSx6LSl77ya5oiQ5bCx5b+F6aG75YyF5ZCr4oCc5ZCN56ew4oCd5a2X5q6144CCJyk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGNvbnN0IHN5c3RlbURhdGEgPSBhd2FpdCBnZXRTeXN0ZW1EYXRhKCk7XHJcbiAgY29uc3QgYWNoaWV2ZW1lbnRzID0gc3lzdGVtRGF0YS7lt7LlrozmiJAgfHwgW107XHJcbiAgY29uc3QgZW50cnlJbmRleCA9IGFjaGlldmVtZW50cy5maW5kSW5kZXgoKGFjaDogUG9rZWRleEVudHJ5KSA9PiBhY2gu5ZCN56ewID09PSBvcmlnaW5hbE5hbWUpO1xyXG5cclxuICBpZiAoZW50cnlJbmRleCA9PT0gLTEpIHtcclxuICAgIHRvYXN0ci5lcnJvcihg5pu05paw5aSx6LSl77ya5pyq5om+5Yiw5ZCN5Li64oCcJHtvcmlnaW5hbE5hbWV94oCd55qE5oiQ5bCx44CCYCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBpZiAob3JpZ2luYWxOYW1lICE9PSB1cGRhdGVkRGF0YS7lkI3np7AgJiYgYWNoaWV2ZW1lbnRzLnNvbWUoKGFjaDogUG9rZWRleEVudHJ5KSA9PiBhY2gu5ZCN56ewID09PSB1cGRhdGVkRGF0YS7lkI3np7ApKSB7XHJcbiAgICB0b2FzdHIud2FybmluZyhg5pu05paw5aSx6LSl77ya5ZCN5Li64oCcJHt1cGRhdGVkRGF0YS7lkI3np7B94oCd55qE5oiQ5bCx5bey5a2Y5Zyo44CCYCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIFxyXG4gIGNvbnN0IG9sZEVudHJ5ID0gYWNoaWV2ZW1lbnRzW2VudHJ5SW5kZXhdO1xyXG4gIGNvbnN0IG9sZFBvaW50cyA9IE51bWJlcihvbGRFbnRyeVsn54K55pWwJ10gfHwgMCk7XHJcbiAgY29uc3QgbmV3UG9pbnRzID0gTnVtYmVyKHVwZGF0ZWREYXRhWyfngrnmlbAnXSB8fCAwKTtcclxuXHJcbiAgYWNoaWV2ZW1lbnRzW2VudHJ5SW5kZXhdID0gdXBkYXRlZERhdGE7XHJcbiAgc3lzdGVtRGF0YS7lt7LlrozmiJAgPSBhY2hpZXZlbWVudHM7XHJcbiAgXHJcbiAgLy8g5pu05paw5oC754K55pWwXHJcbiAgaWYgKCFpc05hTihvbGRQb2ludHMpICYmICFpc05hTihuZXdQb2ludHMpKSB7XHJcbiAgICAgIHN5c3RlbURhdGEu5oiQ5bCx54K55pWwID0gKHN5c3RlbURhdGEu5oiQ5bCx54K55pWwIHx8IDApIC0gb2xkUG9pbnRzICsgbmV3UG9pbnRzO1xyXG4gIH1cclxuXHJcbiAgYXdhaXQgc2F2ZVN5c3RlbURhdGEoc3lzdGVtRGF0YSk7XHJcbiAgdG9hc3RyLnN1Y2Nlc3MoYOaIkOWKn+abtOaWsOaIkOWwseOAkCR7dXBkYXRlZERhdGEu5ZCN56ewfeOAke+8gWApO1xyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICog5Yig6Zmk5LiA5Liq5oiQ5bCxXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGFjaGlldmVtZW50IHRvIGRlbGV0ZS5cclxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IC0gVHJ1ZSBpZiBkZWxldGlvbiB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFjaGlldmVtZW50KG5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIGxldCBkZWxldGVPY2N1cnJlZCA9IGZhbHNlO1xyXG4gIGF3YWl0IHVwZGF0ZVZhcmlhYmxlc1dpdGgodmFyaWFibGVzID0+IHtcclxuICAgIGNvbnN0IHN5c3RlbURhdGEgPSBfLmdldCh2YXJpYWJsZXMsIEFDSElFVkVNRU5UX1ZBUklBQkxFX1BBVEgsIHsg5bey5a6M5oiQOiBbXSwg5oiQ5bCx54K55pWwOiAwIH0pO1xyXG4gICAgY29uc3QgYWNoaWV2ZW1lbnRzID0gc3lzdGVtRGF0YS7lt7LlrozmiJAgfHwgW107XHJcbiAgICBjb25zdCBpbml0aWFsTGVuZ3RoID0gYWNoaWV2ZW1lbnRzLmxlbmd0aDtcclxuICAgIFxyXG4gICAgY29uc3QgZW50cnlUb0RlbGV0ZSA9IGFjaGlldmVtZW50cy5maW5kKChhY2g6IFBva2VkZXhFbnRyeSkgPT4gYWNoLuWQjeensCA9PT0gbmFtZSk7XHJcbiAgICBpZiAoIWVudHJ5VG9EZWxldGUpIHtcclxuICAgICAgcmV0dXJuIHZhcmlhYmxlczsgLy8gTm8gY2hhbmdlXHJcbiAgICB9XHJcblxyXG4gICAgc3lzdGVtRGF0YS7lt7LlrozmiJAgPSBhY2hpZXZlbWVudHMuZmlsdGVyKChhY2g6IFBva2VkZXhFbnRyeSkgPT4gYWNoLuWQjeensCAhPT0gbmFtZSk7XHJcbiAgICBcclxuICAgIGlmIChzeXN0ZW1EYXRhLuW3suWujOaIkC5sZW5ndGggPCBpbml0aWFsTGVuZ3RoKSB7XHJcbiAgICAgIGRlbGV0ZU9jY3VycmVkID0gdHJ1ZTtcclxuICAgICAgY29uc3QgcG9pbnRzVG9SZW1vdmUgPSBOdW1iZXIoZW50cnlUb0RlbGV0ZVsn54K55pWwJ10gfHwgMCk7XHJcbiAgICAgIGlmICghaXNOYU4ocG9pbnRzVG9SZW1vdmUpKSB7XHJcbiAgICAgICAgc3lzdGVtRGF0YS7miJDlsLHngrnmlbAgPSAoc3lzdGVtRGF0YS7miJDlsLHngrnmlbAgfHwgMCkgLSBwb2ludHNUb1JlbW92ZTtcclxuICAgICAgfVxyXG4gICAgICBfLnNldCh2YXJpYWJsZXMsIEFDSElFVkVNRU5UX1ZBUklBQkxFX1BBVEgsIHN5c3RlbURhdGEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhcmlhYmxlcztcclxuICB9LCB7IHR5cGU6ICdnbG9iYWwnIH0pO1xyXG5cclxuICBpZiAoZGVsZXRlT2NjdXJyZWQpIHtcclxuICAgIHRvYXN0ci5zdWNjZXNzKGDmiJDlip/liKDpmaTmiJDlsLHjgJAke25hbWV944CR77yBYCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRvYXN0ci53YXJuaW5nKGDliKDpmaTlpLHotKXvvJrmnKrmib7liLDlkI3kuLrigJwke25hbWV94oCd55qE5oiQ5bCx44CCYCk7XHJcbiAgfVxyXG4gIHJldHVybiBkZWxldGVPY2N1cnJlZDtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/pokedex.ts\n\n}");
  },
  "./src/什么我要在玄幻修仙世界种田/systems.ts": 
  /*!**************************************!*\
  !*** ./src/什么我要在玄幻修仙世界种田/systems.ts ***!
  \**************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   renderSystem: () => (/* binding */ renderSystem)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "lodash");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction initCustomSlider() {\n    const slider = document.querySelector(\'.custom-slider\');\n    if (!slider)\n        return;\n    const track = slider.querySelector(\'.custom-slider-track\');\n    const slides = Array.from(track.children);\n    const nextButton = slider.querySelector(\'.slider-nav-btn.next\');\n    const prevButton = slider.querySelector(\'.slider-nav-btn.prev\');\n    const counter = slider.querySelector(\'.slider-counter\');\n    if (!track || slides.length === 0 || !nextButton || !prevButton || !counter)\n        return;\n    let currentIndex = 0;\n    const totalSlides = slides.length;\n    const updateSlider = () => {\n        const slideWidth = slides[0].offsetWidth;\n        track.style.transform = `translateX(-${currentIndex * slideWidth}px)`;\n        // Update counter\n        counter.textContent = `${currentIndex + 1} / ${totalSlides}`;\n        // Update button states\n        prevButton.disabled = currentIndex === 0;\n        nextButton.disabled = currentIndex === totalSlides - 1;\n    };\n    nextButton.addEventListener(\'click\', () => {\n        if (currentIndex < totalSlides - 1) {\n            currentIndex++;\n            updateSlider();\n        }\n    });\n    prevButton.addEventListener(\'click\', () => {\n        if (currentIndex > 0) {\n            currentIndex--;\n            updateSlider();\n        }\n    });\n    // Initial setup\n    updateSlider();\n    // Recalculate on resize\n    new ResizeObserver(updateSlider).observe(slider);\n}\n/**\n * 渲染技能面板系统\n * @param systemData - 从变量中获取的系统数据\n * @param container - 用于渲染的HTML容器元素\n */\nfunction renderSkillPanel(systemData, container) {\n    const skills = systemData[\'技能\'] || [];\n    let contentHtml = \'\';\n    if (skills.length === 0) {\n        contentHtml = `<p class="text-secondary text-sm italic">${systemData[\'提示\'] || \'尚未获得任何技能。\'}</p>`;\n    }\n    else {\n        contentHtml = \'<ul class="space-y-3">\';\n        skills.forEach((skill) => {\n            const name = skill[\'名称\'] || \'未知技能\';\n            const level = skill[\'等级\'] || 1;\n            const exp = skill[\'熟练度\'] || { value: 0, max: 100 };\n            const percentage = (exp.value / exp.max) * 100;\n            contentHtml += `\r\n        <li>\r\n          <div class="flex justify-between items-center mb-1">\r\n            <span class="font-semibold text-primary">${name}</span>\r\n            <span class="text-sm font-mono text-secondary">Lv. ${level}</span>\r\n          </div>\r\n          <div class="progress-bar-bg w-full rounded-full h-2.5">\r\n            <div class="progress-bar-fg bg-accent h-2.5 rounded-full" style="width: ${percentage}%"></div>\r\n          </div>\r\n          <div class="text-right text-xs font-mono text-secondary mt-1">${exp.value} / ${exp.max}</div>\r\n        </li>\r\n      `;\n        });\n        contentHtml += \'</ul>\';\n    }\n    container.innerHTML = `\r\n    <div class="bg-main rounded-xl border border-dim p-3.5 shadow-sm card-hover theme-transition">\r\n      <h3 class="font-bold text-lg mb-2 pb-1 border-b border-dim theme-transition">\r\n        ⚙️ ${systemData[\'名称\'] || \'技能面板\'}\r\n      </h3>\r\n      ${contentHtml}\r\n    </div>\r\n  `;\n}\n/**\n * 渲染成就系统\n * @param systemData - 从变量中获取的系统数据\n * @param container - 用于渲染的HTML容器元素\n */\nfunction renderAchievementSystem(systemData, container) {\n    const points = systemData[\'成就点数\'] || 0;\n    const completed = systemData[\'已完成\'] || [];\n    let achievementsHtml = \'\';\n    if (completed.length === 0) {\n        achievementsHtml = `<p class="text-secondary text-sm italic">尚未解锁任何成就。</p>`;\n    }\n    else {\n        achievementsHtml = \'<ul class="space-y-3">\';\n        completed.forEach((ach) => {\n            const name = ach[\'名称\'] || \'未知成就\';\n            const desc = ach[\'描述\'] || \'没有描述。\';\n            // 将整个成就对象字符串化以用于 data-details\n            const details = JSON.stringify(ach);\n            achievementsHtml += `\r\n        <li class="clickable-item rounded-lg p-3 hover:bg-secondary transition-colors" data-details=\'${details}\'>\r\n          <div class="flex items-center">\r\n            <i class="fas fa-trophy text-yellow-400 mr-3 fa-lg"></i>\r\n            <p class="font-semibold text-primary">${name}</p>\r\n          </div>\r\n          <p class="text-sm text-secondary pl-8 mt-1">${desc}</p>\r\n        </li>\r\n      `;\n        });\n        achievementsHtml += \'</ul>\';\n    }\n    container.innerHTML = `\r\n    <div class="bg-main rounded-xl border border-dim p-3.5 shadow-sm card-hover theme-transition">\r\n      <div class="flex justify-between items-center mb-2 pb-1 border-b border-dim">\r\n        <h3 class="font-bold text-lg theme-transition">\r\n          🏆 ${systemData[\'名称\'] || \'成就系统\'}\r\n        </h3>\r\n        <div class="font-bold text-accent text-lg" title="成就点数">\r\n          ${points} <i class="fas fa-star text-xs"></i>\r\n        </div>\r\n      </div>\r\n      ${achievementsHtml}\r\n      <div class="mt-4 pt-3 border-t border-dim text-center">\r\n        <button id="redeem-rewards-btn" class="btn-primary w-full sm:w-auto">\r\n          <i class="fas fa-gift mr-2"></i>兑换奖励\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `;\n}\nfunction renderBarterSystem(systemData, container) {\n    const myItems = systemData[\'我的物品\'] || [];\n    const availableItems = systemData[\'可换取的物品\'] || [];\n    const totalValue = lodash__WEBPACK_IMPORTED_MODULE_0___default().sumBy(myItems, (item) => (item[\'数量\'] || 0) * (item[\'价值\'] || 0));\n    // --- My Items Section ---\n    let myItemsHtml = `<div class="bg-secondary/30 rounded-lg p-3 shadow-inner">`;\n    if (myItems.length > 0) {\n        myItemsHtml += `<ul class="space-y-2 text-sm">`;\n        myItems.forEach((item) => {\n            myItemsHtml += `\r\n        <li class="flex justify-between items-center p-2 rounded-md bg-main/30">\r\n          <div>\r\n            <span class="font-semibold text-primary">${item[\'名称\']}</span>\r\n            <span class="text-xs text-secondary ml-2">(价值: ${item[\'价值\']})</span>\r\n          </div>\r\n          <span class="font-mono text-accent font-semibold">x ${item[\'数量\']}</span>\r\n        </li>\r\n      `;\n        });\n        myItemsHtml += `</ul>`;\n    }\n    else {\n        myItemsHtml += `<p class="text-secondary text-sm italic text-center p-4">你没有可用于交换的物品。</p>`;\n    }\n    myItemsHtml += \'</div>\';\n    // --- Available Items Section ---\n    let availableItemsHtml = `\r\n    <div class="custom-slider">\r\n      <div class="custom-slider-track">\r\n  `;\n    if (availableItems.length > 0) {\n        availableItems.forEach((item) => {\n            const canAfford = totalValue >= (item[\'价值\'] || 0);\n            availableItemsHtml += `\r\n        <div class="custom-slider-slide">\r\n          <div class="bg-main rounded-xl border border-dim shadow-lg overflow-hidden flex flex-col h-full">\r\n            <div class="p-4 bg-secondary/30 min-h-[8rem] flex items-center">\r\n                <p class="text-secondary text-sm">${item[\'描述\'] || \'暂无描述\'}</p>\r\n            </div>\r\n            <div class="p-4 flex flex-col flex-grow">\r\n                <h5 class="font-bold text-primary text-lg flex-grow mb-2">${item[\'名称\']}</h5>\r\n                <div class="flex justify-between items-center mb-4">\r\n                    <span class="text-2xl font-bold text-accent">${item[\'价值\']} <i class="fas fa-coins text-lg"></i></span>\r\n                    <span class="bg-accent/20 text-accent text-xs font-bold px-2 py-1 rounded-full">库存: ${item[\'库存\']}</span>\r\n                </div>\r\n                <button \r\n                    class="barter-btn w-full mt-auto bg-accent hover:bg-accent-hover text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center justify-center gap-2"\r\n                    data-name="${item[\'名称\']}" \r\n                    data-cost="${item[\'价值\']}"\r\n                    ${!canAfford ? \'disabled\' : \'\'}\r\n                    title="${canAfford ? `兑换 ${item[\'名称\']}` : `价值不足 (需要 ${item[\'价值\']})`}"\r\n                >\r\n                    <i class="fas fa-exchange-alt"></i>\r\n                    <span>${canAfford ? \'兑换\' : \'价值不足\'}</span>\r\n                </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `;\n        });\n    }\n    else {\n        availableItemsHtml += `<div class="custom-slider-slide"><p class="text-secondary text-sm italic text-center p-4">当前没有可换取的物品。</p></div>`;\n    }\n    availableItemsHtml += `\r\n      </div>\r\n      <div class="slider-controls">\r\n        <button class="slider-nav-btn prev"><i class="fas fa-chevron-left"></i></button>\r\n        <span class="slider-counter"></span>\r\n        <button class="slider-nav-btn next"><i class="fas fa-chevron-right"></i></button>\r\n      </div>\r\n    </div>\r\n  `;\n    container.innerHTML = `\r\n    <div class="bg-main rounded-xl border border-dim p-4 shadow-sm card-hover theme-transition">\r\n      <div class="flex justify-between items-center mb-3 pb-2 border-b border-dim">\r\n        <h3 class="font-bold text-lg theme-transition flex items-center">\r\n          <i class="fas fa-store mr-2 text-accent"></i> ${systemData[\'名称\'] || \'以物换物\'}\r\n        </h3>\r\n        <div class="font-bold text-accent text-lg" title="我的总价值">\r\n          ${totalValue} <i class="fas fa-coins text-xs"></i>\r\n        </div>\r\n      </div>\r\n      <div class="space-y-6 mt-4">\r\n        <div>\r\n          <h4 class="font-semibold text-base mb-2 text-primary/80">我的物品</h4>\r\n          ${myItemsHtml}\r\n        </div>\r\n        <div>\r\n          <div class="flex justify-between items-center mb-2">\r\n            <h4 class="font-semibold text-base text-primary/80">可换取的物品</h4>\r\n            <button id="refresh-barter-btn" class="text-sm text-accent hover:text-accent-hover transition-colors p-1 rounded hover:bg-secondary" title="刷新可换取物品">\r\n              <i class="fas fa-sync-alt"></i> 刷新\r\n            </button>\r\n          </div>\r\n          ${availableItemsHtml}\r\n        </div>\r\n      </div>\r\n      <div class="mt-4 pt-3 border-t border-dim text-center">\r\n        <p class="text-xs text-secondary">${systemData[\'提示\'] || \'用你的物品积累价值，换取所需之物。\'}</p>\r\n      </div>\r\n    </div>\r\n  `;\n    setTimeout(() => initCustomSlider(), 0);\n}\n/**\n * 渲染签到系统\n * @param systemData - 从变量中获取的系统数据\n * @param container - 用于渲染的HTML容器元素\n */\nfunction renderSignInSystem(systemData, container) {\n    const today = new Date().getDate();\n    const signedInDays = systemData[\'已签到\'] || [];\n    const canSignIn = !signedInDays.includes(today);\n    const consecutiveDays = systemData[\'连续签到\'] || 0;\n    const monthlyCard = systemData[\'月卡\'] || \'未激活\';\n    const monthlyCardHTML = monthlyCard === \'未激活\'\n        ? `${monthlyCard} <button id="activate-monthly-card-btn" class="text-xs ml-2 px-2 py-0.5 rounded bg-accent/20 hover:bg-accent/40 text-accent transition-colors" title="向AI询问激活月卡的条件">激活</button>`\n        : monthlyCard;\n    let calendarHtml = \'<div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center text-xs">\';\n    const daysInMonth = new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate();\n    for (let i = 1; i <= daysInMonth; i++) {\n        const isToday = i === today;\n        const isSignedIn = signedInDays.includes(i);\n        let dayClass = \'w-8 h-8 flex items-center justify-center rounded-full transition-colors duration-300 \';\n        if (isToday && !isSignedIn) { // Only apply special style if it\'s today AND not signed in yet\n            dayClass += \'bg-accent/30 text-accent font-bold ring-2 ring-accent \';\n        }\n        else {\n            dayClass += \'bg-secondary/50 \';\n        }\n        if (isSignedIn) {\n            dayClass += \'bg-green-500/50 text-white\';\n            calendarHtml += `<div class="${dayClass}" title="第${i}天：已签到" data-day="${i}"><i class="fas fa-check"></i></div>`;\n        }\n        else {\n            calendarHtml += `<div class="${dayClass}" title="第${i}天：未签到" data-day="${i}">${i}</div>`;\n        }\n    }\n    calendarHtml += \'</div>\';\n    container.innerHTML = `\r\n    <div class="bg-main rounded-xl border border-dim p-3.5 shadow-sm card-hover theme-transition">\r\n      <h3 class="font-bold text-lg mb-3 pb-2 border-b border-dim theme-transition">\r\n        🗓️ ${systemData[\'名称\'] || \'签到系统\'}\r\n      </h3>\r\n      <div class="space-y-4">\r\n        ${calendarHtml}\r\n        <div class="text-center text-sm text-secondary space-y-1 pt-2">\r\n            <p>连续签到: <span class="font-bold text-accent">${consecutiveDays}</span> 天</p>\r\n            <p>月卡状态: <span class="font-bold text-accent">${monthlyCardHTML}</span></p>\r\n        </div>\r\n        <button id="sign-in-btn" class="btn-primary w-full" ${!canSignIn ? \'disabled\' : \'\'}>\r\n          <i class="fas fa-calendar-check mr-2"></i>${canSignIn ? \'今日签到\' : \'今日已签到\'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `;\n}\n/**\n * 系统渲染的主函数\n * @param systemData - 从变量中获取的系统数据\n * @param container - 用于渲染的HTML容器元素\n */\nfunction renderSystem(systemData, container) {\n    if (!systemData || lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(systemData)) {\n        container.innerHTML = `\r\n      <div class="text-center py-4 text-secondary theme-transition italic">\r\n        <i class="fas fa-info-circle mr-1"></i>未绑定系统\r\n      </div>\r\n    `;\n        return;\n    }\n    const systemName = systemData[\'名称\'];\n    switch (systemName) {\n        case \'技能面板\':\n            renderSkillPanel(systemData, container);\n            break;\n        case \'成就系统\':\n            renderAchievementSystem(systemData, container);\n            break;\n        case \'以物换物系统\':\n            renderBarterSystem(systemData, container);\n            break;\n        case \'签到系统\':\n            renderSignInSystem(systemData, container);\n            break;\n        // 在这里可以为其他系统添加 case\n        default:\n            container.innerHTML = `\r\n        <div class="text-center py-4 text-secondary theme-transition italic">\r\n          <i class="fas fa-question-circle mr-1"></i>未知的系统类型: ${systemName}\r\n        </div>\r\n      `;\n            break;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3N5c3RlbXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVCO0FBRXZCLFNBQVMsZ0JBQWdCO0lBQ3ZCLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQWdCLENBQUM7SUFDdkUsSUFBSSxDQUFDLE1BQU07UUFBRSxPQUFPO0lBRXBCLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQWdCLENBQUM7SUFDMUUsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFrQixDQUFDO0lBQzNELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQXNCLENBQUM7SUFDckYsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBc0IsQ0FBQztJQUNyRixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFnQixDQUFDO0lBRXZFLElBQUksQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxPQUFPO1FBQUUsT0FBTztJQUVwRixJQUFJLFlBQVksR0FBRyxDQUFDLENBQUM7SUFDckIsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUVsQyxNQUFNLFlBQVksR0FBRyxHQUFHLEVBQUU7UUFDeEIsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztRQUN6QyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxlQUFlLFlBQVksR0FBRyxVQUFVLEtBQUssQ0FBQztRQUV0RSxpQkFBaUI7UUFDakIsT0FBTyxDQUFDLFdBQVcsR0FBRyxHQUFHLFlBQVksR0FBRyxD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Ozs7R0FJL0UsQ0FBQztBQUNKLENBQUM7QUFHRDs7OztHQUlHO0FBQ0ksU0FBUyxZQUFZLENBQUMsVUFBZSxFQUFFLFNBQXNCO0lBQ2xFLElBQUksQ0FBQyxVQUFVLElBQUkscURBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDO1FBQ3pDLFNBQVMsQ0FBQyxTQUFTLEdBQUc7Ozs7S0FJckIsQ0FBQztRQUNGLE9BQU87SUFDVCxDQUFDO0lBRUQsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLFFBQVEsVUFBVSxFQUFFLENBQUM7UUFDbkIsS0FBSyxNQUFNO1lBQ1QsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3hDLE1BQU07UUFDUixLQUFLLE1BQU07WUFDVCx1QkFBdUIsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFDL0MsTUFBTTtRQUNSLEtBQUssUUFBUTtZQUNYLGtCQUFrQixDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUMxQyxNQUFNO1FBQ1IsS0FBSyxNQUFNO1lBQ1Qsa0JBQWtCLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQzFDLE1BQU07UUFDUixvQkFBb0I7UUFDcEI7WUFDRSxTQUFTLENBQUMsU0FBUyxHQUFHOztnRUFFb0MsVUFBVTs7T0FFbkUsQ0FBQztZQUNGLE1BQU07SUFDVixDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3N5c3RlbXMudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XHJcblxyXG5mdW5jdGlvbiBpbml0Q3VzdG9tU2xpZGVyKCkge1xyXG4gIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tc2xpZGVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgaWYgKCFzbGlkZXIpIHJldHVybjtcclxuXHJcbiAgY29uc3QgdHJhY2sgPSBzbGlkZXIucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zbGlkZXItdHJhY2snKSBhcyBIVE1MRWxlbWVudDtcclxuICBjb25zdCBzbGlkZXMgPSBBcnJheS5mcm9tKHRyYWNrLmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdO1xyXG4gIGNvbnN0IG5leHRCdXR0b24gPSBzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlci1uYXYtYnRuLm5leHQnKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICBjb25zdCBwcmV2QnV0dG9uID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItbmF2LWJ0bi5wcmV2JykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgY29uc3QgY291bnRlciA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWNvdW50ZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgaWYgKCF0cmFjayB8fCBzbGlkZXMubGVuZ3RoID09PSAwIHx8ICFuZXh0QnV0dG9uIHx8ICFwcmV2QnV0dG9uIHx8ICFjb3VudGVyKSByZXR1cm47XHJcblxyXG4gIGxldCBjdXJyZW50SW5kZXggPSAwO1xyXG4gIGNvbnN0IHRvdGFsU2xpZGVzID0gc2xpZGVzLmxlbmd0aDtcclxuXHJcbiAgY29uc3QgdXBkYXRlU2xpZGVyID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgc2xpZGVXaWR0aCA9IHNsaWRlc1swXS5vZmZzZXRXaWR0aDtcclxuICAgIHRyYWNrLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke2N1cnJlbnRJbmRleCAqIHNsaWRlV2lkdGh9cHgpYDtcclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIGNvdW50ZXJcclxuICAgIGNvdW50ZXIudGV4dENvbnRlbnQgPSBgJHtjdXJyZW50SW5kZXggKyAxfSAvICR7dG90YWxTbGlkZXN9YDtcclxuXHJcbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xyXG4gICAgcHJldkJ1dHRvbi5kaXNhYmxlZCA9IGN1cnJlbnRJbmRleCA9PT0gMDtcclxuICAgIG5leHRCdXR0b24uZGlzYWJsZWQgPSBjdXJyZW50SW5kZXggPT09IHRvdGFsU2xpZGVzIC0gMTtcclxuICB9O1xyXG5cclxuICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgaWYgKGN1cnJlbnRJbmRleCA8IHRvdGFsU2xpZGVzIC0gMSkge1xyXG4gICAgICBjdXJyZW50SW5kZXgrKztcclxuICAgICAgdXBkYXRlU2xpZGVyKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHByZXZCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBpZiAoY3VycmVudEluZGV4ID4gMCkge1xyXG4gICAgICBjdXJyZW50SW5kZXgtLTtcclxuICAgICAgdXBkYXRlU2xpZGVyKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIEluaXRpYWwgc2V0dXBcclxuICB1cGRhdGVTbGlkZXIoKTtcclxuICBcclxuICAvLyBSZWNhbGN1bGF0ZSBvbiByZXNpemVcclxuICBuZXcgUmVzaXplT2JzZXJ2ZXIodXBkYXRlU2xpZGVyKS5vYnNlcnZlKHNsaWRlcik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmuLLmn5PmioDog73pnaLmnb/ns7vnu59cclxuICogQHBhcmFtIHN5c3RlbURhdGEgLSDku47lj5jph4/kuK3ojrflj5bnmoTns7vnu5/mlbDmja5cclxuICogQHBhcmFtIGNvbnRhaW5lciAtIOeUqOS6jua4suafk+eahEhUTUzlrrnlmajlhYPntKBcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlclNraWxsUGFuZWwoc3lzdGVtRGF0YTogYW55LCBjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgY29uc3Qgc2tpbGxzID0gc3lzdGVtRGF0YVsn5oqA6IO9J10gfHwgW107XHJcbiAgbGV0IGNvbnRlbnRIdG1sID0gJyc7XHJcblxyXG4gIGlmIChza2lsbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICBjb250ZW50SHRtbCA9IGA8cCBjbGFzcz1cInRleHQtc2Vjb25kYXJ5IHRleHQtc20gaXRhbGljXCI+JHtzeXN0ZW1EYXRhWyfmj5DnpLonXSB8fCAn5bCa5pyq6I635b6X5Lu75L2V5oqA6IO944CCJ308L3A+YDtcclxuICB9IGVsc2Uge1xyXG4gICAgY29udGVudEh0bWwgPSAnPHVsIGNsYXNzPVwic3BhY2UteS0zXCI+JztcclxuICAgIHNraWxscy5mb3JFYWNoKChza2lsbDogYW55KSA9PiB7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBza2lsbFsn5ZCN56ewJ10gfHwgJ+acquefpeaKgOiDvSc7XHJcbiAgICAgIGNvbnN0IGxldmVsID0gc2tpbGxbJ+etiee6pyddIHx8IDE7XHJcbiAgICAgIGNvbnN0IGV4cCA9IHNraWxsWyfnhp/nu4PluqYnXSB8fCB7IHZhbHVlOiAwLCBtYXg6IDEwMCB9O1xyXG4gICAgICBjb25zdCBwZXJjZW50YWdlID0gKGV4cC52YWx1ZSAvIGV4cC5tYXgpICogMTAwO1xyXG5cclxuICAgICAgY29udGVudEh0bWwgKz0gYFxyXG4gICAgICAgIDxsaT5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMVwiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5XCI+JHtuYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbW9ubyB0ZXh0LXNlY29uZGFyeVwiPkx2LiAke2xldmVsfTwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhci1iZyB3LWZ1bGwgcm91bmRlZC1mdWxsIGgtMi41XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXItZmcgYmctYWNjZW50IGgtMi41IHJvdW5kZWQtZnVsbFwiIHN0eWxlPVwid2lkdGg6ICR7cGVyY2VudGFnZX0lXCI+PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXJpZ2h0IHRleHQteHMgZm9udC1tb25vIHRleHQtc2Vjb25kYXJ5IG10LTFcIj4ke2V4cC52YWx1ZX0gLyAke2V4cC5tYXh9PC9kaXY+XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgYDtcclxuICAgIH0pO1xyXG4gICAgY29udGVudEh0bWwgKz0gJzwvdWw+JztcclxuICB9XHJcblxyXG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiYmctbWFpbiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZGltIHAtMy41IHNoYWRvdy1zbSBjYXJkLWhvdmVyIHRoZW1lLXRyYW5zaXRpb25cIj5cclxuICAgICAgPGgzIGNsYXNzPVwiZm9udC1ib2xkIHRleHQtbGcgbWItMiBwYi0xIGJvcmRlci1iIGJvcmRlci1kaW0gdGhlbWUtdHJhbnNpdGlvblwiPlxyXG4gICAgICAgIOKame+4jyAke3N5c3RlbURhdGFbJ+WQjeensCddIHx8ICfmioDog73pnaLmnb8nfVxyXG4gICAgICA8L2gzPlxyXG4gICAgICAke2NvbnRlbnRIdG1sfVxyXG4gICAgPC9kaXY+XHJcbiAgYDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOa4suafk+aIkOWwseezu+e7n1xyXG4gKiBAcGFyYW0gc3lzdGVtRGF0YSAtIOS7juWPmOmHj+S4reiOt+WPlueahOezu+e7n+aVsOaNrlxyXG4gKiBAcGFyYW0gY29udGFpbmVyIC0g55So5LqO5riy5p+T55qESFRNTOWuueWZqOWFg+e0oFxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyQWNoaWV2ZW1lbnRTeXN0ZW0oc3lzdGVtRGF0YTogYW55LCBjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgY29uc3QgcG9pbnRzID0gc3lzdGVtRGF0YVsn5oiQ5bCx54K55pWwJ10gfHwgMDtcclxuICBjb25zdCBjb21wbGV0ZWQgPSBzeXN0ZW1EYXRhWyflt7LlrozmiJAnXSB8fCBbXTtcclxuICBcclxuICBsZXQgYWNoaWV2ZW1lbnRzSHRtbCA9ICcnO1xyXG4gIGlmIChjb21wbGV0ZWQubGVuZ3RoID09PSAwKSB7XHJcbiAgICBhY2hpZXZlbWVudHNIdG1sID0gYDxwIGNsYXNzPVwidGV4dC1zZWNvbmRhcnkgdGV4dC1zbSBpdGFsaWNcIj7lsJrmnKrop6PplIHku7vkvZXmiJDlsLHjgII8L3A+YDtcclxuICB9IGVsc2Uge1xyXG4gICAgYWNoaWV2ZW1lbnRzSHRtbCA9ICc8dWwgY2xhc3M9XCJzcGFjZS15LTNcIj4nO1xyXG4gICAgY29tcGxldGVkLmZvckVhY2goKGFjaDogYW55KSA9PiB7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBhY2hbJ+WQjeensCddIHx8ICfmnKrnn6XmiJDlsLEnO1xyXG4gICAgICBjb25zdCBkZXNjID0gYWNoWyfmj4/ov7AnXSB8fCAn5rKh5pyJ5o+P6L+w44CCJztcclxuICAgICAgLy8g5bCG5pW05Liq5oiQ5bCx5a+56LGh5a2X56ym5Liy5YyW5Lul55So5LqOIGRhdGEtZGV0YWlsc1xyXG4gICAgICBjb25zdCBkZXRhaWxzID0gSlNPTi5zdHJpbmdpZnkoYWNoKTtcclxuXHJcbiAgICAgIGFjaGlldmVtZW50c0h0bWwgKz0gYFxyXG4gICAgICAgIDxsaSBjbGFzcz1cImNsaWNrYWJsZS1pdGVtIHJvdW5kZWQtbGcgcC0zIGhvdmVyOmJnLXNlY29uZGFyeSB0cmFuc2l0aW9uLWNvbG9yc1wiIGRhdGEtZGV0YWlscz0nJHtkZXRhaWxzfSc+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdHJvcGh5IHRleHQteWVsbG93LTQwMCBtci0zIGZhLWxnXCI+PC9pPlxyXG4gICAgICAgICAgICA8cCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5XCI+JHtuYW1lfTwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtc2Vjb25kYXJ5IHBsLTggbXQtMVwiPiR7ZGVzY308L3A+XHJcbiAgICAgICAgPC9saT5cclxuICAgICAgYDtcclxuICAgIH0pO1xyXG4gICAgYWNoaWV2ZW1lbnRzSHRtbCArPSAnPC91bD4nO1xyXG4gIH1cclxuXHJcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgIDxkaXYgY2xhc3M9XCJiZy1tYWluIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1kaW0gcC0zLjUgc2hhZG93LXNtIGNhcmQtaG92ZXIgdGhlbWUtdHJhbnNpdGlvblwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTIgcGItMSBib3JkZXItYiBib3JkZXItZGltXCI+XHJcbiAgICAgICAgPGgzIGNsYXNzPVwiZm9udC1ib2xkIHRleHQtbGcgdGhlbWUtdHJhbnNpdGlvblwiPlxyXG4gICAgICAgICAg8J+PhiAke3N5c3RlbURhdGFbJ+WQjeensCddIHx8ICfmiJDlsLHns7vnu58nfVxyXG4gICAgICAgIDwvaDM+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWFjY2VudCB0ZXh0LWxnXCIgdGl0bGU9XCLmiJDlsLHngrnmlbBcIj5cclxuICAgICAgICAgICR7cG9pbnRzfSA8aSBjbGFzcz1cImZhcyBmYS1zdGFyIHRleHQteHNcIj48L2k+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICAke2FjaGlldmVtZW50c0h0bWx9XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJtdC00IHB0LTMgYm9yZGVyLXQgYm9yZGVyLWRpbSB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgIDxidXR0b24gaWQ9XCJyZWRlZW0tcmV3YXJkcy1idG5cIiBjbGFzcz1cImJ0bi1wcmltYXJ5IHctZnVsbCBzbTp3LWF1dG9cIj5cclxuICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWdpZnQgbXItMlwiPjwvaT7lhZHmjaLlpZblirFcclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJCYXJ0ZXJTeXN0ZW0oc3lzdGVtRGF0YTogYW55LCBjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgY29uc3QgbXlJdGVtcyA9IHN5c3RlbURhdGFbJ+aIkeeahOeJqeWTgSddIHx8IFtdO1xyXG4gIGNvbnN0IGF2YWlsYWJsZUl0ZW1zID0gc3lzdGVtRGF0YVsn5Y+v5o2i5Y+W55qE54mp5ZOBJ10gfHwgW107XHJcbiAgY29uc3QgdG90YWxWYWx1ZSA9IF8uc3VtQnkobXlJdGVtcywgKGl0ZW06IGFueSkgPT4gKGl0ZW1bJ+aVsOmHjyddIHx8IDApICogKGl0ZW1bJ+S7t+WAvCddIHx8IDApKTtcclxuXHJcbiAgLy8gLS0tIE15IEl0ZW1zIFNlY3Rpb24gLS0tXHJcbiAgbGV0IG15SXRlbXNIdG1sID0gYDxkaXYgY2xhc3M9XCJiZy1zZWNvbmRhcnkvMzAgcm91bmRlZC1sZyBwLTMgc2hhZG93LWlubmVyXCI+YDtcclxuICBpZiAobXlJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICBteUl0ZW1zSHRtbCArPSBgPHVsIGNsYXNzPVwic3BhY2UteS0yIHRleHQtc21cIj5gO1xyXG4gICAgbXlJdGVtcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgbXlJdGVtc0h0bWwgKz0gYFxyXG4gICAgICAgIDxsaSBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBwLTIgcm91bmRlZC1tZCBiZy1tYWluLzMwXCI+XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5XCI+JHtpdGVtWyflkI3np7AnXX08L3NwYW4+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC14cyB0ZXh0LXNlY29uZGFyeSBtbC0yXCI+KOS7t+WAvDogJHtpdGVtWyfku7flgLwnXX0pPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtbW9ubyB0ZXh0LWFjY2VudCBmb250LXNlbWlib2xkXCI+eCAke2l0ZW1bJ+aVsOmHjyddfTwvc3Bhbj5cclxuICAgICAgICA8L2xpPlxyXG4gICAgICBgO1xyXG4gICAgfSk7XHJcbiAgICBteUl0ZW1zSHRtbCArPSBgPC91bD5gO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBteUl0ZW1zSHRtbCArPSBgPHAgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeSB0ZXh0LXNtIGl0YWxpYyB0ZXh0LWNlbnRlciBwLTRcIj7kvaDmsqHmnInlj6/nlKjkuo7kuqTmjaLnmoTnianlk4HjgII8L3A+YDtcclxuICB9XHJcbiAgbXlJdGVtc0h0bWwgKz0gJzwvZGl2Pic7XHJcblxyXG4gIC8vIC0tLSBBdmFpbGFibGUgSXRlbXMgU2VjdGlvbiAtLS1cclxuICBsZXQgYXZhaWxhYmxlSXRlbXNIdG1sID0gYFxyXG4gICAgPGRpdiBjbGFzcz1cImN1c3RvbS1zbGlkZXJcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cImN1c3RvbS1zbGlkZXItdHJhY2tcIj5cclxuICBgO1xyXG4gIGlmIChhdmFpbGFibGVJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICBhdmFpbGFibGVJdGVtcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgY29uc3QgY2FuQWZmb3JkID0gdG90YWxWYWx1ZSA+PSAoaXRlbVsn5Lu35YC8J10gfHwgMCk7XHJcbiAgICAgIGF2YWlsYWJsZUl0ZW1zSHRtbCArPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImN1c3RvbS1zbGlkZXItc2xpZGVcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJiZy1tYWluIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1kaW0gc2hhZG93LWxnIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIGgtZnVsbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicC00IGJnLXNlY29uZGFyeS8zMCBtaW4taC1bOHJlbV0gZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1zZWNvbmRhcnkgdGV4dC1zbVwiPiR7aXRlbVsn5o+P6L+wJ10gfHwgJ+aaguaXoOaPj+i/sCd9PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtNCBmbGV4IGZsZXgtY29sIGZsZXgtZ3Jvd1wiPlxyXG4gICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwiZm9udC1ib2xkIHRleHQtcHJpbWFyeSB0ZXh0LWxnIGZsZXgtZ3JvdyBtYi0yXCI+JHtpdGVtWyflkI3np7AnXX08L2g1PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1hY2NlbnRcIj4ke2l0ZW1bJ+S7t+WAvCddfSA8aSBjbGFzcz1cImZhcyBmYS1jb2lucyB0ZXh0LWxnXCI+PC9pPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJnLWFjY2VudC8yMCB0ZXh0LWFjY2VudCB0ZXh0LXhzIGZvbnQtYm9sZCBweC0yIHB5LTEgcm91bmRlZC1mdWxsXCI+5bqT5a2YOiAke2l0ZW1bJ+W6k+WtmCddfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJhcnRlci1idG4gdy1mdWxsIG10LWF1dG8gYmctYWNjZW50IGhvdmVyOmJnLWFjY2VudC1ob3ZlciB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDAgZGlzYWJsZWQ6YmctZ3JheS02MDAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yXCJcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLW5hbWU9XCIke2l0ZW1bJ+WQjeensCddfVwiIFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtY29zdD1cIiR7aXRlbVsn5Lu35YC8J119XCJcclxuICAgICAgICAgICAgICAgICAgICAkeyFjYW5BZmZvcmQgPyAnZGlzYWJsZWQnIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCIke2NhbkFmZm9yZCA/IGDlhZHmjaIgJHtpdGVtWyflkI3np7AnXX1gIDogYOS7t+WAvOS4jei2syAo6ZyA6KaBICR7aXRlbVsn5Lu35YC8J119KWB9XCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1leGNoYW5nZS1hbHRcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtjYW5BZmZvcmQgPyAn5YWR5o2iJyA6ICfku7flgLzkuI3otrMnfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGF2YWlsYWJsZUl0ZW1zSHRtbCArPSBgPGRpdiBjbGFzcz1cImN1c3RvbS1zbGlkZXItc2xpZGVcIj48cCBjbGFzcz1cInRleHQtc2Vjb25kYXJ5IHRleHQtc20gaXRhbGljIHRleHQtY2VudGVyIHAtNFwiPuW9k+WJjeayoeacieWPr+aNouWPlueahOeJqeWTgeOAgjwvcD48L2Rpdj5gO1xyXG4gIH1cclxuICBhdmFpbGFibGVJdGVtc0h0bWwgKz0gYFxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cInNsaWRlci1jb250cm9sc1wiPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJzbGlkZXItbmF2LWJ0biBwcmV2XCI+PGkgY2xhc3M9XCJmYXMgZmEtY2hldnJvbi1sZWZ0XCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzPVwic2xpZGVyLWNvdW50ZXJcIj48L3NwYW4+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInNsaWRlci1uYXYtYnRuIG5leHRcIj48aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIGA7XHJcblxyXG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiYmctbWFpbiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZGltIHAtNCBzaGFkb3ctc20gY2FyZC1ob3ZlciB0aGVtZS10cmFuc2l0aW9uXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMyBwYi0yIGJvcmRlci1iIGJvcmRlci1kaW1cIj5cclxuICAgICAgICA8aDMgY2xhc3M9XCJmb250LWJvbGQgdGV4dC1sZyB0aGVtZS10cmFuc2l0aW9uIGZsZXggaXRlbXMtY2VudGVyXCI+XHJcbiAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1zdG9yZSBtci0yIHRleHQtYWNjZW50XCI+PC9pPiAke3N5c3RlbURhdGFbJ+WQjeensCddIHx8ICfku6XnianmjaLniaknfVxyXG4gICAgICAgIDwvaDM+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWFjY2VudCB0ZXh0LWxnXCIgdGl0bGU9XCLmiJHnmoTmgLvku7flgLxcIj5cclxuICAgICAgICAgICR7dG90YWxWYWx1ZX0gPGkgY2xhc3M9XCJmYXMgZmEtY29pbnMgdGV4dC14c1wiPjwvaT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS15LTYgbXQtNFwiPlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8aDQgY2xhc3M9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0yIHRleHQtcHJpbWFyeS84MFwiPuaIkeeahOeJqeWTgTwvaDQ+XHJcbiAgICAgICAgICAke215SXRlbXNIdG1sfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTJcIj5cclxuICAgICAgICAgICAgPGg0IGNsYXNzPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWJhc2UgdGV4dC1wcmltYXJ5LzgwXCI+5Y+v5o2i5Y+W55qE54mp5ZOBPC9oND5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInJlZnJlc2gtYmFydGVyLWJ0blwiIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWFjY2VudCBob3Zlcjp0ZXh0LWFjY2VudC1ob3ZlciB0cmFuc2l0aW9uLWNvbG9ycyBwLTEgcm91bmRlZCBob3ZlcjpiZy1zZWNvbmRhcnlcIiB0aXRsZT1cIuWIt+aWsOWPr+aNouWPlueJqeWTgVwiPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXN5bmMtYWx0XCI+PC9pPiDliLfmlrBcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICR7YXZhaWxhYmxlSXRlbXNIdG1sfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm10LTQgcHQtMyBib3JkZXItdCBib3JkZXItZGltIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtc2Vjb25kYXJ5XCI+JHtzeXN0ZW1EYXRhWyfmj5DnpLonXSB8fCAn55So5L2g55qE54mp5ZOB56ev57Sv5Lu35YC877yM5o2i5Y+W5omA6ZyA5LmL54mp44CCJ308L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYDtcclxuICBzZXRUaW1lb3V0KCgpID0+IGluaXRDdXN0b21TbGlkZXIoKSwgMCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmuLLmn5Pnrb7liLDns7vnu59cclxuICogQHBhcmFtIHN5c3RlbURhdGEgLSDku47lj5jph4/kuK3ojrflj5bnmoTns7vnu5/mlbDmja5cclxuICogQHBhcmFtIGNvbnRhaW5lciAtIOeUqOS6jua4suafk+eahEhUTUzlrrnlmajlhYPntKBcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlclNpZ25JblN5c3RlbShzeXN0ZW1EYXRhOiBhbnksIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpO1xyXG4gIGNvbnN0IHNpZ25lZEluRGF5cyA9IHN5c3RlbURhdGFbJ+W3suetvuWIsCddIHx8IFtdO1xyXG4gIGNvbnN0IGNhblNpZ25JbiA9ICFzaWduZWRJbkRheXMuaW5jbHVkZXModG9kYXkpO1xyXG4gIGNvbnN0IGNvbnNlY3V0aXZlRGF5cyA9IHN5c3RlbURhdGFbJ+i/nue7reetvuWIsCddIHx8IDA7XHJcbiAgY29uc3QgbW9udGhseUNhcmQgPSBzeXN0ZW1EYXRhWyfmnIjljaEnXSB8fCAn5pyq5r+A5rS7JztcclxuICBjb25zdCBtb250aGx5Q2FyZEhUTUwgPSBtb250aGx5Q2FyZCA9PT0gJ+acqua/gOa0uydcclxuICAgID8gYCR7bW9udGhseUNhcmR9IDxidXR0b24gaWQ9XCJhY3RpdmF0ZS1tb250aGx5LWNhcmQtYnRuXCIgY2xhc3M9XCJ0ZXh0LXhzIG1sLTIgcHgtMiBweS0wLjUgcm91bmRlZCBiZy1hY2NlbnQvMjAgaG92ZXI6YmctYWNjZW50LzQwIHRleHQtYWNjZW50IHRyYW5zaXRpb24tY29sb3JzXCIgdGl0bGU9XCLlkJFBSeivoumXrua/gOa0u+aciOWNoeeahOadoeS7tlwiPua/gOa0uzwvYnV0dG9uPmBcclxuICAgIDogbW9udGhseUNhcmQ7XHJcblxyXG4gIGxldCBjYWxlbmRhckh0bWwgPSAnPGRpdiBpZD1cImNhbGVuZGFyLWdyaWRcIiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTcgZ2FwLTEgdGV4dC1jZW50ZXIgdGV4dC14c1wiPic7XHJcbiAgY29uc3QgZGF5c0luTW9udGggPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksIG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDEsIDApLmdldERhdGUoKTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZGF5c0luTW9udGg7IGkrKykge1xyXG4gICAgY29uc3QgaXNUb2RheSA9IGkgPT09IHRvZGF5O1xyXG4gICAgY29uc3QgaXNTaWduZWRJbiA9IHNpZ25lZEluRGF5cy5pbmNsdWRlcyhpKTtcclxuICAgIGxldCBkYXlDbGFzcyA9ICd3LTggaC04IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDAgJztcclxuXHJcbiAgICBpZiAoaXNUb2RheSAmJiAhaXNTaWduZWRJbikgeyAvLyBPbmx5IGFwcGx5IHNwZWNpYWwgc3R5bGUgaWYgaXQncyB0b2RheSBBTkQgbm90IHNpZ25lZCBpbiB5ZXRcclxuICAgICAgZGF5Q2xhc3MgKz0gJ2JnLWFjY2VudC8zMCB0ZXh0LWFjY2VudCBmb250LWJvbGQgcmluZy0yIHJpbmctYWNjZW50ICc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkYXlDbGFzcyArPSAnYmctc2Vjb25kYXJ5LzUwICc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzU2lnbmVkSW4pIHtcclxuICAgICAgZGF5Q2xhc3MgKz0gJ2JnLWdyZWVuLTUwMC81MCB0ZXh0LXdoaXRlJztcclxuICAgICAgY2FsZW5kYXJIdG1sICs9IGA8ZGl2IGNsYXNzPVwiJHtkYXlDbGFzc31cIiB0aXRsZT1cIuesrCR7aX3lpKnvvJrlt7Lnrb7liLBcIiBkYXRhLWRheT1cIiR7aX1cIj48aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT48L2Rpdj5gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FsZW5kYXJIdG1sICs9IGA8ZGl2IGNsYXNzPVwiJHtkYXlDbGFzc31cIiB0aXRsZT1cIuesrCR7aX3lpKnvvJrmnKrnrb7liLBcIiBkYXRhLWRheT1cIiR7aX1cIj4ke2l9PC9kaXY+YDtcclxuICAgIH1cclxuICB9XHJcbiAgY2FsZW5kYXJIdG1sICs9ICc8L2Rpdj4nO1xyXG5cclxuICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgPGRpdiBjbGFzcz1cImJnLW1haW4gcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWRpbSBwLTMuNSBzaGFkb3ctc20gY2FyZC1ob3ZlciB0aGVtZS10cmFuc2l0aW9uXCI+XHJcbiAgICAgIDxoMyBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWxnIG1iLTMgcGItMiBib3JkZXItYiBib3JkZXItZGltIHRoZW1lLXRyYW5zaXRpb25cIj5cclxuICAgICAgICDwn5eT77iPICR7c3lzdGVtRGF0YVsn5ZCN56ewJ10gfHwgJ+etvuWIsOezu+e7nyd9XHJcbiAgICAgIDwvaDM+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS15LTRcIj5cclxuICAgICAgICAke2NhbGVuZGFySHRtbH1cclxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1zbSB0ZXh0LXNlY29uZGFyeSBzcGFjZS15LTEgcHQtMlwiPlxyXG4gICAgICAgICAgICA8cD7ov57nu63nrb7liLA6IDxzcGFuIGNsYXNzPVwiZm9udC1ib2xkIHRleHQtYWNjZW50XCI+JHtjb25zZWN1dGl2ZURheXN9PC9zcGFuPiDlpKk8L3A+XHJcbiAgICAgICAgICAgIDxwPuaciOWNoeeKtuaAgTogPHNwYW4gY2xhc3M9XCJmb250LWJvbGQgdGV4dC1hY2NlbnRcIj4ke21vbnRobHlDYXJkSFRNTH08L3NwYW4+PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxidXR0b24gaWQ9XCJzaWduLWluLWJ0blwiIGNsYXNzPVwiYnRuLXByaW1hcnkgdy1mdWxsXCIgJHshY2FuU2lnbkluID8gJ2Rpc2FibGVkJyA6ICcnfT5cclxuICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWNhbGVuZGFyLWNoZWNrIG1yLTJcIj48L2k+JHtjYW5TaWduSW4gPyAn5LuK5pel562+5YiwJyA6ICfku4rml6Xlt7Lnrb7liLAnfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIGA7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog57O757uf5riy5p+T55qE5Li75Ye95pWwXHJcbiAqIEBwYXJhbSBzeXN0ZW1EYXRhIC0g5LuO5Y+Y6YeP5Lit6I635Y+W55qE57O757uf5pWw5o2uXHJcbiAqIEBwYXJhbSBjb250YWluZXIgLSDnlKjkuo7muLLmn5PnmoRIVE1M5a655Zmo5YWD57SgXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3lzdGVtKHN5c3RlbURhdGE6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gIGlmICghc3lzdGVtRGF0YSB8fCBfLmlzRW1wdHkoc3lzdGVtRGF0YSkpIHtcclxuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS00IHRleHQtc2Vjb25kYXJ5IHRoZW1lLXRyYW5zaXRpb24gaXRhbGljXCI+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtaW5mby1jaXJjbGUgbXItMVwiPjwvaT7mnKrnu5Hlrprns7vnu59cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc3lzdGVtTmFtZSA9IHN5c3RlbURhdGFbJ+WQjeensCddO1xyXG4gIHN3aXRjaCAoc3lzdGVtTmFtZSkge1xyXG4gICAgY2FzZSAn5oqA6IO96Z2i5p2/JzpcclxuICAgICAgcmVuZGVyU2tpbGxQYW5lbChzeXN0ZW1EYXRhLCBjb250YWluZXIpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ+aIkOWwseezu+e7nyc6XHJcbiAgICAgIHJlbmRlckFjaGlldmVtZW50U3lzdGVtKHN5c3RlbURhdGEsIGNvbnRhaW5lcik7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAn5Lul54mp5o2i54mp57O757ufJzpcclxuICAgICAgcmVuZGVyQmFydGVyU3lzdGVtKHN5c3RlbURhdGEsIGNvbnRhaW5lcik7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAn562+5Yiw57O757ufJzpcclxuICAgICAgcmVuZGVyU2lnbkluU3lzdGVtKHN5c3RlbURhdGEsIGNvbnRhaW5lcik7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgLy8g5Zyo6L+Z6YeM5Y+v5Lul5Li65YW25LuW57O757uf5re75YqgIGNhc2VcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHB5LTQgdGV4dC1zZWNvbmRhcnkgdGhlbWUtdHJhbnNpdGlvbiBpdGFsaWNcIj5cclxuICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXF1ZXN0aW9uLWNpcmNsZSBtci0xXCI+PC9pPuacquefpeeahOezu+e7n+exu+WeizogJHtzeXN0ZW1OYW1lfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/systems.ts\n\n}');
  },
  "./src/什么我要在玄幻修仙世界种田/version.ts": 
  /*!**************************************!*\
  !*** ./src/什么我要在玄幻修仙世界种田/version.ts ***!
  \**************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkForUpdates: () => (/* binding */ checkForUpdates),\n/* harmony export */   showChangelogModal: () => (/* binding */ showChangelogModal),\n/* harmony export */   updateCardFiles: () => (/* binding */ updateCardFiles)\n/* harmony export */ });\n/* harmony import */ var _update_script__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../update-script */ \"./src/update-script.ts\");\n\n// 请将这里的 URL 替换为你的 GitHub 仓库的 Raw 地址\nconst GITHUB_REPO_RAW_URL = 'https://github.com/HerSophia/Verdant-Spirit-Dao/main/';\n// 当前版本号，需要与 version.json 保持一致\nconst LOCAL_VERSION = 'v0.3.1';\n/**\n * 检查是否有新版本并获取更新日志\n * @returns {Promise<UpdateInfo | null>}\n */\nasync function checkForUpdates() {\n    try {\n        // 从 GitHub 获取最新的 version.json\n        const versionResponse = await fetch(`${GITHUB_REPO_RAW_URL}version.json`);\n        if (!versionResponse.ok) {\n            throw new Error(`无法获取 version.json: ${versionResponse.statusText}`);\n        }\n        const versionData = await versionResponse.json();\n        const remoteVersion = `v${versionData.version}`;\n        const hasUpdate = remoteVersion.localeCompare(LOCAL_VERSION, undefined, { numeric: true, sensitivity: 'base' }) > 0;\n        let changelogHtml = null;\n        let filesToUpdate = undefined;\n        if (hasUpdate) {\n            // 如果有更新，则获取 changelog.md\n            const changelogResponse = await fetch(`${GITHUB_REPO_RAW_URL}changlog.md`);\n            if (changelogResponse.ok) {\n                const changelogMd = await changelogResponse.text();\n                changelogHtml = marked.parse(changelogMd);\n            }\n            else {\n                changelogHtml = '<p>无法加载更新日志。</p>';\n            }\n            filesToUpdate = versionData.files_to_update || [];\n        }\n        return {\n            hasUpdate,\n            remoteVersion,\n            changelogHtml,\n            filesToUpdate,\n        };\n    }\n    catch (error) {\n        console.error('检查更新失败:', error);\n        toastr.error('检查更新失败，请查看控制台获取更多信息。');\n        return null;\n    }\n}\n/**\n * 创建并显示更新日志模态框\n * @param {string} contentHtml - 要显示的 HTML 内容\n */\nfunction showChangelogModal(contentHtml) {\n    // 移除已存在的模态框，防止重复\n    $('#changelog-modal-overlay').remove();\n    const modalHtml = `\n    <div id=\"changelog-modal-overlay\" class=\"modal-overlay\">\n      <div class=\"modal-content\">\n        <button id=\"changelog-modal-close-btn\" class=\"modal-close-btn\">&times;</button>\n        <h3 class=\"modal-title\"><i class=\"fas fa-info-circle mr-2\"></i>更新日志</h3>\n        <div class=\"modal-body prose prose-invert max-w-none\">\n          ${contentHtml}\n        </div>\n        <div class=\"modal-footer\" style=\"text-align: right; margin-top: 1rem;\">\n          <button id=\"update-now-btn\" class=\"btn-primary\">立即更新</button>\n        </div>\n      </div>\n    </div>\n  `;\n    $('body').append(modalHtml);\n    const $modalOverlay = $('#changelog-modal-overlay');\n    $modalOverlay.removeClass('hidden');\n    $('#changelog-modal-close-btn, #changelog-modal-overlay').on('click', function (e) {\n        if (e.target === this) {\n            $modalOverlay.addClass('hidden').remove();\n        }\n    });\n    $('#update-now-btn').on('click', async function () {\n        const btn = $(this);\n        btn.prop('disabled', true).text('更新中...');\n        try {\n            const updateInfo = await checkForUpdates();\n            if (updateInfo?.hasUpdate && updateInfo.filesToUpdate) {\n                await updateCardFiles(updateInfo.filesToUpdate);\n                toastr.success('所有文件更新完成！');\n                $modalOverlay.addClass('hidden').remove();\n            }\n            else {\n                toastr.warning('未找到需要更新的文件或版本已是最新。');\n            }\n        }\n        catch (error) {\n            toastr.error(`更新过程中发生错误: ${error.message}`);\n            btn.prop('disabled', false).text('立即更新');\n        }\n    });\n}\n/**\n * 从远程仓库获取并更新角色卡相关文件。\n * @param {string[]} filesToUpdate - 需要更新的文件路径列表。\n */\nasync function updateCardFiles(filesToUpdate) {\n    toastr.info(`开始更新 ${filesToUpdate.length} 个文件...`);\n    for (const filePath of filesToUpdate) {\n        try {\n            const response = await fetch(`${GITHUB_REPO_RAW_URL}${filePath}`);\n            if (!response.ok) {\n                throw new Error(`下载文件失败 ${filePath}: ${response.statusText}`);\n            }\n            const fileContent = await response.text();\n            await (0,_update_script__WEBPACK_IMPORTED_MODULE_0__.processFileUpdate)(filePath, fileContent);\n        }\n        catch (error) {\n            console.error(`更新文件 ${filePath} 失败:`, error);\n            toastr.error(`更新文件 ${filePath} 失败: ${error.message}`);\n            // 选择继续更新其他文件，而不是中断整个过程\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3ZlcnNpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxRDtBQUdyRCxvQ0FBb0M7QUFDcEMsTUFBTSxtQkFBbUIsR0FBRyx1REFBdUQsQ0FBQztBQUVwRiw4QkFBOEI7QUFDOUIsTUFBTSxhQUFhLEdBQUcsUUFBUSxDQUFDO0FBUy9COzs7R0FHRztBQUNJLEtBQUssVUFBVSxlQUFlO0lBQ25DLElBQUksQ0FBQztRQUNILDhCQUE4QjtRQUM5QixNQUFNLGVBQWUsR0FBRyxNQUFNLEtBQUssQ0FBQyxHQUFHLG1CQUFtQixjQUFjLENBQUMsQ0FBQztRQUMxRSxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3hCLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLGVBQWUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO1FBQ3RFLENBQUM7UUFDRCxNQUFNLFdBQVcsR0FBRyxNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNqRCxNQUFNLGFBQWEsR0FBRyxJQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUVoRCxNQUFNLFNBQVMsR0FBRyxhQUFhLENBQUMsYUFBYSxDQUFDLGFBQWEsRUFBRSxTQUFTLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVwSCxJQUFJLGFBQWEsR0FBa0IsSUFBSSxDQUFDO1FBQ3hDLElBQUksYUFBYSxHQUF5QixTQUFTLENBQUM7UUFDcEQsSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUNkLHlCQUF5QjtZQUN6QixNQUFNLGlCQUFpQixHQUFHLE1BQU0sS0FBSyxDQUFDLEdBQUcsbUJBQW1CLGFBQWEsQ0FBQyxDQUFDO1lBQzNFLElBQUksaUJBQWlCLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ3pCLE1BQU0sV0FBVyxHQUFHLE1BQU0saUJBQWlC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WUFDRCxNQUFNLFFBQVEsR0FBRyxNQUFNLEtBQUssQ0FBQyxHQUFHLG1CQUFtQixHQUFHLFFBQVEsRUFBRSxDQUFDLENBQUM7WUFDbEUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDZixNQUFNLElBQUksS0FBSyxDQUFDLFVBQVUsUUFBUSxLQUFLLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO1lBQ2xFLENBQUM7WUFDRCxNQUFNLFdBQVcsR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUMxQyxNQUFNLGlFQUFpQixDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNuRCxDQUFDO1FBQUMsT0FBTyxLQUFVLEVBQUUsQ0FBQztZQUNsQixPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsUUFBUSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLFFBQVEsUUFBUSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztZQUN0RCx1QkFBdUI7UUFDM0IsQ0FBQztJQUNMLENBQUM7QUFDTCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/ku4DkuYjmiJHopoHlnKjnjoTlubvkv67ku5nkuJbnlYznp43nlLAvdmVyc2lvbi50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJvY2Vzc0ZpbGVVcGRhdGUgfSBmcm9tICcuLi91cGRhdGUtc2NyaXB0JztcbmRlY2xhcmUgY29uc3QgbWFya2VkOiBhbnk7XG5cbi8vIOivt+Wwhui/memHjOeahCBVUkwg5pu/5o2i5Li65L2g55qEIEdpdEh1YiDku5PlupPnmoQgUmF3IOWcsOWdgFxuY29uc3QgR0lUSFVCX1JFUE9fUkFXX1VSTCA9ICdodHRwczovL2dpdGh1Yi5jb20vSGVyU29waGlhL1ZlcmRhbnQtU3Bpcml0LURhby9tYWluLyc7XG5cbi8vIOW9k+WJjeeJiOacrOWPt++8jOmcgOimgeS4jiB2ZXJzaW9uLmpzb24g5L+d5oyB5LiA6Ie0XG5jb25zdCBMT0NBTF9WRVJTSU9OID0gJ3YwLjMuMSc7XG5cbmludGVyZmFjZSBVcGRhdGVJbmZvIHtcbiAgaGFzVXBkYXRlOiBib29sZWFuO1xuICByZW1vdGVWZXJzaW9uOiBzdHJpbmc7XG4gIGNoYW5nZWxvZ0h0bWw6IHN0cmluZyB8IG51bGw7XG4gIGZpbGVzVG9VcGRhdGU/OiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiDmo4Dmn6XmmK/lkKbmnInmlrDniYjmnKzlubbojrflj5bmm7TmlrDml6Xlv5dcbiAqIEByZXR1cm5zIHtQcm9taXNlPFVwZGF0ZUluZm8gfCBudWxsPn1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yVXBkYXRlcygpOiBQcm9taXNlPFVwZGF0ZUluZm8gfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8g5LuOIEdpdEh1YiDojrflj5bmnIDmlrDnmoQgdmVyc2lvbi5qc29uXG4gICAgY29uc3QgdmVyc2lvblJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7R0lUSFVCX1JFUE9fUkFXX1VSTH12ZXJzaW9uLmpzb25gKTtcbiAgICBpZiAoIXZlcnNpb25SZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDml6Dms5Xojrflj5YgdmVyc2lvbi5qc29uOiAke3ZlcnNpb25SZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICBjb25zdCB2ZXJzaW9uRGF0YSA9IGF3YWl0IHZlcnNpb25SZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgcmVtb3RlVmVyc2lvbiA9IGB2JHt2ZXJzaW9uRGF0YS52ZXJzaW9ufWA7XG5cbiAgICBjb25zdCBoYXNVcGRhdGUgPSByZW1vdGVWZXJzaW9uLmxvY2FsZUNvbXBhcmUoTE9DQUxfVkVSU0lPTiwgdW5kZWZpbmVkLCB7IG51bWVyaWM6IHRydWUsIHNlbnNpdGl2aXR5OiAnYmFzZScgfSkgPiAwO1xuXG4gICAgbGV0IGNoYW5nZWxvZ0h0bWw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIGxldCBmaWxlc1RvVXBkYXRlOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoaGFzVXBkYXRlKSB7XG4gICAgICAvLyDlpoLmnpzmnInmm7TmlrDvvIzliJnojrflj5YgY2hhbmdlbG9nLm1kXG4gICAgICBjb25zdCBjaGFuZ2Vsb2dSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0dJVEhVQl9SRVBPX1JBV19VUkx9Y2hhbmdsb2cubWRgKTtcbiAgICAgIGlmIChjaGFuZ2Vsb2dSZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBjaGFuZ2Vsb2dNZCA9IGF3YWl0IGNoYW5nZWxvZ1Jlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgY2hhbmdlbG9nSHRtbCA9IG1hcmtlZC5wYXJzZShjaGFuZ2Vsb2dNZCkgYXMgc3RyaW5nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhbmdlbG9nSHRtbCA9ICc8cD7ml6Dms5XliqDovb3mm7TmlrDml6Xlv5fjgII8L3A+JztcbiAgICAgIH1cbiAgICAgIGZpbGVzVG9VcGRhdGUgPSB2ZXJzaW9uRGF0YS5maWxlc190b191cGRhdGUgfHwgW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc1VwZGF0ZSxcbiAgICAgIHJlbW90ZVZlcnNpb24sXG4gICAgICBjaGFuZ2Vsb2dIdG1sLFxuICAgICAgZmlsZXNUb1VwZGF0ZSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+ajgOafpeabtOaWsOWksei0pTonLCBlcnJvcik7XG4gICAgdG9hc3RyLmVycm9yKCfmo4Dmn6Xmm7TmlrDlpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7Dojrflj5bmm7TlpJrkv6Hmga/jgIInKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIOWIm+W7uuW5tuaYvuekuuabtOaWsOaXpeW/l+aooeaAgeahhlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRIdG1sIC0g6KaB5pi+56S655qEIEhUTUwg5YaF5a65XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93Q2hhbmdlbG9nTW9kYWwoY29udGVudEh0bWw6IHN0cmluZykge1xuICAvLyDnp7vpmaTlt7LlrZjlnKjnmoTmqKHmgIHmoYbvvIzpmLLmraLph43lpI1cbiAgJCgnI2NoYW5nZWxvZy1tb2RhbC1vdmVybGF5JykucmVtb3ZlKCk7XG5cbiAgY29uc3QgbW9kYWxIdG1sID0gYFxuICAgIDxkaXYgaWQ9XCJjaGFuZ2Vsb2ctbW9kYWwtb3ZlcmxheVwiIGNsYXNzPVwibW9kYWwtb3ZlcmxheVwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cImNoYW5nZWxvZy1tb2RhbC1jbG9zZS1idG5cIiBjbGFzcz1cIm1vZGFsLWNsb3NlLWJ0blwiPiZ0aW1lczs8L2J1dHRvbj5cbiAgICAgICAgPGgzIGNsYXNzPVwibW9kYWwtdGl0bGVcIj48aSBjbGFzcz1cImZhcyBmYS1pbmZvLWNpcmNsZSBtci0yXCI+PC9pPuabtOaWsOaXpeW/lzwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5IHByb3NlIHByb3NlLWludmVydCBtYXgtdy1ub25lXCI+XG4gICAgICAgICAgJHtjb250ZW50SHRtbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0OyBtYXJnaW4tdG9wOiAxcmVtO1wiPlxuICAgICAgICAgIDxidXR0b24gaWQ9XCJ1cGRhdGUtbm93LWJ0blwiIGNsYXNzPVwiYnRuLXByaW1hcnlcIj7nq4vljbPmm7TmlrA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcblxuICAkKCdib2R5JykuYXBwZW5kKG1vZGFsSHRtbCk7XG5cbiAgY29uc3QgJG1vZGFsT3ZlcmxheSA9ICQoJyNjaGFuZ2Vsb2ctbW9kYWwtb3ZlcmxheScpO1xuICAkbW9kYWxPdmVybGF5LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblxuICAkKCcjY2hhbmdlbG9nLW1vZGFsLWNsb3NlLWJ0biwgI2NoYW5nZWxvZy1tb2RhbC1vdmVybGF5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcykge1xuICAgICAgJG1vZGFsT3ZlcmxheS5hZGRDbGFzcygnaGlkZGVuJykucmVtb3ZlKCk7XG4gICAgfVxuICB9KTtcblxuICAkKCcjdXBkYXRlLW5vdy1idG4nKS5vbignY2xpY2snLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBidG4gPSAkKHRoaXMpO1xuICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLnRleHQoJ+abtOaWsOS4rS4uLicpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZUluZm8gPSBhd2FpdCBjaGVja0ZvclVwZGF0ZXMoKTtcbiAgICAgICAgaWYgKHVwZGF0ZUluZm8/Lmhhc1VwZGF0ZSAmJiB1cGRhdGVJbmZvLmZpbGVzVG9VcGRhdGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUNhcmRGaWxlcyh1cGRhdGVJbmZvLmZpbGVzVG9VcGRhdGUpO1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ+aJgOacieaWh+S7tuabtOaWsOWujOaIkO+8gScpO1xuICAgICAgICAgICAgJG1vZGFsT3ZlcmxheS5hZGRDbGFzcygnaGlkZGVuJykucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b2FzdHIud2FybmluZygn5pyq5om+5Yiw6ZyA6KaB5pu05paw55qE5paH5Lu25oiW54mI5pys5bey5piv5pyA5paw44CCJyk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIHRvYXN0ci5lcnJvcihg5pu05paw6L+H56iL5Lit5Y+R55Sf6ZSZ6K+vOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS50ZXh0KCfnq4vljbPmm7TmlrAnKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIOS7jui/nOeoi+S7k+W6k+iOt+WPluW5tuabtOaWsOinkuiJsuWNoeebuOWFs+aWh+S7tuOAglxuICogQHBhcmFtIHtzdHJpbmdbXX0gZmlsZXNUb1VwZGF0ZSAtIOmcgOimgeabtOaWsOeahOaWh+S7tui3r+W+hOWIl+ihqOOAglxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ2FyZEZpbGVzKGZpbGVzVG9VcGRhdGU6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdG9hc3RyLmluZm8oYOW8gOWni+abtOaWsCAke2ZpbGVzVG9VcGRhdGUubGVuZ3RofSDkuKrmlofku7YuLi5gKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGZpbGVzVG9VcGRhdGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7R0lUSFVCX1JFUE9fUkFXX1VSTH0ke2ZpbGVQYXRofWApO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg5LiL6L295paH5Lu25aSx6LSlICR7ZmlsZVBhdGh9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NGaWxlVXBkYXRlKGZpbGVQYXRoLCBmaWxlQ29udGVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOabtOaWsOaWh+S7tiAke2ZpbGVQYXRofSDlpLHotKU6YCwgZXJyb3IpO1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKGDmm7TmlrDmlofku7YgJHtmaWxlUGF0aH0g5aSx6LSlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAvLyDpgInmi6nnu6fnu63mm7TmlrDlhbbku5bmlofku7bvvIzogIzkuI3mmK/kuK3mlq3mlbTkuKrov4fnqItcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/version.ts\n\n}");
  },
  lodash: 
  /*!********************!*\
  !*** external "_" ***!
  \********************/ module => {
    module.exports = _;
  },
  toastr: 
  /*!*************************!*\
  !*** external "toastr" ***!
  \*************************/ module => {
    module.exports = toastr;
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.n = module => {
    var getter = module && module.__esModule ? () => module["default"] : () => module;
    __webpack_require__.d(getter, {
      a: getter
    });
    return getter;
  };
})();

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./src/什么我要在玄幻修仙世界种田/index.ts");</script></body>
