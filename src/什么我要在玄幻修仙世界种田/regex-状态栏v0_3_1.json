{
    "id": "e434b266-69bb-46aa-a648-0117642d8a9a",
    "scriptName": "状态栏v0.3.1",
    "findRegex": "<statusbar>([\\s\\S]*?)</statusbar>",
    "replaceString": "```\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>《什么？我要在玄幻修仙世界种田》 - 状态栏</title>\n  <!-- 引入Font Awesome图标库 -->\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n  <script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script>\n  <script src=\"https://cdn.tailwindcss.com\"></script>\n<style>/*!*******************************************************************************************************************************************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/什么我要在玄幻修仙世界种田/index.scss ***!\n  \\*******************************************************************************************************************************************************************************************************************************************/\n@import url(https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap);\n/*!***********************************************************************************************************************************************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/sass-loader/dist/cjs.js!./src/什么我要在玄幻修仙世界种田/index.scss (1) ***!\n  \\***********************************************************************************************************************************************************************************************************************************************/\n/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */\n@charset \"UTF-8\";\n@layer properties;\n.collapse {\n  visibility: collapse;\n}\n.visible {\n  visibility: visible;\n}\n.absolute {\n  position: absolute;\n}\n.fixed {\n  position: fixed;\n}\n.relative {\n  position: relative;\n}\n.static {\n  position: static;\n}\n.sticky {\n  position: sticky;\n}\n.z-10 {\n  z-index: 10;\n}\n.container {\n  width: 100%;\n}\n.mx-auto {\n  margin-inline: auto;\n}\n.mt-auto {\n  margin-top: auto;\n}\n.mr-auto {\n  margin-right: auto;\n}\n.block {\n  display: block;\n}\n.contents {\n  display: contents;\n}\n.flex {\n  display: flex;\n}\n.grid {\n  display: grid;\n}\n.hidden {\n  display: none;\n}\n.h-full {\n  height: 100%;\n}\n.min-h-\\[8rem\\] {\n  min-height: 8rem;\n}\n.w-full {\n  width: 100%;\n}\n.max-w-none {\n  max-width: none;\n}\n.flex-1 {\n  flex: 1;\n}\n.flex-shrink {\n  flex-shrink: 1;\n}\n.flex-shrink-0 {\n  flex-shrink: 0;\n}\n.flex-grow {\n  flex-grow: 1;\n}\n.transform {\n  transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.resize {\n  resize: both;\n}\n.list-inside {\n  list-style-position: inside;\n}\n.list-disc {\n  list-style-type: disc;\n}\n.appearance-none {\n  -webkit-appearance: none;\n          appearance: none;\n}\n.grid-cols-1 {\n  grid-template-columns: repeat(1, minmax(0, 1fr));\n}\n.grid-cols-7 {\n  grid-template-columns: repeat(7, minmax(0, 1fr));\n}\n.flex-col {\n  flex-direction: column;\n}\n.flex-wrap {\n  flex-wrap: wrap;\n}\n.items-center {\n  align-items: center;\n}\n.items-start {\n  align-items: flex-start;\n}\n.justify-between {\n  justify-content: space-between;\n}\n.justify-center {\n  justify-content: center;\n}\n.justify-end {\n  justify-content: flex-end;\n}\n.truncate {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.overflow-hidden {\n  overflow: hidden;\n}\n.overflow-y-auto {\n  overflow-y: auto;\n}\n.rounded-full {\n  border-radius: calc(infinity * 1px);\n}\n.border {\n  border-style: var(--tw-border-style);\n  border-width: 1px;\n}\n.border-2 {\n  border-style: var(--tw-border-style);\n  border-width: 2px;\n}\n.border-t {\n  border-top-style: var(--tw-border-style);\n  border-top-width: 1px;\n}\n.border-t-2 {\n  border-top-style: var(--tw-border-style);\n  border-top-width: 2px;\n}\n.border-b {\n  border-bottom-style: var(--tw-border-style);\n  border-bottom-width: 1px;\n}\n.border-b-2 {\n  border-bottom-style: var(--tw-border-style);\n  border-bottom-width: 2px;\n}\n.border-l-2 {\n  border-left-style: var(--tw-border-style);\n  border-left-width: 2px;\n}\n.border-transparent {\n  border-color: transparent;\n}\n.bg-\\[\\#fdf6e3\\] {\n  background-color: #fdf6e3;\n}\n.text-center {\n  text-align: center;\n}\n.text-right {\n  text-align: right;\n}\n.whitespace-nowrap {\n  white-space: nowrap;\n}\n.whitespace-pre-wrap {\n  white-space: pre-wrap;\n}\n.text-\\[\\#583e26\\] {\n  color: #583e26;\n}\n.italic {\n  font-style: italic;\n}\n.antialiased {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.ring-2 {\n  --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n  box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n}\n.ring-offset-2 {\n  --tw-ring-offset-width: 2px;\n  --tw-ring-offset-shadow: var(--tw-ring-inset,) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n}\n.outline {\n  outline-style: var(--tw-outline-style);\n  outline-width: 1px;\n}\n.filter {\n  filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n}\n.backdrop-filter {\n  backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n}\n.transition {\n  transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, backdrop-filter, display, visibility, content-visibility, overlay, pointer-events;\n  transition-timing-function: var(--tw-ease, ease);\n  transition-duration: var(--tw-duration, 0s);\n}\n.transition-all {\n  transition-property: all;\n  transition-timing-function: var(--tw-ease, ease);\n  transition-duration: var(--tw-duration, 0s);\n}\n.transition-colors {\n  transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;\n  transition-timing-function: var(--tw-ease, ease);\n  transition-duration: var(--tw-duration, 0s);\n}\n.transition-transform {\n  transition-property: transform, translate, scale, rotate;\n  transition-timing-function: var(--tw-ease, ease);\n  transition-duration: var(--tw-duration, 0s);\n}\n.duration-300 {\n  --tw-duration: 300ms;\n  transition-duration: 300ms;\n}\n.duration-500 {\n  --tw-duration: 500ms;\n  transition-duration: 500ms;\n}\n.group-open\\:rotate-180:is(:where(.group):is([open], :popover-open, :open) *) {\n  rotate: 180deg;\n}\n@media (hover: hover) {\n  .hover\\:scale-105:hover {\n    --tw-scale-x: 105%;\n    --tw-scale-y: 105%;\n    --tw-scale-z: 105%;\n    scale: var(--tw-scale-x) var(--tw-scale-y);\n  }\n}\n@media (hover: hover) {\n  .hover\\:underline:hover {\n    text-decoration-line: underline;\n  }\n}\n.focus\\:ring-2:focus {\n  --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n  box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n}\n.focus\\:outline-none:focus {\n  --tw-outline-style: none;\n  outline-style: none;\n}\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\nbody {\n  font-family: \"Noto Serif SC\", serif;\n  background-color: var(--bg-primary);\n  color: var(--text-primary);\n}\n:root {\n  --bg-primary: #1a1a1a;\n  --bg-secondary: #2a2a2a;\n  --bg-card: #222222;\n  --text-primary: #e5e7eb;\n  --text-secondary: #9ca3af;\n  --border-color: #4b5563;\n  --accent-color: #818cf8;\n  --accent-color-hover: #6366f1;\n}\nbody.day-mode {\n  --bg-primary: #f3f4f6;\n  --bg-secondary: #e5e7eb;\n  --bg-card: #ffffff;\n  --text-primary: #1f2937;\n  --text-secondary: #4b5563;\n  --border-color: #d1d5db;\n}\nbody.jade-mode {\n  --bg-primary: #f0fdf4;\n  --bg-secondary: #dcfce7;\n  --bg-card: #ffffff;\n  --text-primary: #14532d;\n  --text-secondary: #166534;\n  --border-color: #86efac;\n  --accent-color: #22c55e;\n  --accent-color-hover: #16a34a;\n}\nbody.classic-mode {\n  background-image: url(\"https://www.transparenttextures.com/patterns/old-paper.png\");\n  --bg-primary: #fdf6e3;\n  --bg-secondary: #f5eeda;\n  --bg-card: rgba(245, 238, 218, 0.8);\n  --text-primary: #583e26;\n  --text-secondary: #6e553c;\n  --border-color: #c9bda4;\n  --accent-color: #b58900;\n  --accent-color-hover: #856703;\n}\n.theme-transition {\n  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;\n}\n.card-hover {\n  transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;\n}\n.card-hover:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);\n}\n.bg-main {\n  background-color: var(--bg-card);\n}\n.text-accent {\n  color: var(--accent-color);\n}\n.border-dim {\n  border-color: var(--border-color);\n}\n@supports (color: color-mix(in lab, red, red)) {\n  .border-dim {\n    border-color: color-mix(in srgb, var(--border-color) 30%, transparent);\n  }\n}\n.text-secondary {\n  color: var(--text-secondary);\n}\ndetails[open] > summary .group-open\\:rotate-180 {\n  transform: rotate(180deg);\n}\n#action-owner {\n  color: var(--accent-color);\n}\n.theme-btn {\n  width: 3rem;\n  height: 3rem;\n  margin: 0 0.5rem;\n  transition: all 0.3s ease;\n}\n.theme-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n.inner-box {\n  padding: 1rem;\n}\n.flex.flex-col.sm\\:flex-row.justify-between.items-start.sm\\:items-center {\n  margin-bottom: 1.5rem;\n}\ndetails.group {\n  margin-bottom: 1.5rem;\n}\n#options-list li {\n  background-color: var(--bg-secondary);\n}\n@supports (color: color-mix(in lab, red, red)) {\n  #options-list li {\n    background-color: color-mix(in srgb, var(--bg-secondary) 50%, transparent);\n  }\n}\n#options-list li {\n  padding: 0.75rem 1rem;\n  border-radius: 0.5rem;\n  transition: all 0.2s ease-in-out;\n}\n#options-list li:hover {\n  background-color: var(--accent-color);\n  color: var(--bg-card);\n  transform: translateX(4px);\n}\n.progress-bar-bg {\n  background-color: var(--bg-secondary);\n}\n@supports (color: color-mix(in lab, red, red)) {\n  .progress-bar-bg {\n    background-color: color-mix(in srgb, var(--bg-secondary) 70%, transparent);\n  }\n}\n.progress-bar-bg {\n  border: 1px solid var(--border-color);\n}\n.progress-bar-fg {\n  transition: width 0.5s ease-in-out;\n}\n#custom-action-modal {\n  margin-top: 0.75rem;\n  transition: all 0.5s ease-in-out;\n  max-height: 0;\n  opacity: 0;\n  transform: translateY(-10px);\n  overflow: hidden;\n}\n#custom-action-modal.is-open {\n  max-height: 500px;\n  opacity: 1;\n  transform: translateY(0);\n}\n.bg-secondary {\n  background-color: var(--bg-secondary);\n}\n.bg-accent {\n  background-color: var(--accent-color);\n}\n.hover\\:bg-accent-hover:hover {\n  background-color: var(--accent-color-hover);\n}\n#custom-action-input {\n  color: var(--text-primary);\n}\n#custom-action-input::placeholder {\n  color: var(--text-secondary);\n}\n#details-modal {\n  z-index: 1050;\n}\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.3s ease;\n  backdrop-filter: blur(5px);\n}\n.modal-overlay:not(.hidden) {\n  opacity: 1;\n  pointer-events: auto;\n}\n.modal-content {\n  background-color: var(--bg-card);\n  color: var(--text-primary);\n  padding: 1.5rem 2rem;\n  border-radius: 1rem;\n  border: 1px solid var(--border-color);\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow-y: auto;\n  position: relative;\n  transform: scale(0.95);\n  transition: transform 0.3s ease;\n}\n.modal-overlay:not(.hidden) .modal-content {\n  transform: scale(1);\n}\n.modal-close-btn {\n  position: absolute;\n  top: 0.5rem;\n  right: 0.75rem;\n  background: none;\n  border: none;\n  font-size: 2rem;\n  line-height: 1;\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: color 0.2s ease;\n}\n.modal-close-btn:hover {\n  color: var(--text-primary);\n}\n.modal-title {\n  display: flex;\n  align-items: center;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--accent-color);\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid var(--border-color);\n}\n.modal-title .help-btn {\n  width: 1.25rem;\n  height: 1.25rem;\n  font-size: 0.7rem;\n  margin-left: 0.5rem;\n  border-radius: 50%;\n  background-color: var(--bg-secondary);\n  color: var(--text-secondary);\n  border: 1px solid var(--border-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n.modal-title .help-btn:hover {\n  background-color: var(--accent-color);\n  color: var(--bg-card);\n  border-color: var(--accent-color);\n}\n.modal-title .help-btn.active {\n  background-color: var(--accent-color-hover);\n  color: var(--bg-card);\n  border-color: var(--accent-color-hover);\n}\n.modal-body {\n  font-size: 0.95rem;\n  line-height: 1.6;\n}\n.modal-body ul {\n  list-style-type: none;\n  padding-left: 0;\n}\n.modal-body li {\n  padding: 0.5rem 0;\n  border-bottom: 1px solid var(--border-color);\n}\n@supports (color: color-mix(in lab, red, red)) {\n  .modal-body li {\n    border-bottom: 1px solid color-mix(in srgb, var(--border-color) 20%, transparent);\n  }\n}\n.modal-body li:last-child {\n  border-bottom: none;\n}\n.modal-body .item-key {\n  font-weight: 600;\n  color: var(--accent-color);\n}\n.clickable-item {\n  cursor: pointer;\n  transition: color 0.2s ease;\n}\n.clickable-item:hover {\n  color: var(--accent-color-hover);\n  text-decoration: underline;\n}\n.global-controls {\n  position: fixed;\n  top: 1rem;\n  right: 1rem;\n  z-index: 1001;\n  display: flex;\n  gap: 0.5rem;\n}\n.control-btn {\n  width: 2.5rem;\n  height: 2.5rem;\n  background-color: var(--bg-card);\n  color: var(--text-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n.control-btn:hover {\n  background-color: var(--bg-secondary);\n  color: var(--accent-color);\n  transform: translateY(-2px);\n}\n.theme-switcher-dropdown {\n  position: relative;\n}\n.dropdown-content {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: 0.5rem;\n  background-color: var(--bg-card);\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\n  flex-direction: column;\n  gap: 0.25rem;\n  width: 120px;\n}\n.dropdown-content:not(.hidden) {\n  display: flex;\n}\n.dropdown-content .theme-btn {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding: 0.5rem;\n  border-radius: 0.25rem;\n  background: none;\n  border: none;\n  color: var(--text-primary);\n  text-align: left;\n}\n.dropdown-content .theme-btn:hover {\n  background-color: var(--bg-secondary);\n  color: var(--accent-color);\n}\n.tab-btn,\n.main-tab-btn {\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  border-bottom: 2px solid transparent;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n.tab-btn:hover,\n.main-tab-btn:hover {\n  color: var(--text-primary);\n}\n.tab-btn.active,\n.main-tab-btn.active {\n  color: var(--accent-color);\n  border-bottom-color: var(--accent-color);\n}\n.form-field-row {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.form-field-row input {\n  flex-grow: 1;\n  background-color: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  color: var(--text-primary);\n  font-size: 0.875rem;\n}\n.form-field-row .remove-field-btn {\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  cursor: pointer;\n  padding: 0.25rem;\n  transition: color 0.2s ease;\n}\n.form-field-row .remove-field-btn:hover {\n  color: #ef4444;\n}\n.btn-primary {\n  padding: 0.5rem 1rem;\n  border-radius: 0.5rem;\n  font-weight: 600;\n  color: var(--bg-card);\n  background: linear-gradient(145deg, var(--accent-color), var(--accent-color-hover));\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 1px rgba(255, 255, 255, 0.2);\n  transition: all 0.2s ease-in-out;\n  cursor: pointer;\n}\n.btn-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3), inset 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n.btn-primary:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n.btn-primary:disabled {\n  background: var(--bg-secondary);\n}\n@supports (color: color-mix(in lab, red, red)) {\n  .btn-primary:disabled {\n    background: color-mix(in srgb, var(--bg-secondary) 50%, #888);\n  }\n}\n.btn-primary:disabled {\n  color: var(--text-secondary);\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n.btn-secondary {\n  padding: 0.5rem 1rem;\n  border-radius: 0.5rem;\n  font-weight: 600;\n  color: var(--text-secondary);\n  background-color: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.2s ease-in-out;\n  cursor: pointer;\n}\n.btn-secondary:hover {\n  background-color: var(--bg-secondary);\n}\n@supports (color: color-mix(in lab, red, red)) {\n  .btn-secondary:hover {\n    background-color: color-mix(in srgb, var(--bg-secondary) 80%, #fff 20%);\n  }\n}\n.btn-secondary:hover {\n  color: var(--text-primary);\n  border-color: var(--accent-color);\n}\n.custom-slider {\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n}\n.custom-slider-track {\n  display: flex;\n  transition: transform 0.3s ease-in-out;\n}\n.custom-slider-slide {\n  flex: 0 0 100%;\n  width: 100%;\n  padding: 0.25rem;\n  box-sizing: border-box;\n}\n.slider-controls {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n  margin-top: 1rem;\n}\n.slider-nav-btn {\n  width: 2.5rem;\n  height: 2.5rem;\n  background-color: var(--bg-secondary);\n  color: var(--text-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.slider-nav-btn:hover:not(:disabled) {\n  background-color: var(--accent-color);\n  color: var(--bg-card);\n}\n.slider-nav-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.slider-counter {\n  font-size: 0.875rem;\n  color: var(--text-secondary);\n  font-variant-numeric: tabular-nums;\n}\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n::-webkit-scrollbar-track {\n  background: var(--bg-secondary);\n}\n@supports (color: color-mix(in lab, red, red)) {\n  ::-webkit-scrollbar-track {\n    background: color-mix(in srgb, var(--bg-secondary) 50%, transparent);\n  }\n}\n::-webkit-scrollbar-track {\n  border-radius: 10px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: var(--accent-color);\n  border-radius: 10px;\n  border: 2px solid transparent;\n  background-clip: content-box;\n}\n::-webkit-scrollbar-thumb:hover {\n  background-color: var(--accent-color-hover);\n}\n@property --tw-rotate-x {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-rotate-y {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-rotate-z {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-skew-x {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-skew-y {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-border-style {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-shadow-color {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-shadow-alpha {\n  syntax: \"<percentage>\";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-inset-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-shadow-color {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-inset-shadow-alpha {\n  syntax: \"<percentage>\";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-ring-color {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-ring-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-ring-color {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-inset-ring-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-ring-inset {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-ring-offset-width {\n  syntax: \"<length>\";\n  inherits: false;\n  initial-value: 0px;\n}\n@property --tw-ring-offset-color {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: #fff;\n}\n@property --tw-ring-offset-shadow {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-outline-style {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-blur {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-brightness {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-contrast {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-grayscale {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-hue-rotate {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-invert {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-opacity {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-saturate {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-sepia {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-drop-shadow {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-drop-shadow-color {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-drop-shadow-alpha {\n  syntax: \"<percentage>\";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-drop-shadow-size {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-blur {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-brightness {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-contrast {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-grayscale {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-hue-rotate {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-invert {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-opacity {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-saturate {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-backdrop-sepia {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-duration {\n  syntax: \"*\";\n  inherits: false;\n}\n@property --tw-scale-x {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-scale-y {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-scale-z {\n  syntax: \"*\";\n  inherits: false;\n  initial-value: 1;\n}\n@layer properties {\n  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {\n    *, ::before, ::after, ::backdrop {\n      --tw-rotate-x: initial;\n      --tw-rotate-y: initial;\n      --tw-rotate-z: initial;\n      --tw-skew-x: initial;\n      --tw-skew-y: initial;\n      --tw-border-style: solid;\n      --tw-shadow: 0 0 #0000;\n      --tw-shadow-color: initial;\n      --tw-shadow-alpha: 100%;\n      --tw-inset-shadow: 0 0 #0000;\n      --tw-inset-shadow-color: initial;\n      --tw-inset-shadow-alpha: 100%;\n      --tw-ring-color: initial;\n      --tw-ring-shadow: 0 0 #0000;\n      --tw-inset-ring-color: initial;\n      --tw-inset-ring-shadow: 0 0 #0000;\n      --tw-ring-inset: initial;\n      --tw-ring-offset-width: 0px;\n      --tw-ring-offset-color: #fff;\n      --tw-ring-offset-shadow: 0 0 #0000;\n      --tw-outline-style: solid;\n      --tw-blur: initial;\n      --tw-brightness: initial;\n      --tw-contrast: initial;\n      --tw-grayscale: initial;\n      --tw-hue-rotate: initial;\n      --tw-invert: initial;\n      --tw-opacity: initial;\n      --tw-saturate: initial;\n      --tw-sepia: initial;\n      --tw-drop-shadow: initial;\n      --tw-drop-shadow-color: initial;\n      --tw-drop-shadow-alpha: 100%;\n      --tw-drop-shadow-size: initial;\n      --tw-backdrop-blur: initial;\n      --tw-backdrop-brightness: initial;\n      --tw-backdrop-contrast: initial;\n      --tw-backdrop-grayscale: initial;\n      --tw-backdrop-hue-rotate: initial;\n      --tw-backdrop-invert: initial;\n      --tw-backdrop-opacity: initial;\n      --tw-backdrop-saturate: initial;\n      --tw-backdrop-sepia: initial;\n      --tw-duration: initial;\n      --tw-scale-x: 1;\n      --tw-scale-y: 1;\n      --tw-scale-z: 1;\n    }\n  }\n}\n</style></head>\n\n<body class=\"p-4 sm:p-6 md:p-8 theme-transition\">\n\n  <!-- 右上角全局控制器 -->\n  <div class=\"global-controls\">\n    <!-- 图鉴管理按钮 -->\n    <button id=\"manage-pokedex-btn\" class=\"control-btn\" title=\"图鉴管理\">\n      <i class=\"fas fa-book-open\"></i>\n    </button>\n\n\n    <!-- 主题切换下拉菜单 -->\n    <div class=\"theme-switcher-dropdown\">\n      <button id=\"theme-dropdown-btn\" class=\"control-btn\" title=\"切换主题\">\n        <i class=\"fas fa-palette\"></i>\n      </button>\n      <div id=\"theme-options\" class=\"dropdown-content hidden\">\n        <button data-theme=\"night\" class=\"theme-btn\"><i class=\"fas fa-moon mr-2\"></i> 夜晚</button>\n        <button data-theme=\"day\" class=\"theme-btn\"><i class=\"fas fa-sun mr-2\"></i> 白天</button>\n        <button data-theme=\"jade\" class=\"theme-btn\"><i class=\"fas fa-leaf mr-2\"></i> 翠玉</button>\n        <button data-theme=\"classic\" class=\"theme-btn\"><i class=\"fas fa-scroll mr-2\"></i> 古典</button>\n      </div>\n    </div>\n\n    <!-- 版本信息按钮 -->\n    <button id=\"version-info-btn\" class=\"control-btn\" title=\"版本信息\">\n      <i class=\"fas fa-code-branch\"></i>\n    </button>\n  </div>\n\n  <div class=\"max-w-4xl mx-auto space-y-6\">\n\n    <!-- 整个状态栏容器 -->\n    <div class=\"bg-main rounded-2xl border border-dim p-4 sm:p-6 shadow-2xl theme-transition\">\n      <div class=\"inner-box\">\n        <!-- 头部信息 -->\n        <div class=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 pb-4 border-b border-dim theme-transition\">\n          <h2 id=\"status-bar-title\" class=\"text-2xl font-bold text-accent mb-2 sm:mb-0\">\n            加载中...\n          </h2>\n          <div class=\"text-sm text-secondary space-y-1 sm:space-y-0 sm:space-x-4 sm:flex theme-transition\">\n            <span class=\"flex items-center\"><span class=\"emoji mr-2\"></span><span id=\"time-display\"></span></span>\n            <span class=\"flex items-center\"><span class=\"emoji mr-2\"></span><span id=\"location-display\"></span></span>\n          </div>\n        </div>\n\n        <!-- 可折叠的状态总览区域 -->\n        <details class=\"group\" open>\n          <summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center\">\n            <span class=\"flex items-center\"><i class=\"fas fa-users mr-2\"></i>状态总览</span>\n            <i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i>\n          </summary>\n          <div id=\"characters-container\" class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 overflow-hidden transition-all duration-500 ease-in-out\">\n            <!-- JS动态填充角色卡片 -->\n          </div>\n        </details>\n\n        <!-- 分隔线 -->\n        <hr class=\"my-6 border-t border-dim theme-transition\">\n\n        <!-- 可折叠的庇护所区域 -->\n        <details class=\"group\">\n          <summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center\">\n            <span class=\"flex items-center\"><i class=\"fas fa-home mr-2\"></i>庇护所</span>\n            <i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i>\n          </summary>\n          <div id=\"shelter-container\" class=\"mt-4 overflow-hidden transition-all duration-500 ease-in-out\">\n            <!-- JS动态填充庇护所信息 -->\n          </div>\n        </details>\n\n        <!-- 分隔线 -->\n        <hr class=\"my-6 border-t border-dim theme-transition\">\n\n        <!-- 可折叠的妖兽图鉴区域 -->\n        <details class=\"group\">\n          <summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center\">\n            <span class=\"flex items-center\"><i class=\"fas fa-paw mr-2\"></i>妖兽图鉴</span>\n            <i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i>\n          </summary>\n          <div id=\"bestiary-container\" class=\"mt-4 overflow-hidden transition-all duration-500 ease-in-out\">\n            <!-- JS动态填充妖兽图鉴信息 -->\n          </div>\n        </details>\n\n        <!-- 分隔线 -->\n        <hr class=\"my-6 border-t border-dim theme-transition\">\n\n        <!-- 可折叠的植物图鉴区域 -->\n        <details class=\"group\">\n          <summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center\">\n            <span class=\"flex items-center\"><i class=\"fas fa-seedling mr-2\"></i>植物图鉴</span>\n            <i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i>\n          </summary>\n          <div id=\"herbology-container\" class=\"mt-4 overflow-hidden transition-all duration-500 ease-in-out\">\n            <!-- JS动态填充植物图鉴信息 -->\n          </div>\n        </details>\n\n        <!-- 分隔线 -->\n        <hr class=\"my-6 border-t border-dim theme-transition\">\n\n        <!-- 可折叠的物品图鉴区域 -->\n        <details class=\"group\">\n          <summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center\">\n            <span class=\"flex items-center\"><i class=\"fas fa-box-open mr-2\"></i>物品图鉴</span>\n            <i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i>\n          </summary>\n          <div id=\"inventory-container\" class=\"mt-4 overflow-hidden transition-all duration-500 ease-in-out\">\n            <!-- JS动态填充物品图鉴信息 -->\n          </div>\n        </details>\n\n        <!-- 分隔线 -->\n        <hr class=\"my-6 border-t border-dim theme-transition\">\n\n        <!-- 可折叠的系统区域 -->\n        <details class=\"group\">\n          <summary class=\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center\">\n            <span class=\"flex items-center\"><i class=\"fas fa-cogs mr-2\"></i>系统</span>\n            <i class=\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\"></i>\n          </summary>\n          <div id=\"system-container\" class=\"mt-4 overflow-hidden transition-all duration-500 ease-in-out\">\n            <!-- JS动态填充系统信息 -->\n          </div>\n        </details>\n\n        <!-- 分隔线 -->\n        <hr class=\"my-6 border-t border-dim theme-transition\">\n\n        <!-- 行动选项 -->\n        <div>\n          <h3 class=\"font-bold text-lg mb-3 flex items-center\">\n            <i class=\"fas fa-tasks mr-2\"></i><span id=\"action-owner\" class=\"text-accent\"><!-- JS填充 --></span><span>的行动选项</span>\n          </h3>\n\n          <ul id=\"options-list\" class=\"space-y-3 cursor-pointer\">\n            <!-- JS动态填充选项列表 -->\n          </ul>\n\n          <!-- 自定义行动输入对话框 (将被JS移动) -->\n          <div id=\"custom-action-modal\" class=\"hidden\">\n            <div class=\"bg-main rounded-lg shadow-xl p-4 border border-dim\">\n              <h4 class=\"font-bold text-md mb-3 text-accent flex items-center\"><i class=\"fas fa-pen-nib mr-2\"></i>输入你的行动</h4>\n              <textarea id=\"custom-action-input\" class=\"w-full bg-secondary rounded border border-dim p-2 text-primary focus:ring-2 focus:ring-accent focus:outline-none theme-transition\" rows=\"3\" placeholder=\"你想做什么...\"></textarea>\n              <div class=\"flex justify-end space-x-3 mt-3\">\n                <button id=\"cancel-action-btn\" class=\"px-4 py-2 rounded bg-gray-600 hover:bg-gray-700 transition-colors theme-transition text-sm\">取消</button>\n                <button id=\"confirm-action-btn\" class=\"px-4 py-2 rounded bg-accent hover:bg-accent-hover transition-colors theme-transition text-white text-sm\">确认行动</button>\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- 详情展示模态框 -->\n  <div id=\"details-modal\" class=\"modal-overlay hidden\">\n    <div class=\"modal-content\">\n      <button id=\"modal-close-btn\" class=\"modal-close-btn\">&times;</button>\n      <h3 id=\"modal-title\" class=\"modal-title\">详情</h3>\n      <div id=\"modal-body\" class=\"modal-body\">\n        <!-- JS动态填充内容 -->\n      </div>\n    </div>\n  </div>\n\n  <!-- 图鉴管理模态框 -->\n  <div id=\"pokedex-manager-modal\" class=\"modal-overlay hidden\">\n    <div class=\"modal-content\">\n      <button id=\"pokedex-manager-close-btn\" class=\"modal-close-btn\">&times;</button>\n      <h3 class=\"modal-title\">\n        <span>图鉴管理</span>\n        <button id=\"pokedex-help-btn\" class=\"help-btn\" title=\"帮助\">\n          <i class=\"fas fa-question\"></i>\n        </button>\n      </h3>\n      <div class=\"modal-body\">\n        <!-- 帮助信息容器 -->\n        <div id=\"pokedex-help-content\" class=\"hidden p-3 mb-4 text-xs rounded-lg bg-secondary/50 text-secondary border border-dim\">\n          <p class=\"font-bold mb-2 text-primary/80\">图鉴管理功能说明:</p>\n          <ul class=\"list-disc list-inside space-y-1\">\n            <li><b>图鉴总览:</b> 查看、编辑或删除已收录的所有图鉴条目。勾选条目后，点击下方的“注入选中项”按钮，可以将这些信息添加到当前楼层的变量中，让AI在下一次回应时“知道”这些内容。</li>\n            <li><b>添加条目:</b> 通过表单或JSON模式，手动向你的全局图鉴数据库中添加新的条目。</li>\n            <li><b>待收录条目:</b> 这里会自动列出当前楼层新出现的、但尚未被收录到全局图鉴的条目，方便你一键收录。</li>\n            <li><b>远程同步:</b> 与社区服务器进行数据交换，可以分享你独有的条目，也可以从社区获取他人分享的内容来丰富你的图鉴。</li>\n          </ul>\n        </div>\n        <!-- 主功能切换Tabs -->\n        <div class=\"flex border-b border-dim mb-4\">\n          <button data-tab=\"view\" class=\"main-tab-btn active\">图鉴总览</button>\n          <button data-tab=\"add\" class=\"main-tab-btn\">添加条目</button>\n        </div>\n\n        <!-- 查看 & 注入 Tab -->\n        <div id=\"pokedex-view-tab\" class=\"main-tab-content\">\n          <!-- New Discoveries Section -->\n          <div id=\"new-discoveries-section\" class=\"mb-4\">\n            <h4 class=\"font-bold text-lg mb-2 text-accent flex justify-between items-center\">\n              <span><i class=\"fas fa-lightbulb mr-2\"></i>待收录条目</span>\n              <button id=\"approve-discoveries-btn\" class=\"btn-secondary text-xs py-1 px-2\">\n                <i class=\"fas fa-check-double mr-1\"></i>一键收录选中项\n              </button>\n            </h4>\n            <div id=\"new-discoveries-list\" class=\"max-h-40 overflow-y-auto pr-2 border border-dim rounded-lg p-2 bg-secondary/30\">\n              <p class=\"text-center text-secondary p-4 text-sm\">正在检查新发现...</p>\n            </div>\n          </div>\n          <hr class=\"my-4 border-t border-dim theme-transition\">\n          <!-- \n            JS动态生成条目示例:\n            <li class=\"p-2 rounded-lg bg-secondary/50 flex justify-between items-center\">\n              <label class=\"flex items-center cursor-pointer flex-grow mr-4\">\n                <input type=\"checkbox\" class=\"mr-3\" data-type=\"妖兽\" data-name=\"示例妖兽\">\n                <span class=\"truncate\" title=\"示例妖兽\">示例妖兽</span>\n              </label>\n              <div class=\"space-x-2 flex-shrink-0\">\n                <button class=\"pokedex-edit-btn text-sm text-accent hover:text-accent-hover\" data-type=\"妖兽\" data-name=\"示例妖兽\" title=\"编辑\"><i class=\"fas fa-pencil-alt\"></i></button>\n                <button class=\"pokedex-delete-btn text-sm text-red-500 hover:text-red-400\" data-type=\"妖兽\" data-name=\"示例妖兽\" title=\"删除\"><i class=\"fas fa-trash\"></i></button>\n              </div>\n            </li> \n          -->\n          <div id=\"existing-pokedex-list\">\n            <p class=\"text-center text-secondary p-4\">正在加载图鉴...</p>\n          </div>\n          <hr class=\"my-4 border-t border-dim theme-transition\">\n          <div id=\"achievements-pokedex-list\">\n            <!-- JS将在此处填充成就的 <details> 块 -->\n          </div>\n        </div>\n\n        <!-- 添加新条目 Tab -->\n        <div id=\"pokedex-add-tab\" class=\"main-tab-content hidden\">\n          <!-- 模式切换Tabs -->\n          <div class=\"flex border-b border-dim mb-4\">\n            <button data-mode=\"form\" class=\"tab-btn active\">表单模式</button>\n            <button data-mode=\"json\" class=\"tab-btn\">JSON模式</button>\n          </div>\n\n          <!-- 表单模式内容 -->\n          <div id=\"form-mode-content\" class=\"tab-content\">\n            <div class=\"mb-4\">\n              <label class=\"block mb-2 text-sm font-medium\">图鉴类型:</label>\n              <div class=\"flex space-x-4\">\n                <label class=\"flex items-center\">\n                  <input type=\"radio\" name=\"entryType\" value=\"妖兽\" class=\"mr-2\" checked> 妖兽\n                </label>\n                <label class=\"flex items-center\">\n                  <input type=\"radio\" name=\"entryType\" value=\"植物\" class=\"mr-2\"> 植物\n                </label>\n                <label class=\"flex items-center\">\n                  <input type=\"radio\" name=\"entryType\" value=\"物品\" class=\"mr-2\"> 物品\n                </label>\n                <label class=\"flex items-center\">\n                  <input type=\"radio\" name=\"entryType\" value=\"成就\" class=\"mr-2\"> 成就\n                </label>\n              </div>\n            </div>\n            <div id=\"form-fields-container\" class=\"space-y-3 max-h-60 overflow-y-auto pr-2\">\n              <!-- JS will populate this with key-value input fields -->\n            </div>\n            <div class=\"mt-3\">\n              <button id=\"add-field-btn\" class=\"text-sm text-accent hover:text-accent-hover transition-colors p-1 rounded hover:bg-secondary\">\n                <i class=\"fas fa-plus mr-1\"></i>添加字段\n              </button>\n            </div>\n          </div>\n\n          <!-- JSON模式内容 -->\n          <div id=\"json-mode-content\" class=\"tab-content hidden\">\n            <div class=\"mb-4\">\n              <label class=\"block mb-2 text-sm font-medium\">图鉴类型 (将应用于所有条目):</label>\n              <div class=\"flex space-x-4\">\n                <label class=\"flex items-center\">\n                  <input type=\"radio\" name=\"jsonEntryType\" value=\"妖兽\" class=\"mr-2\" checked> 妖兽\n                </label>\n                <label class=\"flex items-center\">\n                  <input type=\"radio\" name=\"jsonEntryType\" value=\"植物\" class=\"mr-2\"> 植物\n                </label>\n                <label class=\"flex items-center\">\n                  <input type=\"radio\" name=\"jsonEntryType\" value=\"物品\" class=\"mr-2\"> 物品\n                </label>\n                <label class=\"flex items-center\">\n                  <input type=\"radio\" name=\"jsonEntryType\" value=\"成就\" class=\"mr-2\"> 成就\n                </label>\n              </div>\n            </div>\n            <div>\n              <label for=\"json-input\" class=\"block mb-2 text-sm font-medium\">JSON数据:</label>\n              <textarea id=\"json-input\" class=\"w-full bg-secondary rounded border border-dim p-2 text-primary focus:ring-2 focus:ring-accent focus:outline-none theme-transition font-mono\" rows=\"8\" placeholder='[&#10;  { \"名称\": \"xxx\", \"等级\": \"xxx\" },&#10;  { \"名称\": \"yyy\", \"习性\": \"yyy\" }&#10;]'></textarea>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flex justify-end mt-4 pt-4 border-t border-dim\">\n        <button id=\"remote-sync-btn\" class=\"btn-secondary mr-auto\">\n          <i class=\"fas fa-cloud-upload-alt mr-2\"></i>远程同步\n        </button>\n        <button id=\"inject-pokedex-btn\" class=\"btn-primary\">\n          <i class=\"fas fa-sign-in-alt mr-2\"></i>注入选中项\n        </button>\n        <!-- \n          “确认添加” / “确认更新”按钮。\n          该按钮在“添加新条目”标签页下显示。\n          JS会根据是新建条目还是编辑条目，动态修改其文本。\n        -->\n        <button id=\"submit-entry-btn\" class=\"btn-primary hidden\">\n          <i class=\"fas fa-plus mr-2\"></i>确认添加\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <!-- 远程同步模态框 -->\n  <div id=\"remote-sync-modal\" class=\"modal-overlay hidden\">\n    <div class=\"modal-content\">\n      <button id=\"remote-sync-close-btn\" class=\"modal-close-btn\">&times;</button>\n      <h3 class=\"modal-title\">远程同步</h3>\n      <div class=\"modal-body\">\n        <div class=\"p-2 mb-4 text-xs text-center rounded-lg bg-secondary/50 text-secondary\">\n          <i class=\"fas fa-info-circle mr-1\"></i>\n          分享功能旨在共建一个丰富的图鉴数据库。请确保您分享的内容准确、无害。\n        </div>\n        <!-- Tabs for Submit/Fetch -->\n        <div class=\"flex border-b border-dim mb-4\">\n          <button data-tab=\"submit\" class=\"main-tab-btn active\">分享至社区</button>\n          <button data-tab=\"fetch\" class=\"main-tab-btn\">从社区获取</button>\n        </div>\n\n        <!-- Submit Tab -->\n        <div id=\"remote-submit-tab\" class=\"main-tab-content\">\n          <p class=\"text-sm text-secondary mb-2\">以下是您本地独有、尚未分享的条目。请选择要分享到社区的内容：</p>\n          <div class=\"mb-2\">\n            <label for=\"provider-name-input\" class=\"block mb-1 text-xs font-medium text-secondary\">贡献者署名 (可选):</label>\n            <input type=\"text\" id=\"provider-name-input\" class=\"w-full bg-secondary rounded border border-dim p-1.5 text-sm text-primary focus:ring-2 focus:ring-accent focus:outline-none theme-transition\" placeholder=\"留下你的大名\">\n          </div>\n          <div id=\"local-diff-list\" class=\"max-h-60 overflow-y-auto pr-2 border border-dim rounded-lg p-2 bg-secondary/30\">\n            <p class=\"text-center text-secondary p-4\">正在计算差异...</p>\n          </div>\n        </div>\n\n        <!-- Fetch Tab -->\n        <div id=\"remote-fetch-tab\" class=\"main-tab-content hidden\">\n          <p class=\"text-sm text-secondary mb-2\">以下是社区拥有、但您本地没有的条目。请选择要获取的内容：</p>\n          <div id=\"remote-diff-list\" class=\"max-h-60 overflow-y-auto pr-2 border border-dim rounded-lg p-2 bg-secondary/30\">\n            <p class=\"text-center text-secondary p-4\">请先点击下方按钮从社区获取列表。</p>\n          </div>\n        </div>\n      </div>\n      <div class=\"flex justify-between items-center mt-4 pt-4 border-t border-dim\">\n        <!-- This button will be shown/hidden by JS -->\n        <button id=\"fetch-from-remote-btn\" class=\"btn-secondary hidden\">\n          <i class=\"fas fa-cloud-download-alt mr-2\"></i>获取社区列表\n        </button>\n        \n        <!-- These containers will be toggled by JS -->\n        <div id=\"submit-to-remote-controls\">\n          <button id=\"submit-to-remote-btn\" class=\"btn-primary\">\n            <i class=\"fas fa-paper-plane mr-2\"></i>分享选中项\n          </button>\n        </div>\n        <div id=\"import-from-remote-controls\" class=\"hidden\">\n          <button id=\"import-from-remote-btn\" class=\"btn-primary\">\n            <i class=\"fas fa-download mr-2\"></i>导入选中项\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- 成就奖励模态框 -->\n  <div id=\"rewards-modal\" class=\"modal-overlay hidden\">\n    <div class=\"modal-content\">\n      <button id=\"rewards-modal-close-btn\" class=\"modal-close-btn\">&times;</button>\n      <div class=\"flex justify-between items-center mb-4 pb-2 border-b border-dim\">\n        <h3 class=\"modal-title\" style=\"border-bottom: none; margin-bottom: 0;\">兑换奖励</h3>\n        <button id=\"refresh-rewards-btn\" class=\"text-sm text-accent hover:text-accent-hover transition-colors p-1 rounded hover:bg-secondary\" title=\"刷新奖励列表\">\n          <i class=\"fas fa-sync-alt\"></i> 刷新\n        </button>\n      </div>\n      <div id=\"rewards-modal-body\" class=\"modal-body\">\n        <!-- JS动态填充奖励内容 -->\n      </div>\n      <p class=\"text-xs text-secondary mt-4 text-center\">每日仅可刷新一次，请谨慎选择。</p>\n    </div>\n  </div>\n\n<script>var __webpack_modules__ = {\n  \"./src/update-script.ts\": \n  /*!******************************!*\\\n  !*** ./src/update-script.ts ***!\n  \\******************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n    eval(\"{__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   processFileUpdate: () => (/* binding */ processFileUpdate)\\n/* harmony export */ });\\n/* harmony import */ var toastr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! toastr */ \\\"toastr\\\");\\n/* harmony import */ var toastr__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \\\"lodash\\\");\\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\\n\\n\\n/**\\n * 处理从远程（如GitHub）获取的文件更新。\\n * 根据文件路径判断文件类型，并调用相应的更新函数。\\n *\\n * @param filePath 文件的来源路径 (例如, 'src/folder/regex-name.json')。\\n * @param fileContent 文件的字符串内容。\\n */\\nasync function processFileUpdate(filePath, fileContent) {\\n    try {\\n        // 根据文件名判断是正则文件还是世界书文件\\n        if (filePath.includes('regex-')) {\\n            await updateRegex(filePath, fileContent);\\n        }\\n        else if (filePath.endsWith('什么？我要在玄幻修仙世界种田？.json')) {\\n            await updateWorldbook(filePath, fileContent);\\n        }\\n        else {\\n            console.warn(`跳过不支持的自动更新文件类型: ${filePath}`);\\n        }\\n    }\\n    catch (error) {\\n        console.error(`处理文件更新失败 ${filePath}:`, error);\\n        toastr__WEBPACK_IMPORTED_MODULE_0___default().error(`处理文件更新失败: ${filePath}. 错误: ${error.message}`);\\n    }\\n}\\n/**\\n * 更新酒馆的正则表达式脚本。\\n * 使用 `updateTavernRegexesWith` 函数来确保安全和正确的更新。\\n *\\n * @param filePath 正则表达式JSON文件的路径。\\n * @param fileContent 正则表达式JSON文件的内容。\\n */\\nasync function updateRegex(filePath, fileContent) {\\n    console.log(`尝试从 ${filePath} 更新正则表达式`);\\n    const newRegexData = JSON.parse(fileContent);\\n    if (!newRegexData.scriptName) {\\n        throw new Error(`正则表达式文件 ${filePath} 缺少 'scriptName' 字段。`);\\n    }\\n    await updateTavernRegexesWith((existingRegexes) => {\\n        const entryIndex = existingRegexes.findIndex((regex) => regex.script_name === newRegexData.scriptName);\\n        if (entryIndex !== -1) {\\n            // 如果找到了同名正则，则更新它\\n            // 注意：我们需要将新数据中的字段映射到酒馆正则的字段\\n            existingRegexes[entryIndex] = {\\n                ...existingRegexes[entryIndex], // 保留原有ID等信息\\n                find_regex: newRegexData.findRegex,\\n                replace_string: newRegexData.replaceString,\\n                enabled: !newRegexData.disabled, // JSON中的disabled与酒馆中的enabled相反\\n                // 其他字段可以根据需要从 newRegexData 中添加\\n            };\\n            console.log(`找到并更新了正则表达式: ${newRegexData.scriptName}`);\\n        }\\n        else {\\n            // 如果没有找到，则添加为新的正则表达式\\n            // 注意：这里需要构建一个完整的 TavernRegex 对象\\n            const newTavernRegex = {\\n                id: lodash__WEBPACK_IMPORTED_MODULE_1___default().uniqueId('tavern-regex-'), // 创建一个唯一的ID\\n                script_name: newRegexData.scriptName,\\n                enabled: !newRegexData.disabled,\\n                run_on_edit: newRegexData.runOnEdit || false,\\n                scope: \\\"character\\\", // 默认为角色正则\\n                find_regex: newRegexData.findRegex,\\n                replace_string: newRegexData.replaceString,\\n                source: {\\n                    user_input: true,\\n                    ai_output: true,\\n                    slash_command: true,\\n                    world_info: true,\\n                },\\n                destination: {\\n                    display: true,\\n                    prompt: true,\\n                },\\n                min_depth: newRegexData.minDepth || null,\\n                max_depth: newRegexData.maxDepth || null,\\n            };\\n            existingRegexes.push(newTavernRegex);\\n            console.log(`添加了新的正则表达式: ${newRegexData.scriptName}`);\\n        }\\n        return existingRegexes;\\n    });\\n    toastr__WEBPACK_IMPORTED_MODULE_0___default().success(`正则表达式 '${newRegexData.scriptName}' 已更新。`);\\n    console.log(`成功更新正则表达式: ${newRegexData.scriptName}`);\\n}\\n/**\\n * 从JSON文件更新世界书。\\n * 使用酒馆助手提供的 `replaceWorldbook` 函数。\\n *\\n * @param filePath 世界书JSON文件的路径。\\n * @param fileContent 世界书JSON文件的内容。\\n */\\nasync function updateWorldbook(filePath, fileContent) {\\n    console.log(`尝试从 ${filePath} 更新世界书`);\\n    // 从文件路径中提取世界书的名称\\n    const bookName = filePath.split(/[\\\\\\\\/]/).pop()?.replace('.json', '');\\n    if (!bookName) {\\n        throw new Error(`无法从路径中确定世界书名称: ${filePath}`);\\n    }\\n    const worldbookFile = JSON.parse(fileContent);\\n    if (!worldbookFile.entries || typeof worldbookFile.entries !== 'object') {\\n        throw new Error(`无效的世界书格式 ${filePath}. 缺少或无效的 'entries' 属性。`);\\n    }\\n    // 将 entries 对象转换为数组，以适配酒馆助手函数的要求\\n    const entriesArray = Object.values(worldbookFile.entries);\\n    await replaceWorldbook(bookName, entriesArray);\\n    toastr__WEBPACK_IMPORTED_MODULE_0___default().success(`世界书 '${bookName}' 已更新。`);\\n    console.log(`成功更新世界书: ${bookName}`);\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUSxFQUFFLENBQUM7UUFDdEUsTUFBTSxJQUFJLEtBQUssQ0FBQyxZQUFZLFFBQVEsd0JBQXdCLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRUQsaUNBQWlDO0lBQ2pDLE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRTFELE1BQU0sZ0JBQWdCLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBRS9DLHFEQUFjLENBQUMsUUFBUSxRQUFRLFFBQVEsQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ3hDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL3VwZGF0ZS1zY3JpcHQudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0b2FzdHIgZnJvbSAndG9hc3RyJztcclxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcclxuXHJcbi8vIOagueaNrueUqOaIt+ivtOaYju+8jOaIkeS7rOWBh+Wumui/meS6m+S4jumFkummhuWKqeaJi+S6pOS6kueahOWHveaVsOaYr+WFqOWxgOWPr+eUqOeahFxyXG5kZWNsYXJlIGZ1bmN0aW9uIHVwZGF0ZVRhdmVyblJlZ2V4ZXNXaXRoKHVwZGF0ZXI6IChyZWdleGVzOiBhbnlbXSkgPT4gYW55W10pOiBQcm9taXNlPGFueVtdPjtcclxuZGVjbGFyZSBmdW5jdGlvbiByZXBsYWNlV29ybGRib29rKG5hbWU6IHN0cmluZywgZW50cmllczogYW55W10pOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuLyoqXHJcbiAqIOWumuS5ieS4lueVjOS5puaWh+S7tueahOaVsOaNrue7k+aehOexu+Wei1xyXG4gKi9cclxuaW50ZXJmYWNlIFdvcmxkYm9va0ZpbGUge1xyXG4gICAgZW50cmllczoge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlpITnkIbku47ov5znqIvvvIjlpoJHaXRIdWLvvInojrflj5bnmoTmlofku7bmm7TmlrDjgIJcclxuICog5qC55o2u5paH5Lu26Lev5b6E5Yik5pat5paH5Lu257G75Z6L77yM5bm26LCD55So55u45bqU55qE5pu05paw5Ye95pWw44CCXHJcbiAqXHJcbiAqIEBwYXJhbSBmaWxlUGF0aCDmlofku7bnmoTmnaXmupDot6/lvoQgKOS+i+WmgiwgJ3NyYy9mb2xkZXIvcmVnZXgtbmFtZS5qc29uJynjgIJcclxuICogQHBhcmFtIGZpbGVDb250ZW50IOaWh+S7tueahOWtl+espuS4suWGheWuueOAglxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NGaWxlVXBkYXRlKGZpbGVQYXRoOiBzdHJpbmcsIGZpbGVDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8g5qC55o2u5paH5Lu25ZCN5Yik5pat5piv5q2j5YiZ5paH5Lu26L+Y5piv5LiW55WM5Lmm5paH5Lu2XHJcbiAgICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCdyZWdleC0nKSkge1xyXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVSZWdleChmaWxlUGF0aCwgZmlsZUNvbnRlbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZVBhdGguZW5kc1dpdGgoJ+S7gOS5iO+8n+aIkeimgeWcqOeOhOW5u+S/ruS7meS4lueVjOenjeeUsO+8ny5qc29uJykpIHtcclxuICAgICAgICAgICAgYXdhaXQgdXBkYXRlV29ybGRib29rKGZpbGVQYXRoLCBmaWxlQ29udGVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGDot7Pov4fkuI3mlK/mjIHnmoToh6rliqjmm7TmlrDmlofku7bnsbvlnos6ICR7ZmlsZVBhdGh9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOWkhOeQhuaWh+S7tuabtOaWsOWksei0pSAke2ZpbGVQYXRofTpgLCBlcnJvcik7XHJcbiAgICAgICAgdG9hc3RyLmVycm9yKGDlpITnkIbmlofku7bmm7TmlrDlpLHotKU6ICR7ZmlsZVBhdGh9LiDplJnor686ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOabtOaWsOmFkummhueahOato+WImeihqOi+vuW8j+iEmuacrOOAglxyXG4gKiDkvb/nlKggYHVwZGF0ZVRhdmVyblJlZ2V4ZXNXaXRoYCDlh73mlbDmnaXnoa7kv53lronlhajlkozmraPnoa7nmoTmm7TmlrDjgIJcclxuICpcclxuICogQHBhcmFtIGZpbGVQYXRoIOato+WImeihqOi+vuW8j0pTT07mlofku7bnmoTot6/lvoTjgIJcclxuICogQHBhcmFtIGZpbGVDb250ZW50IOato+WImeihqOi+vuW8j0pTT07mlofku7bnmoTlhoXlrrnjgIJcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVJlZ2V4KGZpbGVQYXRoOiBzdHJpbmcsIGZpbGVDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKGDlsJ3or5Xku44gJHtmaWxlUGF0aH0g5pu05paw5q2j5YiZ6KGo6L6+5byPYCk7XHJcbiAgICBjb25zdCBuZXdSZWdleERhdGEgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcclxuXHJcbiAgICBpZiAoIW5ld1JlZ2V4RGF0YS5zY3JpcHROYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDmraPliJnooajovr7lvI/mlofku7YgJHtmaWxlUGF0aH0g57y65bCRICdzY3JpcHROYW1lJyDlrZfmrrXjgIJgKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB1cGRhdGVUYXZlcm5SZWdleGVzV2l0aCgoZXhpc3RpbmdSZWdleGVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZW50cnlJbmRleCA9IGV4aXN0aW5nUmVnZXhlcy5maW5kSW5kZXgoXHJcbiAgICAgICAgICAgIChyZWdleCkgPT4gcmVnZXguc2NyaXB0X25hbWUgPT09IG5ld1JlZ2V4RGF0YS5zY3JpcHROYW1lXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKGVudHJ5SW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaJvuWIsOS6huWQjOWQjeato+WIme+8jOWImeabtOaWsOWug1xyXG4gICAgICAgICAgICAvLyDms6jmhI/vvJrmiJHku6zpnIDopoHlsIbmlrDmlbDmja7kuK3nmoTlrZfmrrXmmKDlsITliLDphZLppobmraPliJnnmoTlrZfmrrVcclxuICAgICAgICAgICAgZXhpc3RpbmdSZWdleGVzW2VudHJ5SW5kZXhdID0ge1xyXG4gICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdSZWdleGVzW2VudHJ5SW5kZXhdLCAvLyDkv53nlZnljp/mnIlJROetieS/oeaBr1xyXG4gICAgICAgICAgICAgICAgZmluZF9yZWdleDogbmV3UmVnZXhEYXRhLmZpbmRSZWdleCxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2Vfc3RyaW5nOiBuZXdSZWdleERhdGEucmVwbGFjZVN0cmluZyxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6ICFuZXdSZWdleERhdGEuZGlzYWJsZWQsIC8vIEpTT07kuK3nmoRkaXNhYmxlZOS4jumFkummhuS4reeahGVuYWJsZWTnm7jlj41cclxuICAgICAgICAgICAgICAgIC8vIOWFtuS7luWtl+auteWPr+S7peagueaNrumcgOimgeS7jiBuZXdSZWdleERhdGEg5Lit5re75YqgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmib7liLDlubbmm7TmlrDkuobmraPliJnooajovr7lvI86ICR7bmV3UmVnZXhEYXRhLnNjcmlwdE5hbWV9YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5om+5Yiw77yM5YiZ5re75Yqg5Li65paw55qE5q2j5YiZ6KGo6L6+5byPXHJcbiAgICAgICAgICAgIC8vIOazqOaEj++8mui/memHjOmcgOimgeaehOW7uuS4gOS4quWujOaVtOeahCBUYXZlcm5SZWdleCDlr7nosaFcclxuICAgICAgICAgICAgY29uc3QgbmV3VGF2ZXJuUmVnZXggPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogXy51bmlxdWVJZCgndGF2ZXJuLXJlZ2V4LScpLCAvLyDliJvlu7rkuIDkuKrllK/kuIDnmoRJRFxyXG4gICAgICAgICAgICAgICAgc2NyaXB0X25hbWU6IG5ld1JlZ2V4RGF0YS5zY3JpcHROYW1lLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogIW5ld1JlZ2V4RGF0YS5kaXNhYmxlZCxcclxuICAgICAgICAgICAgICAgIHJ1bl9vbl9lZGl0OiBuZXdSZWdleERhdGEucnVuT25FZGl0IHx8IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IFwiY2hhcmFjdGVyXCIsIC8vIOm7mOiupOS4uuinkuiJsuato+WImVxyXG4gICAgICAgICAgICAgICAgZmluZF9yZWdleDogbmV3UmVnZXhEYXRhLmZpbmRSZWdleCxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2Vfc3RyaW5nOiBuZXdSZWdleERhdGEucmVwbGFjZVN0cmluZyxcclxuICAgICAgICAgICAgICAgIHNvdXJjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfaW5wdXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYWlfb3V0cHV0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsYXNoX2NvbW1hbmQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ybGRfaW5mbzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1pbl9kZXB0aDogbmV3UmVnZXhEYXRhLm1pbkRlcHRoIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYXhfZGVwdGg6IG5ld1JlZ2V4RGF0YS5tYXhEZXB0aCB8fCBudWxsLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBleGlzdGluZ1JlZ2V4ZXMucHVzaChuZXdUYXZlcm5SZWdleCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmt7vliqDkuobmlrDnmoTmraPliJnooajovr7lvI86ICR7bmV3UmVnZXhEYXRhLnNjcmlwdE5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBleGlzdGluZ1JlZ2V4ZXM7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdG9hc3RyLnN1Y2Nlc3MoYOato+WImeihqOi+vuW8jyAnJHtuZXdSZWdleERhdGEuc2NyaXB0TmFtZX0nIOW3suabtOaWsOOAgmApO1xyXG4gICAgY29uc29sZS5sb2coYOaIkOWKn+abtOaWsOato+WImeihqOi+vuW8jzogJHtuZXdSZWdleERhdGEuc2NyaXB0TmFtZX1gKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOS7jkpTT07mlofku7bmm7TmlrDkuJbnlYzkuabjgIJcclxuICog5L2/55So6YWS6aaG5Yqp5omL5o+Q5L6b55qEIGByZXBsYWNlV29ybGRib29rYCDlh73mlbDjgIJcclxuICpcclxuICogQHBhcmFtIGZpbGVQYXRoIOS4lueVjOS5pkpTT07mlofku7bnmoTot6/lvoTjgIJcclxuICogQHBhcmFtIGZpbGVDb250ZW50IOS4lueVjOS5pkpTT07mlofku7bnmoTlhoXlrrnjgIJcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdvcmxkYm9vayhmaWxlUGF0aDogc3RyaW5nLCBmaWxlQ29udGVudDpzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKGDlsJ3or5Xku44gJHtmaWxlUGF0aH0g5pu05paw5LiW55WM5LmmYCk7XHJcbiAgICAvLyDku47mlofku7bot6/lvoTkuK3mj5Dlj5bkuJbnlYzkuabnmoTlkI3np7BcclxuICAgIGNvbnN0IGJvb2tOYW1lID0gZmlsZVBhdGguc3BsaXQoL1tcXFxcL10vKS5wb3AoKT8ucmVwbGFjZSgnLmpzb24nLCAnJyk7XHJcblxyXG4gICAgaWYgKCFib29rTmFtZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg5peg5rOV5LuO6Lev5b6E5Lit56Gu5a6a5LiW55WM5Lmm5ZCN56ewOiAke2ZpbGVQYXRofWApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHdvcmxkYm9va0ZpbGU6IFdvcmxkYm9va0ZpbGUgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcclxuXHJcbiAgICBpZiAoIXdvcmxkYm9va0ZpbGUuZW50cmllcyB8fCB0eXBlb2Ygd29ybGRib29rRmlsZS5lbnRyaWVzICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg5peg5pWI55qE5LiW55WM5Lmm5qC85byPICR7ZmlsZVBhdGh9LiDnvLrlsJHmiJbml6DmlYjnmoQgJ2VudHJpZXMnIOWxnuaAp+OAgmApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWwhiBlbnRyaWVzIOWvueixoei9rOaNouS4uuaVsOe7hO+8jOS7pemAgumFjemFkummhuWKqeaJi+WHveaVsOeahOimgeaxglxyXG4gICAgY29uc3QgZW50cmllc0FycmF5ID0gT2JqZWN0LnZhbHVlcyh3b3JsZGJvb2tGaWxlLmVudHJpZXMpO1xyXG5cclxuICAgIGF3YWl0IHJlcGxhY2VXb3JsZGJvb2soYm9va05hbWUsIGVudHJpZXNBcnJheSk7XHJcblxyXG4gICAgdG9hc3RyLnN1Y2Nlc3MoYOS4lueVjOS5piAnJHtib29rTmFtZX0nIOW3suabtOaWsOOAgmApO1xyXG4gICAgY29uc29sZS5sb2coYOaIkOWKn+abtOaWsOS4lueVjOS5pjogJHtib29rTmFtZX1gKTtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./src/update-script.ts\\n\\n}\");\n  },\n  \"./src/什么我要在玄幻修仙世界种田/index.scss\": \n  /*!**************************************!*\\\n  !*** ./src/什么我要在玄幻修仙世界种田/index.scss ***!\n  \\**************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n    eval(\"{__webpack_require__.r(__webpack_exports__);\\n// extracted by mini-css-extract-plugin\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL2luZGV4LnNjc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/ku4DkuYjmiJHopoHlnKjnjoTlubvkv67ku5nkuJbnlYznp43nlLAvaW5kZXguc2Nzcz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/index.scss\\n\\n}\");\n  },\n  \"./src/什么我要在玄幻修仙世界种田/index.ts\": \n  /*!************************************!*\\\n  !*** ./src/什么我要在玄幻修仙世界种田/index.ts ***!\n  \\************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n    eval(\"{__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.scss */ \\\"./src/什么我要在玄幻修仙世界种田/index.scss\\\");\\n/* harmony import */ var _parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parser */ \\\"./src/什么我要在玄幻修仙世界种田/parser.ts\\\");\\n/* harmony import */ var _pokedex__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pokedex */ \\\"./src/什么我要在玄幻修仙世界种田/pokedex.ts\\\");\\n/* harmony import */ var _systems__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./systems */ \\\"./src/什么我要在玄幻修仙世界种田/systems.ts\\\");\\n/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./version */ \\\"./src/什么我要在玄幻修仙世界种田/version.ts\\\");\\n\\n\\n\\n\\n\\nconst triggerAction = async (text, index) => {\\n    if (!text || text.trim().length === 0)\\n        return;\\n    try {\\n        // 获取当前楼层的变量\\n        const messageId = getCurrentMessageId();\\n        const variables = getVariables({ type: 'message', message_id: messageId });\\n        // 将行动选择也添加到变量中\\n        variables['行动选择'] = index + 1;\\n        // 将变量转换为字符串\\n        const variablesString = JSON.stringify(variables, null, 2);\\n        // 准备发送给AI的引导文本\\n        const preamble = `[OOC: 以下是发送给你的、用于驱动剧情的完整游戏状态。请仔细阅读并依据此状态和我选择的行动来生成后续情节。]\\\\n\\\\n**当前游戏状态**:\\\\n这是当前楼层的所有变量信息，它代表了游戏世界的完整快照，包括角色状态、物品、图鉴、系统进度等。请将这些信息作为你生成回应的唯一真实来源。`;\\n        // 将引导文本和变量JSON都包裹起来\\n        const wrappedContent = `<Variables>\\\\n${preamble}\\\\n\\\\n${variablesString}\\\\n</Variables>`;\\n        // 准备最终要发送的消息\\n        const messageToSend = `${wrappedContent}\\\\n\\\\n${text}`;\\n        // 使用 createChatMessages 发送消息，避免 slash command 的解析问题\\n        await createChatMessages([\\n            {\\n                role: 'user',\\n                message: messageToSend,\\n                data: variables,\\n            },\\n        ], { refresh: 'none' });\\n        // 触发AI回应\\n        await triggerSlash('/trigger');\\n        toastr.success(`已选择行动: ${text}`);\\n    }\\n    catch (error) {\\n        console.error('行动失败:', error);\\n        toastr.error('行动失败，请查看控制台日志。');\\n        // 如果失败，需要恢复选项列表\\n        const optionsList = $('#options-list');\\n        if (optionsList.hasClass('disabled')) {\\n            // 这里需要一个函数来重新渲染选项，暂时先移除disabled状态\\n            // 实际应用中可能需要调用 storyRenderer.renderActionOptions()\\n            optionsList.removeClass('disabled');\\n        }\\n    }\\n};\\nfunction initGlobalControls() {\\n    const bodyElement = document.body;\\n    const themeDropdownBtn = document.getElementById('theme-dropdown-btn');\\n    const themeOptions = document.getElementById('theme-options');\\n    const themeButtons = document.querySelectorAll('#theme-options .theme-btn');\\n    const savedTheme = localStorage.getItem('storyTheme') || 'night';\\n    const switchToTheme = (theme) => {\\n        bodyElement.classList.remove('day-mode', 'jade-mode', 'classic-mode');\\n        if (theme !== 'night') {\\n            bodyElement.classList.add(`${theme}-mode`);\\n        }\\n        localStorage.setItem('storyTheme', theme);\\n    };\\n    switchToTheme(savedTheme);\\n    themeDropdownBtn?.addEventListener('click', (e) => {\\n        e.stopPropagation();\\n        themeOptions?.classList.toggle('hidden');\\n    });\\n    themeButtons.forEach(button => {\\n        button.addEventListener('click', () => {\\n            const theme = button.getAttribute('data-theme');\\n            if (theme)\\n                switchToTheme(theme);\\n            themeOptions?.classList.add('hidden');\\n        });\\n    });\\n    document.addEventListener('click', (e) => {\\n        const dropdownContainer = document.querySelector('.theme-switcher-dropdown');\\n        if (dropdownContainer && !dropdownContainer.contains(e.target)) {\\n            themeOptions?.classList.add('hidden');\\n        }\\n    });\\n}\\nfunction initPokedexManager(storyRenderer, showModalWithData) {\\n    const managerBtn = document.getElementById('manage-pokedex-btn');\\n    const modal = document.getElementById('pokedex-manager-modal');\\n    const closeModalBtn = document.getElementById('pokedex-manager-close-btn');\\n    const mainTabs = modal?.querySelectorAll('.main-tab-btn');\\n    const viewTabContent = document.getElementById('pokedex-view-tab');\\n    const addTabContent = document.getElementById('pokedex-add-tab');\\n    const injectBtn = document.getElementById('inject-pokedex-btn');\\n    const submitEntryBtn = document.getElementById('submit-entry-btn');\\n    const helpBtn = document.getElementById('pokedex-help-btn');\\n    const helpContent = document.getElementById('pokedex-help-content');\\n    const formModeContent = document.getElementById('form-mode-content');\\n    const jsonModeContent = document.getElementById('json-mode-content');\\n    const addTabModeButtons = addTabContent?.querySelectorAll('.tab-btn');\\n    let currentAddMode = 'form';\\n    const formFieldsContainer = document.getElementById('form-fields-container');\\n    const addFieldBtn = document.getElementById('add-field-btn');\\n    const entryTypeRadios = document.querySelectorAll('input[name=\\\"entryType\\\"]');\\n    const jsonInput = document.getElementById('json-input');\\n    const createFormFieldRow = (key = '', value = '') => {\\n        const row = document.createElement('div');\\n        row.className = 'form-field-row';\\n        row.innerHTML = `\\n      <input type=\\\"text\\\" class=\\\"form-key-input\\\" placeholder=\\\"属性\\\" value=\\\"${key}\\\">\\n      <input type=\\\"text\\\" class=\\\"form-value-input\\\" placeholder=\\\"值\\\" value=\\\"${value}\\\">\\n      <button class=\\\"remove-field-btn\\\" title=\\\"移除此字段\\\"><i class=\\\"fas fa-times\\\"></i></button>\\n    `;\\n        row.querySelector('.remove-field-btn')?.addEventListener('click', () => row.remove());\\n        return row;\\n    };\\n    const addField = (key = '', value = '') => {\\n        formFieldsContainer?.appendChild(createFormFieldRow(key, value));\\n    };\\n    const updateFormFields = (type) => {\\n        if (!formFieldsContainer)\\n            return;\\n        formFieldsContainer.innerHTML = '';\\n        switch (type) {\\n            case '妖兽':\\n                addField('名称', '');\\n                addField('等级', '');\\n                addField('习性', '');\\n                break;\\n            case '植物':\\n                addField('名称', '');\\n                addField('品阶', '');\\n                addField('功效', '');\\n                break;\\n            case '物品':\\n                addField('名称', '');\\n                addField('品阶', '');\\n                addField('描述', '');\\n                break;\\n            case '成就':\\n                addField('名称', '');\\n                addField('描述', '');\\n                addField('日期', '');\\n                addField('点数', '0');\\n                break;\\n            default:\\n                addField('名称', '');\\n                break;\\n        }\\n    };\\n    const resetAddForm = () => {\\n        if (!submitEntryBtn)\\n            return;\\n        submitEntryBtn.innerHTML = '<i class=\\\"fas fa-plus mr-2\\\"></i>确认添加';\\n        delete submitEntryBtn.dataset.updateMode;\\n        delete submitEntryBtn.dataset.originalName;\\n        delete submitEntryBtn.dataset.originalType;\\n        const checkedRadio = document.querySelector('input[name=\\\"entryType\\\"]:checked');\\n        if (checkedRadio)\\n            updateFormFields(checkedRadio.value);\\n    };\\n    const populateViewTab = async () => {\\n        if (!viewTabContent)\\n            return;\\n        const discoveriesSection = document.getElementById('new-discoveries-section');\\n        const discoveriesList = document.getElementById('new-discoveries-list');\\n        // 1. Populate New Discoveries\\n        if (discoveriesList && discoveriesSection) {\\n            discoveriesList.innerHTML = `<p class=\\\"text-center text-secondary p-4 text-sm\\\">正在检查新发现...</p>`;\\n            const messageId = getCurrentMessageId();\\n            const messageVars = getVariables({ type: 'message', message_id: messageId });\\n            const messagePokedex = _.get(messageVars, '世界.图鉴', {});\\n            const globalPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\\n            let diffHtml = '';\\n            let diffCount = 0;\\n            const types = ['妖兽', '植物', '物品'];\\n            types.forEach(type => {\\n                const messageEntries = messagePokedex[type] || [];\\n                const globalNames = new Set(globalPokedex[type].map(e => e.名称));\\n                const diffEntries = messageEntries.filter((e) => e.名称 && !globalNames.has(e.名称));\\n                if (diffEntries.length > 0) {\\n                    diffCount += diffEntries.length;\\n                    diffHtml += `<h4 class=\\\"font-semibold text-primary/90 mt-2 first:mt-0\\\">${type}</h4><ul>`;\\n                    diffEntries.forEach((entry) => {\\n                        diffHtml += `<li class=\\\"p-2 rounded-lg bg-main/50\\\"><label class=\\\"flex items-center cursor-pointer\\\"><input type=\\\"checkbox\\\" class=\\\"mr-3\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\" checked><span>${entry.名称}</span></label></li>`;\\n                    });\\n                    diffHtml += `</ul>`;\\n                }\\n            });\\n            if (diffCount === 0) {\\n                discoveriesSection.style.display = 'none';\\n            }\\n            else {\\n                discoveriesSection.style.display = 'block';\\n                discoveriesList.innerHTML = diffHtml;\\n            }\\n        }\\n        // 2. Populate Existing Pokedex\\n        const existingPokedexContainer = document.getElementById('existing-pokedex-list');\\n        if (!existingPokedexContainer)\\n            return;\\n        existingPokedexContainer.innerHTML = `<div class=\\\"flex justify-center items-center p-4\\\"><div class=\\\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-400\\\"></div></div>`;\\n        const pokedexData = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\\n        let html = '';\\n        const types = ['妖兽', '植物', '物品'];\\n        types.forEach(type => {\\n            const entries = pokedexData[type];\\n            html += `<details class=\\\"group\\\" open><summary class=\\\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center py-2\\\">${type}图鉴 (${entries.length})<i class=\\\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\\\"></i></summary><ul class=\\\"space-y-2 mt-2\\\">`;\\n            if (entries.length > 0) {\\n                entries.forEach(entry => {\\n                    html += `\\n            <li class=\\\"p-2 rounded-lg bg-secondary/50 flex justify-between items-center\\\">\\n              <label class=\\\"flex items-center cursor-pointer flex-grow mr-4\\\">\\n                <input type=\\\"checkbox\\\" class=\\\"mr-3\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\">\\n                <span class=\\\"truncate\\\" title=\\\"${entry.名称}\\\">${entry.名称}</span>\\n              </label>\\n              <div class=\\\"space-x-2 flex-shrink-0\\\">\\n                <button class=\\\"pokedex-view-btn text-sm text-blue-400 hover:text-blue-300 transition-colors p-1\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\" title=\\\"查看\\\"><i class=\\\"fas fa-eye\\\"></i></button>\\n                <button class=\\\"pokedex-edit-btn text-sm text-accent hover:text-accent-hover transition-colors p-1\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\" title=\\\"编辑\\\"><i class=\\\"fas fa-pencil-alt\\\"></i></button>\\n                <button class=\\\"pokedex-delete-btn text-sm text-red-500 hover:text-red-400 transition-colors p-1\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\" title=\\\"删除\\\"><i class=\\\"fas fa-trash\\\"></i></button>\\n              </div>\\n            </li>`;\\n                });\\n            }\\n            else {\\n                html += `<li class=\\\"text-secondary text-sm italic p-2\\\">暂无条目</li>`;\\n            }\\n            html += `</ul></details>`;\\n        });\\n        existingPokedexContainer.innerHTML = html;\\n        // 3. Populate Achievements\\n        const achievementsContainer = document.getElementById('achievements-pokedex-list');\\n        if (achievementsContainer) {\\n            const systemData = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getSystemData();\\n            const achievements = systemData.已完成 || [];\\n            const points = systemData.成就点数 || 0;\\n            let achievementsHtml = `\\n        <details class=\\\"group\\\" open>\\n          <summary class=\\\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center py-2\\\">\\n            成就图鉴 (已解锁 ${achievements.length}, 共 ${points} 点)\\n            <i class=\\\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\\\"></i>\\n          </summary>\\n          <ul class=\\\"space-y-2 mt-2\\\">\\n      `;\\n            if (achievements.length > 0) {\\n                achievements.forEach((ach) => {\\n                    const achName = ach['名称'];\\n                    achievementsHtml += `\\n            <li class=\\\"p-3 rounded-lg bg-secondary/50 border border-dim flex justify-between items-center\\\">\\n              <div class=\\\"flex-grow\\\">\\n                <p class=\\\"font-semibold text-primary flex justify-between items-center\\\">\\n                  <span><i class=\\\"fas fa-trophy mr-2 text-yellow-400\\\"></i>${achName}</span>\\n                  <span class=\\\"text-xs font-normal text-secondary\\\">${ach['日期'] || ''}</span>\\n                </p>\\n                <p class=\\\"text-sm text-secondary mt-1 pl-6\\\">${ach['描述'] || '没有描述。'}</p>\\n              </div>\\n              <div class=\\\"space-x-2 flex-shrink-0 ml-4\\\">\\n                <button class=\\\"pokedex-edit-btn text-sm text-accent hover:text-accent-hover transition-colors p-1\\\" data-type=\\\"成就\\\" data-name=\\\"${achName}\\\" title=\\\"编辑\\\"><i class=\\\"fas fa-pencil-alt\\\"></i></button>\\n                <button class=\\\"pokedex-delete-btn text-sm text-red-500 hover:text-red-400 transition-colors p-1\\\" data-type=\\\"成就\\\" data-name=\\\"${achName}\\\" title=\\\"删除\\\"><i class=\\\"fas fa-trash\\\"></i></button>\\n              </div>\\n            </li>\\n          `;\\n                });\\n            }\\n            else {\\n                achievementsHtml += `<li class=\\\"text-secondary text-sm italic p-2\\\">尚未解锁任何成就</li>`;\\n            }\\n            achievementsHtml += `</ul></details>`;\\n            achievementsContainer.innerHTML = achievementsHtml;\\n        }\\n    };\\n    const showModal = async () => {\\n        await populateViewTab();\\n        modal?.classList.remove('hidden');\\n    };\\n    const hideModal = () => modal?.classList.add('hidden');\\n    managerBtn?.addEventListener('click', showModal);\\n    closeModalBtn?.addEventListener('click', hideModal);\\n    modal?.addEventListener('click', (e) => {\\n        if (e.target === modal)\\n            hideModal();\\n    });\\n    helpBtn?.addEventListener('click', () => {\\n        helpContent?.classList.toggle('hidden');\\n        helpBtn.classList.toggle('active');\\n    });\\n    document.getElementById('approve-discoveries-btn')?.addEventListener('click', async () => {\\n        const checkboxes = document.querySelectorAll('#new-discoveries-list input[type=\\\"checkbox\\\"]:checked');\\n        if (checkboxes.length === 0) {\\n            toastr.warning('请至少选择一个要收录的条目。');\\n            return;\\n        }\\n        const messageId = getCurrentMessageId();\\n        const messageVars = getVariables({ type: 'message', message_id: messageId });\\n        const messagePokedex = _.get(messageVars, '世界.图鉴', {});\\n        let successCount = 0;\\n        for (const cb of checkboxes) {\\n            const type = cb.dataset.type;\\n            const name = cb.dataset.name;\\n            if (type && name && messagePokedex[type]) {\\n                const entry = messagePokedex[type].find((e) => e.名称 === name);\\n                if (entry) {\\n                    if (await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, entry)) {\\n                        successCount++;\\n                    }\\n                }\\n            }\\n        }\\n        if (successCount > 0) {\\n            toastr.success(`成功收录了 ${successCount} 个新条目！`);\\n            await populateViewTab();\\n        }\\n    });\\n    mainTabs?.forEach(button => {\\n        button.addEventListener('click', () => {\\n            const tab = button.getAttribute('data-tab');\\n            mainTabs.forEach(btn => btn.classList.remove('active'));\\n            button.classList.add('active');\\n            resetAddForm();\\n            viewTabContent?.classList.add('hidden');\\n            addTabContent?.classList.add('hidden');\\n            injectBtn?.classList.add('hidden');\\n            submitEntryBtn?.classList.add('hidden');\\n            if (tab === 'view') {\\n                viewTabContent?.classList.remove('hidden');\\n                injectBtn?.classList.remove('hidden');\\n            }\\n            else if (tab === 'add') {\\n                addTabContent?.classList.remove('hidden');\\n                submitEntryBtn?.classList.remove('hidden');\\n            }\\n        });\\n    });\\n    injectBtn?.addEventListener('click', async () => {\\n        const selectedEntries = {};\\n        const checkboxes = modal?.querySelectorAll('#pokedex-view-tab input[type=\\\"checkbox\\\"]:checked');\\n        if (!checkboxes || checkboxes.length === 0) {\\n            toastr.warning('请至少选择一个要注入的条目。');\\n            return;\\n        }\\n        const pokedexData = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\\n        checkboxes.forEach(cb => {\\n            const type = cb.dataset.type;\\n            const name = cb.dataset.name;\\n            if (type && name) {\\n                const entry = pokedexData[type].find(e => e.名称 === name);\\n                if (entry) {\\n                    if (!selectedEntries[type]) {\\n                        selectedEntries[type] = [];\\n                    }\\n                    selectedEntries[type].push(entry);\\n                }\\n            }\\n        });\\n        if (_.isEmpty(selectedEntries))\\n            return;\\n        const messageId = getCurrentMessageId();\\n        const currentVars = getVariables({ type: 'message', message_id: messageId });\\n        const updates = {};\\n        for (const [type, entries] of Object.entries(selectedEntries)) {\\n            const path = `世界.图鉴.${type}`;\\n            const existingEntries = _.get(currentVars, path, []);\\n            const newEntries = _.unionBy(existingEntries, entries, '名称');\\n            _.set(updates, path, newEntries);\\n        }\\n        await insertOrAssignVariables(updates, { type: 'message', message_id: messageId });\\n        toastr.success('成功注入图鉴到当前楼层！');\\n        hideModal();\\n        storyRenderer.init();\\n    });\\n    addTabModeButtons?.forEach(button => {\\n        button.addEventListener('click', () => {\\n            const mode = button.getAttribute('data-mode');\\n            if (!mode || mode === currentAddMode)\\n                return;\\n            currentAddMode = mode;\\n            addTabModeButtons.forEach(btn => btn.classList.remove('active'));\\n            button.classList.add('active');\\n            if (mode === 'form') {\\n                formModeContent?.classList.remove('hidden');\\n                jsonModeContent?.classList.add('hidden');\\n            }\\n            else {\\n                formModeContent?.classList.add('hidden');\\n                jsonModeContent?.classList.remove('hidden');\\n            }\\n        });\\n    });\\n    const checkedRadio = document.querySelector('input[name=\\\"entryType\\\"]:checked');\\n    if (checkedRadio)\\n        updateFormFields(checkedRadio.value);\\n    addFieldBtn?.addEventListener('click', () => addField());\\n    entryTypeRadios.forEach(radio => {\\n        radio.addEventListener('change', (e) => {\\n            updateFormFields(e.target.value);\\n        });\\n    });\\n    submitEntryBtn?.addEventListener('click', async () => {\\n        const isUpdate = submitEntryBtn.dataset.updateMode === 'true';\\n        if (currentAddMode === 'form') {\\n            const type = document.querySelector('input[name=\\\"entryType\\\"]:checked')?.value;\\n            const newEntry = { '名称': '' };\\n            const rows = formFieldsContainer?.querySelectorAll('.form-field-row');\\n            rows?.forEach(row => {\\n                const key = row.querySelector('.form-key-input')?.value.trim();\\n                const value = row.querySelector('.form-value-input')?.value.trim();\\n                if (key)\\n                    newEntry[key] = value;\\n            });\\n            if (!newEntry.名称) {\\n                toastr.warning('“名称”是必填字段！');\\n                return;\\n            }\\n            if (isUpdate) {\\n                const originalName = submitEntryBtn.dataset.originalName;\\n                const originalType = submitEntryBtn.dataset.originalType;\\n                if (!originalName || !originalType || !type) {\\n                    toastr.error('更新失败：缺少必要信息。');\\n                    return;\\n                }\\n                if (originalType === type) {\\n                    // Type hasn't changed, just update\\n                    if (type === '成就') {\\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.updateAchievement(originalName, newEntry);\\n                    }\\n                    else {\\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.updatePokedexEntry(type, originalName, newEntry);\\n                    }\\n                }\\n                else {\\n                    // Type has changed, so we delete the old and create a new one\\n                    if (originalType === '成就') {\\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.deleteAchievement(originalName);\\n                    }\\n                    else {\\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.deletePokedexEntry(originalType, originalName);\\n                    }\\n                    if (type === '成就') {\\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createAchievement(newEntry);\\n                    }\\n                    else {\\n                        await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, newEntry);\\n                    }\\n                    toastr.info(`条目已从“${originalType}”移动到“${type}”`);\\n                }\\n                resetAddForm();\\n            }\\n            else {\\n                // Create new entry\\n                if (!type) {\\n                    toastr.warning('请选择条目类型！');\\n                    return;\\n                }\\n                if (type === '成就') {\\n                    const success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createAchievement(newEntry);\\n                    if (success)\\n                        updateFormFields(type);\\n                }\\n                else {\\n                    const success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, newEntry);\\n                    if (success) {\\n                        updateFormFields(type);\\n                    }\\n                }\\n            }\\n        }\\n        else if (currentAddMode === 'json') { // JSON mode\\n            const type = document.querySelector('input[name=\\\"jsonEntryType\\\"]:checked')?.value;\\n            const jsonString = jsonInput?.value.trim();\\n            if (!jsonString) {\\n                toastr.warning('请输入JSON数据！');\\n                return;\\n            }\\n            try {\\n                const data = JSON.parse(jsonString);\\n                const entries = Array.isArray(data) ? data : [data];\\n                let successCount = 0;\\n                if (type === '成就') {\\n                    for (const entry of entries) {\\n                        if (await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createAchievement(entry)) {\\n                            successCount++;\\n                        }\\n                    }\\n                    if (successCount > 0) {\\n                        toastr.success(`成功处理 ${successCount} 个新成就！`);\\n                        jsonInput.value = '';\\n                    }\\n                }\\n                else {\\n                    for (const entry of entries) {\\n                        if (await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, entry)) {\\n                            successCount++;\\n                        }\\n                    }\\n                    if (successCount > 0)\\n                        jsonInput.value = '';\\n                }\\n            }\\n            catch (error) {\\n                toastr.error('JSON解析失败，请检查格式！');\\n                console.error(\\\"JSON parsing failed:\\\", error);\\n            }\\n        }\\n        await populateViewTab();\\n    });\\n    viewTabContent?.addEventListener('click', async (e) => {\\n        const target = e.target;\\n        const deleteButton = target.closest('.pokedex-delete-btn');\\n        const editButton = target.closest('.pokedex-edit-btn');\\n        const viewButton = target.closest('.pokedex-view-btn');\\n        if (viewButton) {\\n            const type = viewButton.getAttribute('data-type');\\n            const name = viewButton.getAttribute('data-name');\\n            if (type && name) {\\n                if (type === '成就') {\\n                    const achievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\\n                    const entry = achievements.find((ach) => ach['名称'] === name);\\n                    if (entry)\\n                        showModalWithData(entry);\\n                }\\n                else {\\n                    const entry = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.readPokedexEntry(type, name);\\n                    if (entry) {\\n                        showModalWithData(entry);\\n                    }\\n                }\\n            }\\n        }\\n        if (deleteButton) {\\n            const type = deleteButton.getAttribute('data-type');\\n            const name = deleteButton.getAttribute('data-name');\\n            if (type && name) {\\n                if (confirm(`确定要删除 ${type} 图鉴中的 “${name}” 吗？此操作不可撤销。`)) {\\n                    let success = false;\\n                    if (type === '成就') {\\n                        success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.deleteAchievement(name);\\n                    }\\n                    else {\\n                        success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.deletePokedexEntry(type, name);\\n                    }\\n                    if (success) {\\n                        await populateViewTab();\\n                    }\\n                }\\n            }\\n        }\\n        if (editButton) {\\n            const type = editButton.getAttribute('data-type');\\n            const name = editButton.getAttribute('data-name');\\n            if (type && name) {\\n                let entry = null;\\n                if (type === '成就') {\\n                    const achievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\\n                    entry = achievements.find((ach) => ach['名称'] === name) ?? null;\\n                }\\n                else {\\n                    entry = (await _pokedex__WEBPACK_IMPORTED_MODULE_2__.readPokedexEntry(type, name)) ?? null;\\n                }\\n                if (entry) {\\n                    mainTabs?.forEach(btn => btn.classList.toggle('active', btn.getAttribute('data-tab') === 'add'));\\n                    viewTabContent?.classList.add('hidden');\\n                    addTabContent?.classList.remove('hidden');\\n                    injectBtn?.classList.add('hidden');\\n                    submitEntryBtn?.classList.remove('hidden');\\n                    addTabModeButtons?.forEach(btn => btn.classList.toggle('active', btn.getAttribute('data-mode') === 'form'));\\n                    formModeContent?.classList.remove('hidden');\\n                    jsonModeContent?.classList.add('hidden');\\n                    currentAddMode = 'form';\\n                    document.querySelector(`input[name=\\\"entryType\\\"][value=\\\"${type}\\\"]`).checked = true;\\n                    if (formFieldsContainer)\\n                        formFieldsContainer.innerHTML = '';\\n                    Object.entries(entry).forEach(([key, value]) => {\\n                        addField(key, String(value));\\n                    });\\n                    submitEntryBtn.innerHTML = '<i class=\\\"fas fa-check mr-2\\\"></i>确认更新';\\n                    submitEntryBtn.dataset.updateMode = 'true';\\n                    submitEntryBtn.dataset.originalName = name;\\n                    submitEntryBtn.dataset.originalType = type;\\n                }\\n            }\\n        }\\n    });\\n}\\nclass StoryRenderer {\\n    yamlData;\\n    rawYamlContent;\\n    rootNodeKey;\\n    elements;\\n    rawJsonContent = null;\\n    jsonData = null;\\n    globalPokedex = null;\\n    constructor() {\\n        this.yamlData = null;\\n        this.rawYamlContent = \\\"\\\";\\n        this.rootNodeKey = null;\\n        this.elements = {\\n            statusBarTitle: document.getElementById('status-bar-title'),\\n            timeDisplay: document.getElementById('time-display'),\\n            locationDisplay: document.getElementById('location-display'),\\n            charactersContainer: document.getElementById('characters-container'),\\n            actionOwner: document.getElementById('action-owner'),\\n            optionsList: document.getElementById('options-list'),\\n            systemContainer: document.getElementById('system-container'),\\n            shelterContainer: document.getElementById('shelter-container'),\\n            bestiaryContainer: document.getElementById('bestiary-container'),\\n            herbologyContainer: document.getElementById('herbology-container'),\\n            inventoryContainer: document.getElementById('inventory-container')\\n        };\\n    }\\n    handleCompatibility() {\\n        if (!this.rootNodeKey || !this.jsonData)\\n            return;\\n        const rootData = this.jsonData[this.rootNodeKey];\\n        let modified = false;\\n        if (!this.findFieldByKeywords(rootData, ['庇护所'])) {\\n            rootData['🏡 庇护所'] = {};\\n            modified = true;\\n        }\\n        if (!this.findFieldByKeywords(rootData, ['妖兽图鉴'])) {\\n            rootData['🐾 妖兽图鉴'] = { '已发现': 0, '已收录': [] };\\n            modified = true;\\n        }\\n        if (!this.findFieldByKeywords(rootData, ['植物图鉴'])) {\\n            rootData['🌿 植物图鉴'] = { '已发现': 0, '已种植': [] };\\n            modified = true;\\n        }\\n        if (modified) {\\n            toastr.info('检测到旧版状态栏，已自动补充缺失的字段以兼容。');\\n        }\\n    }\\n    async init() {\\n        console.log('[StoryRenderer] Initializing...');\\n        this.setLoadingState();\\n        try {\\n            this.rawJsonContent = this.getRawContentFromChatMessage();\\n            console.log('[StoryRenderer] Raw JSON content loaded:', this.rawJsonContent);\\n            if (!this.rawJsonContent) {\\n                toastr.error('未能在最新消息中找到JSON数据。');\\n                return;\\n            }\\n            let parsedJson;\\n            try {\\n                parsedJson = JSON.parse(this.rawJsonContent);\\n            }\\n            catch (error) {\\n                console.error('JSON parsing failed:', error);\\n                this.handleParsingFailure(this.rawJsonContent, error);\\n                return;\\n            }\\n            this.jsonData = parsedJson;\\n            if (!this.jsonData) {\\n                toastr.error('JSON数据格式不正确');\\n                return;\\n            }\\n            this.findRootNodeKey();\\n            this.handleCompatibility();\\n            this.globalPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData(); // Cache the pokedex\\n            await this.syncVariables();\\n            this.renderAll();\\n            const savedTheme = localStorage.getItem('storyTheme') || 'night';\\n            const themeButton = document.querySelector(`.theme-btn[data-theme=\\\"${savedTheme}\\\"]`);\\n            if (themeButton)\\n                themeButton.click();\\n            toastr.success('状态栏已成功加载并渲染！');\\n        }\\n        catch (error) {\\n            console.error('渲染失败:', error);\\n            this.handleError(error);\\n        }\\n    }\\n    getRawContentFromChatMessage() {\\n        try {\\n            const messageId = getCurrentMessageId();\\n            if (messageId === null || messageId === undefined) {\\n                toastr.error('无法获取当前消息 ID。');\\n                return '';\\n            }\\n            const message = getChatMessages(messageId)[0];\\n            if (!message || !message.message)\\n                return '';\\n            return (0,_parser__WEBPACK_IMPORTED_MODULE_1__.extractJsonFromStatusBar)(message.message);\\n        }\\n        catch (e) {\\n            console.error(\\\"获取聊天消息失败:\\\", e);\\n            toastr.error('获取或处理聊天消息时出错，请检查控制台。');\\n            return '';\\n        }\\n    }\\n    setLoadingState() {\\n        if (this.elements.charactersContainer)\\n            this.elements.charactersContainer.innerHTML = this.createSpinner();\\n        if (this.elements.optionsList)\\n            this.elements.optionsList.innerHTML = `<li>${this.createSpinner()}</li>`;\\n    }\\n    createSpinner() {\\n        return `<div class=\\\"flex justify-center items-center p-4\\\"><div class=\\\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-400\\\"></div></div>`;\\n    }\\n    findRootNodeKey() {\\n        const keys = Object.keys(this.jsonData);\\n        this.rootNodeKey = keys.find(key => key.includes('状态总览') || key.includes('角色状态总览')) || keys[0];\\n        if (!this.rootNodeKey) {\\n            toastr.error('未找到根节点');\\n            return;\\n        }\\n        if (this.elements.statusBarTitle)\\n            this.elements.statusBarTitle.textContent = \\\"状态总览\\\";\\n    }\\n    findFieldByKeywords(data, keywords) {\\n        if (!data || typeof data !== 'object')\\n            return null;\\n        const fields = Object.keys(data);\\n        for (const field of fields) {\\n            for (const keyword of keywords) {\\n                if (field.toLowerCase().includes(keyword.toLowerCase()))\\n                    return field;\\n            }\\n        }\\n        return null;\\n    }\\n    renderAll() {\\n        if (!this.rootNodeKey)\\n            return;\\n        const rootData = this.jsonData[this.rootNodeKey];\\n        this.renderHeaderInfo(rootData);\\n        this.renderCharacters(rootData);\\n        this.renderShelter(rootData);\\n        this.renderPokedexFromMessageVars();\\n        this.renderSystem(rootData);\\n        this.renderActionOptions(rootData);\\n    }\\n    renderHeaderInfo(data) {\\n        const dateTimeField = this.findFieldByKeywords(data, ['日期', '时间']);\\n        const locationField = this.findFieldByKeywords(data, ['地点', '环境']);\\n        const timeDisplayParent = this.elements.timeDisplay?.parentNode;\\n        const locationDisplayParent = this.elements.locationDisplay?.parentNode;\\n        if (dateTimeField && this.elements.timeDisplay && timeDisplayParent) {\\n            this.elements.timeDisplay.textContent = this.formatNodeName(data[dateTimeField], true);\\n            const emojiEl = timeDisplayParent.querySelector('.emoji');\\n            if (emojiEl)\\n                emojiEl.textContent = this.extractEmojis(data[dateTimeField])[0] || '🗓️';\\n        }\\n        if (locationField && this.elements.locationDisplay && locationDisplayParent) {\\n            this.elements.locationDisplay.textContent = this.formatNodeName(data[locationField], true);\\n            const emojiEl = locationDisplayParent.querySelector('.emoji');\\n            if (emojiEl)\\n                emojiEl.textContent = this.extractEmojis(data[locationField])[0] || '🏞️';\\n        }\\n    }\\n    renderCharacters(data) {\\n        const charListKey = this.findFieldByKeywords(data, ['角色', '列表', '人物']);\\n        if (this.elements.charactersContainer) {\\n            this.elements.charactersContainer.innerHTML = '';\\n            if (charListKey && Array.isArray(data[charListKey])) {\\n                data[charListKey].forEach((charData) => {\\n                    const card = this.createCharacterCard(charData);\\n                    if (card)\\n                        this.elements.charactersContainer.appendChild(card);\\n                });\\n            }\\n            else {\\n                this.elements.charactersContainer.innerHTML = this.createEmptyState('没有角色数据');\\n            }\\n        }\\n    }\\n    renderSystem(data) {\\n        const systemContainer = this.elements.systemContainer;\\n        if (systemContainer) {\\n            const messageId = getCurrentMessageId();\\n            const variables = getVariables({ type: 'message', message_id: messageId });\\n            const systemData = _.get(variables, '世界.系统', null);\\n            (0,_systems__WEBPACK_IMPORTED_MODULE_3__.renderSystem)(systemData, systemContainer);\\n        }\\n    }\\n    renderShelter(data) {\\n        const shelterKey = this.findFieldByKeywords(data, ['庇护所']);\\n        if (this.elements.shelterContainer) {\\n            this.elements.shelterContainer.innerHTML = '';\\n            if (shelterKey && typeof data[shelterKey] === 'object' && data[shelterKey] !== null) {\\n                const shelterData = data[shelterKey];\\n                const card = this.createCharacterCard({ [shelterKey]: shelterData });\\n                if (card)\\n                    this.elements.shelterContainer.appendChild(card);\\n            }\\n            else {\\n                this.elements.shelterContainer.innerHTML = this.createEmptyState('暂无庇护所信息');\\n            }\\n        }\\n    }\\n    renderPokedexFromMessageVars() {\\n        const messageId = getCurrentMessageId();\\n        const variables = getVariables({ type: 'message', message_id: messageId });\\n        const pokedexData = _.get(variables, '世界.图鉴', {});\\n        const renderSinglePokedex = (container, data, name, emptyText) => {\\n            if (container) {\\n                container.innerHTML = '';\\n                if (data && data.length > 0) {\\n                    const card = this.createCharacterCard({ [`${name}图鉴 (已发现 ${data.length})`]: data });\\n                    if (card)\\n                        container.appendChild(card);\\n                }\\n                else {\\n                    container.innerHTML = this.createEmptyState(emptyText);\\n                }\\n            }\\n        };\\n        renderSinglePokedex(this.elements.bestiaryContainer, pokedexData['妖兽'], '妖兽', '妖兽图鉴待解锁');\\n        renderSinglePokedex(this.elements.herbologyContainer, pokedexData['植物'], '植物', '植物图鉴待解锁');\\n        renderSinglePokedex(this.elements.inventoryContainer, pokedexData['物品'], '物品', '物品图鉴是空的');\\n    }\\n    async syncVariables() {\\n        if (!this.rootNodeKey || !this.jsonData)\\n            return;\\n        try {\\n            const currentMessageId = getCurrentMessageId();\\n            if (currentMessageId === null) {\\n                console.warn('[StoryRenderer] 无法获取当前消息ID，跳过同步。');\\n                return;\\n            }\\n            const rootData = this.jsonData[this.rootNodeKey];\\n            const currentVars = getVariables({ type: 'message', message_id: currentMessageId });\\n            const lastSyncId = _.get(currentVars, '世界.lastSyncMessageId', -1);\\n            // 核心逻辑：只有当当前消息ID大于等于最后同步ID时才执行更新\\n            if (currentMessageId >= lastSyncId) {\\n                const updates = {};\\n                const sectionsToSync = [\\n                    { keyWords: ['庇护所'], varPath: '世界.庇护所' },\\n                    { keyWords: ['妖兽图鉴'], varPath: '世界.图鉴.妖兽' },\\n                    { keyWords: ['植物图鉴'], varPath: '世界.图鉴.植物' },\\n                    { keyWords: ['物品图鉴'], varPath: '世界.图鉴.物品' }\\n                ];\\n                // 单独处理系统，确保它只在变量不存在时从JSON初始化一次\\n                const systemDataInJson = this.findFieldByKeywords(rootData, ['系统']);\\n                if (systemDataInJson && rootData[systemDataInJson]) {\\n                    const newSystemData = rootData[systemDataInJson];\\n                    const currentSystemData = _.get(currentVars, '世界.系统', {});\\n                    // 检查是否有新成就解锁\\n                    if (newSystemData['新成就']) {\\n                        const newAchievements = Array.isArray(newSystemData['新成就']) ? newSystemData['新成就'] : [newSystemData['新成就']];\\n                        const updatedAchievements = _.cloneDeep(_.get(currentSystemData, '已完成', []));\\n                        let updatedPoints = _.get(currentSystemData, '成就点数', 0);\\n                        newAchievements.forEach((ach) => {\\n                            // 避免重复添加\\n                            if (!updatedAchievements.some((existingAch) => existingAch['名称'] === ach['名称'])) {\\n                                // 动态地将所有字段添加进去，除了点数\\n                                const achievementData = { ...ach };\\n                                delete achievementData['点数'];\\n                                updatedAchievements.push(achievementData);\\n                                updatedPoints += ach['点数'] || 0;\\n                                toastr.success(`解锁新成就：${ach['名称']}`, '恭喜！');\\n                            }\\n                        });\\n                        // 更新系统数据\\n                        currentSystemData['已完成'] = updatedAchievements;\\n                        currentSystemData['成就点数'] = updatedPoints;\\n                        if (newSystemData['提示'])\\n                            currentSystemData['提示'] = newSystemData['提示'];\\n                        updates['世界.系统'] = currentSystemData;\\n                        console.log(`[StoryRenderer] 检测到新成就，已合并并更新系统变量。`);\\n                    }\\n                    else if (newSystemData['今日已签到'] === true) {\\n                        const today = new Date().getDate();\\n                        const yesterday = new Date();\\n                        yesterday.setDate(today - 1);\\n                        const signedInDays = _.cloneDeep(_.get(currentSystemData, '已签到', []));\\n                        if (!signedInDays.includes(today)) {\\n                            signedInDays.push(today);\\n                        }\\n                        let consecutiveDays = _.get(currentSystemData, '连续签到', 0);\\n                        if (signedInDays.includes(yesterday.getDate())) {\\n                            consecutiveDays++;\\n                        }\\n                        else {\\n                            consecutiveDays = 1;\\n                        }\\n                        currentSystemData['已签到'] = signedInDays;\\n                        currentSystemData['连续签到'] = consecutiveDays;\\n                        if (newSystemData['提示'])\\n                            currentSystemData['提示'] = newSystemData['提示'];\\n                        // 处理签到奖励\\n                        if (newSystemData['奖励']) {\\n                            const rewardText = newSystemData['奖励'];\\n                            const match = rewardText.match(/【(.+?)】x(\\\\d+)/);\\n                            if (match) {\\n                                const itemName = match[1];\\n                                const itemAmount = parseInt(match[2], 10);\\n                                // 假设只有一个角色，找到角色数据并更新物品\\n                                const charListKey = this.findFieldByKeywords(rootData, ['角色', '列表', '人物']);\\n                                if (charListKey && Array.isArray(rootData[charListKey]) && rootData[charListKey].length > 0) {\\n                                    const charContainer = rootData[charListKey][0];\\n                                    const charDataKey = Object.keys(charContainer)[0];\\n                                    const charData = charContainer[charDataKey];\\n                                    const nameKey = this.findFieldByKeywords(charData, ['姓名', '名称']);\\n                                    if (nameKey) {\\n                                        const charName = this.formatNodeName(charData[nameKey], true);\\n                                        const itemsVarPath = `角色.${charName}.物品`;\\n                                        const currentItems = _.cloneDeep(_.get(currentVars, itemsVarPath, []));\\n                                        // 检查物品是否已存在\\n                                        const existingItemIndex = currentItems.findIndex((item) => item.includes(itemName));\\n                                        if (existingItemIndex > -1) {\\n                                            // 更新数量\\n                                            const existingItemText = currentItems[existingItemIndex];\\n                                            const existingAmountMatch = existingItemText.match(/x(\\\\d+)/);\\n                                            const existingAmount = existingAmountMatch ? parseInt(existingAmountMatch[1], 10) : 1;\\n                                            const newAmount = existingAmount + itemAmount;\\n                                            currentItems[existingItemIndex] = `【${itemName}】x${newAmount}`;\\n                                        }\\n                                        else {\\n                                            // 添加新物品\\n                                            currentItems.push(`【${itemName}】x${itemAmount}`);\\n                                        }\\n                                        updates[itemsVarPath] = currentItems;\\n                                        console.log(`[StoryRenderer] 已将签到奖励“${rewardText}”添加到角色“${charName}”的物品变量中。`);\\n                                    }\\n                                }\\n                            }\\n                        }\\n                        updates['世界.系统'] = currentSystemData;\\n                        console.log(`[StoryRenderer] 检测到签到事件，已更新签到数据。`);\\n                    }\\n                    else if (newSystemData['技能提升']) {\\n                        const skillUpdates = Array.isArray(newSystemData['技能提升']) ? newSystemData['技能提升'] : [newSystemData['技能提升']];\\n                        const currentSkills = _.cloneDeep(_.get(currentSystemData, '技能', []));\\n                        skillUpdates.forEach((update) => {\\n                            const skillIndex = currentSkills.findIndex((s) => s['名称'] === update['名称']);\\n                            if (skillIndex > -1) {\\n                                // 更新现有技能\\n                                const skill = currentSkills[skillIndex];\\n                                const currentExp = skill['熟练度'] || { value: 0, max: 100 };\\n                                currentExp.value += update['熟练度增加'] || 0;\\n                                // 处理升级\\n                                while (currentExp.value >= currentExp.max) {\\n                                    currentExp.value -= currentExp.max;\\n                                    skill['等级'] = (skill['等级'] || 1) + 1;\\n                                    // 升级后熟练度上限可能会增加，这里简化处理，实际可扩展\\n                                    currentExp.max = Math.floor(currentExp.max * 1.5);\\n                                    toastr.success(`你的技能【${skill['名称']}】升级了！`, '恭喜！');\\n                                }\\n                                skill['熟练度'] = currentExp;\\n                            }\\n                            else {\\n                                // 添加新技能\\n                                currentSkills.push({\\n                                    '名称': update['名称'],\\n                                    '等级': 1,\\n                                    '熟练度': { value: update['熟练度增加'] || 0, max: 100 }\\n                                });\\n                                toastr.info(`你学会了新技能：【${update['名称']}】！`);\\n                            }\\n                        });\\n                        currentSystemData['技能'] = currentSkills;\\n                        if (newSystemData['提示'])\\n                            currentSystemData['提示'] = newSystemData['提示'];\\n                        updates['世界.系统'] = currentSystemData;\\n                        console.log(`[StoryRenderer] 检测到技能提升事件，已更新技能数据。`);\\n                    }\\n                    else if (newSystemData['物品交换']) {\\n                        const exchange = newSystemData['物品交换'];\\n                        if (exchange['成功']) {\\n                            const charListKey = this.findFieldByKeywords(rootData, ['角色', '列表', '人物']);\\n                            if (charListKey && Array.isArray(rootData[charListKey]) && rootData[charListKey].length > 0) {\\n                                const charContainer = rootData[charListKey][0];\\n                                const charDataKey = Object.keys(charContainer)[0];\\n                                const charData = charContainer[charDataKey];\\n                                const nameKey = this.findFieldByKeywords(charData, ['姓名', '名称']);\\n                                if (nameKey) {\\n                                    const charName = this.formatNodeName(charData[nameKey], true);\\n                                    const itemsVarPath = `角色.${charName}.物品`;\\n                                    const currentItems = _.cloneDeep(_.get(currentVars, itemsVarPath, []));\\n                                    // 处理失去的物品\\n                                    (exchange['交换物品']['失去'] || []).forEach((itemText) => {\\n                                        const match = itemText.match(/【(.+?)】x(\\\\d+)/);\\n                                        if (match) {\\n                                            const itemName = match[1];\\n                                            const amountToRemove = parseInt(match[2], 10);\\n                                            const existingItemIndex = currentItems.findIndex((item) => item.includes(itemName));\\n                                            if (existingItemIndex > -1) {\\n                                                const existingItemText = currentItems[existingItemIndex];\\n                                                const existingAmountMatch = existingItemText.match(/x(\\\\d+)/);\\n                                                const existingAmount = existingAmountMatch ? parseInt(existingAmountMatch[1], 10) : 1;\\n                                                const newAmount = existingAmount - amountToRemove;\\n                                                if (newAmount > 0) {\\n                                                    currentItems[existingItemIndex] = `【${itemName}】x${newAmount}`;\\n                                                }\\n                                                else {\\n                                                    currentItems.splice(existingItemIndex, 1);\\n                                                }\\n                                            }\\n                                        }\\n                                    });\\n                                    // 处理获得的物品\\n                                    (exchange['交换物品']['获得'] || []).forEach((itemText) => {\\n                                        const match = itemText.match(/【(.+?)】x(\\\\d+)/);\\n                                        if (match) {\\n                                            const itemName = match[1];\\n                                            const amountToAdd = parseInt(match[2], 10);\\n                                            const existingItemIndex = currentItems.findIndex((item) => item.includes(itemName));\\n                                            if (existingItemIndex > -1) {\\n                                                const existingItemText = currentItems[existingItemIndex];\\n                                                const existingAmountMatch = existingItemText.match(/x(\\\\d+)/);\\n                                                const existingAmount = existingAmountMatch ? parseInt(existingAmountMatch[1], 10) : 1;\\n                                                const newAmount = existingAmount + amountToAdd;\\n                                                currentItems[existingItemIndex] = `【${itemName}】x${newAmount}`;\\n                                            }\\n                                            else {\\n                                                currentItems.push(`【${itemName}】x${amountToAdd}`);\\n                                            }\\n                                        }\\n                                    });\\n                                    updates[itemsVarPath] = currentItems;\\n                                }\\n                            }\\n                            toastr.success(exchange['提示'] || '交换成功！');\\n                        }\\n                        else {\\n                            toastr.warning(exchange['提示'] || '交换失败。');\\n                        }\\n                        // 不管成功与否，都更新系统提示\\n                        if (newSystemData['提示'])\\n                            currentSystemData['提示'] = newSystemData['提示'];\\n                        updates['世界.系统'] = currentSystemData;\\n                        console.log(`[StoryRenderer] 检测到物品交换事件，已处理。`);\\n                    }\\n                    else if (newSystemData['物品变化']) {\\n                        const change = newSystemData['物品变化'];\\n                        const charListKey = this.findFieldByKeywords(rootData, ['角色', '列表', '人物']);\\n                        if (charListKey && Array.isArray(rootData[charListKey]) && rootData[charListKey].length > 0) {\\n                            const charContainer = rootData[charListKey][0];\\n                            const charDataKey = Object.keys(charContainer)[0];\\n                            const charData = charContainer[charDataKey];\\n                            const nameKey = this.findFieldByKeywords(charData, ['姓名', '名称']);\\n                            if (nameKey) {\\n                                const charName = this.formatNodeName(charData[nameKey], true);\\n                                const itemsVarPath = `角色.${charName}.物品`;\\n                                const currentItems = _.cloneDeep(_.get(currentVars, itemsVarPath, []));\\n                                // 统一处理物品数量变化的函数\\n                                const updateItemCount = (itemList, amountModifier) => {\\n                                    (itemList || []).forEach((itemText) => {\\n                                        const match = itemText.match(/【(.+?)】x(\\\\d+)/);\\n                                        if (match) {\\n                                            const itemName = match[1];\\n                                            const amount = parseInt(match[2], 10) * amountModifier;\\n                                            const existingItemIndex = currentItems.findIndex((item) => item.includes(`【${itemName}】`));\\n                                            if (existingItemIndex > -1) {\\n                                                const existingItemText = currentItems[existingItemIndex];\\n                                                const existingAmountMatch = existingItemText.match(/x(\\\\d+)/);\\n                                                const existingAmount = existingAmountMatch ? parseInt(existingAmountMatch[1], 10) : 1;\\n                                                const newAmount = existingAmount + amount;\\n                                                if (newAmount > 0) {\\n                                                    currentItems[existingItemIndex] = `【${itemName}】x${newAmount}`;\\n                                                }\\n                                                else {\\n                                                    currentItems.splice(existingItemIndex, 1);\\n                                                }\\n                                            }\\n                                            else if (amount > 0) {\\n                                                currentItems.push(`【${itemName}】x${amount}`);\\n                                            }\\n                                        }\\n                                    });\\n                                };\\n                                updateItemCount(change['失去'], -1);\\n                                updateItemCount(change['获得'], 1);\\n                                updates[itemsVarPath] = currentItems;\\n                            }\\n                        }\\n                        toastr.info(change['提示'] || '物品发生了变化。');\\n                        if (newSystemData['提示'])\\n                            currentSystemData['提示'] = newSystemData['提示'];\\n                        updates['世界.系统'] = currentSystemData;\\n                        console.log(`[StoryRenderer] 检测到物品变化事件，已处理。`);\\n                    }\\n                    else if (newSystemData['庇护所升级']) {\\n                        const upgrade = newSystemData['庇护所升级'];\\n                        const shelterVarPath = '世界.庇护所';\\n                        const currentShelter = _.cloneDeep(_.get(currentVars, shelterVarPath, {}));\\n                        // 合并新旧数据\\n                        Object.keys(upgrade).forEach(key => {\\n                            if (key === '新增功能') {\\n                                const newFeatures = Array.isArray(upgrade[key]) ? upgrade[key] : [upgrade[key]];\\n                                const existingFeatures = currentShelter['功能'] || [];\\n                                currentShelter['功能'] = _.union(existingFeatures, newFeatures);\\n                            }\\n                            else if (key !== '提示') {\\n                                currentShelter[key] = upgrade[key];\\n                            }\\n                        });\\n                        updates[shelterVarPath] = currentShelter;\\n                        toastr.success(upgrade['提示'] || '庇护所已更新！', '家园新貌');\\n                        if (newSystemData['提示'])\\n                            currentSystemData['提示'] = newSystemData['提示'];\\n                        updates['世界.系统'] = currentSystemData;\\n                        console.log(`[StoryRenderer] 检测到庇护所升级事件，已处理。`);\\n                    }\\n                    else if (newSystemData['名称'] === '以物换物系统' && newSystemData['可换取的物品']) {\\n                        const refreshedItems = newSystemData['可换取的物品'];\\n                        const currentPokedexItems = _.cloneDeep(_.get(currentVars, '世界.图鉴.物品', []));\\n                        let newDiscoveries = 0;\\n                        refreshedItems.forEach((item) => {\\n                            if (item['名称'] && !currentPokedexItems.some((existing) => existing['名称'] === item['名称'])) {\\n                                const pokedexEntry = {\\n                                    '名称': item['名称'],\\n                                };\\n                                if (item['品阶'])\\n                                    pokedexEntry['品阶'] = item['品阶'];\\n                                if (item['描述'])\\n                                    pokedexEntry['描述'] = item['描述'];\\n                                currentPokedexItems.push(pokedexEntry);\\n                                newDiscoveries++;\\n                                toastr.info(`发现新物品：“${item['名称']}”，已自动收录图鉴！`);\\n                            }\\n                        });\\n                        if (newDiscoveries > 0) {\\n                            updates['世界.图鉴.物品'] = currentPokedexItems;\\n                            console.log(`[StoryRenderer] 以物换物刷新，新增 ${newDiscoveries} 个物品到图鉴。`);\\n                        }\\n                        // 同时更新系统本身的可交换物品列表\\n                        const systemDataToUpdate = _.cloneDeep(_.get(currentVars, '世界.系统', {}));\\n                        systemDataToUpdate['可换取的物品'] = refreshedItems;\\n                        if (newSystemData['提示'])\\n                            systemDataToUpdate['提示'] = newSystemData['提示'];\\n                        updates['世界.系统'] = systemDataToUpdate;\\n                        console.log(`[StoryRenderer] 检测到以物换物系统刷新，已更新可交换物品列表。`);\\n                    }\\n                    else if (newSystemData['新物品发现']) {\\n                        const newItems = Array.isArray(newSystemData['新物品发现']) ? newSystemData['新物品发现'] : [newSystemData['新物品发现']];\\n                        const currentPokedex = _.cloneDeep(_.get(currentVars, '世界.图鉴.物品', []));\\n                        newItems.forEach((item) => {\\n                            if (!currentPokedex.some((existing) => existing['名称'] === item['名称'])) {\\n                                currentPokedex.push(item);\\n                                toastr.info(`新的物品“${item['名称']}”已添加到图鉴！`);\\n                            }\\n                        });\\n                        updates['世界.图鉴.物品'] = currentPokedex;\\n                        console.log(`[StoryRenderer] 检测到新物品发现事件，已更新物品图鉴。`);\\n                    }\\n                    else if (!_.has(currentVars, '世界.系统')) {\\n                        // 如果变量中没有系统数据，则尝试从JSON进行初始化\\n                        const systemDataInJson = this.findFieldByKeywords(rootData, ['系统']);\\n                        if (systemDataInJson && rootData[systemDataInJson]) {\\n                            updates['世界.系统'] = rootData[systemDataInJson];\\n                            console.log(`[StoryRenderer] '世界.系统' 变量不存在，从JSON进行初始化。`);\\n                        }\\n                    }\\n                }\\n                for (const section of sectionsToSync) {\\n                    const dataKey = this.findFieldByKeywords(rootData, section.keyWords);\\n                    if (dataKey && rootData[dataKey]) {\\n                        const newData = rootData[dataKey];\\n                        // For pokedex, we need to merge arrays, not replace them\\n                        if (section.varPath.includes('图鉴')) {\\n                            const oldData = _.get(currentVars, section.varPath, []);\\n                            const combinedData = _.unionBy(oldData, newData['已收录'] || [], '名称');\\n                            if (!_.isEqual(oldData, combinedData)) {\\n                                _.set(updates, section.varPath, combinedData);\\n                            }\\n                        }\\n                        else {\\n                            const oldData = _.get(currentVars, section.varPath);\\n                            if (!_.isEqual(newData, oldData)) {\\n                                _.set(updates, section.varPath, newData);\\n                            }\\n                        }\\n                    }\\n                }\\n                // 同步角色物品\\n                const charListKey = this.findFieldByKeywords(rootData, ['角色', '列表', '人物']);\\n                if (charListKey && Array.isArray(rootData[charListKey])) {\\n                    rootData[charListKey].forEach((charContainer) => {\\n                        const charDataKey = Object.keys(charContainer)[0];\\n                        const charData = charContainer[charDataKey];\\n                        if (charData && typeof charData === 'object') {\\n                            const nameKey = this.findFieldByKeywords(charData, ['姓名', '名称']);\\n                            const itemsKey = this.findFieldByKeywords(charData, ['物品', '核心物品']);\\n                            if (nameKey && itemsKey && charData[nameKey] && Array.isArray(charData[itemsKey])) {\\n                                const charName = this.formatNodeName(charData[nameKey], true);\\n                                const newItems = charData[itemsKey];\\n                                const varPath = `角色.${charName}.物品`;\\n                                const oldItems = _.get(currentVars, varPath);\\n                                if (!_.isEqual(newItems, oldItems)) {\\n                                    _.set(updates, varPath, newItems);\\n                                }\\n                            }\\n                        }\\n                    });\\n                }\\n                if (!_.isEmpty(updates)) {\\n                    console.log(`[StoryRenderer] Message ${currentMessageId} > ${lastSyncId}. 检测到变量变化，正在更新:`, updates);\\n                    // 将 lastSyncMessageId 也加入到更新中\\n                    updates['世界.lastSyncMessageId'] = currentMessageId;\\n                    await insertOrAssignVariables(updates, { type: 'message', message_id: currentMessageId });\\n                    toastr.info(`状态栏(M${currentMessageId})已同步楼层变量。`);\\n                }\\n                else {\\n                    console.log(`[StoryRenderer] Message ${currentMessageId} >= ${lastSyncId}. 未检测到变量变化。`);\\n                }\\n            }\\n            else {\\n                console.log(`[StoryRenderer] 跳过旧的状态栏(M${currentMessageId})同步，最新记录为 M${lastSyncId}。`);\\n            }\\n        }\\n        catch (error) {\\n            console.error('变量同步失败:', error);\\n            toastr.error('变量同步失败，请查看控制台。');\\n        }\\n    }\\n    createCharacterCard(charData) {\\n        const titleKey = Object.keys(charData)[0];\\n        const attributes = charData[titleKey];\\n        if (!titleKey || !attributes)\\n            return null;\\n        const card = document.createElement('div');\\n        card.className = 'bg-main rounded-xl border border-dim p-3.5 shadow-sm card-hover theme-transition';\\n        const h3 = document.createElement('h3');\\n        h3.className = 'font-bold text-lg mb-2 pb-1 border-b border-dim theme-transition';\\n        h3.innerHTML = `${this.extractEmojis(titleKey)[0] || ''} ${this.formatNodeName(titleKey, true)}`;\\n        card.appendChild(h3);\\n        const list = document.createElement('ul');\\n        list.className = 'space-y-2 text-sm';\\n        card.appendChild(list);\\n        if (typeof attributes === 'object' && attributes !== null && !Array.isArray(attributes)) {\\n            Object.entries(attributes).forEach(([key, value]) => {\\n                list.appendChild(this.createAttributeItem(key, value));\\n            });\\n        }\\n        else if (Array.isArray(attributes)) { // Handle case where attributes is an array of entries\\n            attributes.forEach(entry => {\\n                const entryName = entry['名称'] || '未知条目';\\n                const li = document.createElement('li');\\n                li.className = 'clickable-item';\\n                li.dataset.details = JSON.stringify(entry);\\n                li.innerHTML = `• ${this.formatNodeName(entryName)}`;\\n                list.appendChild(li);\\n            });\\n        }\\n        return card;\\n    }\\n    createAttributeItem(key, value) {\\n        const item = document.createElement('li');\\n        const emoji = this.extractEmojis(key)[0] || '🔸';\\n        const keyHtml = `<span class=\\\"font-medium text-accent\\\">${emoji} ${this.formatNodeName(key, true)}:</span>`;\\n        const isCoreItems = key.includes('核心物品');\\n        if (typeof value === 'object' && value !== null && !Array.isArray(value) && 'value' in value && 'max' in value && typeof value.value === 'number' && typeof value.max === 'number') {\\n            item.innerHTML = keyHtml;\\n            const percentage = (value.value / value.max) * 100;\\n            const container = document.createElement('div');\\n            container.className = 'flex items-center space-x-2 mt-1';\\n            const progressBarWrapper = document.createElement('div');\\n            progressBarWrapper.className = 'progress-bar-bg w-full rounded-full h-2.5';\\n            const progressBar = document.createElement('div');\\n            progressBar.className = 'progress-bar-fg h-2.5 rounded-full';\\n            progressBar.style.width = `${percentage}%`;\\n            if (percentage < 25)\\n                progressBar.classList.add('bg-red-500');\\n            else if (percentage < 50)\\n                progressBar.classList.add('bg-yellow-500');\\n            else\\n                progressBar.classList.add('bg-green-500');\\n            progressBarWrapper.appendChild(progressBar);\\n            const progressText = document.createElement('span');\\n            progressText.className = 'text-xs text-secondary font-mono';\\n            progressText.textContent = `${value.value} / ${value.max}`;\\n            container.appendChild(progressBarWrapper);\\n            container.appendChild(progressText);\\n            item.appendChild(container);\\n        }\\n        else if (typeof value === 'object' && value !== null) {\\n            item.innerHTML = keyHtml;\\n            const subList = document.createElement('ul');\\n            subList.className = 'list-disc list-inside ml-4 mt-1 space-y-1';\\n            if (Array.isArray(value)) {\\n                value.forEach(subValue => {\\n                    const subItem = document.createElement('li');\\n                    let text;\\n                    if (isCoreItems && typeof subValue === 'string') {\\n                        const itemName = this.formatNodeName(subValue, true).replace(/【|】|x\\\\d+/g, '').trim();\\n                        const pokedexEntry = this.globalPokedex?.['物品']?.find(e => e.名称 === itemName);\\n                        if (pokedexEntry) {\\n                            subItem.classList.add('clickable-item');\\n                            subItem.dataset.details = JSON.stringify(pokedexEntry);\\n                        }\\n                        text = this.formatNodeName(String(subValue));\\n                    }\\n                    else if (typeof subValue === 'object' && subValue !== null) {\\n                        subItem.classList.add('clickable-item');\\n                        subItem.dataset.details = JSON.stringify(subValue);\\n                        const nameKey = Object.keys(subValue).find(k => k.includes('名称') || k.includes('姓名'));\\n                        text = nameKey ? this.formatNodeName(String(subValue[nameKey])) : '点击查看详情';\\n                    }\\n                    else {\\n                        text = this.formatNodeName(String(subValue));\\n                    }\\n                    subItem.innerHTML = `${this.extractEmojis(text)[0] || '•'} ${this.formatNodeName(text, true)}`;\\n                    subList.appendChild(subItem);\\n                });\\n            }\\n            else {\\n                Object.entries(value).forEach(([subKey, subValue]) => {\\n                    const subItem = this.createAttributeItem(subKey, subValue);\\n                    subList.appendChild(subItem);\\n                });\\n            }\\n            item.appendChild(subList);\\n        }\\n        else {\\n            item.innerHTML = `${keyHtml} ${this.formatNodeName(String(value))}`;\\n        }\\n        return item;\\n    }\\n    renderActionOptions(data) {\\n        const actionKey = this.findFieldByKeywords(data, ['行动']);\\n        if (this.elements.optionsList) {\\n            this.elements.optionsList.innerHTML = '';\\n            if (actionKey && data[actionKey]) {\\n                const actionData = data[actionKey];\\n                const ownerKey = this.findFieldByKeywords(actionData, ['行动人', '角色']);\\n                const optionsKey = this.findFieldByKeywords(actionData, ['可选行动', '选项']);\\n                if (ownerKey && this.elements.actionOwner) {\\n                    this.elements.actionOwner.textContent = this.formatNodeName(actionData[ownerKey]);\\n                }\\n                if (optionsKey && Array.isArray(actionData[optionsKey])) {\\n                    actionData[optionsKey].forEach((optionText, index) => {\\n                        const item = document.createElement('li');\\n                        item.className = 'pl-2 py-1 border-l-2 border-dim ml-1 hover:border-indigo-400/70 transition-colors theme-transition';\\n                        const cleanText = this.formatNodeName(optionText, true);\\n                        item.innerHTML = `${this.extractEmojis(optionText)[0] || '▶️'} ${cleanText}`;\\n                        item.dataset.optionIndex = index.toString();\\n                        item.dataset.optionText = cleanText;\\n                        this.elements.optionsList.appendChild(item);\\n                    });\\n                }\\n                const customActionItem = document.createElement('li');\\n                customActionItem.className = 'pl-2 py-1 border-l-2 border-dim ml-1 hover:border-indigo-400/70 transition-colors theme-transition mt-4';\\n                customActionItem.innerHTML = `<i class=\\\"fas fa-pen-nib mr-2 text-accent\\\"></i> 自定义行动...`;\\n                customActionItem.dataset.actionType = 'custom';\\n                this.elements.optionsList.appendChild(customActionItem);\\n            }\\n            else {\\n                this.elements.optionsList.innerHTML = this.createEmptyState('没有可用行动');\\n            }\\n        }\\n    }\\n    createEmptyState(message) {\\n        return `<li class=\\\"text-center py-4 text-secondary theme-transition\\\"><i class=\\\"fas fa-info-circle mr-1\\\"></i>${message}</li>`;\\n    }\\n    handleError(error) {\\n        console.error('渲染错误:', error);\\n        const errorHtml = `<div class=\\\"bg-red-900/20 border border-red-800/30 text-red-400 px-4 py-3 rounded relative\\\" role=\\\"alert\\\">\\n            <strong class=\\\"font-bold\\\">加载失败: </strong>\\n            <span class=\\\"block sm:inline\\\">${error.message}</span>\\n        </div>`;\\n        if (this.elements.charactersContainer)\\n            this.elements.charactersContainer.innerHTML = errorHtml;\\n        if (this.elements.optionsList)\\n            this.elements.optionsList.innerHTML = `<li>${errorHtml}</li>`;\\n        const actionOwnerParent = this.elements.actionOwner?.parentElement;\\n        if (actionOwnerParent)\\n            actionOwnerParent.style.display = 'none';\\n    }\\n    handleParsingFailure(rawText, error) {\\n        if (this.elements.statusBarTitle)\\n            this.elements.statusBarTitle.textContent = 'JSON解析失败';\\n        const safeRawText = String(rawText || '');\\n        let errorMessage = \\\"未知错误\\\";\\n        if (error instanceof Error) {\\n            errorMessage = error.message;\\n        }\\n        else {\\n            errorMessage = String(error);\\n        }\\n        const errorHtml = `\\n            <div class=\\\"bg-orange-800/20 border border-orange-700/30 text-orange-300 px-4 py-3 rounded-lg relative\\\" role=\\\"alert\\\">\\n                <strong class=\\\"font-bold\\\">解析失败:</strong>\\n                <span class=\\\"block sm:inline\\\">${errorMessage}</span>\\n                <p class=\\\"mt-2 text-sm\\\">已为您显示原始输出内容，请检查格式：</p>\\n            </div>\\n            <pre class=\\\"bg-gray-900/50 text-white p-4 rounded-lg mt-2 whitespace-pre-wrap text-xs leading-relaxed\\\"><code>${safeRawText.replace(/</g, '<').replace(/>/g, '>')}</code></pre>\\n        `;\\n        if (this.elements.charactersContainer) {\\n            this.elements.charactersContainer.innerHTML = errorHtml;\\n            this.elements.charactersContainer.classList.remove('md:grid-cols-2');\\n        }\\n        if (this.elements.optionsList)\\n            this.elements.optionsList.innerHTML = '';\\n        const actionOwnerParent = this.elements.actionOwner?.parentElement;\\n        if (actionOwnerParent)\\n            actionOwnerParent.style.display = 'none';\\n    }\\n    extractEmojis(text) {\\n        if (!_.isString(text)) {\\n            return [];\\n        }\\n        const emojiRegex = /[\\\\u{1F600}-\\\\u{1F64F}\\\\u{1F300}-\\\\u{1F5FF}\\\\u{1F900}-\\\\u{1F9FF}\\\\u{1FA70}-\\\\u{1FAFF}\\\\u{1F680}-\\\\u{1F6FF}\\\\u{1F1E0}-\\\\u{1F1FF}\\\\u{2600}-\\\\u{26FF}\\\\u{2700}-\\\\u{27BF}]/gu;\\n        return text.match(emojiRegex) || [];\\n    }\\n    formatNodeName(name, removeAllEmoji = false) {\\n        if (!_.isString(name) && !_.isNumber(name)) {\\n            return '';\\n        }\\n        let cleanName = _.toString(name);\\n        cleanName = _.replace(cleanName, /^\\\\d+\\\\.\\\\s*/, '');\\n        if (removeAllEmoji) {\\n            const emojiRegex = /[\\\\u{1F600}-\\\\u{1F64F}\\\\u{1F300}-\\\\u{1F5FF}\\\\u{1F680}-\\\\u{1F6FF}\\\\u{1F1E0}-\\\\u{1F1FF}\\\\u{2600}-\\\\u{26FF}\\\\u{2700}-\\\\u{27BF}]/gu;\\n            cleanName = _.replace(cleanName, emojiRegex, '');\\n        }\\n        return _.trim(cleanName);\\n    }\\n}\\nfunction initCustomActionModal() {\\n    const modal = $('#custom-action-modal');\\n    const input = $('#custom-action-input');\\n    const confirmBtn = $('#confirm-action-btn');\\n    const cancelBtn = $('#cancel-action-btn');\\n    const optionsList = $('#options-list');\\n    let currentTarget = null;\\n    const showModal = (target) => {\\n        currentTarget = target;\\n        modal.insertAfter(target);\\n        modal.removeClass('hidden').addClass('is-open');\\n        input.val('').trigger('focus');\\n    };\\n    const hideModal = () => {\\n        if (currentTarget) {\\n            modal.removeClass('is-open').addClass('hidden');\\n            optionsList.append(modal);\\n            currentTarget = null;\\n        }\\n    };\\n    const confirmAction = async () => {\\n        const userInput = input.val().trim();\\n        if (userInput) {\\n            hideModal();\\n            toastr.info('正在执行自定义行动...');\\n            try {\\n                const messageId = getCurrentMessageId();\\n                const variables = getVariables({ type: 'message', message_id: messageId });\\n                const variablesString = JSON.stringify(variables, null, 2);\\n                const preamble = `[OOC: 以下是发送给你的、用于驱动剧情的完整游戏状态。请仔细阅读并依据此状态和我选择的行动来生成后续情节。]\\\\n\\\\n**当前游戏状态**:\\\\n这是当前楼层的所有变量信息，它代表了游戏世界的完整快照，包括角色状态、物品、图鉴、系统进度等。请将这些信息作为你生成回应的唯一真实来源。`;\\n                const wrappedContent = `<Variables>\\\\n${preamble}\\\\n\\\\n${variablesString}\\\\n</Variables>`;\\n                const messageToSend = `${wrappedContent}\\\\n\\\\n${userInput}`;\\n                await createChatMessages([\\n                    {\\n                        role: 'user',\\n                        message: messageToSend,\\n                        data: variables,\\n                    },\\n                ], { refresh: 'none' });\\n                await triggerSlash('/trigger');\\n                toastr.success('自定义行动已发送！');\\n            }\\n            catch (error) {\\n                console.error('自定义行动失败:', error);\\n                toastr.error('自定义行动失败，请查看控制台日志。');\\n            }\\n        }\\n        else {\\n            toastr.warning('请输入行动内容。');\\n        }\\n    };\\n    cancelBtn.on('click', hideModal);\\n    confirmBtn.on('click', confirmAction);\\n    return { showModal };\\n}\\nfunction initDetailsModal() {\\n    const modalOverlay = document.getElementById('details-modal');\\n    const modalTitle = document.getElementById('modal-title');\\n    const modalBody = document.getElementById('modal-body');\\n    const closeModalBtn = document.getElementById('modal-close-btn');\\n    if (!modalOverlay || !modalTitle || !modalBody || !closeModalBtn) {\\n        throw new Error('详情模态框的必要DOM元素未找到！');\\n    }\\n    const hideModal = () => modalOverlay.classList.add('hidden');\\n    closeModalBtn.addEventListener('click', hideModal);\\n    modalOverlay.addEventListener('click', (e) => {\\n        if (e.target === modalOverlay)\\n            hideModal();\\n    });\\n    const showModalWithData = (data) => {\\n        if (typeof data === 'object' && data !== null) {\\n            const titleKey = Object.keys(data).find(k => k.includes('名称') || k.includes('姓名'));\\n            modalTitle.textContent = titleKey ? data[titleKey] : '详情';\\n            let bodyHtml = '<ul>';\\n            for (const [key, value] of Object.entries(data)) {\\n                bodyHtml += `<li><span class=\\\"item-key\\\">${key}:</span> ${value}</li>`;\\n            }\\n            bodyHtml += '</ul>';\\n            modalBody.innerHTML = bodyHtml;\\n        }\\n        else {\\n            modalTitle.textContent = '详情';\\n            modalBody.textContent = String(data);\\n        }\\n        modalOverlay.classList.remove('hidden');\\n    };\\n    document.body.addEventListener('click', (e) => {\\n        const target = e.target;\\n        const clickableItem = target.closest('.clickable-item');\\n        if (clickableItem) {\\n            const dataString = clickableItem.dataset.details;\\n            if (dataString) {\\n                try {\\n                    const data = JSON.parse(dataString);\\n                    showModalWithData(data);\\n                }\\n                catch (err) {\\n                    console.error(\\\"解析详情数据失败:\\\", err);\\n                    toastr.error(\\\"无法显示详情。\\\");\\n                }\\n            }\\n        }\\n    });\\n    return { showModalWithData };\\n}\\nasync function requestSystemRefresh(systemName, button) {\\n    const originalContent = button.html();\\n    button.prop('disabled', true).find('i').addClass('fa-spin');\\n    const command = `/send [SYSTEM] 【${systemName}系统】：“让我看看……有什么新东西可以给你……”（玩家请求刷新${systemName}列表） | /trigger`;\\n    toastr.info(`正在请求刷新${systemName}...`);\\n    try {\\n        await triggerSlash(command);\\n        toastr.success(`刷新请求已发送！`);\\n    }\\n    catch (error) {\\n        console.error(`刷新${systemName}失败:`, error);\\n        toastr.error(\\\"请求失败，请查看控制台。\\\");\\n    }\\n    finally {\\n        setTimeout(() => {\\n            button.prop('disabled', false).html(originalContent);\\n        }, 1000);\\n    }\\n}\\nfunction initRewardsModal() {\\n    const modal = document.getElementById('rewards-modal');\\n    const closeModalBtn = document.getElementById('rewards-modal-close-btn');\\n    const modalBody = document.getElementById('rewards-modal-body');\\n    const refreshBtn = document.getElementById('refresh-rewards-btn');\\n    const hideModal = () => modal?.classList.add('hidden');\\n    closeModalBtn?.addEventListener('click', hideModal);\\n    modal?.addEventListener('click', (e) => {\\n        if (e.target === modal)\\n            hideModal();\\n    });\\n    refreshBtn?.addEventListener('click', (e) => {\\n        requestSystemRefresh('成就奖励', $(e.currentTarget));\\n    });\\n    const showModalWithRewards = (rewardsJsonString, currentPoints) => {\\n        if (!modalBody)\\n            return;\\n        try {\\n            const rewardsData = JSON.parse(rewardsJsonString);\\n            let html = `<p class=\\\"text-sm text-secondary mb-4\\\">${rewardsData.description || ''}</p>`;\\n            const isMobile = window.innerWidth < 768;\\n            rewardsData.tiers?.forEach((tier) => {\\n                html += `\\n          <details class=\\\"group border-t border-dim mt-4 pt-2\\\" ${isMobile ? '' : 'open'}>\\n            <summary class=\\\"font-bold text-lg cursor-pointer hover:text-accent transition-colors theme-transition flex justify-between items-center py-2\\\">\\n              <span>${tier.tier_name || '奖励'} <span class=\\\"text-sm text-secondary font-normal\\\">(${tier.cost_range || ''})</span></span>\\n              <i class=\\\"fas fa-chevron-down transition-transform duration-300 group-open:rotate-180\\\"></i>\\n            </summary>\\n            <ul class=\\\"space-y-3 mt-2\\\">\\n        `;\\n                tier.rewards?.forEach((reward) => {\\n                    const canAfford = currentPoints >= reward.cost;\\n                    html += `\\n            <li class=\\\"p-4 rounded-lg bg-secondary border border-dim\\\">\\n              <div class=\\\"flex justify-between items-start\\\">\\n                <div>\\n                  <p class=\\\"font-semibold text-primary\\\">${reward.name || '未知奖励'}</p>\\n                  <p class=\\\"text-xs text-secondary mt-1\\\">${reward.description || ''}</p>\\n                </div>\\n                <button \\n                  class=\\\"btn-primary redeem-btn whitespace-nowrap ml-4 text-sm\\\"\\n                  data-name=\\\"${reward.name}\\\" \\n                  data-cost=\\\"${reward.cost}\\\"\\n                  ${!canAfford ? 'disabled' : ''}\\n                >\\n                  ${reward.cost} <i class=\\\"fas fa-star text-xs\\\"></i>\\n                </button>\\n              </div>\\n            </li>\\n          `;\\n                });\\n                html += '</ul></details>';\\n            });\\n            modalBody.innerHTML = html;\\n        }\\n        catch (error) {\\n            console.error(\\\"解析奖励JSON失败:\\\", error);\\n            toastr.error(\\\"无法解析奖励列表。\\\");\\n            modalBody.innerHTML = `<p class=\\\"text-red-400\\\">加载奖励失败，请检查世界书条目格式。</p>`;\\n        }\\n        modal?.classList.remove('hidden');\\n    };\\n    modalBody?.addEventListener('click', async (e) => {\\n        const target = e.target;\\n        if (target.classList.contains('redeem-btn')) {\\n            const itemName = target.dataset.name;\\n            const itemCost = parseInt(target.dataset.cost || '0', 10);\\n            const command = `/send [SYSTEM] Player wants to redeem the reward: \\\"${itemName}\\\" (Cost: ${itemCost} points). | /trigger`;\\n            toastr.info(`正在尝试兑换: ${itemName}...`);\\n            try {\\n                await triggerSlash(command);\\n                toastr.success(`兑换请求已发送！`);\\n                hideModal();\\n            }\\n            catch (error) {\\n                console.error(\\\"兑换失败:\\\", error);\\n                toastr.error(\\\"兑换失败，请查看控制台。\\\");\\n            }\\n        }\\n    });\\n    return { showModalWithRewards };\\n}\\nfunction initRemoteSyncModal(showModalWithData) {\\n    const openModalBtn = document.getElementById('remote-sync-btn');\\n    const modal = document.getElementById('remote-sync-modal');\\n    const closeModalBtn = document.getElementById('remote-sync-close-btn');\\n    const tabs = modal?.querySelectorAll('.main-tab-btn');\\n    const submitTab = document.getElementById('remote-submit-tab');\\n    const fetchTab = document.getElementById('remote-fetch-tab');\\n    const localDiffList = document.getElementById('local-diff-list');\\n    const remoteDiffList = document.getElementById('remote-diff-list');\\n    const fetchRemoteBtn = document.getElementById('fetch-from-remote-btn');\\n    const submitControls = document.getElementById('submit-to-remote-controls');\\n    const importControls = document.getElementById('import-from-remote-controls');\\n    const submitToRemoteBtn = document.getElementById('submit-to-remote-btn');\\n    const importFromRemoteBtn = document.getElementById('import-from-remote-btn');\\n    let remoteDataCache = null;\\n    const showModal = async () => {\\n        modal?.classList.remove('hidden');\\n        // Default to submit tab\\n        tabs?.forEach(t => t.getAttribute('data-tab') === 'submit' ? t.classList.add('active') : t.classList.remove('active'));\\n        submitTab?.classList.remove('hidden');\\n        fetchTab?.classList.add('hidden');\\n        submitControls?.classList.remove('hidden');\\n        importControls?.classList.add('hidden');\\n        fetchRemoteBtn?.classList.add('hidden');\\n        await populateSubmitList();\\n    };\\n    const hideModal = () => modal?.classList.add('hidden');\\n    const populateSubmitList = async () => {\\n        if (!localDiffList)\\n            return;\\n        localDiffList.innerHTML = `<p class=\\\"text-center text-secondary p-4\\\">正在计算差异...</p>`;\\n        const localPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\\n        const localAchievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\\n        const remote = remoteDataCache || await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getRemotePokedex();\\n        if (remote)\\n            remoteDataCache = remote;\\n        let diffHtml = '';\\n        let diffCount = 0;\\n        const types = ['妖兽', '植物', '物品', '成就'];\\n        types.forEach(type => {\\n            const localEntries = type === '成就' ? localAchievements : localPokedex[type];\\n            const remoteEntries = remote ? (remote[type] || []) : [];\\n            const remoteNames = new Set(remoteEntries.map(e => e.名称));\\n            const diffEntries = localEntries.filter(e => !remoteNames.has(e.名称));\\n            if (diffEntries.length > 0) {\\n                diffCount += diffEntries.length;\\n                diffHtml += `<h4 class=\\\"font-semibold text-primary/90 mt-2 first:mt-0\\\">${type}</h4><ul>`;\\n                diffEntries.forEach(entry => {\\n                    diffHtml += `\\n            <li class=\\\"p-2 rounded-lg bg-main/50 flex justify-between items-center\\\">\\n              <label class=\\\"flex items-center cursor-pointer flex-grow mr-4\\\">\\n                <input type=\\\"checkbox\\\" class=\\\"mr-3\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\">\\n                <span class=\\\"truncate\\\" title=\\\"${entry.名称}\\\">${entry.名称}</span>\\n              </label>\\n              <div class=\\\"space-x-2 flex-shrink-0\\\">\\n                <button class=\\\"pokedex-view-btn text-sm text-blue-400 hover:text-blue-300 transition-colors p-1\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\" data-source=\\\"local\\\" title=\\\"查看\\\"><i class=\\\"fas fa-eye\\\"></i></button>\\n              </div>\\n            </li>`;\\n                });\\n                diffHtml += `</ul>`;\\n            }\\n        });\\n        if (diffCount === 0) {\\n            localDiffList.innerHTML = `<p class=\\\"text-center text-secondary p-4\\\">恭喜！您的本地图鉴已全部同步至社区。</p>`;\\n        }\\n        else {\\n            localDiffList.innerHTML = diffHtml;\\n        }\\n    };\\n    openModalBtn?.addEventListener('click', showModal);\\n    closeModalBtn?.addEventListener('click', hideModal);\\n    modal?.addEventListener('click', async (e) => {\\n        if (e.target === modal) {\\n            hideModal();\\n            return;\\n        }\\n        const target = e.target;\\n        const viewButton = target.closest('.pokedex-view-btn');\\n        if (viewButton) {\\n            const type = viewButton.getAttribute('data-type');\\n            const name = viewButton.getAttribute('data-name');\\n            const source = viewButton.getAttribute('data-source');\\n            if (type && name && source) {\\n                let entry;\\n                if (source === 'local') {\\n                    if (type === '成就') {\\n                        const localAchievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\\n                        entry = localAchievements.find(e => e.名称 === name);\\n                    }\\n                    else {\\n                        const localPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\\n                        entry = localPokedex[type]?.find(e => e.名称 === name);\\n                    }\\n                }\\n                else if (source === 'remote' && remoteDataCache) {\\n                    entry = (remoteDataCache[type] || []).find(e => e.名称 === name);\\n                }\\n                if (entry) {\\n                    showModalWithData(entry);\\n                }\\n                else {\\n                    toastr.warning('无法找到该条目的详细信息。');\\n                }\\n            }\\n        }\\n    });\\n    tabs?.forEach(button => {\\n        button.addEventListener('click', () => {\\n            tabs.forEach(btn => btn.classList.remove('active'));\\n            button.classList.add('active');\\n            const tab = button.getAttribute('data-tab');\\n            if (tab === 'submit') {\\n                submitTab?.classList.remove('hidden');\\n                fetchTab?.classList.add('hidden');\\n                submitControls?.classList.remove('hidden');\\n                importControls?.classList.add('hidden');\\n                fetchRemoteBtn?.classList.add('hidden');\\n                populateSubmitList();\\n            }\\n            else {\\n                submitTab?.classList.add('hidden');\\n                fetchTab?.classList.remove('hidden');\\n                submitControls?.classList.add('hidden');\\n                importControls?.classList.remove('hidden');\\n                fetchRemoteBtn?.classList.remove('hidden');\\n                if (remoteDiffList)\\n                    remoteDiffList.innerHTML = `<p class=\\\"text-center text-secondary p-4\\\">请先点击下方按钮从社区获取列表。</p>`;\\n            }\\n        });\\n    });\\n    fetchRemoteBtn?.addEventListener('click', async () => {\\n        if (!remoteDiffList)\\n            return;\\n        remoteDiffList.innerHTML = `<p class=\\\"text-center text-secondary p-4\\\">正在从社区获取...</p>`;\\n        const localPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\\n        const localAchievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\\n        const remote = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getRemotePokedex();\\n        if (!remote) {\\n            remoteDiffList.innerHTML = `<p class=\\\"text-center text-red-400 p-4\\\">获取失败，请检查服务器连接或查看控制台。</p>`;\\n            return;\\n        }\\n        remoteDataCache = remote;\\n        let diffHtml = '';\\n        let diffCount = 0;\\n        const types = ['妖兽', '植物', '物品', '成就'];\\n        types.forEach(type => {\\n            const localEntries = type === '成就' ? localAchievements : localPokedex[type];\\n            const localNames = new Set(localEntries.map(e => e.名称));\\n            const remoteEntries = remote[type] || [];\\n            const diffEntries = remoteEntries.filter(e => !localNames.has(e.名称));\\n            if (diffEntries.length > 0) {\\n                diffCount += diffEntries.length;\\n                diffHtml += `<h4 class=\\\"font-semibold text-primary/90 mt-2 first:mt-0\\\">${type}</h4><ul>`;\\n                diffEntries.forEach(entry => {\\n                    diffHtml += `\\n            <li class=\\\"p-2 rounded-lg bg-main/50 flex justify-between items-center\\\">\\n              <label class=\\\"flex items-center cursor-pointer flex-grow mr-4\\\">\\n                <input type=\\\"checkbox\\\" class=\\\"mr-3\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\">\\n                <span class=\\\"truncate\\\" title=\\\"${entry.名称}\\\">${entry.名称}</span>\\n              </label>\\n              <div class=\\\"space-x-2 flex-shrink-0\\\">\\n                <button class=\\\"pokedex-view-btn text-sm text-blue-400 hover:text-blue-300 transition-colors p-1\\\" data-type=\\\"${type}\\\" data-name=\\\"${entry.名称}\\\" data-source=\\\"remote\\\" title=\\\"查看\\\"><i class=\\\"fas fa-eye\\\"></i></button>\\n              </div>\\n            </li>`;\\n                });\\n                diffHtml += `</ul>`;\\n            }\\n        });\\n        if (diffCount === 0) {\\n            remoteDiffList.innerHTML = `<p class=\\\"text-center text-secondary p-4\\\">恭喜！您的本地图鉴与社区保持同步。</p>`;\\n        }\\n        else {\\n            remoteDiffList.innerHTML = diffHtml;\\n        }\\n    });\\n    submitToRemoteBtn?.addEventListener('click', async () => {\\n        const checkboxes = localDiffList?.querySelectorAll('input[type=\\\"checkbox\\\"]:checked');\\n        if (!checkboxes || checkboxes.length === 0) {\\n            toastr.warning('请至少选择一个要分享的条目。');\\n            return;\\n        }\\n        const providerInput = document.getElementById('provider-name-input');\\n        const providerName = providerInput?.value.trim() || undefined; // Use undefined if empty\\n        const localPokedex = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getPokedexData();\\n        const localAchievements = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.getAchievements();\\n        let successCount = 0;\\n        for (const cb of checkboxes) {\\n            const type = cb.dataset.type;\\n            const name = cb.dataset.name;\\n            if (type && name) {\\n                const entry = type === '成就'\\n                    ? localAchievements.find(e => e.名称 === name)\\n                    : localPokedex[type].find(e => e.名称 === name);\\n                if (entry) {\\n                    await _pokedex__WEBPACK_IMPORTED_MODULE_2__.submitToHuggingFace(type, entry, providerName);\\n                    successCount++;\\n                }\\n            }\\n        }\\n        if (successCount > 0) {\\n            toastr.success(`成功分享了 ${successCount} 个条目！`);\\n            remoteDataCache = null; // Invalidate cache\\n            await populateSubmitList();\\n        }\\n    });\\n    importFromRemoteBtn?.addEventListener('click', async () => {\\n        const checkboxes = remoteDiffList?.querySelectorAll('input[type=\\\"checkbox\\\"]:checked');\\n        if (!checkboxes || checkboxes.length === 0 || !remoteDataCache) {\\n            toastr.warning('请至少选择一个要导入的条目。');\\n            return;\\n        }\\n        let successCount = 0;\\n        for (const cb of checkboxes) {\\n            const type = cb.dataset.type;\\n            const name = cb.dataset.name;\\n            if (type && name) {\\n                const entry = (remoteDataCache[type] || []).find(e => e.名称 === name);\\n                if (entry) {\\n                    let success = false;\\n                    if (type === '成就') {\\n                        success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createAchievement(entry);\\n                    }\\n                    else {\\n                        success = await _pokedex__WEBPACK_IMPORTED_MODULE_2__.createPokedexEntry(type, entry);\\n                    }\\n                    if (success) {\\n                        successCount++;\\n                    }\\n                }\\n            }\\n        }\\n        if (successCount > 0) {\\n            toastr.success(`成功导入了 ${successCount} 个新条目到您的本地图鉴！`);\\n            hideModal();\\n        }\\n    });\\n}\\nasync function initVersionChecker() {\\n    const $versionBtn = $('#version-info-btn');\\n    if (!$versionBtn.length)\\n        return;\\n    // 页面加载时检查一次版本，用于显示更新提示红点\\n    const initialUpdateInfo = await (0,_version__WEBPACK_IMPORTED_MODULE_4__.checkForUpdates)();\\n    if (initialUpdateInfo?.hasUpdate) {\\n        $versionBtn.append('<span class=\\\"absolute top-0 right-0 block h-2 w-2 rounded-full ring-2 ring-white bg-red-500\\\"></span>');\\n    }\\n    // 每次点击都重新获取最新的changelog并显示\\n    $versionBtn.on('click', async () => {\\n        toastr.info('正在获取最新更新日志...');\\n        const changelogHtml = await (0,_version__WEBPACK_IMPORTED_MODULE_4__.getChangelog)();\\n        // 再次检查版本状态，以确定“立即更新”按钮是否显示\\n        const currentUpdateInfo = await (0,_version__WEBPACK_IMPORTED_MODULE_4__.checkForUpdates)();\\n        if (changelogHtml && currentUpdateInfo) {\\n            (0,_version__WEBPACK_IMPORTED_MODULE_4__.showChangelogModal)(changelogHtml, currentUpdateInfo.hasUpdate);\\n        }\\n        else {\\n            toastr.error('无法显示更新日志。');\\n        }\\n    });\\n}\\n$(() => {\\n    initGlobalControls();\\n    const storyRenderer = new StoryRenderer();\\n    const { showModalWithData } = initDetailsModal();\\n    initVersionChecker();\\n    initPokedexManager(storyRenderer, showModalWithData);\\n    initRemoteSyncModal(showModalWithData);\\n    storyRenderer.init();\\n    const customActionModal = initCustomActionModal();\\n    const rewardsModal = initRewardsModal();\\n    $(document).on('click', '#redeem-rewards-btn', async () => {\\n        try {\\n            toastr.info('正在获取奖励列表...');\\n            const bookName = \\\"什么？我要在玄幻修仙世界种田？\\\";\\n            const entryKey = \\\"成就系统的奖励\\\";\\n            const worldbook = await getWorldbook(bookName);\\n            const entry = worldbook.find(e => e.name === entryKey);\\n            if (entry && entry.content) {\\n                const messageId = getCurrentMessageId();\\n                const currentVars = getVariables({ type: 'message', message_id: messageId });\\n                const currentPoints = _.get(currentVars, '世界.系统.成就点数', 0);\\n                rewardsModal.showModalWithRewards(entry.content, currentPoints);\\n            }\\n            else {\\n                toastr.warning('未找到可兑换的奖励信息。');\\n            }\\n        }\\n        catch (error) {\\n            console.error(\\\"获取奖励失败:\\\", error);\\n            toastr.error(\\\"获取奖励列表失败，请查看控制台。\\\");\\n        }\\n    });\\n    $(document).on('click', '#sign-in-btn', async (e) => {\\n        const target = $(e.currentTarget);\\n        target.prop('disabled', true);\\n        const messageId = getCurrentMessageId();\\n        const variables = getVariables({ type: 'message', message_id: messageId });\\n        const systemData = _.get(variables, '世界.系统', {});\\n        const consecutiveDays = systemData['连续签到'] || 0;\\n        const monthlyCard = systemData['月卡'] || '未激活';\\n        let signInMessage = `[SYSTEM] 玩家要进行每日签到。`;\\n        if (monthlyCard !== '未激活') {\\n            signInMessage += `\\\\n当前月卡状态: ${monthlyCard}。`;\\n        }\\n        signInMessage += `\\\\n当前已连续签到: ${consecutiveDays}天。`;\\n        const command = `/send ${signInMessage} | /trigger`;\\n        try {\\n            await triggerSlash(command);\\n            toastr.success(`签到请求已发送！`);\\n            const today = new Date().getDate();\\n            const calendarGrid = $('#calendar-grid');\\n            const todayCell = calendarGrid.find(`[data-day=\\\"${today}\\\"]`);\\n            if (todayCell.length) {\\n                todayCell.removeClass('bg-accent/30 text-accent font-bold ring-2 ring-accent')\\n                    .addClass('bg-green-500/50 text-white')\\n                    .html('<i class=\\\"fas fa-check\\\"></i>')\\n                    .attr('title', `第${today}天：已签到`);\\n            }\\n            target.html('<i class=\\\"fas fa-calendar-check mr-2\\\"></i>今日已签到');\\n        }\\n        catch (error) {\\n            console.error(\\\"签到失败:\\\", error);\\n            toastr.error(\\\"签到失败，请查看控制台。\\\");\\n            target.prop('disabled', false);\\n        }\\n    });\\n    $(document).on('click', '#activate-monthly-card-btn', async (e) => {\\n        const target = $(e.currentTarget);\\n        target.prop('disabled', true).text('询问中...');\\n        const command = `/send [SYSTEM] 玩家想要激活签到系统的月卡，请告知激活条件和效果。 | /trigger`;\\n        toastr.info(`正在询问激活条件...`);\\n        try {\\n            await triggerSlash(command);\\n            toastr.success(`请求已发送！`);\\n        }\\n        catch (error) {\\n            console.error(\\\"激活月卡失败:\\\", error);\\n            toastr.error(\\\"请求失败，请查看控制台。\\\");\\n            target.prop('disabled', false).text('激活');\\n        }\\n    });\\n    $('#options-list').on('click', async (e) => {\\n        const targetLi = $(e.target).closest('li');\\n        if (!targetLi.length)\\n            return;\\n        const optionsList = $('#options-list');\\n        if (optionsList.hasClass('disabled')) {\\n            toastr.info('正在等待回应，请稍后...');\\n            return;\\n        }\\n        const actionType = targetLi.data('actionType');\\n        if (actionType === 'custom') {\\n            customActionModal.showModal(targetLi);\\n        }\\n        else {\\n            const optionText = targetLi.data('optionText');\\n            const optionIndex = parseInt(targetLi.data('optionIndex'), 10);\\n            if (optionText && !isNaN(optionIndex)) {\\n                // 禁用所有选项并显示加载状态\\n                optionsList.addClass('disabled').html(`\\n          <li class=\\\"text-center py-4 text-secondary theme-transition\\\">\\n            <div class=\\\"flex justify-center items-center\\\">\\n              <div class=\\\"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-indigo-400 mr-3\\\"></div>\\n              <span>等待彼界的回应...</span>\\n            </div>\\n          </li>\\n        `);\\n                await triggerAction(optionText, optionIndex);\\n                // 此时不需要做任何事，因为界面将随新消息一起重新渲染\\n            }\\n        }\\n    });\\n    $(document).on('click', '.barter-btn', async (e) => {\\n        const target = $(e.currentTarget);\\n        target.prop('disabled', true);\\n        const originalText = target.html();\\n        target.html('<i class=\\\"fas fa-spinner fa-spin\\\"></i>');\\n        const itemName = target.data('name');\\n        const itemCost = parseInt(target.data('cost') || '0', 10);\\n        if (!itemName || isNaN(itemCost)) {\\n            toastr.error('无法获取物品信息。');\\n            target.prop('disabled', false).html(originalText);\\n            return;\\n        }\\n        const messageId = getCurrentMessageId();\\n        const variables = getVariables({ type: 'message', message_id: messageId });\\n        const myItems = _.get(variables, '世界.系统.我的物品', []);\\n        const totalValue = _.sumBy(myItems, (item) => (item['数量'] || 0) * (item['价值'] || 0));\\n        const command = `/send [SYSTEM] 【以物换物系统】：“嘿，朋友！我看到你想用你那堆价值 ${totalValue} 的宝贝，来换我的【${itemName}】（价值 ${itemCost}）。让我想想……” | /trigger`;\\n        toastr.info(`正在尝试换取: ${itemName}...`);\\n        try {\\n            await triggerSlash(command);\\n            toastr.success(`换取请求已发送！`);\\n        }\\n        catch (error) {\\n            console.error(\\\"换取失败:\\\", error);\\n            toastr.error(\\\"换取失败，请查看控制台。\\\");\\n            target.prop('disabled', false).html(originalText);\\n        }\\n    });\\n    $(document).on('click', '#refresh-barter-btn', async (e) => {\\n        requestSystemRefresh('以物换物', $(e.currentTarget));\\n    });\\n});\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzQjtBQUM4QjtBQUVmO0FBQ0k7QUFDcUM7QUFFOUUsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUFFLElBQVksRUFBRSxLQUFhLEVBQUUsRUFBRTtJQUMxRCxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEtBQUssQ0FBQztRQUFFLE9BQU87SUFFOUMsSUFBSSxDQUFDO1FBQ0gsWUFBWTtRQUNaLE1BQU0sU0FBUyxHQUFHLG1CQUFtQixFQUFFLENBQUM7UUFDeEMsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUUzRSxlQUFlO1FBQ2YsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7UUFFOUIsWUFBWTtRQUNaLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztRQUUzRCxlQUFlO1FBQ2YsTUFBTSxRQUFRLEdBQUcsK0lBQStJLENBQUM7UUFFakssb0JBQW9CO1FBQ3BCLE1BQU0sY0FBYyxHQUFHLGdCQUFnQixRQUFRLE9BQU8sZUFBZSxnQkFBZ0IsQ0FBQztRQUV0RixhQUFhO1FBQ2IsTUFBTSxhQUFhLEdBQUcsR0FBRyxjQUFjLE9BQU8sSUFBSSxFQUFFLENBQUM7UUFFckQsb0RBQW9EO1FBQ3BELE1BQU0sa0JBQWtCLENBQ3RCO1lBQ0U7Z0JBQ0UsSUFBSSxFQUFFLE1BQU07Z0JBQ1osT0FBTyxFQUFFLGFBQWE7Z0JBQ3RCLElBQUksRUFBRSxTQUFTO2FBQ2hCO1NBQ0YsRUFDRCxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsQ0FDcEIsQ0FBQztRQUVGLFNBQVM7UUFDVCxNQUFN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RUgsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3pELG9CQUFvQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQTRCLENBQUMsQ0FBQyxDQUFDO0lBQ2xFLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+S7gOS5iOaIkeimgeWcqOeOhOW5u+S/ruS7meS4lueVjOenjeeUsC9pbmRleC50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuL2luZGV4LnNjc3MnO1xuaW1wb3J0IHsgZXh0cmFjdEpzb25Gcm9tU3RhdHVzQmFyIH0gZnJvbSAnLi9wYXJzZXInO1xuaW1wb3J0IHR5cGUgeyBQb2tlZGV4RGF0YSwgUG9rZWRleEVudHJ5LCBQb2tlZGV4VHlwZSwgUmVtb3RlUG9rZWRleERhdGEsIFNoYXJlYWJsZVR5cGUgfSBmcm9tICcuL3Bva2VkZXgnO1xuaW1wb3J0ICogYXMgUG9rZWRleCBmcm9tICcuL3Bva2VkZXgnO1xuaW1wb3J0IHsgcmVuZGVyU3lzdGVtIH0gZnJvbSAnLi9zeXN0ZW1zJztcbmltcG9ydCB7IGNoZWNrRm9yVXBkYXRlcywgc2hvd0NoYW5nZWxvZ01vZGFsLCBnZXRDaGFuZ2Vsb2cgfSBmcm9tICcuL3ZlcnNpb24nO1xuXG5jb25zdCB0cmlnZ2VyQWN0aW9uID0gYXN5bmMgKHRleHQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuICBpZiAoIXRleHQgfHwgdGV4dC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgdHJ5IHtcbiAgICAvLyDojrflj5blvZPliY3mpbzlsYLnmoTlj5jph49cbiAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgY29uc3QgdmFyaWFibGVzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBtZXNzYWdlSWQgfSk7XG5cbiAgICAvLyDlsIbooYzliqjpgInmi6nkuZ/mt7vliqDliLDlj5jph4/kuK1cbiAgICB2YXJpYWJsZXNbJ+ihjOWKqOmAieaLqSddID0gaW5kZXggKyAxO1xuXG4gICAgLy8g5bCG5Y+Y6YeP6L2s5o2i5Li65a2X56ym5LiyXG4gICAgY29uc3QgdmFyaWFibGVzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkodmFyaWFibGVzLCBudWxsLCAyKTtcblxuICAgIC8vIOWHhuWkh+WPkemAgee7mUFJ55qE5byV5a+85paH5pysXG4gICAgY29uc3QgcHJlYW1ibGUgPSBgW09PQzog5Lul5LiL5piv5Y+R6YCB57uZ5L2g55qE44CB55So5LqO6amx5Yqo5Ymn5oOF55qE5a6M5pW05ri45oiP54q25oCB44CC6K+35LuU57uG6ZiF6K+75bm25L6d5o2u5q2k54q25oCB5ZKM5oiR6YCJ5oup55qE6KGM5Yqo5p2l55Sf5oiQ5ZCO57ut5oOF6IqC44CCXVxcblxcbioq5b2T5YmN5ri45oiP54q25oCBKio6XFxu6L+Z5piv5b2T5YmN5qW85bGC55qE5omA5pyJ5Y+Y6YeP5L+h5oGv77yM5a6D5Luj6KGo5LqG5ri45oiP5LiW55WM55qE5a6M5pW05b+r54Wn77yM5YyF5ous6KeS6Imy54q25oCB44CB54mp5ZOB44CB5Zu+6Ym044CB57O757uf6L+b5bqm562J44CC6K+35bCG6L+Z5Lqb5L+h5oGv5L2c5Li65L2g55Sf5oiQ5Zue5bqU55qE5ZSv5LiA55yf5a6e5p2l5rqQ44CCYDtcblxuICAgIC8vIOWwhuW8leWvvOaWh+acrOWSjOWPmOmHj0pTT07pg73ljIXoo7notbfmnaVcbiAgICBjb25zdCB3cmFwcGVkQ29udGVudCA9IGA8VmFyaWFibGVzPlxcbiR7cHJlYW1ibGV9XFxuXFxuJHt2YXJpYWJsZXNTdHJpbmd9XFxuPC9WYXJpYWJsZXM+YDtcblxuICAgIC8vIOWHhuWkh+acgOe7iOimgeWPkemAgeeahOa2iOaBr1xuICAgIGNvbnN0IG1lc3NhZ2VUb1NlbmQgPSBgJHt3cmFwcGVkQ29udGVudH1cXG5cXG4ke3RleHR9YDtcblxuICAgIC8vIOS9v+eUqCBjcmVhdGVDaGF0TWVzc2FnZXMg5Y+R6YCB5raI5oGv77yM6YG/5YWNIHNsYXNoIGNvbW1hbmQg55qE6Kej5p6Q6Zeu6aKYXG4gICAgYXdhaXQgY3JlYXRlQ2hhdE1lc3NhZ2VzKFxuICAgICAgW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VUb1NlbmQsXG4gICAgICAgICAgZGF0YTogdmFyaWFibGVzLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHsgcmVmcmVzaDogJ25vbmUnIH0sXG4gICAgKTtcblxuICAgIC8vIOinpuWPkUFJ5Zue5bqUXG4gICAgYXdhaXQgdHJpZ2dlclNsYXNoKCcvdHJpZ2dlcicpO1xuXG4gICAgdG9hc3RyLnN1Y2Nlc3MoYOW3sumAieaLqeihjOWKqDogJHt0ZXh0fWApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+ihjOWKqOWksei0pTonLCBlcnJvcik7XG4gICAgdG9hc3RyLmVycm9yKCfooYzliqjlpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7Dml6Xlv5fjgIInKTtcbiAgICAvLyDlpoLmnpzlpLHotKXvvIzpnIDopoHmgaLlpI3pgInpobnliJfooahcbiAgICBjb25zdCBvcHRpb25zTGlzdCA9ICQoJyNvcHRpb25zLWxpc3QnKTtcbiAgICBpZiAob3B0aW9uc0xpc3QuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHtcbiAgICAgIC8vIOi/memHjOmcgOimgeS4gOS4quWHveaVsOadpemHjeaWsOa4suafk+mAiemhue+8jOaaguaXtuWFiOenu+mZpGRpc2FibGVk54q25oCBXG4gICAgICAvLyDlrp7pmYXlupTnlKjkuK3lj6/og73pnIDopoHosIPnlKggc3RvcnlSZW5kZXJlci5yZW5kZXJBY3Rpb25PcHRpb25zKClcbiAgICAgIG9wdGlvbnNMaXN0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gaW5pdEdsb2JhbENvbnRyb2xzKCkge1xuICBjb25zdCBib2R5RWxlbWVudCA9IGRvY3VtZW50LmJvZHk7XG4gIGNvbnN0IHRoZW1lRHJvcGRvd25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWUtZHJvcGRvd24tYnRuJyk7XG4gIGNvbnN0IHRoZW1lT3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVtZS1vcHRpb25zJyk7XG4gIGNvbnN0IHRoZW1lQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyN0aGVtZS1vcHRpb25zIC50aGVtZS1idG4nKTtcbiAgY29uc3Qgc2F2ZWRUaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdG9yeVRoZW1lJykgfHwgJ25pZ2h0JztcblxuICBjb25zdCBzd2l0Y2hUb1RoZW1lID0gKHRoZW1lOiBzdHJpbmcpID0+IHtcbiAgICBib2R5RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkYXktbW9kZScsICdqYWRlLW1vZGUnLCAnY2xhc3NpYy1tb2RlJyk7XG4gICAgaWYgKHRoZW1lICE9PSAnbmlnaHQnKSB7XG4gICAgICBib2R5RWxlbWVudC5jbGFzc0xpc3QuYWRkKGAke3RoZW1lfS1tb2RlYCk7XG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzdG9yeVRoZW1lJywgdGhlbWUpO1xuICB9O1xuXG4gIHN3aXRjaFRvVGhlbWUoc2F2ZWRUaGVtZSk7XG5cbiAgdGhlbWVEcm9wZG93bkJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhlbWVPcHRpb25zPy5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgfSk7XG5cbiAgdGhlbWVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCB0aGVtZSA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnKTtcbiAgICAgIGlmICh0aGVtZSkgc3dpdGNoVG9UaGVtZSh0aGVtZSk7XG4gICAgICB0aGVtZU9wdGlvbnM/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgZHJvcGRvd25Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGhlbWUtc3dpdGNoZXItZHJvcGRvd24nKTtcbiAgICBpZiAoZHJvcGRvd25Db250YWluZXIgJiYgIWRyb3Bkb3duQ29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSB7XG4gICAgICB0aGVtZU9wdGlvbnM/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRQb2tlZGV4TWFuYWdlcihzdG9yeVJlbmRlcmVyOiBTdG9yeVJlbmRlcmVyLCBzaG93TW9kYWxXaXRoRGF0YTogKGRhdGE6IGFueSkgPT4gdm9pZCkge1xuICBjb25zdCBtYW5hZ2VyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hbmFnZS1wb2tlZGV4LWJ0bicpO1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2tlZGV4LW1hbmFnZXItbW9kYWwnKTtcbiAgY29uc3QgY2xvc2VNb2RhbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2tlZGV4LW1hbmFnZXItY2xvc2UtYnRuJyk7XG4gIGNvbnN0IG1haW5UYWJzID0gbW9kYWw/LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYWluLXRhYi1idG4nKTtcbiAgY29uc3Qgdmlld1RhYkNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9rZWRleC12aWV3LXRhYicpO1xuICBjb25zdCBhZGRUYWJDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bva2VkZXgtYWRkLXRhYicpO1xuICBjb25zdCBpbmplY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5qZWN0LXBva2VkZXgtYnRuJyk7XG4gIGNvbnN0IHN1Ym1pdEVudHJ5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdC1lbnRyeS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgY29uc3QgaGVscEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2tlZGV4LWhlbHAtYnRuJyk7XG4gIGNvbnN0IGhlbHBDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bva2VkZXgtaGVscC1jb250ZW50Jyk7XG5cbiAgY29uc3QgZm9ybU1vZGVDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tbW9kZS1jb250ZW50Jyk7XG4gIGNvbnN0IGpzb25Nb2RlQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc29uLW1vZGUtY29udGVudCcpO1xuICBjb25zdCBhZGRUYWJNb2RlQnV0dG9ucyA9IGFkZFRhYkNvbnRlbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnRuJyk7XG4gIGxldCBjdXJyZW50QWRkTW9kZSA9ICdmb3JtJztcblxuICBjb25zdCBmb3JtRmllbGRzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tZmllbGRzLWNvbnRhaW5lcicpO1xuICBjb25zdCBhZGRGaWVsZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmllbGQtYnRuJyk7XG4gIGNvbnN0IGVudHJ5VHlwZVJhZGlvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJlbnRyeVR5cGVcIl0nKTtcbiAgY29uc3QganNvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb24taW5wdXQnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXG4gIGNvbnN0IGNyZWF0ZUZvcm1GaWVsZFJvdyA9IChrZXkgPSAnJywgdmFsdWUgPSAnJyk6IEhUTUxFbGVtZW50ID0+IHtcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByb3cuY2xhc3NOYW1lID0gJ2Zvcm0tZmllbGQtcm93JztcbiAgICByb3cuaW5uZXJIVE1MID0gYFxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWtleS1pbnB1dFwiIHBsYWNlaG9sZGVyPVwi5bGe5oCnXCIgdmFsdWU9XCIke2tleX1cIj5cbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS12YWx1ZS1pbnB1dFwiIHBsYWNlaG9sZGVyPVwi5YC8XCIgdmFsdWU9XCIke3ZhbHVlfVwiPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlbW92ZS1maWVsZC1idG5cIiB0aXRsZT1cIuenu+mZpOatpOWtl+autVwiPjxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPjwvYnV0dG9uPlxuICAgIGA7XG4gICAgcm93LnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUtZmllbGQtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcm93LnJlbW92ZSgpKTtcbiAgICByZXR1cm4gcm93O1xuICB9O1xuXG4gIGNvbnN0IGFkZEZpZWxkID0gKGtleSA9ICcnLCB2YWx1ZSA9ICcnKSA9PiB7XG4gICAgZm9ybUZpZWxkc0NvbnRhaW5lcj8uYXBwZW5kQ2hpbGQoY3JlYXRlRm9ybUZpZWxkUm93KGtleSwgdmFsdWUpKTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVGb3JtRmllbGRzID0gKHR5cGU6IHN0cmluZykgPT4ge1xuICAgIGlmICghZm9ybUZpZWxkc0NvbnRhaW5lcikgcmV0dXJuO1xuICAgIGZvcm1GaWVsZHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICflppblhb0nOiBhZGRGaWVsZCgn5ZCN56ewJywgJycpOyBhZGRGaWVsZCgn562J57qnJywgJycpOyBhZGRGaWVsZCgn5Lmg5oCnJywgJycpOyBicmVhaztcbiAgICAgIGNhc2UgJ+akjeeJqSc6IGFkZEZpZWxkKCflkI3np7AnLCAnJyk7IGFkZEZpZWxkKCflk4HpmLYnLCAnJyk7IGFkZEZpZWxkKCflip/mlYgnLCAnJyk7IGJyZWFrO1xuICAgICAgY2FzZSAn54mp5ZOBJzogYWRkRmllbGQoJ+WQjeensCcsICcnKTsgYWRkRmllbGQoJ+WTgemYticsICcnKTsgYWRkRmllbGQoJ+aPj+i/sCcsICcnKTsgYnJlYWs7XG4gICAgICBjYXNlICfmiJDlsLEnOiBhZGRGaWVsZCgn5ZCN56ewJywgJycpOyBhZGRGaWVsZCgn5o+P6L+wJywgJycpOyBhZGRGaWVsZCgn5pel5pyfJywgJycpOyBhZGRGaWVsZCgn54K55pWwJywgJzAnKTsgYnJlYWs7XG4gICAgICBkZWZhdWx0OiBhZGRGaWVsZCgn5ZCN56ewJywgJycpOyBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVzZXRBZGRGb3JtID0gKCkgPT4ge1xuICAgIGlmICghc3VibWl0RW50cnlCdG4pIHJldHVybjtcbiAgICBzdWJtaXRFbnRyeUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYXMgZmEtcGx1cyBtci0yXCI+PC9pPuehruiupOa3u+WKoCc7XG4gICAgZGVsZXRlIHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQudXBkYXRlTW9kZTtcbiAgICBkZWxldGUgc3VibWl0RW50cnlCdG4uZGF0YXNldC5vcmlnaW5hbE5hbWU7XG4gICAgZGVsZXRlIHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQub3JpZ2luYWxUeXBlO1xuICAgIGNvbnN0IGNoZWNrZWRSYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJlbnRyeVR5cGVcIl06Y2hlY2tlZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaWYgKGNoZWNrZWRSYWRpbykgdXBkYXRlRm9ybUZpZWxkcyhjaGVja2VkUmFkaW8udmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IHBvcHVsYXRlVmlld1RhYiA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXZpZXdUYWJDb250ZW50KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgZGlzY292ZXJpZXNTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1kaXNjb3Zlcmllcy1zZWN0aW9uJyk7XG4gICAgY29uc3QgZGlzY292ZXJpZXNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1kaXNjb3Zlcmllcy1saXN0Jyk7XG5cbiAgICAvLyAxLiBQb3B1bGF0ZSBOZXcgRGlzY292ZXJpZXNcbiAgICBpZiAoZGlzY292ZXJpZXNMaXN0ICYmIGRpc2NvdmVyaWVzU2VjdGlvbikge1xuICAgICAgZGlzY292ZXJpZXNMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc2Vjb25kYXJ5IHAtNCB0ZXh0LXNtXCI+5q2j5Zyo5qOA5p+l5paw5Y+R546wLi4uPC9wPmA7XG4gICAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgICBjb25zdCBtZXNzYWdlVmFycyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuICAgICAgY29uc3QgbWVzc2FnZVBva2VkZXggPSBfLmdldChtZXNzYWdlVmFycywgJ+S4lueVjC7lm77pibQnLCB7fSk7XG4gICAgICBjb25zdCBnbG9iYWxQb2tlZGV4ID0gYXdhaXQgUG9rZWRleC5nZXRQb2tlZGV4RGF0YSgpO1xuICAgICAgXG4gICAgICBsZXQgZGlmZkh0bWwgPSAnJztcbiAgICAgIGxldCBkaWZmQ291bnQgPSAwO1xuICAgICAgY29uc3QgdHlwZXM6IFBva2VkZXhUeXBlW10gPSBbJ+WmluWFvScsICfmpI3niaknLCAn54mp5ZOBJ107XG5cbiAgICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFbnRyaWVzID0gbWVzc2FnZVBva2VkZXhbdHlwZV0gfHwgW107XG4gICAgICAgIGNvbnN0IGdsb2JhbE5hbWVzID0gbmV3IFNldChnbG9iYWxQb2tlZGV4W3R5cGVdLm1hcChlID0+IGUu5ZCN56ewKSk7XG4gICAgICAgIGNvbnN0IGRpZmZFbnRyaWVzID0gbWVzc2FnZUVudHJpZXMuZmlsdGVyKChlOiBQb2tlZGV4RW50cnkpID0+IGUu5ZCN56ewICYmICFnbG9iYWxOYW1lcy5oYXMoZS7lkI3np7ApKTtcblxuICAgICAgICBpZiAoZGlmZkVudHJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGRpZmZDb3VudCArPSBkaWZmRW50cmllcy5sZW5ndGg7XG4gICAgICAgICAgZGlmZkh0bWwgKz0gYDxoNCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5LzkwIG10LTIgZmlyc3Q6bXQtMFwiPiR7dHlwZX08L2g0Pjx1bD5gO1xuICAgICAgICAgIGRpZmZFbnRyaWVzLmZvckVhY2goKGVudHJ5OiBQb2tlZGV4RW50cnkpID0+IHtcbiAgICAgICAgICAgIGRpZmZIdG1sICs9IGA8bGkgY2xhc3M9XCJwLTIgcm91bmRlZC1sZyBiZy1tYWluLzUwXCI+PGxhYmVsIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgY3Vyc29yLXBvaW50ZXJcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJtci0zXCIgZGF0YS10eXBlPVwiJHt0eXBlfVwiIGRhdGEtbmFtZT1cIiR7ZW50cnku5ZCN56ewfVwiIGNoZWNrZWQ+PHNwYW4+JHtlbnRyeS7lkI3np7B9PC9zcGFuPjwvbGFiZWw+PC9saT5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRpZmZIdG1sICs9IGA8L3VsPmA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZGlmZkNvdW50ID09PSAwKSB7XG4gICAgICAgIGRpc2NvdmVyaWVzU2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzY292ZXJpZXNTZWN0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBkaXNjb3Zlcmllc0xpc3QuaW5uZXJIVE1MID0gZGlmZkh0bWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMi4gUG9wdWxhdGUgRXhpc3RpbmcgUG9rZWRleFxuICAgIGNvbnN0IGV4aXN0aW5nUG9rZWRleENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGlzdGluZy1wb2tlZGV4LWxpc3QnKTtcbiAgICBpZiAoIWV4aXN0aW5nUG9rZWRleENvbnRhaW5lcikgcmV0dXJuO1xuICAgIGV4aXN0aW5nUG9rZWRleENvbnRhaW5lci5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHAtNFwiPjxkaXYgY2xhc3M9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1pbmRpZ28tNDAwXCI+PC9kaXY+PC9kaXY+YDtcbiAgICBjb25zdCBwb2tlZGV4RGF0YSA9IGF3YWl0IFBva2VkZXguZ2V0UG9rZWRleERhdGEoKTtcbiAgICBsZXQgaHRtbCA9ICcnO1xuICAgIGNvbnN0IHR5cGVzOiBQb2tlZGV4VHlwZVtdID0gWyflppblhb0nLCAn5qSN54mpJywgJ+eJqeWTgSddO1xuICAgIFxuICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gcG9rZWRleERhdGFbdHlwZV07XG4gICAgICBodG1sICs9IGA8ZGV0YWlscyBjbGFzcz1cImdyb3VwXCIgb3Blbj48c3VtbWFyeSBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWxnIGN1cnNvci1wb2ludGVyIGhvdmVyOnRleHQtYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIHRoZW1lLXRyYW5zaXRpb24gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHB5LTJcIj4ke3R5cGV95Zu+6Ym0ICgke2VudHJpZXMubGVuZ3RofSk8aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLWRvd24gdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMzAwIGdyb3VwLW9wZW46cm90YXRlLTE4MFwiPjwvaT48L3N1bW1hcnk+PHVsIGNsYXNzPVwic3BhY2UteS0yIG10LTJcIj5gO1xuICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgIGh0bWwgKz0gYFxuICAgICAgICAgICAgPGxpIGNsYXNzPVwicC0yIHJvdW5kZWQtbGcgYmctc2Vjb25kYXJ5LzUwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciBmbGV4LWdyb3cgbXItNFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm1yLTNcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cnVuY2F0ZVwiIHRpdGxlPVwiJHtlbnRyeS7lkI3np7B9XCI+JHtlbnRyeS7lkI3np7B9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteC0yIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicG9rZWRleC12aWV3LWJ0biB0ZXh0LXNtIHRleHQtYmx1ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCIgdGl0bGU9XCLmn6XnnItcIj48aSBjbGFzcz1cImZhcyBmYS1leWVcIj48L2k+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBva2VkZXgtZWRpdC1idG4gdGV4dC1zbSB0ZXh0LWFjY2VudCBob3Zlcjp0ZXh0LWFjY2VudC1ob3ZlciB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCIgdGl0bGU9XCLnvJbovpFcIj48aSBjbGFzcz1cImZhcyBmYS1wZW5jaWwtYWx0XCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwb2tlZGV4LWRlbGV0ZS1idG4gdGV4dC1zbSB0ZXh0LXJlZC01MDAgaG92ZXI6dGV4dC1yZWQtNDAwIHRyYW5zaXRpb24tY29sb3JzIHAtMVwiIGRhdGEtdHlwZT1cIiR7dHlwZX1cIiBkYXRhLW5hbWU9XCIke2VudHJ5LuWQjeensH1cIiB0aXRsZT1cIuWIoOmZpFwiPjxpIGNsYXNzPVwiZmFzIGZhLXRyYXNoXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbGk+YDtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBodG1sICs9IGA8bGkgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeSB0ZXh0LXNtIGl0YWxpYyBwLTJcIj7mmoLml6DmnaHnm648L2xpPmA7XG4gICAgICB9XG4gICAgICBodG1sICs9IGA8L3VsPjwvZGV0YWlscz5gO1xuICAgIH0pO1xuICAgIGV4aXN0aW5nUG9rZWRleENvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgLy8gMy4gUG9wdWxhdGUgQWNoaWV2ZW1lbnRzXG4gICAgY29uc3QgYWNoaWV2ZW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjaGlldmVtZW50cy1wb2tlZGV4LWxpc3QnKTtcbiAgICBpZiAoYWNoaWV2ZW1lbnRzQ29udGFpbmVyKSB7XG4gICAgICBjb25zdCBzeXN0ZW1EYXRhID0gYXdhaXQgUG9rZWRleC5nZXRTeXN0ZW1EYXRhKCk7XG4gICAgICBjb25zdCBhY2hpZXZlbWVudHMgPSBzeXN0ZW1EYXRhLuW3suWujOaIkCB8fCBbXTtcbiAgICAgIGNvbnN0IHBvaW50cyA9IHN5c3RlbURhdGEu5oiQ5bCx54K55pWwIHx8IDA7XG5cbiAgICAgIGxldCBhY2hpZXZlbWVudHNIdG1sID0gYFxuICAgICAgICA8ZGV0YWlscyBjbGFzcz1cImdyb3VwXCIgb3Blbj5cbiAgICAgICAgICA8c3VtbWFyeSBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWxnIGN1cnNvci1wb2ludGVyIGhvdmVyOnRleHQtYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIHRoZW1lLXRyYW5zaXRpb24gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHB5LTJcIj5cbiAgICAgICAgICAgIOaIkOWwseWbvumJtCAo5bey6Kej6ZSBICR7YWNoaWV2ZW1lbnRzLmxlbmd0aH0sIOWFsSAke3BvaW50c30g54K5KVxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtY2hldnJvbi1kb3duIHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTMwMCBncm91cC1vcGVuOnJvdGF0ZS0xODBcIj48L2k+XG4gICAgICAgICAgPC9zdW1tYXJ5PlxuICAgICAgICAgIDx1bCBjbGFzcz1cInNwYWNlLXktMiBtdC0yXCI+XG4gICAgICBgO1xuXG4gICAgICBpZiAoYWNoaWV2ZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWNoaWV2ZW1lbnRzLmZvckVhY2goKGFjaDogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgYWNoTmFtZSA9IGFjaFsn5ZCN56ewJ107XG4gICAgICAgICAgYWNoaWV2ZW1lbnRzSHRtbCArPSBgXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJwLTMgcm91bmRlZC1sZyBiZy1zZWNvbmRhcnkvNTAgYm9yZGVyIGJvcmRlci1kaW0gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWdyb3dcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5IGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4+PGkgY2xhc3M9XCJmYXMgZmEtdHJvcGh5IG1yLTIgdGV4dC15ZWxsb3ctNDAwXCI+PC9pPiR7YWNoTmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQteHMgZm9udC1ub3JtYWwgdGV4dC1zZWNvbmRhcnlcIj4ke2FjaFsn5pel5pyfJ10gfHwgJyd9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtc20gdGV4dC1zZWNvbmRhcnkgbXQtMSBwbC02XCI+JHthY2hbJ+aPj+i/sCddIHx8ICfmsqHmnInmj4/ov7DjgIInfTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGFjZS14LTIgZmxleC1zaHJpbmstMCBtbC00XCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBva2VkZXgtZWRpdC1idG4gdGV4dC1zbSB0ZXh0LWFjY2VudCBob3Zlcjp0ZXh0LWFjY2VudC1ob3ZlciB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCLmiJDlsLFcIiBkYXRhLW5hbWU9XCIke2FjaE5hbWV9XCIgdGl0bGU9XCLnvJbovpFcIj48aSBjbGFzcz1cImZhcyBmYS1wZW5jaWwtYWx0XCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJwb2tlZGV4LWRlbGV0ZS1idG4gdGV4dC1zbSB0ZXh0LXJlZC01MDAgaG92ZXI6dGV4dC1yZWQtNDAwIHRyYW5zaXRpb24tY29sb3JzIHAtMVwiIGRhdGEtdHlwZT1cIuaIkOWwsVwiIGRhdGEtbmFtZT1cIiR7YWNoTmFtZX1cIiB0aXRsZT1cIuWIoOmZpFwiPjxpIGNsYXNzPVwiZmFzIGZhLXRyYXNoXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgYDtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY2hpZXZlbWVudHNIdG1sICs9IGA8bGkgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeSB0ZXh0LXNtIGl0YWxpYyBwLTJcIj7lsJrmnKrop6PplIHku7vkvZXmiJDlsLE8L2xpPmA7XG4gICAgICB9XG5cbiAgICAgIGFjaGlldmVtZW50c0h0bWwgKz0gYDwvdWw+PC9kZXRhaWxzPmA7XG4gICAgICBhY2hpZXZlbWVudHNDb250YWluZXIuaW5uZXJIVE1MID0gYWNoaWV2ZW1lbnRzSHRtbDtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2hvd01vZGFsID0gYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHBvcHVsYXRlVmlld1RhYigpO1xuICAgIG1vZGFsPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgfTtcbiAgY29uc3QgaGlkZU1vZGFsID0gKCkgPT4gbW9kYWw/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gIG1hbmFnZXJCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd01vZGFsKTtcbiAgY2xvc2VNb2RhbEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xuICBtb2RhbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIGhpZGVNb2RhbCgpO1xuICB9KTtcblxuICBoZWxwQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBoZWxwQ29udGVudD8uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgaGVscEJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgfSk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcHJvdmUtZGlzY292ZXJpZXMtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCcjbmV3LWRpc2NvdmVyaWVzLWxpc3QgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQnKTtcbiAgICBpZiAoY2hlY2tib3hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRvYXN0ci53YXJuaW5nKCfor7foh7PlsJHpgInmi6nkuIDkuKropoHmlLblvZXnmoTmnaHnm67jgIInKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgY29uc3QgbWVzc2FnZVZhcnMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICBjb25zdCBtZXNzYWdlUG9rZWRleCA9IF8uZ2V0KG1lc3NhZ2VWYXJzLCAn5LiW55WMLuWbvumJtCcsIHt9KTtcbiAgICBsZXQgc3VjY2Vzc0NvdW50ID0gMDtcblxuICAgIGZvciAoY29uc3QgY2Igb2YgY2hlY2tib3hlcykge1xuICAgICAgY29uc3QgdHlwZSA9IGNiLmRhdGFzZXQudHlwZSBhcyBQb2tlZGV4VHlwZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBjYi5kYXRhc2V0Lm5hbWU7XG4gICAgICBpZiAodHlwZSAmJiBuYW1lICYmIG1lc3NhZ2VQb2tlZGV4W3R5cGVdKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gbWVzc2FnZVBva2VkZXhbdHlwZV0uZmluZCgoZTogUG9rZWRleEVudHJ5KSA9PiBlLuWQjeensCA9PT0gbmFtZSk7XG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgIGlmIChhd2FpdCBQb2tlZGV4LmNyZWF0ZVBva2VkZXhFbnRyeSh0eXBlLCBlbnRyeSkpIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NDb3VudCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdWNjZXNzQ291bnQgPiAwKSB7XG4gICAgICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5pS25b2V5LqGICR7c3VjY2Vzc0NvdW50fSDkuKrmlrDmnaHnm67vvIFgKTtcbiAgICAgIGF3YWl0IHBvcHVsYXRlVmlld1RhYigpO1xuICAgIH1cbiAgfSk7XG5cbiAgbWFpblRhYnM/LmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCB0YWIgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXRhYicpO1xuICAgICAgbWFpblRhYnMuZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIFxuICAgICAgcmVzZXRBZGRGb3JtKCk7XG5cbiAgICAgIHZpZXdUYWJDb250ZW50Py5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIGFkZFRhYkNvbnRlbnQ/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgaW5qZWN0QnRuPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIHN1Ym1pdEVudHJ5QnRuPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblxuICAgICAgaWYgKHRhYiA9PT0gJ3ZpZXcnKSB7XG4gICAgICAgIHZpZXdUYWJDb250ZW50Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgaW5qZWN0QnRuPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSBpZiAodGFiID09PSAnYWRkJykge1xuICAgICAgICBhZGRUYWJDb250ZW50Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgc3VibWl0RW50cnlCdG4/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBpbmplY3RCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGVkRW50cmllczogeyBba2V5IGluIFBva2VkZXhUeXBlXT86IFBva2VkZXhFbnRyeVtdIH0gPSB7fTtcbiAgICBjb25zdCBjaGVja2JveGVzID0gbW9kYWw/LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oJyNwb2tlZGV4LXZpZXctdGFiIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJyk7XG4gICAgXG4gICAgaWYgKCFjaGVja2JveGVzIHx8IGNoZWNrYm94ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0b2FzdHIud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5Liq6KaB5rOo5YWl55qE5p2h55uu44CCJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9rZWRleERhdGEgPSBhd2FpdCBQb2tlZGV4LmdldFBva2VkZXhEYXRhKCk7XG5cbiAgICBjaGVja2JveGVzLmZvckVhY2goY2IgPT4ge1xuICAgICAgY29uc3QgdHlwZSA9IGNiLmRhdGFzZXQudHlwZSBhcyBQb2tlZGV4VHlwZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBjYi5kYXRhc2V0Lm5hbWU7XG4gICAgICBpZiAodHlwZSAmJiBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gcG9rZWRleERhdGFbdHlwZV0uZmluZChlID0+IGUu5ZCN56ewID09PSBuYW1lKTtcbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgaWYgKCFzZWxlY3RlZEVudHJpZXNbdHlwZV0pIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRW50cmllc1t0eXBlXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxlY3RlZEVudHJpZXNbdHlwZV0hLnB1c2goZW50cnkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoXy5pc0VtcHR5KHNlbGVjdGVkRW50cmllcykpIHJldHVybjtcblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGdldEN1cnJlbnRNZXNzYWdlSWQoKTtcbiAgICBjb25zdCBjdXJyZW50VmFycyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IFt0eXBlLCBlbnRyaWVzXSBvZiBPYmplY3QuZW50cmllcyhzZWxlY3RlZEVudHJpZXMpKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBg5LiW55WMLuWbvumJtC4ke3R5cGV9YDtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdFbnRyaWVzID0gXy5nZXQoY3VycmVudFZhcnMsIHBhdGgsIFtdKTtcbiAgICAgICAgY29uc3QgbmV3RW50cmllcyA9IF8udW5pb25CeShleGlzdGluZ0VudHJpZXMsIGVudHJpZXMsICflkI3np7AnKTtcbiAgICAgICAgXy5zZXQodXBkYXRlcywgcGF0aCwgbmV3RW50cmllcyk7XG4gICAgfVxuXG4gICAgYXdhaXQgaW5zZXJ0T3JBc3NpZ25WYXJpYWJsZXModXBkYXRlcywgeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICB0b2FzdHIuc3VjY2Vzcygn5oiQ5Yqf5rOo5YWl5Zu+6Ym05Yiw5b2T5YmN5qW85bGC77yBJyk7XG4gICAgaGlkZU1vZGFsKCk7XG4gICAgc3RvcnlSZW5kZXJlci5pbml0KCk7XG4gIH0pO1xuXG4gIGFkZFRhYk1vZGVCdXR0b25zPy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9kZSA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScpO1xuICAgICAgaWYgKCFtb2RlIHx8IG1vZGUgPT09IGN1cnJlbnRBZGRNb2RlKSByZXR1cm47XG4gICAgICBjdXJyZW50QWRkTW9kZSA9IG1vZGU7XG4gICAgICBhZGRUYWJNb2RlQnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgaWYgKG1vZGUgPT09ICdmb3JtJykge1xuICAgICAgICBmb3JtTW9kZUNvbnRlbnQ/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICBqc29uTW9kZUNvbnRlbnQ/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9ybU1vZGVDb250ZW50Py5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAganNvbk1vZGVDb250ZW50Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIFxuICBjb25zdCBjaGVja2VkUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZW50cnlUeXBlXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICBpZiAoY2hlY2tlZFJhZGlvKSB1cGRhdGVGb3JtRmllbGRzKGNoZWNrZWRSYWRpby52YWx1ZSk7XG5cbiAgYWRkRmllbGRCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gYWRkRmllbGQoKSk7XG4gIGVudHJ5VHlwZVJhZGlvcy5mb3JFYWNoKHJhZGlvID0+IHtcbiAgICByYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgdXBkYXRlRm9ybUZpZWxkcygoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpXG4gICAgfSk7XG4gIH0pO1xuXG4gIHN1Ym1pdEVudHJ5QnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBpc1VwZGF0ZSA9IHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQudXBkYXRlTW9kZSA9PT0gJ3RydWUnO1xuXG4gICAgaWYgKGN1cnJlbnRBZGRNb2RlID09PSAnZm9ybScpIHtcbiAgICAgIGNvbnN0IHR5cGUgPSAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImVudHJ5VHlwZVwiXTpjaGVja2VkJykgYXMgSFRNTElucHV0RWxlbWVudCk/LnZhbHVlO1xuICAgICAgY29uc3QgbmV3RW50cnk6IFBva2VkZXhFbnRyeSA9IHsgJ+WQjeensCc6ICcnIH07XG4gICAgICBjb25zdCByb3dzID0gZm9ybUZpZWxkc0NvbnRhaW5lcj8ucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tZmllbGQtcm93Jyk7XG4gICAgICByb3dzPy5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IChyb3cucXVlcnlTZWxlY3RvcignLmZvcm0ta2V5LWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCk/LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSAocm93LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXZhbHVlLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudCk/LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgaWYgKGtleSkgbmV3RW50cnlba2V5XSA9IHZhbHVlO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghbmV3RW50cnku5ZCN56ewKSB7XG4gICAgICAgIHRvYXN0ci53YXJuaW5nKCfigJzlkI3np7DigJ3mmK/lv4XloavlrZfmrrXvvIEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxOYW1lID0gc3VibWl0RW50cnlCdG4uZGF0YXNldC5vcmlnaW5hbE5hbWU7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVHlwZSA9IHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQub3JpZ2luYWxUeXBlO1xuXG4gICAgICAgIGlmICghb3JpZ2luYWxOYW1lIHx8ICFvcmlnaW5hbFR5cGUgfHwgIXR5cGUpIHtcbiAgICAgICAgICB0b2FzdHIuZXJyb3IoJ+abtOaWsOWksei0pe+8mue8uuWwkeW/heimgeS/oeaBr+OAgicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmlnaW5hbFR5cGUgPT09IHR5cGUpIHtcbiAgICAgICAgICAvLyBUeXBlIGhhc24ndCBjaGFuZ2VkLCBqdXN0IHVwZGF0ZVxuICAgICAgICAgIGlmICh0eXBlID09PSAn5oiQ5bCxJykge1xuICAgICAgICAgICAgYXdhaXQgUG9rZWRleC51cGRhdGVBY2hpZXZlbWVudChvcmlnaW5hbE5hbWUsIG5ld0VudHJ5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgUG9rZWRleC51cGRhdGVQb2tlZGV4RW50cnkodHlwZSBhcyBQb2tlZGV4VHlwZSwgb3JpZ2luYWxOYW1lLCBuZXdFbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFR5cGUgaGFzIGNoYW5nZWQsIHNvIHdlIGRlbGV0ZSB0aGUgb2xkIGFuZCBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgaWYgKG9yaWdpbmFsVHlwZSA9PT0gJ+aIkOWwsScpIHtcbiAgICAgICAgICAgIGF3YWl0IFBva2VkZXguZGVsZXRlQWNoaWV2ZW1lbnQob3JpZ2luYWxOYW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgUG9rZWRleC5kZWxldGVQb2tlZGV4RW50cnkob3JpZ2luYWxUeXBlIGFzIFBva2VkZXhUeXBlLCBvcmlnaW5hbE5hbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlID09PSAn5oiQ5bCxJykge1xuICAgICAgICAgICAgYXdhaXQgUG9rZWRleC5jcmVhdGVBY2hpZXZlbWVudChuZXdFbnRyeSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IFBva2VkZXguY3JlYXRlUG9rZWRleEVudHJ5KHR5cGUgYXMgUG9rZWRleFR5cGUsIG5ld0VudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9hc3RyLmluZm8oYOadoeebruW3suS7juKAnCR7b3JpZ2luYWxUeXBlfeKAneenu+WKqOWIsOKAnCR7dHlwZX3igJ1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXNldEFkZEZvcm0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENyZWF0ZSBuZXcgZW50cnlcbiAgICAgICAgaWYgKCF0eXBlKSB7XG4gICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+ivt+mAieaLqeadoeebruexu+Wei++8gScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSA9PT0gJ+aIkOWwsScpIHtcbiAgICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgUG9rZWRleC5jcmVhdGVBY2hpZXZlbWVudChuZXdFbnRyeSk7XG4gICAgICAgICAgaWYgKHN1Y2Nlc3MpIHVwZGF0ZUZvcm1GaWVsZHModHlwZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IFBva2VkZXguY3JlYXRlUG9rZWRleEVudHJ5KHR5cGUgYXMgUG9rZWRleFR5cGUsIG5ld0VudHJ5KTtcbiAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgdXBkYXRlRm9ybUZpZWxkcyh0eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRBZGRNb2RlID09PSAnanNvbicpIHsgLy8gSlNPTiBtb2RlXG4gICAgICBjb25zdCB0eXBlID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJqc29uRW50cnlUeXBlXCJdOmNoZWNrZWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KT8udmFsdWUgYXMgUG9rZWRleFR5cGUgfCAn5oiQ5bCxJztcbiAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBqc29uSW5wdXQ/LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICghanNvblN0cmluZykge1xuICAgICAgICB0b2FzdHIud2FybmluZygn6K+36L6T5YWlSlNPTuaVsOaNru+8gScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xuICAgICAgICBsZXQgc3VjY2Vzc0NvdW50ID0gMDtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ+aIkOWwsScpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCBQb2tlZGV4LmNyZWF0ZUFjaGlldmVtZW50KGVudHJ5KSkge1xuICAgICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN1Y2Nlc3NDb3VudCA+IDApIHtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKGDmiJDlip/lpITnkIYgJHtzdWNjZXNzQ291bnR9IOS4quaWsOaIkOWwse+8gWApO1xuICAgICAgICAgICAganNvbklucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgICAgaWYgKGF3YWl0IFBva2VkZXguY3JlYXRlUG9rZWRleEVudHJ5KHR5cGUsIGVudHJ5KSkge1xuICAgICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN1Y2Nlc3NDb3VudCA+IDApIGpzb25JbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ0pTT07op6PmnpDlpLHotKXvvIzor7fmo4Dmn6XmoLzlvI/vvIEnKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkpTT04gcGFyc2luZyBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgcG9wdWxhdGVWaWV3VGFiKCk7XG4gIH0pO1xuXG4gIHZpZXdUYWJDb250ZW50Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5wb2tlZGV4LWRlbGV0ZS1idG4nKTtcbiAgICBjb25zdCBlZGl0QnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5wb2tlZGV4LWVkaXQtYnRuJyk7XG4gICAgY29uc3Qgdmlld0J1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCcucG9rZWRleC12aWV3LWJ0bicpO1xuXG4gICAgaWYgKHZpZXdCdXR0b24pIHtcbiAgICAgIGNvbnN0IHR5cGUgPSB2aWV3QnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJykgYXMgUG9rZWRleFR5cGUgfCAn5oiQ5bCxJztcbiAgICAgIGNvbnN0IG5hbWUgPSB2aWV3QnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICBpZiAodHlwZSAmJiBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlID09PSAn5oiQ5bCxJykge1xuICAgICAgICAgIGNvbnN0IGFjaGlldmVtZW50cyA9IGF3YWl0IFBva2VkZXguZ2V0QWNoaWV2ZW1lbnRzKCk7XG4gICAgICAgICAgY29uc3QgZW50cnkgPSBhY2hpZXZlbWVudHMuZmluZCgoYWNoOiBhbnkpID0+IGFjaFsn5ZCN56ewJ10gPT09IG5hbWUpO1xuICAgICAgICAgIGlmIChlbnRyeSkgc2hvd01vZGFsV2l0aERhdGEoZW50cnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgUG9rZWRleC5yZWFkUG9rZWRleEVudHJ5KHR5cGUsIG5hbWUpO1xuICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgc2hvd01vZGFsV2l0aERhdGEoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWxldGVCdXR0b24pIHtcbiAgICAgIGNvbnN0IHR5cGUgPSBkZWxldGVCdXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKSBhcyBQb2tlZGV4VHlwZSB8ICfmiJDlsLEnO1xuICAgICAgY29uc3QgbmFtZSA9IGRlbGV0ZUJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgaWYgKHR5cGUgJiYgbmFtZSkge1xuICAgICAgICBpZiAoY29uZmlybShg56Gu5a6a6KaB5Yig6ZmkICR7dHlwZX0g5Zu+6Ym05Lit55qEIOKAnCR7bmFtZX3igJ0g5ZCX77yf5q2k5pON5L2c5LiN5Y+v5pKk6ZSA44CCYCkpIHtcbiAgICAgICAgICBsZXQgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgIGlmICh0eXBlID09PSAn5oiQ5bCxJykge1xuICAgICAgICAgICAgc3VjY2VzcyA9IGF3YWl0IFBva2VkZXguZGVsZXRlQWNoaWV2ZW1lbnQobmFtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSBhd2FpdCBQb2tlZGV4LmRlbGV0ZVBva2VkZXhFbnRyeSh0eXBlLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGF3YWl0IHBvcHVsYXRlVmlld1RhYigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlZGl0QnV0dG9uKSB7XG4gICAgICBjb25zdCB0eXBlID0gZWRpdEJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpIGFzIFBva2VkZXhUeXBlIHwgJ+aIkOWwsSc7XG4gICAgICBjb25zdCBuYW1lID0gZWRpdEJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgaWYgKHR5cGUgJiYgbmFtZSkge1xuICAgICAgICBsZXQgZW50cnk6IFBva2VkZXhFbnRyeSB8IG51bGwgPSBudWxsO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ+aIkOWwsScpIHtcbiAgICAgICAgICBjb25zdCBhY2hpZXZlbWVudHMgPSBhd2FpdCBQb2tlZGV4LmdldEFjaGlldmVtZW50cygpO1xuICAgICAgICAgIGVudHJ5ID0gYWNoaWV2ZW1lbnRzLmZpbmQoKGFjaDogYW55KSA9PiBhY2hbJ+WQjeensCddID09PSBuYW1lKSA/PyBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVudHJ5ID0gKGF3YWl0IFBva2VkZXgucmVhZFBva2VkZXhFbnRyeSh0eXBlIGFzIFBva2VkZXhUeXBlLCBuYW1lKSkgPz8gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgIG1haW5UYWJzPy5mb3JFYWNoKGJ0biA9PiBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS10YWInKSA9PT0gJ2FkZCcpKTtcbiAgICAgICAgICB2aWV3VGFiQ29udGVudD8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgYWRkVGFiQ29udGVudD8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgaW5qZWN0QnRuPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICBzdWJtaXRFbnRyeUJ0bj8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG5cbiAgICAgICAgICBhZGRUYWJNb2RlQnV0dG9ucz8uZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScpID09PSAnZm9ybScpKTtcbiAgICAgICAgICBmb3JtTW9kZUNvbnRlbnQ/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgIGpzb25Nb2RlQ29udGVudD8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgY3VycmVudEFkZE1vZGUgPSAnZm9ybSc7XG5cbiAgICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaW5wdXRbbmFtZT1cImVudHJ5VHlwZVwiXVt2YWx1ZT1cIiR7dHlwZX1cIl1gKSBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZm9ybUZpZWxkc0NvbnRhaW5lcikgZm9ybUZpZWxkc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnRyeSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBhZGRGaWVsZChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc3VibWl0RW50cnlCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrIG1yLTJcIj48L2k+56Gu6K6k5pu05pawJztcbiAgICAgICAgICBzdWJtaXRFbnRyeUJ0bi5kYXRhc2V0LnVwZGF0ZU1vZGUgPSAndHJ1ZSc7XG4gICAgICAgICAgc3VibWl0RW50cnlCdG4uZGF0YXNldC5vcmlnaW5hbE5hbWUgPSBuYW1lO1xuICAgICAgICAgIHN1Ym1pdEVudHJ5QnRuLmRhdGFzZXQub3JpZ2luYWxUeXBlID0gdHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbmNsYXNzIFN0b3J5UmVuZGVyZXIge1xuICBwcml2YXRlIHlhbWxEYXRhOiBhbnk7XG4gIHByaXZhdGUgcmF3WWFtbENvbnRlbnQ6IHN0cmluZztcbiAgcHJpdmF0ZSByb290Tm9kZUtleTogc3RyaW5nIHwgbnVsbDtcbiAgcHJpdmF0ZSBlbGVtZW50czoge1xuICAgIHN0YXR1c0JhclRpdGxlOiBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgdGltZURpc3BsYXk6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBsb2NhdGlvbkRpc3BsYXk6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBjaGFyYWN0ZXJzQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGw7XG4gICAgYWN0aW9uT3duZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBvcHRpb25zTGlzdDogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIHN5c3RlbUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIHNoZWx0ZXJDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICBiZXN0aWFyeUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIGhlcmJvbG9neUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgIGludmVudG9yeUNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsO1xuICB9O1xuICBwcml2YXRlIHJhd0pzb25Db250ZW50OiBhbnkgPSBudWxsO1xuICBwcml2YXRlIGpzb25EYXRhOiBhbnkgPSBudWxsO1xuICBwcml2YXRlIGdsb2JhbFBva2VkZXg6IFBva2VkZXhEYXRhIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy55YW1sRGF0YSA9IG51bGw7XG4gICAgdGhpcy5yYXdZYW1sQ29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5yb290Tm9kZUtleSA9IG51bGw7XG4gICAgdGhpcy5lbGVtZW50cyA9IHtcbiAgICAgIHN0YXR1c0JhclRpdGxlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzLWJhci10aXRsZScpLFxuICAgICAgdGltZURpc3BsYXk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lLWRpc3BsYXknKSxcbiAgICAgIGxvY2F0aW9uRGlzcGxheTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uLWRpc3BsYXknKSxcbiAgICAgIGNoYXJhY3RlcnNDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFyYWN0ZXJzLWNvbnRhaW5lcicpLFxuICAgICAgYWN0aW9uT3duZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3Rpb24tb3duZXInKSxcbiAgICAgIG9wdGlvbnNMaXN0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3B0aW9ucy1saXN0JyksXG4gICAgc3lzdGVtQ29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3lzdGVtLWNvbnRhaW5lcicpLFxuICAgIHNoZWx0ZXJDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGVsdGVyLWNvbnRhaW5lcicpLFxuICAgIGJlc3RpYXJ5Q29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmVzdGlhcnktY29udGFpbmVyJyksXG4gICAgaGVyYm9sb2d5Q29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYm9sb2d5LWNvbnRhaW5lcicpLFxuICAgIGludmVudG9yeUNvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ludmVudG9yeS1jb250YWluZXInKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNvbXBhdGliaWxpdHkoKSB7XG4gICAgaWYgKCF0aGlzLnJvb3ROb2RlS2V5IHx8ICF0aGlzLmpzb25EYXRhKSByZXR1cm47XG4gICAgY29uc3Qgcm9vdERhdGEgPSB0aGlzLmpzb25EYXRhW3RoaXMucm9vdE5vZGVLZXldO1xuICAgIGxldCBtb2RpZmllZCA9IGZhbHNlO1xuXG4gICAgaWYgKCF0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMocm9vdERhdGEsIFsn5bqH5oqk5omAJ10pKSB7XG4gICAgICByb290RGF0YVsn8J+PoSDluofmiqTmiYAnXSA9IHt9O1xuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuZmluZEZpZWxkQnlLZXl3b3Jkcyhyb290RGF0YSwgWyflppblhb3lm77pibQnXSkpIHtcbiAgICAgIHJvb3REYXRhWyfwn5C+IOWmluWFveWbvumJtCddID0geyAn5bey5Y+R546wJzogMCwgJ+W3suaUtuW9lSc6IFtdIH07XG4gICAgICBtb2RpZmllZCA9IHRydWU7XG4gICAgfVxuICAgIGlmICghdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKHJvb3REYXRhLCBbJ+akjeeJqeWbvumJtCddKSkge1xuICAgICAgcm9vdERhdGFbJ/CfjL8g5qSN54mp5Zu+6Ym0J10gPSB7ICflt7Llj5HnjrAnOiAwLCAn5bey56eN5qSNJzogW10gfTtcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG1vZGlmaWVkKSB7XG4gICAgICB0b2FzdHIuaW5mbygn5qOA5rWL5Yiw5pen54mI54q25oCB5qCP77yM5bey6Ieq5Yqo6KGl5YWF57y65aSx55qE5a2X5q615Lul5YW85a6544CCJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBjb25zb2xlLmxvZygnW1N0b3J5UmVuZGVyZXJdIEluaXRpYWxpemluZy4uLicpO1xuICAgIHRoaXMuc2V0TG9hZGluZ1N0YXRlKCk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmF3SnNvbkNvbnRlbnQgPSB0aGlzLmdldFJhd0NvbnRlbnRGcm9tQ2hhdE1lc3NhZ2UoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdbU3RvcnlSZW5kZXJlcl0gUmF3IEpTT04gY29udGVudCBsb2FkZWQ6JywgdGhpcy5yYXdKc29uQ29udGVudCk7XG5cbiAgICAgIGlmICghdGhpcy5yYXdKc29uQ29udGVudCkge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+acquiDveWcqOacgOaWsOa2iOaBr+S4reaJvuWIsEpTT07mlbDmja7jgIInKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgcGFyc2VkSnNvbjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBhcnNlZEpzb24gPSBKU09OLnBhcnNlKHRoaXMucmF3SnNvbkNvbnRlbnQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSlNPTiBwYXJzaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgIHRoaXMuaGFuZGxlUGFyc2luZ0ZhaWx1cmUodGhpcy5yYXdKc29uQ29udGVudCwgZXJyb3IgYXMgRXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuanNvbkRhdGEgPSBwYXJzZWRKc29uO1xuICAgICAgaWYgKCF0aGlzLmpzb25EYXRhKSB7XG4gICAgICAgICAgdG9hc3RyLmVycm9yKCdKU09O5pWw5o2u5qC85byP5LiN5q2j56GuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmZpbmRSb290Tm9kZUtleSgpO1xuICAgICAgdGhpcy5oYW5kbGVDb21wYXRpYmlsaXR5KCk7XG4gICAgICB0aGlzLmdsb2JhbFBva2VkZXggPSBhd2FpdCBQb2tlZGV4LmdldFBva2VkZXhEYXRhKCk7IC8vIENhY2hlIHRoZSBwb2tlZGV4XG4gICAgICBhd2FpdCB0aGlzLnN5bmNWYXJpYWJsZXMoKTtcbiAgICAgIHRoaXMucmVuZGVyQWxsKCk7XG5cbiAgICAgIGNvbnN0IHNhdmVkVGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RvcnlUaGVtZScpIHx8ICduaWdodCc7XG4gICAgICBjb25zdCB0aGVtZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50aGVtZS1idG5bZGF0YS10aGVtZT1cIiR7c2F2ZWRUaGVtZX1cIl1gKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmICh0aGVtZUJ1dHRvbikgdGhlbWVCdXR0b24uY2xpY2soKTtcblxuICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ+eKtuaAgeagj+W3suaIkOWKn+WKoOi9veW5tua4suafk++8gScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfmuLLmn5PlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciBhcyBFcnJvcik7XG4gICAgfVxuICB9XG5cbiAgZ2V0UmF3Q29udGVudEZyb21DaGF0TWVzc2FnZSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVzc2FnZUlkID0gZ2V0Q3VycmVudE1lc3NhZ2VJZCgpO1xuICAgICAgaWYgKG1lc3NhZ2VJZCA9PT0gbnVsbCB8fCBtZXNzYWdlSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+aXoOazleiOt+WPluW9k+WJjea2iOaBryBJROOAgicpO1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICBjb25zdCBtZXNzYWdlID0gZ2V0Q2hhdE1lc3NhZ2VzKG1lc3NhZ2VJZClbMF07XG4gICAgICBpZiAoIW1lc3NhZ2UgfHwgIW1lc3NhZ2UubWVzc2FnZSkgcmV0dXJuICcnO1xuICAgICAgcmV0dXJuIGV4dHJhY3RKc29uRnJvbVN0YXR1c0JhcihtZXNzYWdlLm1lc3NhZ2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLojrflj5bogYrlpKnmtojmga/lpLHotKU6XCIsIGUpO1xuICAgICAgdG9hc3RyLmVycm9yKCfojrflj5bmiJblpITnkIbogYrlpKnmtojmga/ml7blh7rplJnvvIzor7fmo4Dmn6XmjqfliLblj7DjgIInKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICBzZXRMb2FkaW5nU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMuY2hhcmFjdGVyc0NvbnRhaW5lcikgdGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyLmlubmVySFRNTCA9IHRoaXMuY3JlYXRlU3Bpbm5lcigpO1xuICAgIGlmICh0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0KSB0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0LmlubmVySFRNTCA9IGA8bGk+JHt0aGlzLmNyZWF0ZVNwaW5uZXIoKX08L2xpPmA7XG4gIH1cblxuICBjcmVhdGVTcGlubmVyKCkge1xuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHAtNFwiPjxkaXYgY2xhc3M9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1pbmRpZ28tNDAwXCI+PC9kaXY+PC9kaXY+YDtcbiAgfVxuXG4gIGZpbmRSb290Tm9kZUtleSgpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5qc29uRGF0YSk7XG4gICAgdGhpcy5yb290Tm9kZUtleSA9IGtleXMuZmluZChrZXkgPT4ga2V5LmluY2x1ZGVzKCfnirbmgIHmgLvop4gnKSB8fCBrZXkuaW5jbHVkZXMoJ+inkuiJsueKtuaAgeaAu+iniCcpKSB8fCBrZXlzWzBdO1xuICAgIGlmICghdGhpcy5yb290Tm9kZUtleSkge1xuICAgICAgICB0b2FzdHIuZXJyb3IoJ+acquaJvuWIsOagueiKgueCuScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmVsZW1lbnRzLnN0YXR1c0JhclRpdGxlKSB0aGlzLmVsZW1lbnRzLnN0YXR1c0JhclRpdGxlLnRleHRDb250ZW50ID0gXCLnirbmgIHmgLvop4hcIjtcbiAgfVxuXG4gIGZpbmRGaWVsZEJ5S2V5d29yZHMoZGF0YTogYW55LCBrZXl3b3Jkczogc3RyaW5nW10pIHtcbiAgICBpZiAoIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgZm9yIChjb25zdCBrZXl3b3JkIG9mIGtleXdvcmRzKSB7XG4gICAgICAgIGlmIChmaWVsZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSkpIHJldHVybiBmaWVsZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZW5kZXJBbGwoKSB7XG4gICAgaWYgKCF0aGlzLnJvb3ROb2RlS2V5KSByZXR1cm47XG4gICAgY29uc3Qgcm9vdERhdGEgPSB0aGlzLmpzb25EYXRhW3RoaXMucm9vdE5vZGVLZXldO1xuICAgIHRoaXMucmVuZGVySGVhZGVySW5mbyhyb290RGF0YSk7XG4gICAgdGhpcy5yZW5kZXJDaGFyYWN0ZXJzKHJvb3REYXRhKTtcbiAgICB0aGlzLnJlbmRlclNoZWx0ZXIocm9vdERhdGEpO1xuICAgIHRoaXMucmVuZGVyUG9rZWRleEZyb21NZXNzYWdlVmFycygpO1xuICAgIHRoaXMucmVuZGVyU3lzdGVtKHJvb3REYXRhKTtcbiAgICB0aGlzLnJlbmRlckFjdGlvbk9wdGlvbnMocm9vdERhdGEpO1xuICB9XG5cbiAgcmVuZGVySGVhZGVySW5mbyhkYXRhOiBhbnkpIHtcbiAgICBjb25zdCBkYXRlVGltZUZpZWxkID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGRhdGEsIFsn5pel5pyfJywgJ+aXtumXtCddKTtcbiAgICBjb25zdCBsb2NhdGlvbkZpZWxkID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGRhdGEsIFsn5Zyw54K5JywgJ+eOr+WigyddKTtcbiAgICBjb25zdCB0aW1lRGlzcGxheVBhcmVudCA9IHRoaXMuZWxlbWVudHMudGltZURpc3BsYXk/LnBhcmVudE5vZGU7XG4gICAgY29uc3QgbG9jYXRpb25EaXNwbGF5UGFyZW50ID0gdGhpcy5lbGVtZW50cy5sb2NhdGlvbkRpc3BsYXk/LnBhcmVudE5vZGU7XG5cbiAgICBpZiAoZGF0ZVRpbWVGaWVsZCAmJiB0aGlzLmVsZW1lbnRzLnRpbWVEaXNwbGF5ICYmIHRpbWVEaXNwbGF5UGFyZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLnRpbWVEaXNwbGF5LnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXROb2RlTmFtZShkYXRhW2RhdGVUaW1lRmllbGRdLCB0cnVlKTtcbiAgICAgIGNvbnN0IGVtb2ppRWwgPSB0aW1lRGlzcGxheVBhcmVudC5xdWVyeVNlbGVjdG9yKCcuZW1vamknKTtcbiAgICAgIGlmIChlbW9qaUVsKSBlbW9qaUVsLnRleHRDb250ZW50ID0gdGhpcy5leHRyYWN0RW1vamlzKGRhdGFbZGF0ZVRpbWVGaWVsZF0pWzBdIHx8ICfwn5eT77iPJztcbiAgICB9XG4gICAgaWYgKGxvY2F0aW9uRmllbGQgJiYgdGhpcy5lbGVtZW50cy5sb2NhdGlvbkRpc3BsYXkgJiYgbG9jYXRpb25EaXNwbGF5UGFyZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmxvY2F0aW9uRGlzcGxheS50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0Tm9kZU5hbWUoZGF0YVtsb2NhdGlvbkZpZWxkXSwgdHJ1ZSk7XG4gICAgICBjb25zdCBlbW9qaUVsID0gbG9jYXRpb25EaXNwbGF5UGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbW9qaScpO1xuICAgICAgaWYgKGVtb2ppRWwpIGVtb2ppRWwudGV4dENvbnRlbnQgPSB0aGlzLmV4dHJhY3RFbW9qaXMoZGF0YVtsb2NhdGlvbkZpZWxkXSlbMF0gfHwgJ/Cfj57vuI8nO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckNoYXJhY3RlcnMoZGF0YTogYW55KSB7XG4gICAgY29uc3QgY2hhckxpc3RLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMoZGF0YSwgWyfop5LoibInLCAn5YiX6KGoJywgJ+S6uueJqSddKTtcbiAgICBpZiAodGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNoYXJhY3RlcnNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICBpZiAoY2hhckxpc3RLZXkgJiYgQXJyYXkuaXNBcnJheShkYXRhW2NoYXJMaXN0S2V5XSkpIHtcbiAgICAgICAgZGF0YVtjaGFyTGlzdEtleV0uZm9yRWFjaCgoY2hhckRhdGE6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmNyZWF0ZUNoYXJhY3RlckNhcmQoY2hhckRhdGEpO1xuICAgICAgICAgIGlmIChjYXJkKSB0aGlzLmVsZW1lbnRzLmNoYXJhY3RlcnNDb250YWluZXIhLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuY2hhcmFjdGVyc0NvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZUVtcHR5U3RhdGUoJ+ayoeacieinkuiJsuaVsOaNricpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlclN5c3RlbShkYXRhOiBhbnkpIHtcbiAgICBjb25zdCBzeXN0ZW1Db250YWluZXIgPSB0aGlzLmVsZW1lbnRzLnN5c3RlbUNvbnRhaW5lcjtcbiAgICBpZiAoc3lzdGVtQ29udGFpbmVyKSB7XG4gICAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgICBjb25zdCB2YXJpYWJsZXMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICAgIGNvbnN0IHN5c3RlbURhdGEgPSBfLmdldCh2YXJpYWJsZXMsICfkuJbnlYwu57O757ufJywgbnVsbCk7XG4gICAgICByZW5kZXJTeXN0ZW0oc3lzdGVtRGF0YSwgc3lzdGVtQ29udGFpbmVyKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJTaGVsdGVyKGRhdGE6IGFueSkge1xuICAgIGNvbnN0IHNoZWx0ZXJLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMoZGF0YSwgWyfluofmiqTmiYAnXSk7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMuc2hlbHRlckNvbnRhaW5lcikge1xuICAgICAgdGhpcy5lbGVtZW50cy5zaGVsdGVyQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgaWYgKHNoZWx0ZXJLZXkgJiYgdHlwZW9mIGRhdGFbc2hlbHRlcktleV0gPT09ICdvYmplY3QnICYmIGRhdGFbc2hlbHRlcktleV0gIT09IG51bGwpIHtcbiAgICAgICAgY29uc3Qgc2hlbHRlckRhdGEgPSBkYXRhW3NoZWx0ZXJLZXldO1xuICAgICAgICBjb25zdCBjYXJkID0gdGhpcy5jcmVhdGVDaGFyYWN0ZXJDYXJkKHsgW3NoZWx0ZXJLZXldOiBzaGVsdGVyRGF0YSB9KTtcbiAgICAgICAgaWYgKGNhcmQpIHRoaXMuZWxlbWVudHMuc2hlbHRlckNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuc2hlbHRlckNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZUVtcHR5U3RhdGUoJ+aaguaXoOW6h+aKpOaJgOS/oeaBrycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlclBva2VkZXhGcm9tTWVzc2FnZVZhcnMoKSB7XG4gICAgY29uc3QgbWVzc2FnZUlkID0gZ2V0Q3VycmVudE1lc3NhZ2VJZCgpO1xuICAgIGNvbnN0IHZhcmlhYmxlcyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuICAgIGNvbnN0IHBva2VkZXhEYXRhID0gXy5nZXQodmFyaWFibGVzLCAn5LiW55WMLuWbvumJtCcsIHt9KTtcblxuICAgIGNvbnN0IHJlbmRlclNpbmdsZVBva2VkZXggPSAoY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwsIGRhdGE6IGFueSwgbmFtZTogc3RyaW5nLCBlbXB0eVRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmNyZWF0ZUNoYXJhY3RlckNhcmQoeyBbYCR7bmFtZX3lm77pibQgKOW3suWPkeeOsCAke2RhdGEubGVuZ3RofSlgXTogZGF0YSB9KTtcbiAgICAgICAgICBpZiAoY2FyZCkgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZUVtcHR5U3RhdGUoZW1wdHlUZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZW5kZXJTaW5nbGVQb2tlZGV4KHRoaXMuZWxlbWVudHMuYmVzdGlhcnlDb250YWluZXIsIHBva2VkZXhEYXRhWyflppblhb0nXSwgJ+WmluWFvScsICflppblhb3lm77pibTlvoXop6PplIEnKTtcbiAgICByZW5kZXJTaW5nbGVQb2tlZGV4KHRoaXMuZWxlbWVudHMuaGVyYm9sb2d5Q29udGFpbmVyLCBwb2tlZGV4RGF0YVsn5qSN54mpJ10sICfmpI3niaknLCAn5qSN54mp5Zu+6Ym05b6F6Kej6ZSBJyk7XG4gICAgcmVuZGVyU2luZ2xlUG9rZWRleCh0aGlzLmVsZW1lbnRzLmludmVudG9yeUNvbnRhaW5lciwgcG9rZWRleERhdGFbJ+eJqeWTgSddLCAn54mp5ZOBJywgJ+eJqeWTgeWbvumJtOaYr+epuueahCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzeW5jVmFyaWFibGVzKCkge1xuICAgIGlmICghdGhpcy5yb290Tm9kZUtleSB8fCAhdGhpcy5qc29uRGF0YSkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRNZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgICBpZiAoY3VycmVudE1lc3NhZ2VJZCA9PT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1tTdG9yeVJlbmRlcmVyXSDml6Dms5Xojrflj5blvZPliY3mtojmga9JRO+8jOi3s+i/h+WQjOatpeOAgicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJvb3REYXRhID0gdGhpcy5qc29uRGF0YVt0aGlzLnJvb3ROb2RlS2V5XTtcbiAgICAgIGNvbnN0IGN1cnJlbnRWYXJzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBjdXJyZW50TWVzc2FnZUlkIH0pO1xuICAgICAgY29uc3QgbGFzdFN5bmNJZCA9IF8uZ2V0KGN1cnJlbnRWYXJzLCAn5LiW55WMLmxhc3RTeW5jTWVzc2FnZUlkJywgLTEpO1xuXG4gICAgICAvLyDmoLjlv4PpgLvovpHvvJrlj6rmnInlvZPlvZPliY3mtojmga9JROWkp+S6juetieS6juacgOWQjuWQjOatpUlE5pe25omN5omn6KGM5pu05pawXG4gICAgICBpZiAoY3VycmVudE1lc3NhZ2VJZCA+PSBsYXN0U3luY0lkKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAgICAgICBjb25zdCBzZWN0aW9uc1RvU3luYyA9IFtcbiAgICAgICAgICB7IGtleVdvcmRzOiBbJ+W6h+aKpOaJgCddLCB2YXJQYXRoOiAn5LiW55WMLuW6h+aKpOaJgCcgfSxcbiAgICAgICAgICB7IGtleVdvcmRzOiBbJ+WmluWFveWbvumJtCddLCB2YXJQYXRoOiAn5LiW55WMLuWbvumJtC7lppblhb0nIH0sXG4gICAgICAgICAgeyBrZXlXb3JkczogWyfmpI3nianlm77pibQnXSwgdmFyUGF0aDogJ+S4lueVjC7lm77pibQu5qSN54mpJyB9LFxuICAgICAgICAgIHsga2V5V29yZHM6IFsn54mp5ZOB5Zu+6Ym0J10sIHZhclBhdGg6ICfkuJbnlYwu5Zu+6Ym0LueJqeWTgScgfVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIOWNleeLrOWkhOeQhuezu+e7n++8jOehruS/neWug+WPquWcqOWPmOmHj+S4jeWtmOWcqOaXtuS7jkpTT07liJ3lp4vljJbkuIDmrKFcbiAgICAgICAgY29uc3Qgc3lzdGVtRGF0YUluSnNvbiA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3Jkcyhyb290RGF0YSwgWyfns7vnu58nXSk7XG4gICAgICAgIGlmIChzeXN0ZW1EYXRhSW5Kc29uICYmIHJvb3REYXRhW3N5c3RlbURhdGFJbkpzb25dKSB7XG4gICAgICAgICAgY29uc3QgbmV3U3lzdGVtRGF0YSA9IHJvb3REYXRhW3N5c3RlbURhdGFJbkpzb25dO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRTeXN0ZW1EYXRhID0gXy5nZXQoY3VycmVudFZhcnMsICfkuJbnlYwu57O757ufJywge30pO1xuXG4gICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJ5paw5oiQ5bCx6Kej6ZSBXG4gICAgICAgICAgaWYgKG5ld1N5c3RlbURhdGFbJ+aWsOaIkOWwsSddKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdBY2hpZXZlbWVudHMgPSBBcnJheS5pc0FycmF5KG5ld1N5c3RlbURhdGFbJ+aWsOaIkOWwsSddKSA/IG5ld1N5c3RlbURhdGFbJ+aWsOaIkOWwsSddIDogW25ld1N5c3RlbURhdGFbJ+aWsOaIkOWwsSddXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZEFjaGlldmVtZW50cyA9IF8uY2xvbmVEZWVwKF8uZ2V0KGN1cnJlbnRTeXN0ZW1EYXRhLCAn5bey5a6M5oiQJywgW10pKTtcbiAgICAgICAgICAgIGxldCB1cGRhdGVkUG9pbnRzID0gXy5nZXQoY3VycmVudFN5c3RlbURhdGEsICfmiJDlsLHngrnmlbAnLCAwKTtcblxuICAgICAgICAgICAgbmV3QWNoaWV2ZW1lbnRzLmZvckVhY2goKGFjaDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIC8vIOmBv+WFjemHjeWkjea3u+WKoFxuICAgICAgICAgICAgICBpZiAoIXVwZGF0ZWRBY2hpZXZlbWVudHMuc29tZSgoZXhpc3RpbmdBY2g6IGFueSkgPT4gZXhpc3RpbmdBY2hbJ+WQjeensCddID09PSBhY2hbJ+WQjeensCddKSkge1xuICAgICAgICAgICAgICAgIC8vIOWKqOaAgeWcsOWwhuaJgOacieWtl+autea3u+WKoOi/m+WOu++8jOmZpOS6hueCueaVsFxuICAgICAgICAgICAgICAgIGNvbnN0IGFjaGlldmVtZW50RGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHsgLi4uYWNoIH07XG4gICAgICAgICAgICAgICAgZGVsZXRlIGFjaGlldmVtZW50RGF0YVsn54K55pWwJ107XG4gICAgICAgICAgICAgICAgdXBkYXRlZEFjaGlldmVtZW50cy5wdXNoKGFjaGlldmVtZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdXBkYXRlZFBvaW50cyArPSBhY2hbJ+eCueaVsCddIHx8IDA7XG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOino+mUgeaWsOaIkOWwse+8miR7YWNoWyflkI3np7AnXX1gLCAn5oGt5Zac77yBJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyDmm7TmlrDns7vnu5/mlbDmja5cbiAgICAgICAgICAgIGN1cnJlbnRTeXN0ZW1EYXRhWyflt7LlrozmiJAnXSA9IHVwZGF0ZWRBY2hpZXZlbWVudHM7XG4gICAgICAgICAgICBjdXJyZW50U3lzdGVtRGF0YVsn5oiQ5bCx54K55pWwJ10gPSB1cGRhdGVkUG9pbnRzO1xuICAgICAgICAgICAgaWYobmV3U3lzdGVtRGF0YVsn5o+Q56S6J10pIGN1cnJlbnRTeXN0ZW1EYXRhWyfmj5DnpLonXSA9IG5ld1N5c3RlbURhdGFbJ+aPkOekuiddO1xuICAgICAgICAgICAgdXBkYXRlc1sn5LiW55WMLuezu+e7nyddID0gY3VycmVudFN5c3RlbURhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdIOajgOa1i+WIsOaWsOaIkOWwse+8jOW3suWQiOW5tuW5tuabtOaWsOezu+e7n+WPmOmHj+OAgmApO1xuXG4gICAgICAgICAgfSBlbHNlIGlmIChuZXdTeXN0ZW1EYXRhWyfku4rml6Xlt7Lnrb7liLAnXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLmdldERhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB5ZXN0ZXJkYXkuc2V0RGF0ZSh0b2RheSAtIDEpO1xuXG4gICAgICAgICAgICBjb25zdCBzaWduZWRJbkRheXMgPSBfLmNsb25lRGVlcChfLmdldChjdXJyZW50U3lzdGVtRGF0YSwgJ+W3suetvuWIsCcsIFtdKSk7XG4gICAgICAgICAgICBpZiAoIXNpZ25lZEluRGF5cy5pbmNsdWRlcyh0b2RheSkpIHtcbiAgICAgICAgICAgICAgc2lnbmVkSW5EYXlzLnB1c2godG9kYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgY29uc2VjdXRpdmVEYXlzID0gXy5nZXQoY3VycmVudFN5c3RlbURhdGEsICfov57nu63nrb7liLAnLCAwKTtcbiAgICAgICAgICAgIGlmIChzaWduZWRJbkRheXMuaW5jbHVkZXMoeWVzdGVyZGF5LmdldERhdGUoKSkpIHtcbiAgICAgICAgICAgICAgY29uc2VjdXRpdmVEYXlzKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zZWN1dGl2ZURheXMgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjdXJyZW50U3lzdGVtRGF0YVsn5bey562+5YiwJ10gPSBzaWduZWRJbkRheXM7XG4gICAgICAgICAgICBjdXJyZW50U3lzdGVtRGF0YVsn6L+e57ut562+5YiwJ10gPSBjb25zZWN1dGl2ZURheXM7XG4gICAgICAgICAgICBpZihuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXSkgY3VycmVudFN5c3RlbURhdGFbJ+aPkOekuiddID0gbmV3U3lzdGVtRGF0YVsn5o+Q56S6J107XG5cbiAgICAgICAgICAgIC8vIOWkhOeQhuetvuWIsOWlluWKsVxuICAgICAgICAgICAgaWYgKG5ld1N5c3RlbURhdGFbJ+WlluWKsSddKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJld2FyZFRleHQgPSBuZXdTeXN0ZW1EYXRhWyflpZblirEnXTtcbiAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSByZXdhcmRUZXh0Lm1hdGNoKC/jgJAoLis/KeOAkXgoXFxkKykvKTtcbiAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtQW1vdW50ID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDlgYforr7lj6rmnInkuIDkuKrop5LoibLvvIzmib7liLDop5LoibLmlbDmja7lubbmm7TmlrDnianlk4FcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyTGlzdEtleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3Jkcyhyb290RGF0YSwgWyfop5LoibInLCAn5YiX6KGoJywgJ+S6uueJqSddKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhckxpc3RLZXkgJiYgQXJyYXkuaXNBcnJheShyb290RGF0YVtjaGFyTGlzdEtleV0pICYmIHJvb3REYXRhW2NoYXJMaXN0S2V5XS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjaGFyQ29udGFpbmVyID0gcm9vdERhdGFbY2hhckxpc3RLZXldWzBdO1xuICAgICAgICAgICAgICAgICAgY29uc3QgY2hhckRhdGFLZXkgPSBPYmplY3Qua2V5cyhjaGFyQ29udGFpbmVyKVswXTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhID0gY2hhckNvbnRhaW5lcltjaGFyRGF0YUtleV07XG4gICAgICAgICAgICAgICAgICBjb25zdCBuYW1lS2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGNoYXJEYXRhLCBbJ+Wnk+WQjScsICflkI3np7AnXSk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChuYW1lS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJOYW1lID0gdGhpcy5mb3JtYXROb2RlTmFtZShjaGFyRGF0YVtuYW1lS2V5XSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zVmFyUGF0aCA9IGDop5LoibIuJHtjaGFyTmFtZX0u54mp5ZOBYDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW1zID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsIGl0ZW1zVmFyUGF0aCwgW10pKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIOajgOafpeeJqeWTgeaYr+WQpuW3suWtmOWcqFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0l0ZW1JbmRleCA9IGN1cnJlbnRJdGVtcy5maW5kSW5kZXgoKGl0ZW06IHN0cmluZykgPT4gaXRlbS5pbmNsdWRlcyhpdGVtTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdJdGVtSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOaVsOmHj1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbVRleHQgPSBjdXJyZW50SXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQW1vdW50TWF0Y2ggPSBleGlzdGluZ0l0ZW1UZXh0Lm1hdGNoKC94KFxcZCspLyk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBbW91bnQgPSBleGlzdGluZ0Ftb3VudE1hdGNoID8gcGFyc2VJbnQoZXhpc3RpbmdBbW91bnRNYXRjaFsxXSwgMTApIDogMTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBbW91bnQgPSBleGlzdGluZ0Ftb3VudCArIGl0ZW1BbW91bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zW2V4aXN0aW5nSXRlbUluZGV4XSA9IGDjgJAke2l0ZW1OYW1lfeOAkXgke25ld0Ftb3VudH1gO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoOaWsOeJqeWTgVxuICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5wdXNoKGDjgJAke2l0ZW1OYW1lfeOAkXgke2l0ZW1BbW91bnR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlc1tpdGVtc1ZhclBhdGhdID0gY3VycmVudEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdIOW3suWwhuetvuWIsOWlluWKseKAnCR7cmV3YXJkVGV4dH3igJ3mt7vliqDliLDop5LoibLigJwke2NoYXJOYW1lfeKAneeahOeJqeWTgeWPmOmHj+S4reOAgmApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGVzWyfkuJbnlYwu57O757ufJ10gPSBjdXJyZW50U3lzdGVtRGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU3RvcnlSZW5kZXJlcl0g5qOA5rWL5Yiw562+5Yiw5LqL5Lu277yM5bey5pu05paw562+5Yiw5pWw5o2u44CCYCk7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1N5c3RlbURhdGFbJ+aKgOiDveaPkOWNhyddKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbFVwZGF0ZXMgPSBBcnJheS5pc0FycmF5KG5ld1N5c3RlbURhdGFbJ+aKgOiDveaPkOWNhyddKSA/IG5ld1N5c3RlbURhdGFbJ+aKgOiDveaPkOWNhyddIDogW25ld1N5c3RlbURhdGFbJ+aKgOiDveaPkOWNhyddXTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTa2lsbHMgPSBfLmNsb25lRGVlcChfLmdldChjdXJyZW50U3lzdGVtRGF0YSwgJ+aKgOiDvScsIFtdKSk7XG5cbiAgICAgICAgICAgIHNraWxsVXBkYXRlcy5mb3JFYWNoKCh1cGRhdGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBza2lsbEluZGV4ID0gY3VycmVudFNraWxscy5maW5kSW5kZXgoKHM6IGFueSkgPT4gc1sn5ZCN56ewJ10gPT09IHVwZGF0ZVsn5ZCN56ewJ10pO1xuICAgICAgICAgICAgICBpZiAoc2tpbGxJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8g5pu05paw546w5pyJ5oqA6IO9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBjdXJyZW50U2tpbGxzW3NraWxsSW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFeHAgPSBza2lsbFsn54af57uD5bqmJ10gfHwgeyB2YWx1ZTogMCwgbWF4OiAxMDAgfTtcbiAgICAgICAgICAgICAgICBjdXJyZW50RXhwLnZhbHVlICs9IHVwZGF0ZVsn54af57uD5bqm5aKe5YqgJ10gfHwgMDtcblxuICAgICAgICAgICAgICAgIC8vIOWkhOeQhuWNh+e6p1xuICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RXhwLnZhbHVlID49IGN1cnJlbnRFeHAubWF4KSB7XG4gICAgICAgICAgICAgICAgICBjdXJyZW50RXhwLnZhbHVlIC09IGN1cnJlbnRFeHAubWF4O1xuICAgICAgICAgICAgICAgICAgc2tpbGxbJ+etiee6pyddID0gKHNraWxsWyfnrYnnuqcnXSB8fCAxKSArIDE7XG4gICAgICAgICAgICAgICAgICAvLyDljYfnuqflkI7nhp/nu4PluqbkuIrpmZDlj6/og73kvJrlop7liqDvvIzov5nph4znroDljJblpITnkIbvvIzlrp7pmYXlj6/mianlsZVcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRFeHAubWF4ID0gTWF0aC5mbG9vcihjdXJyZW50RXhwLm1heCAqIDEuNSk7IFxuICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOS9oOeahOaKgOiDveOAkCR7c2tpbGxbJ+WQjeensCddfeOAkeWNh+e6p+S6hu+8gWAsICfmga3llpzvvIEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2tpbGxbJ+eGn+e7g+W6piddID0gY3VycmVudEV4cDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDmt7vliqDmlrDmioDog71cbiAgICAgICAgICAgICAgICBjdXJyZW50U2tpbGxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgJ+WQjeensCc6IHVwZGF0ZVsn5ZCN56ewJ10sXG4gICAgICAgICAgICAgICAgICAn562J57qnJzogMSxcbiAgICAgICAgICAgICAgICAgICfnhp/nu4PluqYnOiB7IHZhbHVlOiB1cGRhdGVbJ+eGn+e7g+W6puWinuWKoCddIHx8IDAsIG1heDogMTAwIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0b2FzdHIuaW5mbyhg5L2g5a2m5Lya5LqG5paw5oqA6IO977ya44CQJHt1cGRhdGVbJ+WQjeensCddfeOAke+8gWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY3VycmVudFN5c3RlbURhdGFbJ+aKgOiDvSddID0gY3VycmVudFNraWxscztcbiAgICAgICAgICAgIGlmKG5ld1N5c3RlbURhdGFbJ+aPkOekuiddKSBjdXJyZW50U3lzdGVtRGF0YVsn5o+Q56S6J10gPSBuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXTtcbiAgICAgICAgICAgIHVwZGF0ZXNbJ+S4lueVjC7ns7vnu58nXSA9IGN1cnJlbnRTeXN0ZW1EYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSDmo4DmtYvliLDmioDog73mj5DljYfkuovku7bvvIzlt7Lmm7TmlrDmioDog73mlbDmja7jgIJgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAobmV3U3lzdGVtRGF0YVsn54mp5ZOB5Lqk5o2iJ10pIHtcbiAgICAgICAgICAgIGNvbnN0IGV4Y2hhbmdlID0gbmV3U3lzdGVtRGF0YVsn54mp5ZOB5Lqk5o2iJ107XG4gICAgICAgICAgICBpZiAoZXhjaGFuZ2VbJ+aIkOWKnyddKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJMaXN0S2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKHJvb3REYXRhLCBbJ+inkuiJsicsICfliJfooagnLCAn5Lq654mpJ10pO1xuICAgICAgICAgICAgICBpZiAoY2hhckxpc3RLZXkgJiYgQXJyYXkuaXNBcnJheShyb290RGF0YVtjaGFyTGlzdEtleV0pICYmIHJvb3REYXRhW2NoYXJMaXN0S2V5XS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhckNvbnRhaW5lciA9IHJvb3REYXRhW2NoYXJMaXN0S2V5XVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyRGF0YUtleSA9IE9iamVjdC5rZXlzKGNoYXJDb250YWluZXIpWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhID0gY2hhckNvbnRhaW5lcltjaGFyRGF0YUtleV07XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZUtleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3JkcyhjaGFyRGF0YSwgWyflp5PlkI0nLCAn5ZCN56ewJ10pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChuYW1lS2V5KSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjaGFyTmFtZSA9IHRoaXMuZm9ybWF0Tm9kZU5hbWUoY2hhckRhdGFbbmFtZUtleV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXNWYXJQYXRoID0gYOinkuiJsi4ke2NoYXJOYW1lfS7nianlk4FgO1xuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW1zID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsIGl0ZW1zVmFyUGF0aCwgW10pKTtcblxuICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5aSx5Y6755qE54mp5ZOBXG4gICAgICAgICAgICAgICAgICAoZXhjaGFuZ2VbJ+S6pOaNoueJqeWTgSddWyflpLHljrsnXSB8fCBbXSkuZm9yRWFjaCgoaXRlbVRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC/jgJAoLis/KeOAkXgoXFxkKykvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb1JlbW92ZSA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtSW5kZXggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KChpdGVtOiBzdHJpbmcpID0+IGl0ZW0uaW5jbHVkZXMoaXRlbU5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdJdGVtSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtVGV4dCA9IGN1cnJlbnRJdGVtc1tleGlzdGluZ0l0ZW1JbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0Ftb3VudE1hdGNoID0gZXhpc3RpbmdJdGVtVGV4dC5tYXRjaCgveChcXGQrKS8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBbW91bnQgPSBleGlzdGluZ0Ftb3VudE1hdGNoID8gcGFyc2VJbnQoZXhpc3RpbmdBbW91bnRNYXRjaFsxXSwgMTApIDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Ftb3VudCA9IGV4aXN0aW5nQW1vdW50IC0gYW1vdW50VG9SZW1vdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3QW1vdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdID0gYOOAkCR7aXRlbU5hbWV944CReCR7bmV3QW1vdW50fWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbXMuc3BsaWNlKGV4aXN0aW5nSXRlbUluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAvLyDlpITnkIbojrflvpfnmoTnianlk4FcbiAgICAgICAgICAgICAgICAgIChleGNoYW5nZVsn5Lqk5o2i54mp5ZOBJ11bJ+iOt+W+lyddIHx8IFtdKS5mb3JFYWNoKChpdGVtVGV4dDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gaXRlbVRleHQubWF0Y2goL+OAkCguKz8p44CReChcXGQrKS8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtTmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudFRvQWRkID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0l0ZW1JbmRleCA9IGN1cnJlbnRJdGVtcy5maW5kSW5kZXgoKGl0ZW06IHN0cmluZykgPT4gaXRlbS5pbmNsdWRlcyhpdGVtTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0l0ZW1JbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0l0ZW1UZXh0ID0gY3VycmVudEl0ZW1zW2V4aXN0aW5nSXRlbUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQW1vdW50TWF0Y2ggPSBleGlzdGluZ0l0ZW1UZXh0Lm1hdGNoKC94KFxcZCspLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0Ftb3VudCA9IGV4aXN0aW5nQW1vdW50TWF0Y2ggPyBwYXJzZUludChleGlzdGluZ0Ftb3VudE1hdGNoWzFdLCAxMCkgOiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QW1vdW50ID0gZXhpc3RpbmdBbW91bnQgKyBhbW91bnRUb0FkZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtc1tleGlzdGluZ0l0ZW1JbmRleF0gPSBg44CQJHtpdGVtTmFtZX3jgJF4JHtuZXdBbW91bnR9YDtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zLnB1c2goYOOAkCR7aXRlbU5hbWV944CReCR7YW1vdW50VG9BZGR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZXNbaXRlbXNWYXJQYXRoXSA9IGN1cnJlbnRJdGVtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoZXhjaGFuZ2VbJ+aPkOekuiddIHx8ICfkuqTmjaLmiJDlip/vvIEnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKGV4Y2hhbmdlWyfmj5DnpLonXSB8fCAn5Lqk5o2i5aSx6LSl44CCJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDkuI3nrqHmiJDlip/kuI7lkKbvvIzpg73mm7TmlrDns7vnu5/mj5DnpLpcbiAgICAgICAgICAgIGlmKG5ld1N5c3RlbURhdGFbJ+aPkOekuiddKSBjdXJyZW50U3lzdGVtRGF0YVsn5o+Q56S6J10gPSBuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXTtcbiAgICAgICAgICAgIHVwZGF0ZXNbJ+S4lueVjC7ns7vnu58nXSA9IGN1cnJlbnRTeXN0ZW1EYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSDmo4DmtYvliLDnianlk4HkuqTmjaLkuovku7bvvIzlt7LlpITnkIbjgIJgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAobmV3U3lzdGVtRGF0YVsn54mp5ZOB5Y+Y5YyWJ10pIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZSA9IG5ld1N5c3RlbURhdGFbJ+eJqeWTgeWPmOWMliddO1xuICAgICAgICAgICAgY29uc3QgY2hhckxpc3RLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMocm9vdERhdGEsIFsn6KeS6ImyJywgJ+WIl+ihqCcsICfkurrniaknXSk7XG4gICAgICAgICAgICBpZiAoY2hhckxpc3RLZXkgJiYgQXJyYXkuaXNBcnJheShyb290RGF0YVtjaGFyTGlzdEtleV0pICYmIHJvb3REYXRhW2NoYXJMaXN0S2V5XS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJDb250YWluZXIgPSByb290RGF0YVtjaGFyTGlzdEtleV1bMF07XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhS2V5ID0gT2JqZWN0LmtleXMoY2hhckNvbnRhaW5lcilbMF07XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhID0gY2hhckNvbnRhaW5lcltjaGFyRGF0YUtleV07XG4gICAgICAgICAgICAgIGNvbnN0IG5hbWVLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMoY2hhckRhdGEsIFsn5aeT5ZCNJywgJ+WQjeensCddKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChuYW1lS2V5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhck5hbWUgPSB0aGlzLmZvcm1hdE5vZGVOYW1lKGNoYXJEYXRhW25hbWVLZXldLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtc1ZhclBhdGggPSBg6KeS6ImyLiR7Y2hhck5hbWV9LueJqeWTgWA7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEl0ZW1zID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsIGl0ZW1zVmFyUGF0aCwgW10pKTtcblxuICAgICAgICAgICAgICAgIC8vIOe7n+S4gOWkhOeQhueJqeWTgeaVsOmHj+WPmOWMlueahOWHveaVsFxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUl0ZW1Db3VudCA9IChpdGVtTGlzdDogc3RyaW5nW10sIGFtb3VudE1vZGlmaWVyOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgIChpdGVtTGlzdCB8fCBbXSkuZm9yRWFjaCgoaXRlbVRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC/jgJAoLis/KeOAkXgoXFxkKykvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbU5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUludChtYXRjaFsyXSwgMTApICogYW1vdW50TW9kaWZpZXI7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtSW5kZXggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KChpdGVtOiBzdHJpbmcpID0+IGl0ZW0uaW5jbHVkZXMoYOOAkCR7aXRlbU5hbWV944CRYCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nSXRlbUluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbVRleHQgPSBjdXJyZW50SXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdBbW91bnRNYXRjaCA9IGV4aXN0aW5nSXRlbVRleHQubWF0Y2goL3goXFxkKykvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQW1vdW50ID0gZXhpc3RpbmdBbW91bnRNYXRjaCA/IHBhcnNlSW50KGV4aXN0aW5nQW1vdW50TWF0Y2hbMV0sIDEwKSA6IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdBbW91bnQgPSBleGlzdGluZ0Ftb3VudCArIGFtb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdBbW91bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtc1tleGlzdGluZ0l0ZW1JbmRleF0gPSBg44CQJHtpdGVtTmFtZX3jgJF4JHtuZXdBbW91bnR9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5zcGxpY2UoZXhpc3RpbmdJdGVtSW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYW1vdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zLnB1c2goYOOAkCR7aXRlbU5hbWV944CReCR7YW1vdW50fWApO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHVwZGF0ZUl0ZW1Db3VudChjaGFuZ2VbJ+WkseWOuyddLCAtMSk7XG4gICAgICAgICAgICAgICAgdXBkYXRlSXRlbUNvdW50KGNoYW5nZVsn6I635b6XJ10sIDEpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHVwZGF0ZXNbaXRlbXNWYXJQYXRoXSA9IGN1cnJlbnRJdGVtcztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9hc3RyLmluZm8oY2hhbmdlWyfmj5DnpLonXSB8fCAn54mp5ZOB5Y+R55Sf5LqG5Y+Y5YyW44CCJyk7XG4gICAgICAgICAgICBpZihuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXSkgY3VycmVudFN5c3RlbURhdGFbJ+aPkOekuiddID0gbmV3U3lzdGVtRGF0YVsn5o+Q56S6J107XG4gICAgICAgICAgICB1cGRhdGVzWyfkuJbnlYwu57O757ufJ10gPSBjdXJyZW50U3lzdGVtRGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU3RvcnlSZW5kZXJlcl0g5qOA5rWL5Yiw54mp5ZOB5Y+Y5YyW5LqL5Lu277yM5bey5aSE55CG44CCYCk7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1N5c3RlbURhdGFbJ+W6h+aKpOaJgOWNh+e6pyddKSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlID0gbmV3U3lzdGVtRGF0YVsn5bqH5oqk5omA5Y2H57qnJ107XG4gICAgICAgICAgICBjb25zdCBzaGVsdGVyVmFyUGF0aCA9ICfkuJbnlYwu5bqH5oqk5omAJztcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTaGVsdGVyID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsIHNoZWx0ZXJWYXJQYXRoLCB7fSkpO1xuXG4gICAgICAgICAgICAvLyDlkIjlubbmlrDml6fmlbDmja5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHVwZ3JhZGUpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ+aWsOWinuWKn+iDvScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkodXBncmFkZVtrZXldKSA/IHVwZ3JhZGVba2V5XSA6IFt1cGdyYWRlW2tleV1dO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRmVhdHVyZXMgPSBjdXJyZW50U2hlbHRlclsn5Yqf6IO9J10gfHwgW107XG4gICAgICAgICAgICAgICAgY3VycmVudFNoZWx0ZXJbJ+WKn+iDvSddID0gXy51bmlvbihleGlzdGluZ0ZlYXR1cmVzLCBuZXdGZWF0dXJlcyk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ICE9PSAn5o+Q56S6Jykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTaGVsdGVyW2tleV0gPSB1cGdyYWRlW2tleV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGVzW3NoZWx0ZXJWYXJQYXRoXSA9IGN1cnJlbnRTaGVsdGVyO1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3ModXBncmFkZVsn5o+Q56S6J10gfHwgJ+W6h+aKpOaJgOW3suabtOaWsO+8gScsICflrrblm63mlrDosownKTtcbiAgICAgICAgICAgIGlmKG5ld1N5c3RlbURhdGFbJ+aPkOekuiddKSBjdXJyZW50U3lzdGVtRGF0YVsn5o+Q56S6J10gPSBuZXdTeXN0ZW1EYXRhWyfmj5DnpLonXTtcbiAgICAgICAgICAgIHVwZGF0ZXNbJ+S4lueVjC7ns7vnu58nXSA9IGN1cnJlbnRTeXN0ZW1EYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSDmo4DmtYvliLDluofmiqTmiYDljYfnuqfkuovku7bvvIzlt7LlpITnkIbjgIJgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAobmV3U3lzdGVtRGF0YVsn5ZCN56ewJ10gPT09ICfku6XnianmjaLnianns7vnu58nICYmIG5ld1N5c3RlbURhdGFbJ+WPr+aNouWPlueahOeJqeWTgSddKSB7XG4gICAgICAgICAgICBjb25zdCByZWZyZXNoZWRJdGVtcyA9IG5ld1N5c3RlbURhdGFbJ+WPr+aNouWPlueahOeJqeWTgSddO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFBva2VkZXhJdGVtcyA9IF8uY2xvbmVEZWVwKF8uZ2V0KGN1cnJlbnRWYXJzLCAn5LiW55WMLuWbvumJtC7nianlk4EnLCBbXSkpO1xuICAgICAgICAgICAgbGV0IG5ld0Rpc2NvdmVyaWVzID0gMDtcbiAgICAgICAgXG4gICAgICAgICAgICByZWZyZXNoZWRJdGVtcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbVsn5ZCN56ewJ10gJiYgIWN1cnJlbnRQb2tlZGV4SXRlbXMuc29tZSgoZXhpc3Rpbmc6IGFueSkgPT4gZXhpc3RpbmdbJ+WQjeensCddID09PSBpdGVtWyflkI3np7AnXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9rZWRleEVudHJ5OiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ+WQjeensCc6IGl0ZW1bJ+WQjeensCddLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVsn5ZOB6Zi2J10pIHBva2VkZXhFbnRyeVsn5ZOB6Zi2J10gPSBpdGVtWyflk4HpmLYnXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bJ+aPj+i/sCddKSBwb2tlZGV4RW50cnlbJ+aPj+i/sCddID0gaXRlbVsn5o+P6L+wJ107XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9rZWRleEl0ZW1zLnB1c2gocG9rZWRleEVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgbmV3RGlzY292ZXJpZXMrKztcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmluZm8oYOWPkeeOsOaWsOeJqeWTge+8muKAnCR7aXRlbVsn5ZCN56ewJ1194oCd77yM5bey6Ieq5Yqo5pS25b2V5Zu+6Ym077yBYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ld0Rpc2NvdmVyaWVzID4gMCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXNbJ+S4lueVjC7lm77pibQu54mp5ZOBJ10gPSBjdXJyZW50UG9rZWRleEl0ZW1zO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU3RvcnlSZW5kZXJlcl0g5Lul54mp5o2i54mp5Yi35paw77yM5paw5aKeICR7bmV3RGlzY292ZXJpZXN9IOS4queJqeWTgeWIsOWbvumJtOOAgmApO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIC8vIOWQjOaXtuabtOaWsOezu+e7n+acrOi6q+eahOWPr+S6pOaNoueJqeWTgeWIl+ihqFxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtRGF0YVRvVXBkYXRlID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsICfkuJbnlYwu57O757ufJywge30pKTtcbiAgICAgICAgICAgIHN5c3RlbURhdGFUb1VwZGF0ZVsn5Y+v5o2i5Y+W55qE54mp5ZOBJ10gPSByZWZyZXNoZWRJdGVtcztcbiAgICAgICAgICAgIGlmKG5ld1N5c3RlbURhdGFbJ+aPkOekuiddKSBzeXN0ZW1EYXRhVG9VcGRhdGVbJ+aPkOekuiddID0gbmV3U3lzdGVtRGF0YVsn5o+Q56S6J107XG4gICAgICAgICAgICB1cGRhdGVzWyfkuJbnlYwu57O757ufJ10gPSBzeXN0ZW1EYXRhVG9VcGRhdGU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdIOajgOa1i+WIsOS7peeJqeaNoueJqeezu+e7n+WIt+aWsO+8jOW3suabtOaWsOWPr+S6pOaNoueJqeWTgeWIl+ihqOOAgmApO1xuXG4gICAgICAgICAgfSBlbHNlIGlmIChuZXdTeXN0ZW1EYXRhWyfmlrDnianlk4Hlj5HnjrAnXSkge1xuICAgICAgICAgICAgY29uc3QgbmV3SXRlbXMgPSBBcnJheS5pc0FycmF5KG5ld1N5c3RlbURhdGFbJ+aWsOeJqeWTgeWPkeeOsCddKSA/IG5ld1N5c3RlbURhdGFbJ+aWsOeJqeWTgeWPkeeOsCddIDogW25ld1N5c3RlbURhdGFbJ+aWsOeJqeWTgeWPkeeOsCddXTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQb2tlZGV4ID0gXy5jbG9uZURlZXAoXy5nZXQoY3VycmVudFZhcnMsICfkuJbnlYwu5Zu+6Ym0LueJqeWTgScsIFtdKSk7XG5cbiAgICAgICAgICAgIG5ld0l0ZW1zLmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRQb2tlZGV4LnNvbWUoKGV4aXN0aW5nOiBhbnkpID0+IGV4aXN0aW5nWyflkI3np7AnXSA9PT0gaXRlbVsn5ZCN56ewJ10pKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBva2VkZXgucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICB0b2FzdHIuaW5mbyhg5paw55qE54mp5ZOB4oCcJHtpdGVtWyflkI3np7AnXX3igJ3lt7Lmt7vliqDliLDlm77pibTvvIFgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1cGRhdGVzWyfkuJbnlYwu5Zu+6Ym0LueJqeWTgSddID0gY3VycmVudFBva2VkZXg7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdIOajgOa1i+WIsOaWsOeJqeWTgeWPkeeOsOS6i+S7tu+8jOW3suabtOaWsOeJqeWTgeWbvumJtOOAgmApO1xuXG4gICAgICAgICAgfSBlbHNlIGlmICghXy5oYXMoY3VycmVudFZhcnMsICfkuJbnlYwu57O757ufJykpIHtcbiAgICAgICAgICAgIC8vIOWmguaenOWPmOmHj+S4reayoeacieezu+e7n+aVsOaNru+8jOWImeWwneivleS7jkpTT07ov5vooYzliJ3lp4vljJZcbiAgICAgICAgICAgIGNvbnN0IHN5c3RlbURhdGFJbkpzb24gPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMocm9vdERhdGEsIFsn57O757ufJ10pO1xuICAgICAgICAgICAgaWYgKHN5c3RlbURhdGFJbkpzb24gJiYgcm9vdERhdGFbc3lzdGVtRGF0YUluSnNvbl0pIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVzWyfkuJbnlYwu57O757ufJ10gPSByb290RGF0YVtzeXN0ZW1EYXRhSW5Kc29uXTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdICfkuJbnlYwu57O757ufJyDlj5jph4/kuI3lrZjlnKjvvIzku45KU09O6L+b6KGM5Yid5aeL5YyW44CCYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHNlY3Rpb25zVG9TeW5jKSB7XG4gICAgICAgICAgY29uc3QgZGF0YUtleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3Jkcyhyb290RGF0YSwgc2VjdGlvbi5rZXlXb3Jkcyk7XG4gICAgICAgICAgaWYgKGRhdGFLZXkgJiYgcm9vdERhdGFbZGF0YUtleV0pIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RhdGEgPSByb290RGF0YVtkYXRhS2V5XTtcbiAgICAgICAgICAgIC8vIEZvciBwb2tlZGV4LCB3ZSBuZWVkIHRvIG1lcmdlIGFycmF5cywgbm90IHJlcGxhY2UgdGhlbVxuICAgICAgICAgICAgaWYgKHNlY3Rpb24udmFyUGF0aC5pbmNsdWRlcygn5Zu+6Ym0JykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGREYXRhID0gXy5nZXQoY3VycmVudFZhcnMsIHNlY3Rpb24udmFyUGF0aCwgW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkRGF0YSA9IF8udW5pb25CeShvbGREYXRhLCBuZXdEYXRhWyflt7LmlLblvZUnXSB8fCBbXSwgJ+WQjeensCcpO1xuICAgICAgICAgICAgICAgIGlmICghXy5pc0VxdWFsKG9sZERhdGEsIGNvbWJpbmVkRGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5zZXQodXBkYXRlcywgc2VjdGlvbi52YXJQYXRoLCBjb21iaW5lZERhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkRGF0YSA9IF8uZ2V0KGN1cnJlbnRWYXJzLCBzZWN0aW9uLnZhclBhdGgpO1xuICAgICAgICAgICAgICAgIGlmICghXy5pc0VxdWFsKG5ld0RhdGEsIG9sZERhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uc2V0KHVwZGF0ZXMsIHNlY3Rpb24udmFyUGF0aCwgbmV3RGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWQjOatpeinkuiJsueJqeWTgVxuICAgICAgICBjb25zdCBjaGFyTGlzdEtleSA9IHRoaXMuZmluZEZpZWxkQnlLZXl3b3Jkcyhyb290RGF0YSwgWyfop5LoibInLCAn5YiX6KGoJywgJ+S6uueJqSddKTtcbiAgICAgICAgaWYgKGNoYXJMaXN0S2V5ICYmIEFycmF5LmlzQXJyYXkocm9vdERhdGFbY2hhckxpc3RLZXldKSkge1xuICAgICAgICAgIHJvb3REYXRhW2NoYXJMaXN0S2V5XS5mb3JFYWNoKChjaGFyQ29udGFpbmVyOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJEYXRhS2V5ID0gT2JqZWN0LmtleXMoY2hhckNvbnRhaW5lcilbMF07XG4gICAgICAgICAgICBjb25zdCBjaGFyRGF0YSA9IGNoYXJDb250YWluZXJbY2hhckRhdGFLZXldO1xuXG4gICAgICAgICAgICBpZiAoY2hhckRhdGEgJiYgdHlwZW9mIGNoYXJEYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICBjb25zdCBuYW1lS2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGNoYXJEYXRhLCBbJ+Wnk+WQjScsICflkI3np7AnXSk7XG4gICAgICAgICAgICAgIGNvbnN0IGl0ZW1zS2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGNoYXJEYXRhLCBbJ+eJqeWTgScsICfmoLjlv4Pnianlk4EnXSk7XG5cbiAgICAgICAgICAgICAgaWYgKG5hbWVLZXkgJiYgaXRlbXNLZXkgJiYgY2hhckRhdGFbbmFtZUtleV0gJiYgQXJyYXkuaXNBcnJheShjaGFyRGF0YVtpdGVtc0tleV0pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhck5hbWUgPSB0aGlzLmZvcm1hdE5vZGVOYW1lKGNoYXJEYXRhW25hbWVLZXldLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdJdGVtcyA9IGNoYXJEYXRhW2l0ZW1zS2V5XTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YXJQYXRoID0gYOinkuiJsi4ke2NoYXJOYW1lfS7nianlk4FgO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZEl0ZW1zID0gXy5nZXQoY3VycmVudFZhcnMsIHZhclBhdGgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFfLmlzRXF1YWwobmV3SXRlbXMsIG9sZEl0ZW1zKSkge1xuICAgICAgICAgICAgICAgICAgXy5zZXQodXBkYXRlcywgdmFyUGF0aCwgbmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFfLmlzRW1wdHkodXBkYXRlcykpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3J5UmVuZGVyZXJdIE1lc3NhZ2UgJHtjdXJyZW50TWVzc2FnZUlkfSA+ICR7bGFzdFN5bmNJZH0uIOajgOa1i+WIsOWPmOmHj+WPmOWMlu+8jOato+WcqOabtOaWsDpgLCB1cGRhdGVzKTtcbiAgICAgICAgICAvLyDlsIYgbGFzdFN5bmNNZXNzYWdlSWQg5Lmf5Yqg5YWl5Yiw5pu05paw5LitXG4gICAgICAgICAgdXBkYXRlc1sn5LiW55WMLmxhc3RTeW5jTWVzc2FnZUlkJ10gPSBjdXJyZW50TWVzc2FnZUlkO1xuICAgICAgICAgIGF3YWl0IGluc2VydE9yQXNzaWduVmFyaWFibGVzKHVwZGF0ZXMsIHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBjdXJyZW50TWVzc2FnZUlkIH0pO1xuICAgICAgICAgIHRvYXN0ci5pbmZvKGDnirbmgIHmoI8oTSR7Y3VycmVudE1lc3NhZ2VJZH0p5bey5ZCM5q2l5qW85bGC5Y+Y6YeP44CCYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yeVJlbmRlcmVyXSBNZXNzYWdlICR7Y3VycmVudE1lc3NhZ2VJZH0gPj0gJHtsYXN0U3luY0lkfS4g5pyq5qOA5rWL5Yiw5Y+Y6YeP5Y+Y5YyW44CCYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbU3RvcnlSZW5kZXJlcl0g6Lez6L+H5pen55qE54q25oCB5qCPKE0ke2N1cnJlbnRNZXNzYWdlSWR9KeWQjOatpe+8jOacgOaWsOiusOW9leS4uiBNJHtsYXN0U3luY0lkfeOAgmApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCflj5jph4/lkIzmraXlpLHotKU6JywgZXJyb3IpO1xuICAgICAgdG9hc3RyLmVycm9yKCflj5jph4/lkIzmraXlpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7DjgIInKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVDaGFyYWN0ZXJDYXJkKGNoYXJEYXRhOiBhbnkpIHtcbiAgICBjb25zdCB0aXRsZUtleSA9IE9iamVjdC5rZXlzKGNoYXJEYXRhKVswXTtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gY2hhckRhdGFbdGl0bGVLZXldO1xuICAgIGlmICghdGl0bGVLZXkgfHwgIWF0dHJpYnV0ZXMpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNhcmQuY2xhc3NOYW1lID0gJ2JnLW1haW4gcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWRpbSBwLTMuNSBzaGFkb3ctc20gY2FyZC1ob3ZlciB0aGVtZS10cmFuc2l0aW9uJztcblxuICAgIGNvbnN0IGgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICBoMy5jbGFzc05hbWUgPSAnZm9udC1ib2xkIHRleHQtbGcgbWItMiBwYi0xIGJvcmRlci1iIGJvcmRlci1kaW0gdGhlbWUtdHJhbnNpdGlvbic7XG4gICAgaDMuaW5uZXJIVE1MID0gYCR7dGhpcy5leHRyYWN0RW1vamlzKHRpdGxlS2V5KVswXSB8fCAnJ30gJHt0aGlzLmZvcm1hdE5vZGVOYW1lKHRpdGxlS2V5LCB0cnVlKX1gO1xuICAgIGNhcmQuYXBwZW5kQ2hpbGQoaDMpO1xuXG4gICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgbGlzdC5jbGFzc05hbWUgPSAnc3BhY2UteS0yIHRleHQtc20nO1xuICAgIGNhcmQuYXBwZW5kQ2hpbGQobGlzdCk7XG5cbiAgICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMgPT09ICdvYmplY3QnICYmIGF0dHJpYnV0ZXMgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoYXR0cmlidXRlcykpIHtcbiAgICAgIE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBsaXN0LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQXR0cmlidXRlSXRlbShrZXksIHZhbHVlKSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRlcykpIHsgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgYXR0cmlidXRlcyBpcyBhbiBhcnJheSBvZiBlbnRyaWVzXG4gICAgICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeU5hbWUgPSBlbnRyeVsn5ZCN56ewJ10gfHwgJ+acquefpeadoeebric7XG4gICAgICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBsaS5jbGFzc05hbWUgPSAnY2xpY2thYmxlLWl0ZW0nO1xuICAgICAgICAgICAgbGkuZGF0YXNldC5kZXRhaWxzID0gSlNPTi5zdHJpbmdpZnkoZW50cnkpO1xuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gYOKAoiAke3RoaXMuZm9ybWF0Tm9kZU5hbWUoZW50cnlOYW1lKX1gO1xuICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY2FyZDtcbiAgfVxuXG4gIGNyZWF0ZUF0dHJpYnV0ZUl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBIVE1MTElFbGVtZW50IHtcbiAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBjb25zdCBlbW9qaSA9IHRoaXMuZXh0cmFjdEVtb2ppcyhrZXkpWzBdIHx8ICfwn5S4JztcbiAgICBjb25zdCBrZXlIdG1sID0gYDxzcGFuIGNsYXNzPVwiZm9udC1tZWRpdW0gdGV4dC1hY2NlbnRcIj4ke2Vtb2ppfSAke3RoaXMuZm9ybWF0Tm9kZU5hbWUoa2V5LCB0cnVlKX06PC9zcGFuPmA7XG4gICAgY29uc3QgaXNDb3JlSXRlbXMgPSBrZXkuaW5jbHVkZXMoJ+aguOW/g+eJqeWTgScpO1xuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmICd2YWx1ZScgaW4gdmFsdWUgJiYgJ21heCcgaW4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnZhbHVlID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgdmFsdWUubWF4ID09PSAnbnVtYmVyJykge1xuICAgICAgaXRlbS5pbm5lckhUTUwgPSBrZXlIdG1sO1xuICAgICAgY29uc3QgcGVyY2VudGFnZSA9ICh2YWx1ZS52YWx1ZSAvIHZhbHVlLm1heCkgKiAxMDA7XG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIG10LTEnO1xuICAgICAgY29uc3QgcHJvZ3Jlc3NCYXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBwcm9ncmVzc0JhcldyYXBwZXIuY2xhc3NOYW1lID0gJ3Byb2dyZXNzLWJhci1iZyB3LWZ1bGwgcm91bmRlZC1mdWxsIGgtMi41JztcbiAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBwcm9ncmVzc0Jhci5jbGFzc05hbWUgPSAncHJvZ3Jlc3MtYmFyLWZnIGgtMi41IHJvdW5kZWQtZnVsbCc7XG4gICAgICBwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XG4gICAgICBpZiAocGVyY2VudGFnZSA8IDI1KSBwcm9ncmVzc0Jhci5jbGFzc0xpc3QuYWRkKCdiZy1yZWQtNTAwJyk7XG4gICAgICBlbHNlIGlmIChwZXJjZW50YWdlIDwgNTApIHByb2dyZXNzQmFyLmNsYXNzTGlzdC5hZGQoJ2JnLXllbGxvdy01MDAnKTtcbiAgICAgIGVsc2UgcHJvZ3Jlc3NCYXIuY2xhc3NMaXN0LmFkZCgnYmctZ3JlZW4tNTAwJyk7XG4gICAgICBwcm9ncmVzc0JhcldyYXBwZXIuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NCYXIpO1xuICAgICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgcHJvZ3Jlc3NUZXh0LmNsYXNzTmFtZSA9ICd0ZXh0LXhzIHRleHQtc2Vjb25kYXJ5IGZvbnQtbW9ubyc7XG4gICAgICBwcm9ncmVzc1RleHQudGV4dENvbnRlbnQgPSBgJHt2YWx1ZS52YWx1ZX0gLyAke3ZhbHVlLm1heH1gO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByb2dyZXNzQmFyV3JhcHBlcik7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NUZXh0KTtcbiAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgIGl0ZW0uaW5uZXJIVE1MID0ga2V5SHRtbDtcbiAgICAgIGNvbnN0IHN1Ykxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgc3ViTGlzdC5jbGFzc05hbWUgPSAnbGlzdC1kaXNjIGxpc3QtaW5zaWRlIG1sLTQgbXQtMSBzcGFjZS15LTEnO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlLmZvckVhY2goc3ViVmFsdWUgPT4ge1xuICAgICAgICAgIGNvbnN0IHN1Ykl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgIGxldCB0ZXh0O1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChpc0NvcmVJdGVtcyAmJiB0eXBlb2Ygc3ViVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtTmFtZSA9IHRoaXMuZm9ybWF0Tm9kZU5hbWUoc3ViVmFsdWUsIHRydWUpLnJlcGxhY2UoL+OAkHzjgJF8eFxcZCsvZywgJycpLnRyaW0oKTtcbiAgICAgICAgICAgIGNvbnN0IHBva2VkZXhFbnRyeSA9IHRoaXMuZ2xvYmFsUG9rZWRleD8uWyfnianlk4EnXT8uZmluZChlID0+IGUu5ZCN56ewID09PSBpdGVtTmFtZSk7XG4gICAgICAgICAgICBpZiAocG9rZWRleEVudHJ5KSB7XG4gICAgICAgICAgICAgIHN1Ykl0ZW0uY2xhc3NMaXN0LmFkZCgnY2xpY2thYmxlLWl0ZW0nKTtcbiAgICAgICAgICAgICAgc3ViSXRlbS5kYXRhc2V0LmRldGFpbHMgPSBKU09OLnN0cmluZ2lmeShwb2tlZGV4RW50cnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dCA9IHRoaXMuZm9ybWF0Tm9kZU5hbWUoU3RyaW5nKHN1YlZhbHVlKSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ViVmFsdWUgPT09ICdvYmplY3QnICYmIHN1YlZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBzdWJJdGVtLmNsYXNzTGlzdC5hZGQoJ2NsaWNrYWJsZS1pdGVtJyk7XG4gICAgICAgICAgICBzdWJJdGVtLmRhdGFzZXQuZGV0YWlscyA9IEpTT04uc3RyaW5naWZ5KHN1YlZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVLZXkgPSBPYmplY3Qua2V5cyhzdWJWYWx1ZSkuZmluZChrID0+IGsuaW5jbHVkZXMoJ+WQjeensCcpIHx8IGsuaW5jbHVkZXMoJ+Wnk+WQjScpKTtcbiAgICAgICAgICAgIHRleHQgPSBuYW1lS2V5ID8gdGhpcy5mb3JtYXROb2RlTmFtZShTdHJpbmcoc3ViVmFsdWVbbmFtZUtleV0pKSA6ICfngrnlh7vmn6XnnIvor6bmg4UnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0ID0gdGhpcy5mb3JtYXROb2RlTmFtZShTdHJpbmcoc3ViVmFsdWUpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3ViSXRlbS5pbm5lckhUTUwgPSBgJHt0aGlzLmV4dHJhY3RFbW9qaXModGV4dClbMF0gfHwgJ+KAoid9ICR7dGhpcy5mb3JtYXROb2RlTmFtZSh0ZXh0LCB0cnVlKX1gO1xuICAgICAgICAgIHN1Ykxpc3QuYXBwZW5kQ2hpbGQoc3ViSXRlbSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXModmFsdWUpLmZvckVhY2goKFtzdWJLZXksIHN1YlZhbHVlXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN1Ykl0ZW0gPSB0aGlzLmNyZWF0ZUF0dHJpYnV0ZUl0ZW0oc3ViS2V5LCBzdWJWYWx1ZSk7XG4gICAgICAgICAgc3ViTGlzdC5hcHBlbmRDaGlsZChzdWJJdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpdGVtLmFwcGVuZENoaWxkKHN1Ykxpc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtLmlubmVySFRNTCA9IGAke2tleUh0bWx9ICR7dGhpcy5mb3JtYXROb2RlTmFtZShTdHJpbmcodmFsdWUpKX1gO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG4gIHJlbmRlckFjdGlvbk9wdGlvbnMoZGF0YTogYW55KSB7XG4gICAgY29uc3QgYWN0aW9uS2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGRhdGEsIFsn6KGM5YqoJ10pO1xuICAgIGlmICh0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0KSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0LmlubmVySFRNTCA9ICcnO1xuICAgICAgaWYgKGFjdGlvbktleSAmJiBkYXRhW2FjdGlvbktleV0pIHtcbiAgICAgICAgY29uc3QgYWN0aW9uRGF0YSA9IGRhdGFbYWN0aW9uS2V5XTtcbiAgICAgICAgY29uc3Qgb3duZXJLZXkgPSB0aGlzLmZpbmRGaWVsZEJ5S2V5d29yZHMoYWN0aW9uRGF0YSwgWyfooYzliqjkuronLCAn6KeS6ImyJ10pO1xuICAgICAgICBjb25zdCBvcHRpb25zS2V5ID0gdGhpcy5maW5kRmllbGRCeUtleXdvcmRzKGFjdGlvbkRhdGEsIFsn5Y+v6YCJ6KGM5YqoJywgJ+mAiemhuSddKTtcblxuICAgICAgICBpZiAob3duZXJLZXkgJiYgdGhpcy5lbGVtZW50cy5hY3Rpb25Pd25lcikge1xuICAgICAgICAgIHRoaXMuZWxlbWVudHMuYWN0aW9uT3duZXIudGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdE5vZGVOYW1lKGFjdGlvbkRhdGFbb3duZXJLZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9uc0tleSAmJiBBcnJheS5pc0FycmF5KGFjdGlvbkRhdGFbb3B0aW9uc0tleV0pKSB7XG4gICAgICAgICAgYWN0aW9uRGF0YVtvcHRpb25zS2V5XS5mb3JFYWNoKChvcHRpb25UZXh0OiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgaXRlbS5jbGFzc05hbWUgPSAncGwtMiBweS0xIGJvcmRlci1sLTIgYm9yZGVyLWRpbSBtbC0xIGhvdmVyOmJvcmRlci1pbmRpZ28tNDAwLzcwIHRyYW5zaXRpb24tY29sb3JzIHRoZW1lLXRyYW5zaXRpb24nO1xuICAgICAgICAgICAgY29uc3QgY2xlYW5UZXh0ID0gdGhpcy5mb3JtYXROb2RlTmFtZShvcHRpb25UZXh0LCB0cnVlKTtcbiAgICAgICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gYCR7dGhpcy5leHRyYWN0RW1vamlzKG9wdGlvblRleHQpWzBdIHx8ICfilrbvuI8nfSAke2NsZWFuVGV4dH1gO1xuICAgICAgICAgICAgaXRlbS5kYXRhc2V0Lm9wdGlvbkluZGV4ID0gaW5kZXgudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGl0ZW0uZGF0YXNldC5vcHRpb25UZXh0ID0gY2xlYW5UZXh0O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdCEuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGN1c3RvbUFjdGlvbkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBjdXN0b21BY3Rpb25JdGVtLmNsYXNzTmFtZSA9ICdwbC0yIHB5LTEgYm9yZGVyLWwtMiBib3JkZXItZGltIG1sLTEgaG92ZXI6Ym9yZGVyLWluZGlnby00MDAvNzAgdHJhbnNpdGlvbi1jb2xvcnMgdGhlbWUtdHJhbnNpdGlvbiBtdC00JztcbiAgICAgICAgY3VzdG9tQWN0aW9uSXRlbS5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYXMgZmEtcGVuLW5pYiBtci0yIHRleHQtYWNjZW50XCI+PC9pPiDoh6rlrprkuYnooYzliqguLi5gO1xuICAgICAgICBjdXN0b21BY3Rpb25JdGVtLmRhdGFzZXQuYWN0aW9uVHlwZSA9ICdjdXN0b20nO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0IS5hcHBlbmRDaGlsZChjdXN0b21BY3Rpb25JdGVtKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5vcHRpb25zTGlzdC5pbm5lckhUTUwgPSB0aGlzLmNyZWF0ZUVtcHR5U3RhdGUoJ+ayoeacieWPr+eUqOihjOWKqCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUVtcHR5U3RhdGUobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGA8bGkgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS00IHRleHQtc2Vjb25kYXJ5IHRoZW1lLXRyYW5zaXRpb25cIj48aSBjbGFzcz1cImZhcyBmYS1pbmZvLWNpcmNsZSBtci0xXCI+PC9pPiR7bWVzc2FnZX08L2xpPmA7XG4gIH1cblxuICBoYW5kbGVFcnJvcihlcnJvcjogRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfmuLLmn5PplJnor686JywgZXJyb3IpO1xuICAgIGNvbnN0IGVycm9ySHRtbCA9IGA8ZGl2IGNsYXNzPVwiYmctcmVkLTkwMC8yMCBib3JkZXIgYm9yZGVyLXJlZC04MDAvMzAgdGV4dC1yZWQtNDAwIHB4LTQgcHktMyByb3VuZGVkIHJlbGF0aXZlXCIgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICA8c3Ryb25nIGNsYXNzPVwiZm9udC1ib2xkXCI+5Yqg6L295aSx6LSlOiA8L3N0cm9uZz5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmxvY2sgc206aW5saW5lXCI+JHtlcnJvci5tZXNzYWdlfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+YDtcbiAgICBpZiAodGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyKSB0aGlzLmVsZW1lbnRzLmNoYXJhY3RlcnNDb250YWluZXIuaW5uZXJIVE1MID0gZXJyb3JIdG1sO1xuICAgIGlmICh0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0KSB0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0LmlubmVySFRNTCA9IGA8bGk+JHtlcnJvckh0bWx9PC9saT5gO1xuICAgIGNvbnN0IGFjdGlvbk93bmVyUGFyZW50ID0gdGhpcy5lbGVtZW50cy5hY3Rpb25Pd25lcj8ucGFyZW50RWxlbWVudDtcbiAgICBpZiAoYWN0aW9uT3duZXJQYXJlbnQpIGFjdGlvbk93bmVyUGFyZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cbiAgaGFuZGxlUGFyc2luZ0ZhaWx1cmUocmF3VGV4dDogc3RyaW5nLCBlcnJvcjogdW5rbm93bikge1xuICAgIGlmICh0aGlzLmVsZW1lbnRzLnN0YXR1c0JhclRpdGxlKSB0aGlzLmVsZW1lbnRzLnN0YXR1c0JhclRpdGxlLnRleHRDb250ZW50ID0gJ0pTT07op6PmnpDlpLHotKUnO1xuICAgIGNvbnN0IHNhZmVSYXdUZXh0ID0gU3RyaW5nKHJhd1RleHQgfHwgJycpO1xuICAgIFxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIuacquefpemUmeivr1wiO1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gU3RyaW5nKGVycm9yKTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvckh0bWwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmctb3JhbmdlLTgwMC8yMCBib3JkZXIgYm9yZGVyLW9yYW5nZS03MDAvMzAgdGV4dC1vcmFuZ2UtMzAwIHB4LTQgcHktMyByb3VuZGVkLWxnIHJlbGF0aXZlXCIgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cImZvbnQtYm9sZFwiPuino+aekOWksei0pTo8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJsb2NrIHNtOmlubGluZVwiPiR7ZXJyb3JNZXNzYWdlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cIm10LTIgdGV4dC1zbVwiPuW3suS4uuaCqOaYvuekuuWOn+Wni+i+k+WHuuWGheWuue+8jOivt+ajgOafpeagvOW8j++8mjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHByZSBjbGFzcz1cImJnLWdyYXktOTAwLzUwIHRleHQtd2hpdGUgcC00IHJvdW5kZWQtbGcgbXQtMiB3aGl0ZXNwYWNlLXByZS13cmFwIHRleHQteHMgbGVhZGluZy1yZWxheGVkXCI+PGNvZGU+JHtzYWZlUmF3VGV4dC5yZXBsYWNlKC88L2csICc8JykucmVwbGFjZSgvPi9nLCAnPicpfTwvY29kZT48L3ByZT5cbiAgICAgICAgYDtcbiAgICBpZiAodGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNoYXJhY3RlcnNDb250YWluZXIuaW5uZXJIVE1MID0gZXJyb3JIdG1sO1xuICAgICAgdGhpcy5lbGVtZW50cy5jaGFyYWN0ZXJzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ21kOmdyaWQtY29scy0yJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0KSB0aGlzLmVsZW1lbnRzLm9wdGlvbnNMaXN0LmlubmVySFRNTCA9ICcnO1xuICAgIGNvbnN0IGFjdGlvbk93bmVyUGFyZW50ID0gdGhpcy5lbGVtZW50cy5hY3Rpb25Pd25lcj8ucGFyZW50RWxlbWVudDtcbiAgICBpZiAoYWN0aW9uT3duZXJQYXJlbnQpIGFjdGlvbk93bmVyUGFyZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cblxuICBleHRyYWN0RW1vamlzKHRleHQ6IGFueSk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIV8uaXNTdHJpbmcodGV4dCkpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgY29uc3QgZW1vamlSZWdleCA9IC9bXFx1ezFGNjAwfS1cXHV7MUY2NEZ9XFx1ezFGMzAwfS1cXHV7MUY1RkZ9XFx1ezFGOTAwfS1cXHV7MUY5RkZ9XFx1ezFGQTcwfS1cXHV7MUZBRkZ9XFx1ezFGNjgwfS1cXHV7MUY2RkZ9XFx1ezFGMUUwfS1cXHV7MUYxRkZ9XFx1ezI2MDB9LVxcdXsyNkZGfVxcdXsyNzAwfS1cXHV7MjdCRn1dL2d1O1xuICAgIHJldHVybiB0ZXh0Lm1hdGNoKGVtb2ppUmVnZXgpIHx8IFtdO1xuICB9XG5cbiAgZm9ybWF0Tm9kZU5hbWUobmFtZTogYW55LCByZW1vdmVBbGxFbW9qaSA9IGZhbHNlKTogc3RyaW5nIHtcbiAgICBpZiAoIV8uaXNTdHJpbmcobmFtZSkgJiYgIV8uaXNOdW1iZXIobmFtZSkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgbGV0IGNsZWFuTmFtZSA9IF8udG9TdHJpbmcobmFtZSk7XG4gICAgY2xlYW5OYW1lID0gXy5yZXBsYWNlKGNsZWFuTmFtZSwgL15cXGQrXFwuXFxzKi8sICcnKTtcbiAgICBpZiAocmVtb3ZlQWxsRW1vamkpIHtcbiAgICAgIGNvbnN0IGVtb2ppUmVnZXggPSAvW1xcdXsxRjYwMH0tXFx1ezFGNjRGfVxcdXsxRjMwMH0tXFx1ezFGNUZGfVxcdXsxRjY4MH0tXFx1ezFGNkZGfVxcdXsxRjFFMH0tXFx1ezFGMUZGfVxcdXsyNjAwfS1cXHV7MjZGRn1cXHV7MjcwMH0tXFx1ezI3QkZ9XS9ndTtcbiAgICAgIGNsZWFuTmFtZSA9IF8ucmVwbGFjZShjbGVhbk5hbWUsIGVtb2ppUmVnZXgsICcnKTtcbiAgICB9XG4gICAgcmV0dXJuIF8udHJpbShjbGVhbk5hbWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRDdXN0b21BY3Rpb25Nb2RhbCgpIHtcbiAgY29uc3QgbW9kYWwgPSAkKCcjY3VzdG9tLWFjdGlvbi1tb2RhbCcpO1xuICBjb25zdCBpbnB1dCA9ICQoJyNjdXN0b20tYWN0aW9uLWlucHV0Jyk7XG4gIGNvbnN0IGNvbmZpcm1CdG4gPSAkKCcjY29uZmlybS1hY3Rpb24tYnRuJyk7XG4gIGNvbnN0IGNhbmNlbEJ0biA9ICQoJyNjYW5jZWwtYWN0aW9uLWJ0bicpO1xuICBjb25zdCBvcHRpb25zTGlzdCA9ICQoJyNvcHRpb25zLWxpc3QnKTtcbiAgbGV0IGN1cnJlbnRUYXJnZXQ6IEpRdWVyeTxIVE1MRWxlbWVudD4gfCBudWxsID0gbnVsbDtcblxuICBjb25zdCBzaG93TW9kYWwgPSAodGFyZ2V0OiBKUXVlcnk8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gICAgY3VycmVudFRhcmdldCA9IHRhcmdldDtcbiAgICBtb2RhbC5pbnNlcnRBZnRlcih0YXJnZXQpO1xuICAgIG1vZGFsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcygnaXMtb3BlbicpO1xuICAgIGlucHV0LnZhbCgnJykudHJpZ2dlcignZm9jdXMnKTtcbiAgfTtcblxuICBjb25zdCBoaWRlTW9kYWwgPSAoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIG1vZGFsLnJlbW92ZUNsYXNzKCdpcy1vcGVuJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgb3B0aW9uc0xpc3QuYXBwZW5kKG1vZGFsKTtcbiAgICAgIGN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBjb25maXJtQWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJJbnB1dCA9IChpbnB1dC52YWwoKSBhcyBzdHJpbmcpLnRyaW0oKTtcbiAgICBpZiAodXNlcklucHV0KSB7XG4gICAgICBoaWRlTW9kYWwoKTtcbiAgICAgIHRvYXN0ci5pbmZvKCfmraPlnKjmiafooYzoh6rlrprkuYnooYzliqguLi4nKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGdldEN1cnJlbnRNZXNzYWdlSWQoKTtcbiAgICAgICAgY29uc3QgdmFyaWFibGVzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBtZXNzYWdlSWQgfSk7XG4gICAgICAgIGNvbnN0IHZhcmlhYmxlc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KHZhcmlhYmxlcywgbnVsbCwgMik7XG4gICAgICAgIGNvbnN0IHByZWFtYmxlID0gYFtPT0M6IOS7peS4i+aYr+WPkemAgee7meS9oOeahOOAgeeUqOS6jumpseWKqOWJp+aDheeahOWujOaVtOa4uOaIj+eKtuaAgeOAguivt+S7lOe7humYheivu+W5tuS+neaNruatpOeKtuaAgeWSjOaIkemAieaLqeeahOihjOWKqOadpeeUn+aIkOWQjue7reaDheiKguOAgl1cXG5cXG4qKuW9k+WJjea4uOaIj+eKtuaAgSoqOlxcbui/meaYr+W9k+WJjealvOWxgueahOaJgOacieWPmOmHj+S/oeaBr++8jOWug+S7o+ihqOS6hua4uOaIj+S4lueVjOeahOWujOaVtOW/q+eFp++8jOWMheaLrOinkuiJsueKtuaAgeOAgeeJqeWTgeOAgeWbvumJtOOAgeezu+e7n+i/m+W6puetieOAguivt+Wwhui/meS6m+S/oeaBr+S9nOS4uuS9oOeUn+aIkOWbnuW6lOeahOWUr+S4gOecn+Wunuadpea6kOOAgmA7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRDb250ZW50ID0gYDxWYXJpYWJsZXM+XFxuJHtwcmVhbWJsZX1cXG5cXG4ke3ZhcmlhYmxlc1N0cmluZ31cXG48L1ZhcmlhYmxlcz5gO1xuICAgICAgICBjb25zdCBtZXNzYWdlVG9TZW5kID0gYCR7d3JhcHBlZENvbnRlbnR9XFxuXFxuJHt1c2VySW5wdXR9YDtcblxuICAgICAgICBhd2FpdCBjcmVhdGVDaGF0TWVzc2FnZXMoXG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VUb1NlbmQsXG4gICAgICAgICAgICAgIGRhdGE6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICB7IHJlZnJlc2g6ICdub25lJyB9LFxuICAgICAgICApO1xuICAgICAgICBhd2FpdCB0cmlnZ2VyU2xhc2goJy90cmlnZ2VyJyk7XG4gICAgICAgIHRvYXN0ci5zdWNjZXNzKCfoh6rlrprkuYnooYzliqjlt7Llj5HpgIHvvIEnKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iHquWumuS5ieihjOWKqOWksei0pTonLCBlcnJvcik7XG4gICAgICAgIHRvYXN0ci5lcnJvcign6Ieq5a6a5LmJ6KGM5Yqo5aSx6LSl77yM6K+35p+l55yL5o6n5Yi25Y+w5pel5b+X44CCJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvYXN0ci53YXJuaW5nKCfor7fovpPlhaXooYzliqjlhoXlrrnjgIInKTtcbiAgICB9XG4gIH07XG5cbiAgY2FuY2VsQnRuLm9uKCdjbGljaycsIGhpZGVNb2RhbCk7XG4gIGNvbmZpcm1CdG4ub24oJ2NsaWNrJywgY29uZmlybUFjdGlvbik7XG5cbiAgcmV0dXJuIHsgc2hvd01vZGFsIH07XG59XG5cbmZ1bmN0aW9uIGluaXREZXRhaWxzTW9kYWwoKTogeyBzaG93TW9kYWxXaXRoRGF0YTogKGRhdGE6IGFueSkgPT4gdm9pZCB9IHtcbiAgY29uc3QgbW9kYWxPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtbW9kYWwnKTtcbiAgY29uc3QgbW9kYWxUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC10aXRsZScpO1xuICBjb25zdCBtb2RhbEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtYm9keScpO1xuICBjb25zdCBjbG9zZU1vZGFsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWNsb3NlLWJ0bicpO1xuXG4gIGlmICghbW9kYWxPdmVybGF5IHx8ICFtb2RhbFRpdGxlIHx8ICFtb2RhbEJvZHkgfHwgIWNsb3NlTW9kYWxCdG4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+ivpuaDheaooeaAgeahhueahOW/heimgURPTeWFg+e0oOacquaJvuWIsO+8gScpO1xuICB9XG5cbiAgY29uc3QgaGlkZU1vZGFsID0gKCkgPT4gbW9kYWxPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gIGNsb3NlTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xuICBtb2RhbE92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWxPdmVybGF5KSBoaWRlTW9kYWwoKTtcbiAgfSk7XG5cbiAgY29uc3Qgc2hvd01vZGFsV2l0aERhdGEgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsKSB7XG4gICAgICBjb25zdCB0aXRsZUtleSA9IE9iamVjdC5rZXlzKGRhdGEpLmZpbmQoayA9PiBrLmluY2x1ZGVzKCflkI3np7AnKSB8fCBrLmluY2x1ZGVzKCflp5PlkI0nKSk7XG4gICAgICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gdGl0bGVLZXkgPyBkYXRhW3RpdGxlS2V5XSA6ICfor6bmg4UnO1xuICAgICAgXG4gICAgICBsZXQgYm9keUh0bWwgPSAnPHVsPic7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICBib2R5SHRtbCArPSBgPGxpPjxzcGFuIGNsYXNzPVwiaXRlbS1rZXlcIj4ke2tleX06PC9zcGFuPiAke3ZhbHVlfTwvbGk+YDtcbiAgICAgIH1cbiAgICAgIGJvZHlIdG1sICs9ICc8L3VsPic7XG4gICAgICBtb2RhbEJvZHkuaW5uZXJIVE1MID0gYm9keUh0bWw7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9ICfor6bmg4UnO1xuICAgICAgbW9kYWxCb2R5LnRleHRDb250ZW50ID0gU3RyaW5nKGRhdGEpO1xuICAgIH1cbiAgICBtb2RhbE92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gIH07XG5cbiAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgY2xpY2thYmxlSXRlbSA9IHRhcmdldC5jbG9zZXN0KCcuY2xpY2thYmxlLWl0ZW0nKTtcbiAgICBpZiAoY2xpY2thYmxlSXRlbSkge1xuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IChjbGlja2FibGVJdGVtIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmRldGFpbHM7XG4gICAgICBpZiAoZGF0YVN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpO1xuICAgICAgICAgIHNob3dNb2RhbFdpdGhEYXRhKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwi6Kej5p6Q6K+m5oOF5pWw5o2u5aSx6LSlOlwiLCBlcnIpO1xuICAgICAgICAgIHRvYXN0ci5lcnJvcihcIuaXoOazleaYvuekuuivpuaDheOAglwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHsgc2hvd01vZGFsV2l0aERhdGEgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFN5c3RlbVJlZnJlc2goc3lzdGVtTmFtZTogc3RyaW5nLCBidXR0b246IEpRdWVyeTxIVE1MRWxlbWVudD4pIHtcbiAgY29uc3Qgb3JpZ2luYWxDb250ZW50ID0gYnV0dG9uLmh0bWwoKTtcbiAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSkuZmluZCgnaScpLmFkZENsYXNzKCdmYS1zcGluJyk7XG4gIFxuICBjb25zdCBjb21tYW5kID0gYC9zZW5kIFtTWVNURU1dIOOAkCR7c3lzdGVtTmFtZX3ns7vnu5/jgJHvvJrigJzorqnmiJHnnIvnnIvigKbigKbmnInku4DkuYjmlrDkuJzopb/lj6/ku6Xnu5nkvaDigKbigKbigJ3vvIjnjqnlrrbor7fmsYLliLfmlrAke3N5c3RlbU5hbWV95YiX6KGo77yJIHwgL3RyaWdnZXJgO1xuICB0b2FzdHIuaW5mbyhg5q2j5Zyo6K+35rGC5Yi35pawJHtzeXN0ZW1OYW1lfS4uLmApO1xuICB0cnkge1xuICAgIGF3YWl0IHRyaWdnZXJTbGFzaChjb21tYW5kKTtcbiAgICB0b2FzdHIuc3VjY2Vzcyhg5Yi35paw6K+35rGC5bey5Y+R6YCB77yBYCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihg5Yi35pawJHtzeXN0ZW1OYW1lfeWksei0pTpgLCBlcnJvcik7XG4gICAgdG9hc3RyLmVycm9yKFwi6K+35rGC5aSx6LSl77yM6K+35p+l55yL5o6n5Yi25Y+w44CCXCIpO1xuICB9IGZpbmFsbHkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLmh0bWwob3JpZ2luYWxDb250ZW50KTtcbiAgICB9LCAxMDAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0UmV3YXJkc01vZGFsKCkge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXdhcmRzLW1vZGFsJyk7XG4gIGNvbnN0IGNsb3NlTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV3YXJkcy1tb2RhbC1jbG9zZS1idG4nKTtcbiAgY29uc3QgbW9kYWxCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jld2FyZHMtbW9kYWwtYm9keScpO1xuICBjb25zdCByZWZyZXNoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZnJlc2gtcmV3YXJkcy1idG4nKTtcblxuICBjb25zdCBoaWRlTW9kYWwgPSAoKSA9PiBtb2RhbD8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgY2xvc2VNb2RhbEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xuICBtb2RhbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIGhpZGVNb2RhbCgpO1xuICB9KTtcblxuICByZWZyZXNoQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgcmVxdWVzdFN5c3RlbVJlZnJlc2goJ+aIkOWwseWlluWKsScsICQoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KSk7XG4gIH0pO1xuXG4gIGNvbnN0IHNob3dNb2RhbFdpdGhSZXdhcmRzID0gKHJld2FyZHNKc29uU3RyaW5nOiBzdHJpbmcsIGN1cnJlbnRQb2ludHM6IG51bWJlcikgPT4ge1xuICAgIGlmICghbW9kYWxCb2R5KSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmV3YXJkc0RhdGEgPSBKU09OLnBhcnNlKHJld2FyZHNKc29uU3RyaW5nKTtcbiAgICAgIGxldCBodG1sID0gYDxwIGNsYXNzPVwidGV4dC1zbSB0ZXh0LXNlY29uZGFyeSBtYi00XCI+JHtyZXdhcmRzRGF0YS5kZXNjcmlwdGlvbiB8fCAnJ308L3A+YDtcbiAgICAgIGNvbnN0IGlzTW9iaWxlID0gd2luZG93LmlubmVyV2lkdGggPCA3Njg7XG5cbiAgICAgIHJld2FyZHNEYXRhLnRpZXJzPy5mb3JFYWNoKCh0aWVyOiBhbnkpID0+IHtcbiAgICAgICAgaHRtbCArPSBgXG4gICAgICAgICAgPGRldGFpbHMgY2xhc3M9XCJncm91cCBib3JkZXItdCBib3JkZXItZGltIG10LTQgcHQtMlwiICR7aXNNb2JpbGUgPyAnJyA6ICdvcGVuJ30+XG4gICAgICAgICAgICA8c3VtbWFyeSBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWxnIGN1cnNvci1wb2ludGVyIGhvdmVyOnRleHQtYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIHRoZW1lLXRyYW5zaXRpb24gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHB5LTJcIj5cbiAgICAgICAgICAgICAgPHNwYW4+JHt0aWVyLnRpZXJfbmFtZSB8fCAn5aWW5YqxJ30gPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtIHRleHQtc2Vjb25kYXJ5IGZvbnQtbm9ybWFsXCI+KCR7dGllci5jb3N0X3JhbmdlIHx8ICcnfSk8L3NwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLWRvd24gdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMzAwIGdyb3VwLW9wZW46cm90YXRlLTE4MFwiPjwvaT5cbiAgICAgICAgICAgIDwvc3VtbWFyeT5cbiAgICAgICAgICAgIDx1bCBjbGFzcz1cInNwYWNlLXktMyBtdC0yXCI+XG4gICAgICAgIGA7XG4gICAgICAgIFxuICAgICAgICB0aWVyLnJld2FyZHM/LmZvckVhY2goKHJld2FyZDogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FuQWZmb3JkID0gY3VycmVudFBvaW50cyA+PSByZXdhcmQuY29zdDtcbiAgICAgICAgICBodG1sICs9IGBcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cInAtNCByb3VuZGVkLWxnIGJnLXNlY29uZGFyeSBib3JkZXIgYm9yZGVyLWRpbVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb250LXNlbWlib2xkIHRleHQtcHJpbWFyeVwiPiR7cmV3YXJkLm5hbWUgfHwgJ+acquefpeWlluWKsSd9PC9wPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtc2Vjb25kYXJ5IG10LTFcIj4ke3Jld2FyZC5kZXNjcmlwdGlvbiB8fCAnJ308L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuLXByaW1hcnkgcmVkZWVtLWJ0biB3aGl0ZXNwYWNlLW5vd3JhcCBtbC00IHRleHQtc21cIlxuICAgICAgICAgICAgICAgICAgZGF0YS1uYW1lPVwiJHtyZXdhcmQubmFtZX1cIiBcbiAgICAgICAgICAgICAgICAgIGRhdGEtY29zdD1cIiR7cmV3YXJkLmNvc3R9XCJcbiAgICAgICAgICAgICAgICAgICR7IWNhbkFmZm9yZCA/ICdkaXNhYmxlZCcgOiAnJ31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAke3Jld2FyZC5jb3N0fSA8aSBjbGFzcz1cImZhcyBmYS1zdGFyIHRleHQteHNcIj48L2k+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICBgO1xuICAgICAgICB9KTtcbiAgICAgICAgaHRtbCArPSAnPC91bD48L2RldGFpbHM+JztcbiAgICAgIH0pO1xuXG4gICAgICBtb2RhbEJvZHkuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuino+aekOWlluWKsUpTT07lpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcihcIuaXoOazleino+aekOWlluWKseWIl+ihqOOAglwiKTtcbiAgICAgIG1vZGFsQm9keS5pbm5lckhUTUwgPSBgPHAgY2xhc3M9XCJ0ZXh0LXJlZC00MDBcIj7liqDovb3lpZblirHlpLHotKXvvIzor7fmo4Dmn6XkuJbnlYzkuabmnaHnm67moLzlvI/jgII8L3A+YDtcbiAgICB9XG4gICAgXG4gICAgbW9kYWw/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICB9O1xuXG4gIG1vZGFsQm9keT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZWRlZW0tYnRuJykpIHtcbiAgICAgIGNvbnN0IGl0ZW1OYW1lID0gdGFyZ2V0LmRhdGFzZXQubmFtZTtcbiAgICAgIGNvbnN0IGl0ZW1Db3N0ID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQuY29zdCB8fCAnMCcsIDEwKTtcbiAgICAgIFxuICAgICAgY29uc3QgY29tbWFuZCA9IGAvc2VuZCBbU1lTVEVNXSBQbGF5ZXIgd2FudHMgdG8gcmVkZWVtIHRoZSByZXdhcmQ6IFwiJHtpdGVtTmFtZX1cIiAoQ29zdDogJHtpdGVtQ29zdH0gcG9pbnRzKS4gfCAvdHJpZ2dlcmA7XG4gICAgICB0b2FzdHIuaW5mbyhg5q2j5Zyo5bCd6K+V5YWR5o2iOiAke2l0ZW1OYW1lfS4uLmApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdHJpZ2dlclNsYXNoKGNvbW1hbmQpO1xuICAgICAgICB0b2FzdHIuc3VjY2Vzcyhg5YWR5o2i6K+35rGC5bey5Y+R6YCB77yBYCk7XG4gICAgICAgIGhpZGVNb2RhbCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuWFkeaNouWksei0pTpcIiwgZXJyb3IpO1xuICAgICAgICB0b2FzdHIuZXJyb3IoXCLlhZHmjaLlpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7DjgIJcIik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4geyBzaG93TW9kYWxXaXRoUmV3YXJkcyB9O1xufVxuXG5mdW5jdGlvbiBpbml0UmVtb3RlU3luY01vZGFsKHNob3dNb2RhbFdpdGhEYXRhOiAoZGF0YTogYW55KSA9PiB2b2lkKSB7XG4gIGNvbnN0IG9wZW5Nb2RhbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW1vdGUtc3luYy1idG4nKTtcbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlLXN5bmMtbW9kYWwnKTtcbiAgY29uc3QgY2xvc2VNb2RhbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW1vdGUtc3luYy1jbG9zZS1idG4nKTtcbiAgXG4gIGNvbnN0IHRhYnMgPSBtb2RhbD8ucXVlcnlTZWxlY3RvckFsbCgnLm1haW4tdGFiLWJ0bicpO1xuICBjb25zdCBzdWJtaXRUYWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlLXN1Ym1pdC10YWInKTtcbiAgY29uc3QgZmV0Y2hUYWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlLWZldGNoLXRhYicpO1xuICBcbiAgY29uc3QgbG9jYWxEaWZmTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhbC1kaWZmLWxpc3QnKTtcbiAgY29uc3QgcmVtb3RlRGlmZkxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlLWRpZmYtbGlzdCcpO1xuXG4gIGNvbnN0IGZldGNoUmVtb3RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZldGNoLWZyb20tcmVtb3RlLWJ0bicpO1xuICBjb25zdCBzdWJtaXRDb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXQtdG8tcmVtb3RlLWNvbnRyb2xzJyk7XG4gIGNvbnN0IGltcG9ydENvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydC1mcm9tLXJlbW90ZS1jb250cm9scycpO1xuICBjb25zdCBzdWJtaXRUb1JlbW90ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXQtdG8tcmVtb3RlLWJ0bicpO1xuICBjb25zdCBpbXBvcnRGcm9tUmVtb3RlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydC1mcm9tLXJlbW90ZS1idG4nKTtcblxuICBsZXQgcmVtb3RlRGF0YUNhY2hlOiBSZW1vdGVQb2tlZGV4RGF0YSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0IHNob3dNb2RhbCA9IGFzeW5jICgpID0+IHtcbiAgICBtb2RhbD8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgLy8gRGVmYXVsdCB0byBzdWJtaXQgdGFiXG4gICAgdGFicz8uZm9yRWFjaCh0ID0+IHQuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYicpID09PSAnc3VibWl0JyA/IHQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJykgOiB0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcbiAgICBzdWJtaXRUYWI/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIGZldGNoVGFiPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBzdWJtaXRDb250cm9scz8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgaW1wb3J0Q29udHJvbHM/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIGZldGNoUmVtb3RlQnRuPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBhd2FpdCBwb3B1bGF0ZVN1Ym1pdExpc3QoKTtcbiAgfTtcblxuICBjb25zdCBoaWRlTW9kYWwgPSAoKSA9PiBtb2RhbD8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgY29uc3QgcG9wdWxhdGVTdWJtaXRMaXN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbG9jYWxEaWZmTGlzdCkgcmV0dXJuO1xuICAgIGxvY2FsRGlmZkxpc3QuaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1zZWNvbmRhcnkgcC00XCI+5q2j5Zyo6K6h566X5beu5byCLi4uPC9wPmA7XG4gICAgXG4gICAgY29uc3QgbG9jYWxQb2tlZGV4ID0gYXdhaXQgUG9rZWRleC5nZXRQb2tlZGV4RGF0YSgpO1xuICAgIGNvbnN0IGxvY2FsQWNoaWV2ZW1lbnRzID0gYXdhaXQgUG9rZWRleC5nZXRBY2hpZXZlbWVudHMoKTtcbiAgICBjb25zdCByZW1vdGUgPSByZW1vdGVEYXRhQ2FjaGUgfHwgYXdhaXQgUG9rZWRleC5nZXRSZW1vdGVQb2tlZGV4KCk7XG4gICAgaWYgKHJlbW90ZSkgcmVtb3RlRGF0YUNhY2hlID0gcmVtb3RlO1xuXG4gICAgbGV0IGRpZmZIdG1sID0gJyc7XG4gICAgbGV0IGRpZmZDb3VudCA9IDA7XG4gICAgY29uc3QgdHlwZXM6IFNoYXJlYWJsZVR5cGVbXSA9IFsn5aaW5YW9JywgJ+akjeeJqScsICfnianlk4EnLCAn5oiQ5bCxJ107XG5cbiAgICB0eXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgY29uc3QgbG9jYWxFbnRyaWVzID0gdHlwZSA9PT0gJ+aIkOWwsScgPyBsb2NhbEFjaGlldmVtZW50cyA6IGxvY2FsUG9rZWRleFt0eXBlXTtcbiAgICAgIGNvbnN0IHJlbW90ZUVudHJpZXMgPSByZW1vdGUgPyAocmVtb3RlW3R5cGUgYXMga2V5b2YgUmVtb3RlUG9rZWRleERhdGFdIHx8IFtdKSA6IFtdO1xuICAgICAgY29uc3QgcmVtb3RlTmFtZXMgPSBuZXcgU2V0KHJlbW90ZUVudHJpZXMubWFwKGUgPT4gZS7lkI3np7ApKTtcbiAgICAgIGNvbnN0IGRpZmZFbnRyaWVzID0gbG9jYWxFbnRyaWVzLmZpbHRlcihlID0+ICFyZW1vdGVOYW1lcy5oYXMoZS7lkI3np7ApKTtcbiAgICAgIFxuICAgICAgaWYgKGRpZmZFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGlmZkNvdW50ICs9IGRpZmZFbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgZGlmZkh0bWwgKz0gYDxoNCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5LzkwIG10LTIgZmlyc3Q6bXQtMFwiPiR7dHlwZX08L2g0Pjx1bD5gO1xuICAgICAgICBkaWZmRW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICBkaWZmSHRtbCArPSBgXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJwLTIgcm91bmRlZC1sZyBiZy1tYWluLzUwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciBmbGV4LWdyb3cgbXItNFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm1yLTNcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cnVuY2F0ZVwiIHRpdGxlPVwiJHtlbnRyeS7lkI3np7B9XCI+JHtlbnRyeS7lkI3np7B9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteC0yIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicG9rZWRleC12aWV3LWJ0biB0ZXh0LXNtIHRleHQtYmx1ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCIgZGF0YS1zb3VyY2U9XCJsb2NhbFwiIHRpdGxlPVwi5p+l55yLXCI+PGkgY2xhc3M9XCJmYXMgZmEtZXllXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbGk+YDtcbiAgICAgICAgfSk7XG4gICAgICAgIGRpZmZIdG1sICs9IGA8L3VsPmA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoZGlmZkNvdW50ID09PSAwKSB7XG4gICAgICBsb2NhbERpZmZMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc2Vjb25kYXJ5IHAtNFwiPuaBreWWnO+8geaCqOeahOacrOWcsOWbvumJtOW3suWFqOmDqOWQjOatpeiHs+ekvuWMuuOAgjwvcD5gO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbERpZmZMaXN0LmlubmVySFRNTCA9IGRpZmZIdG1sO1xuICAgIH1cbiAgfTtcblxuICBvcGVuTW9kYWxCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd01vZGFsKTtcbiAgY2xvc2VNb2RhbEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xuICBtb2RhbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gbW9kYWwpIHtcbiAgICAgIGhpZGVNb2RhbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IHZpZXdCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLnBva2VkZXgtdmlldy1idG4nKTtcblxuICAgIGlmICh2aWV3QnV0dG9uKSB7XG4gICAgICBjb25zdCB0eXBlID0gdmlld0J1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpIGFzIFNoYXJlYWJsZVR5cGU7XG4gICAgICBjb25zdCBuYW1lID0gdmlld0J1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpO1xuICAgICAgY29uc3Qgc291cmNlID0gdmlld0J1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtc291cmNlJyk7XG5cbiAgICAgIGlmICh0eXBlICYmIG5hbWUgJiYgc291cmNlKSB7XG4gICAgICAgIGxldCBlbnRyeTogUG9rZWRleEVudHJ5IHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc291cmNlID09PSAnbG9jYWwnKSB7XG4gICAgICAgICAgaWYgKHR5cGUgPT09ICfmiJDlsLEnKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbEFjaGlldmVtZW50cyA9IGF3YWl0IFBva2VkZXguZ2V0QWNoaWV2ZW1lbnRzKCk7XG4gICAgICAgICAgICBlbnRyeSA9IGxvY2FsQWNoaWV2ZW1lbnRzLmZpbmQoZSA9PiBlLuWQjeensCA9PT0gbmFtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsUG9rZWRleCA9IGF3YWl0IFBva2VkZXguZ2V0UG9rZWRleERhdGEoKTtcbiAgICAgICAgICAgIGVudHJ5ID0gbG9jYWxQb2tlZGV4W3R5cGUgYXMgUG9rZWRleFR5cGVdPy5maW5kKGUgPT4gZS7lkI3np7AgPT09IG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT09ICdyZW1vdGUnICYmIHJlbW90ZURhdGFDYWNoZSkge1xuICAgICAgICAgIGVudHJ5ID0gKHJlbW90ZURhdGFDYWNoZVt0eXBlIGFzIGtleW9mIFJlbW90ZVBva2VkZXhEYXRhXSB8fCBbXSkuZmluZChlID0+IGUu5ZCN56ewID09PSBuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgIHNob3dNb2RhbFdpdGhEYXRhKGVudHJ5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2FzdHIud2FybmluZygn5peg5rOV5om+5Yiw6K+l5p2h55uu55qE6K+m57uG5L+h5oGv44CCJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHRhYnM/LmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0YWJzLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBjb25zdCB0YWIgPSBidXR0b24uZ2V0QXR0cmlidXRlKCdkYXRhLXRhYicpO1xuICAgICAgaWYgKHRhYiA9PT0gJ3N1Ym1pdCcpIHtcbiAgICAgICAgc3VibWl0VGFiPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgZmV0Y2hUYWI/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBzdWJtaXRDb250cm9scz8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIGltcG9ydENvbnRyb2xzPy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgZmV0Y2hSZW1vdGVCdG4/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBwb3B1bGF0ZVN1Ym1pdExpc3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ym1pdFRhYj8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIGZldGNoVGFiPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgc3VibWl0Q29udHJvbHM/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICBpbXBvcnRDb250cm9scz8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIGZldGNoUmVtb3RlQnRuPy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgaWYocmVtb3RlRGlmZkxpc3QpIHJlbW90ZURpZmZMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc2Vjb25kYXJ5IHAtNFwiPuivt+WFiOeCueWHu+S4i+aWueaMiemSruS7juekvuWMuuiOt+WPluWIl+ihqOOAgjwvcD5gO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBmZXRjaFJlbW90ZUJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFyZW1vdGVEaWZmTGlzdCkgcmV0dXJuO1xuICAgIHJlbW90ZURpZmZMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtc2Vjb25kYXJ5IHAtNFwiPuato+WcqOS7juekvuWMuuiOt+WPli4uLjwvcD5gO1xuICAgIFxuICAgIGNvbnN0IGxvY2FsUG9rZWRleCA9IGF3YWl0IFBva2VkZXguZ2V0UG9rZWRleERhdGEoKTtcbiAgICBjb25zdCBsb2NhbEFjaGlldmVtZW50cyA9IGF3YWl0IFBva2VkZXguZ2V0QWNoaWV2ZW1lbnRzKCk7XG4gICAgY29uc3QgcmVtb3RlID0gYXdhaXQgUG9rZWRleC5nZXRSZW1vdGVQb2tlZGV4KCk7XG4gICAgaWYgKCFyZW1vdGUpIHtcbiAgICAgIHJlbW90ZURpZmZMaXN0LmlubmVySFRNTCA9IGA8cCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtcmVkLTQwMCBwLTRcIj7ojrflj5blpLHotKXvvIzor7fmo4Dmn6XmnI3liqHlmajov57mjqXmiJbmn6XnnIvmjqfliLblj7DjgII8L3A+YDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVtb3RlRGF0YUNhY2hlID0gcmVtb3RlO1xuXG4gICAgbGV0IGRpZmZIdG1sID0gJyc7XG4gICAgbGV0IGRpZmZDb3VudCA9IDA7XG4gICAgY29uc3QgdHlwZXM6IFNoYXJlYWJsZVR5cGVbXSA9IFsn5aaW5YW9JywgJ+akjeeJqScsICfnianlk4EnLCAn5oiQ5bCxJ107XG5cbiAgICB0eXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgY29uc3QgbG9jYWxFbnRyaWVzID0gdHlwZSA9PT0gJ+aIkOWwsScgPyBsb2NhbEFjaGlldmVtZW50cyA6IGxvY2FsUG9rZWRleFt0eXBlXTtcbiAgICAgIGNvbnN0IGxvY2FsTmFtZXMgPSBuZXcgU2V0KGxvY2FsRW50cmllcy5tYXAoZSA9PiBlLuWQjeensCkpO1xuICAgICAgY29uc3QgcmVtb3RlRW50cmllcyA9IHJlbW90ZVt0eXBlIGFzIGtleW9mIFJlbW90ZVBva2VkZXhEYXRhXSB8fCBbXTtcbiAgICAgIGNvbnN0IGRpZmZFbnRyaWVzID0gcmVtb3RlRW50cmllcy5maWx0ZXIoZSA9PiAhbG9jYWxOYW1lcy5oYXMoZS7lkI3np7ApKTtcbiAgICAgIFxuICAgICAgaWYgKGRpZmZFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGlmZkNvdW50ICs9IGRpZmZFbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgZGlmZkh0bWwgKz0gYDxoNCBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5LzkwIG10LTIgZmlyc3Q6bXQtMFwiPiR7dHlwZX08L2g0Pjx1bD5gO1xuICAgICAgICBkaWZmRW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICBkaWZmSHRtbCArPSBgXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJwLTIgcm91bmRlZC1sZyBiZy1tYWluLzUwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciBmbGV4LWdyb3cgbXItNFwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cIm1yLTNcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cnVuY2F0ZVwiIHRpdGxlPVwiJHtlbnRyeS7lkI3np7B9XCI+JHtlbnRyeS7lkI3np7B9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteC0yIGZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwicG9rZWRleC12aWV3LWJ0biB0ZXh0LXNtIHRleHQtYmx1ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBwLTFcIiBkYXRhLXR5cGU9XCIke3R5cGV9XCIgZGF0YS1uYW1lPVwiJHtlbnRyeS7lkI3np7B9XCIgZGF0YS1zb3VyY2U9XCJyZW1vdGVcIiB0aXRsZT1cIuafpeeci1wiPjxpIGNsYXNzPVwiZmFzIGZhLWV5ZVwiPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2xpPmA7XG4gICAgICAgIH0pO1xuICAgICAgICBkaWZmSHRtbCArPSBgPC91bD5gO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGRpZmZDb3VudCA9PT0gMCkge1xuICAgICAgcmVtb3RlRGlmZkxpc3QuaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1zZWNvbmRhcnkgcC00XCI+5oGt5Zac77yB5oKo55qE5pys5Zyw5Zu+6Ym05LiO56S+5Yy65L+d5oyB5ZCM5q2l44CCPC9wPmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW90ZURpZmZMaXN0LmlubmVySFRNTCA9IGRpZmZIdG1sO1xuICAgIH1cbiAgfSk7XG5cbiAgc3VibWl0VG9SZW1vdGVCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBsb2NhbERpZmZMaXN0Py5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpO1xuICAgIGlmICghY2hlY2tib3hlcyB8fCBjaGVja2JveGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdG9hc3RyLndhcm5pbmcoJ+ivt+iHs+WwkemAieaLqeS4gOS4quimgeWIhuS6q+eahOadoeebruOAgicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwcm92aWRlcklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb3ZpZGVyLW5hbWUtaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHByb3ZpZGVyTmFtZSA9IHByb3ZpZGVySW5wdXQ/LnZhbHVlLnRyaW0oKSB8fCB1bmRlZmluZWQ7IC8vIFVzZSB1bmRlZmluZWQgaWYgZW1wdHlcblxuICAgIGNvbnN0IGxvY2FsUG9rZWRleCA9IGF3YWl0IFBva2VkZXguZ2V0UG9rZWRleERhdGEoKTtcbiAgICBjb25zdCBsb2NhbEFjaGlldmVtZW50cyA9IGF3YWl0IFBva2VkZXguZ2V0QWNoaWV2ZW1lbnRzKCk7XG4gICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGNiIG9mIGNoZWNrYm94ZXMpIHtcbiAgICAgIGNvbnN0IHR5cGUgPSBjYi5kYXRhc2V0LnR5cGUgYXMgU2hhcmVhYmxlVHlwZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBjYi5kYXRhc2V0Lm5hbWU7XG4gICAgICBpZiAodHlwZSAmJiBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdHlwZSA9PT0gJ+aIkOWwsSdcbiAgICAgICAgICA/IGxvY2FsQWNoaWV2ZW1lbnRzLmZpbmQoZSA9PiBlLuWQjeensCA9PT0gbmFtZSlcbiAgICAgICAgICA6IGxvY2FsUG9rZWRleFt0eXBlXS5maW5kKGUgPT4gZS7lkI3np7AgPT09IG5hbWUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgYXdhaXQgUG9rZWRleC5zdWJtaXRUb0h1Z2dpbmdGYWNlKHR5cGUsIGVudHJ5LCBwcm92aWRlck5hbWUpO1xuICAgICAgICAgIHN1Y2Nlc3NDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChzdWNjZXNzQ291bnQgPiAwKSB7XG4gICAgICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5YiG5Lqr5LqGICR7c3VjY2Vzc0NvdW50fSDkuKrmnaHnm67vvIFgKTtcbiAgICAgIHJlbW90ZURhdGFDYWNoZSA9IG51bGw7IC8vIEludmFsaWRhdGUgY2FjaGVcbiAgICAgIGF3YWl0IHBvcHVsYXRlU3VibWl0TGlzdCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaW1wb3J0RnJvbVJlbW90ZUJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IHJlbW90ZURpZmZMaXN0Py5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpO1xuICAgIGlmICghY2hlY2tib3hlcyB8fCBjaGVja2JveGVzLmxlbmd0aCA9PT0gMCB8fCAhcmVtb3RlRGF0YUNhY2hlKSB7XG4gICAgICB0b2FzdHIud2FybmluZygn6K+36Iez5bCR6YCJ5oup5LiA5Liq6KaB5a+85YWl55qE5p2h55uu44CCJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBjYiBvZiBjaGVja2JveGVzKSB7XG4gICAgICBjb25zdCB0eXBlID0gY2IuZGF0YXNldC50eXBlIGFzIFNoYXJlYWJsZVR5cGU7XG4gICAgICBjb25zdCBuYW1lID0gY2IuZGF0YXNldC5uYW1lO1xuICAgICAgaWYgKHR5cGUgJiYgbmFtZSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IChyZW1vdGVEYXRhQ2FjaGVbdHlwZSBhcyBrZXlvZiBSZW1vdGVQb2tlZGV4RGF0YV0gfHwgW10pLmZpbmQoZSA9PiBlLuWQjeensCA9PT0gbmFtZSk7XG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgIGxldCBzdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHR5cGUgPT09ICfmiJDlsLEnKSB7XG4gICAgICAgICAgICBzdWNjZXNzID0gYXdhaXQgUG9rZWRleC5jcmVhdGVBY2hpZXZlbWVudChlbnRyeSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSBhd2FpdCBQb2tlZGV4LmNyZWF0ZVBva2VkZXhFbnRyeSh0eXBlLCBlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICBzdWNjZXNzQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VjY2Vzc0NvdW50ID4gMCkge1xuICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOaIkOWKn+WvvOWFpeS6hiAke3N1Y2Nlc3NDb3VudH0g5Liq5paw5p2h55uu5Yiw5oKo55qE5pys5Zyw5Zu+6Ym077yBYCk7XG4gICAgICBoaWRlTW9kYWwoKTtcbiAgICB9XG4gIH0pO1xuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRWZXJzaW9uQ2hlY2tlcigpIHtcbiAgY29uc3QgJHZlcnNpb25CdG4gPSAkKCcjdmVyc2lvbi1pbmZvLWJ0bicpO1xuICBpZiAoISR2ZXJzaW9uQnRuLmxlbmd0aCkgcmV0dXJuO1xuXG4gIC8vIOmhtemdouWKoOi9veaXtuajgOafpeS4gOasoeeJiOacrO+8jOeUqOS6juaYvuekuuabtOaWsOaPkOekuue6oueCuVxuICBjb25zdCBpbml0aWFsVXBkYXRlSW5mbyA9IGF3YWl0IGNoZWNrRm9yVXBkYXRlcygpO1xuXG4gIGlmIChpbml0aWFsVXBkYXRlSW5mbz8uaGFzVXBkYXRlKSB7XG4gICAgJHZlcnNpb25CdG4uYXBwZW5kKCc8c3BhbiBjbGFzcz1cImFic29sdXRlIHRvcC0wIHJpZ2h0LTAgYmxvY2sgaC0yIHctMiByb3VuZGVkLWZ1bGwgcmluZy0yIHJpbmctd2hpdGUgYmctcmVkLTUwMFwiPjwvc3Bhbj4nKTtcbiAgfVxuXG4gIC8vIOavj+asoeeCueWHu+mDvemHjeaWsOiOt+WPluacgOaWsOeahGNoYW5nZWxvZ+W5tuaYvuekulxuICAkdmVyc2lvbkJ0bi5vbignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgdG9hc3RyLmluZm8oJ+ato+WcqOiOt+WPluacgOaWsOabtOaWsOaXpeW/ly4uLicpO1xuICAgIGNvbnN0IGNoYW5nZWxvZ0h0bWwgPSBhd2FpdCBnZXRDaGFuZ2Vsb2coKTtcbiAgICAvLyDlho3mrKHmo4Dmn6XniYjmnKznirbmgIHvvIzku6Xnoa7lrprigJznq4vljbPmm7TmlrDigJ3mjInpkq7mmK/lkKbmmL7npLpcbiAgICBjb25zdCBjdXJyZW50VXBkYXRlSW5mbyA9IGF3YWl0IGNoZWNrRm9yVXBkYXRlcygpO1xuICAgIFxuICAgIGlmIChjaGFuZ2Vsb2dIdG1sICYmIGN1cnJlbnRVcGRhdGVJbmZvKSB7XG4gICAgICBzaG93Q2hhbmdlbG9nTW9kYWwoY2hhbmdlbG9nSHRtbCwgY3VycmVudFVwZGF0ZUluZm8uaGFzVXBkYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9hc3RyLmVycm9yKCfml6Dms5XmmL7npLrmm7TmlrDml6Xlv5fjgIInKTtcbiAgICB9XG4gIH0pO1xufVxuXG4kKCgpID0+IHtcbiAgaW5pdEdsb2JhbENvbnRyb2xzKCk7XG4gIGNvbnN0IHN0b3J5UmVuZGVyZXIgPSBuZXcgU3RvcnlSZW5kZXJlcigpO1xuICBjb25zdCB7IHNob3dNb2RhbFdpdGhEYXRhIH0gPSBpbml0RGV0YWlsc01vZGFsKCk7XG4gIGluaXRWZXJzaW9uQ2hlY2tlcigpO1xuICBpbml0UG9rZWRleE1hbmFnZXIoc3RvcnlSZW5kZXJlciwgc2hvd01vZGFsV2l0aERhdGEpO1xuICBpbml0UmVtb3RlU3luY01vZGFsKHNob3dNb2RhbFdpdGhEYXRhKTtcbiAgc3RvcnlSZW5kZXJlci5pbml0KCk7XG4gIGNvbnN0IGN1c3RvbUFjdGlvbk1vZGFsID0gaW5pdEN1c3RvbUFjdGlvbk1vZGFsKCk7XG4gIGNvbnN0IHJld2FyZHNNb2RhbCA9IGluaXRSZXdhcmRzTW9kYWwoKTtcblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3JlZGVlbS1yZXdhcmRzLWJ0bicsIGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgdG9hc3RyLmluZm8oJ+ato+WcqOiOt+WPluWlluWKseWIl+ihqC4uLicpO1xuICAgICAgY29uc3QgYm9va05hbWUgPSBcIuS7gOS5iO+8n+aIkeimgeWcqOeOhOW5u+S/ruS7meS4lueVjOenjeeUsO+8n1wiO1xuICAgICAgY29uc3QgZW50cnlLZXkgPSBcIuaIkOWwseezu+e7n+eahOWlluWKsVwiO1xuICAgICAgY29uc3Qgd29ybGRib29rID0gYXdhaXQgZ2V0V29ybGRib29rKGJvb2tOYW1lKTtcbiAgICAgIGNvbnN0IGVudHJ5ID0gd29ybGRib29rLmZpbmQoZSA9PiBlLm5hbWUgPT09IGVudHJ5S2V5KTtcbiAgICAgIFxuICAgICAgaWYgKGVudHJ5ICYmIGVudHJ5LmNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gZ2V0Q3VycmVudE1lc3NhZ2VJZCgpO1xuICAgICAgICBjb25zdCBjdXJyZW50VmFycyA9IGdldFZhcmlhYmxlcyh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pO1xuICAgICAgICBjb25zdCBjdXJyZW50UG9pbnRzID0gXy5nZXQoY3VycmVudFZhcnMsICfkuJbnlYwu57O757ufLuaIkOWwseeCueaVsCcsIDApO1xuICAgICAgICByZXdhcmRzTW9kYWwuc2hvd01vZGFsV2l0aFJld2FyZHMoZW50cnkuY29udGVudCwgY3VycmVudFBvaW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b2FzdHIud2FybmluZygn5pyq5om+5Yiw5Y+v5YWR5o2i55qE5aWW5Yqx5L+h5oGv44CCJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLojrflj5blpZblirHlpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcihcIuiOt+WPluWlluWKseWIl+ihqOWksei0pe+8jOivt+afpeeci+aOp+WItuWPsOOAglwiKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjc2lnbi1pbi1idG4nLCBhc3luYyAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICB0YXJnZXQucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGdldEN1cnJlbnRNZXNzYWdlSWQoKTtcbiAgICBjb25zdCB2YXJpYWJsZXMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IG1lc3NhZ2VJZCB9KTtcbiAgICBjb25zdCBzeXN0ZW1EYXRhID0gXy5nZXQodmFyaWFibGVzLCAn5LiW55WMLuezu+e7nycsIHt9KTtcbiAgICBjb25zdCBjb25zZWN1dGl2ZURheXMgPSBzeXN0ZW1EYXRhWyfov57nu63nrb7liLAnXSB8fCAwO1xuICAgIGNvbnN0IG1vbnRobHlDYXJkID0gc3lzdGVtRGF0YVsn5pyI5Y2hJ10gfHwgJ+acqua/gOa0uyc7XG5cbiAgICBsZXQgc2lnbkluTWVzc2FnZSA9IGBbU1lTVEVNXSDnjqnlrrbopoHov5vooYzmr4/ml6Xnrb7liLDjgIJgO1xuICAgIGlmIChtb250aGx5Q2FyZCAhPT0gJ+acqua/gOa0uycpIHtcbiAgICAgICAgc2lnbkluTWVzc2FnZSArPSBgXFxu5b2T5YmN5pyI5Y2h54q25oCBOiAke21vbnRobHlDYXJkfeOAgmA7XG4gICAgfVxuICAgIHNpZ25Jbk1lc3NhZ2UgKz0gYFxcbuW9k+WJjeW3sui/nue7reetvuWIsDogJHtjb25zZWN1dGl2ZURheXN95aSp44CCYDtcblxuICAgIGNvbnN0IGNvbW1hbmQgPSBgL3NlbmQgJHtzaWduSW5NZXNzYWdlfSB8IC90cmlnZ2VyYDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdHJpZ2dlclNsYXNoKGNvbW1hbmQpO1xuICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOetvuWIsOivt+axguW3suWPkemAge+8gWApO1xuICAgICAgXG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpO1xuICAgICAgY29uc3QgY2FsZW5kYXJHcmlkID0gJCgnI2NhbGVuZGFyLWdyaWQnKTtcbiAgICAgIGNvbnN0IHRvZGF5Q2VsbCA9IGNhbGVuZGFyR3JpZC5maW5kKGBbZGF0YS1kYXk9XCIke3RvZGF5fVwiXWApO1xuICAgICAgXG4gICAgICBpZiAodG9kYXlDZWxsLmxlbmd0aCkge1xuICAgICAgICB0b2RheUNlbGwucmVtb3ZlQ2xhc3MoJ2JnLWFjY2VudC8zMCB0ZXh0LWFjY2VudCBmb250LWJvbGQgcmluZy0yIHJpbmctYWNjZW50JylcbiAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdiZy1ncmVlbi01MDAvNTAgdGV4dC13aGl0ZScpXG4gICAgICAgICAgICAgICAgIC5odG1sKCc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nKVxuICAgICAgICAgICAgICAgICAuYXR0cigndGl0bGUnLCBg56ysJHt0b2RheX3lpKnvvJrlt7Lnrb7liLBgKTtcbiAgICAgIH1cbiAgICAgIHRhcmdldC5odG1sKCc8aSBjbGFzcz1cImZhcyBmYS1jYWxlbmRhci1jaGVjayBtci0yXCI+PC9pPuS7iuaXpeW3suetvuWIsCcpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLnrb7liLDlpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcihcIuetvuWIsOWksei0pe+8jOivt+afpeeci+aOp+WItuWPsOOAglwiKTtcbiAgICAgIHRhcmdldC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjYWN0aXZhdGUtbW9udGhseS1jYXJkLWJ0bicsIGFzeW5jIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIHRhcmdldC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLnRleHQoJ+ivoumXruS4rS4uLicpO1xuXG4gICAgY29uc3QgY29tbWFuZCA9IGAvc2VuZCBbU1lTVEVNXSDnjqnlrrbmg7PopoHmv4DmtLvnrb7liLDns7vnu5/nmoTmnIjljaHvvIzor7flkYrnn6Xmv4DmtLvmnaHku7blkozmlYjmnpzjgIIgfCAvdHJpZ2dlcmA7XG4gICAgdG9hc3RyLmluZm8oYOato+WcqOivoumXrua/gOa0u+adoeS7ti4uLmApO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0cmlnZ2VyU2xhc2goY29tbWFuZCk7XG4gICAgICB0b2FzdHIuc3VjY2Vzcyhg6K+35rGC5bey5Y+R6YCB77yBYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLmv4DmtLvmnIjljaHlpLHotKU6XCIsIGVycm9yKTtcbiAgICAgIHRvYXN0ci5lcnJvcihcIuivt+axguWksei0pe+8jOivt+afpeeci+aOp+WItuWPsOOAglwiKTtcbiAgICAgIHRhcmdldC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS50ZXh0KCfmv4DmtLsnKTtcbiAgICB9XG4gIH0pO1xuXG4gICQoJyNvcHRpb25zLWxpc3QnKS5vbignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldExpID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKTtcbiAgICBpZiAoIXRhcmdldExpLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb3B0aW9uc0xpc3QgPSAkKCcjb3B0aW9ucy1saXN0Jyk7XG4gICAgaWYgKG9wdGlvbnNMaXN0Lmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XG4gICAgICB0b2FzdHIuaW5mbygn5q2j5Zyo562J5b6F5Zue5bqU77yM6K+356iN5ZCOLi4uJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uVHlwZSA9IHRhcmdldExpLmRhdGEoJ2FjdGlvblR5cGUnKTtcblxuICAgIGlmIChhY3Rpb25UeXBlID09PSAnY3VzdG9tJykge1xuICAgICAgY3VzdG9tQWN0aW9uTW9kYWwuc2hvd01vZGFsKHRhcmdldExpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgb3B0aW9uVGV4dCA9IHRhcmdldExpLmRhdGEoJ29wdGlvblRleHQnKTtcbiAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQodGFyZ2V0TGkuZGF0YSgnb3B0aW9uSW5kZXgnKSwgMTApO1xuXG4gICAgICBpZiAob3B0aW9uVGV4dCAmJiAhaXNOYU4ob3B0aW9uSW5kZXgpKSB7XG4gICAgICAgIC8vIOemgeeUqOaJgOaciemAiemhueW5tuaYvuekuuWKoOi9veeKtuaAgVxuICAgICAgICBvcHRpb25zTGlzdC5hZGRDbGFzcygnZGlzYWJsZWQnKS5odG1sKGBcbiAgICAgICAgICA8bGkgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS00IHRleHQtc2Vjb25kYXJ5IHRoZW1lLXRyYW5zaXRpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTUgdy01IGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItaW5kaWdvLTQwMCBtci0zXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxzcGFuPuetieW+heW9vOeVjOeahOWbnuW6lC4uLjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIGApO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgdHJpZ2dlckFjdGlvbihvcHRpb25UZXh0LCBvcHRpb25JbmRleCk7XG4gICAgICAgIC8vIOatpOaXtuS4jemcgOimgeWBmuS7u+S9leS6i++8jOWboOS4uueVjOmdouWwhumaj+aWsOa2iOaBr+S4gOi1t+mHjeaWsOa4suafk1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5iYXJ0ZXItYnRuJywgYXN5bmMgKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgdGFyZ2V0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gdGFyZ2V0Lmh0bWwoKTtcbiAgICB0YXJnZXQuaHRtbCgnPGkgY2xhc3M9XCJmYXMgZmEtc3Bpbm5lciBmYS1zcGluXCI+PC9pPicpO1xuXG4gICAgY29uc3QgaXRlbU5hbWUgPSB0YXJnZXQuZGF0YSgnbmFtZScpO1xuICAgIGNvbnN0IGl0ZW1Db3N0ID0gcGFyc2VJbnQodGFyZ2V0LmRhdGEoJ2Nvc3QnKSB8fCAnMCcsIDEwKTtcblxuICAgIGlmICghaXRlbU5hbWUgfHwgaXNOYU4oaXRlbUNvc3QpKSB7XG4gICAgICB0b2FzdHIuZXJyb3IoJ+aXoOazleiOt+WPlueJqeWTgeS/oeaBr+OAgicpO1xuICAgICAgdGFyZ2V0LnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLmh0bWwob3JpZ2luYWxUZXh0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlSWQgPSBnZXRDdXJyZW50TWVzc2FnZUlkKCk7XG4gICAgY29uc3QgdmFyaWFibGVzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBtZXNzYWdlSWQgfSk7XG4gICAgY29uc3QgbXlJdGVtcyA9IF8uZ2V0KHZhcmlhYmxlcywgJ+S4lueVjC7ns7vnu58u5oiR55qE54mp5ZOBJywgW10pO1xuICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBfLnN1bUJ5KG15SXRlbXMsIChpdGVtOiBhbnkpID0+IChpdGVtWyfmlbDph48nXSB8fCAwKSAqIChpdGVtWyfku7flgLwnXSB8fCAwKSk7XG5cbiAgICBjb25zdCBjb21tYW5kID0gYC9zZW5kIFtTWVNURU1dIOOAkOS7peeJqeaNoueJqeezu+e7n+OAke+8muKAnOWYv++8jOaci+WPi++8geaIkeeci+WIsOS9oOaDs+eUqOS9oOmCo+WghuS7t+WAvCAke3RvdGFsVmFsdWV9IOeahOWunei0ne+8jOadpeaNouaIkeeahOOAkCR7aXRlbU5hbWV944CR77yI5Lu35YC8ICR7aXRlbUNvc3R977yJ44CC6K6p5oiR5oOz5oOz4oCm4oCm4oCdIHwgL3RyaWdnZXJgO1xuICAgIHRvYXN0ci5pbmZvKGDmraPlnKjlsJ3or5XmjaLlj5Y6ICR7aXRlbU5hbWV9Li4uYCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRyaWdnZXJTbGFzaChjb21tYW5kKTtcbiAgICAgIHRvYXN0ci5zdWNjZXNzKGDmjaLlj5bor7fmsYLlt7Llj5HpgIHvvIFgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuaNouWPluWksei0pTpcIiwgZXJyb3IpO1xuICAgICAgdG9hc3RyLmVycm9yKFwi5o2i5Y+W5aSx6LSl77yM6K+35p+l55yL5o6n5Yi25Y+w44CCXCIpO1xuICAgICAgdGFyZ2V0LnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLmh0bWwob3JpZ2luYWxUZXh0KTtcbiAgICB9XG4gIH0pO1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjcmVmcmVzaC1iYXJ0ZXItYnRuJywgYXN5bmMgKGUpID0+IHtcbiAgICByZXF1ZXN0U3lzdGVtUmVmcmVzaCgn5Lul54mp5o2i54mpJywgJChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpKTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/index.ts\\n\\n}\");\n  },\n  \"./src/什么我要在玄幻修仙世界种田/parser.ts\": \n  /*!*************************************!*\\\n  !*** ./src/什么我要在玄幻修仙世界种田/parser.ts ***!\n  \\*************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n    eval(\"{__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   extractJsonFromStatusBar: () => (/* binding */ extractJsonFromStatusBar)\\n/* harmony export */ });\\n/**\\n * 从完整的消息文本中严格提取 <statusbar>...</statusbar> 块内的 JSON 内容。\\n * @param messageContent - 完整的聊天消息字符串。\\n * @returns 清理后的 JSON 字符串，如果找不到或无效则返回空字符串。\\n */\\nfunction extractJsonFromStatusBar(messageContent) {\\n    if (!messageContent) {\\n        return '';\\n    }\\n    // 第一层过滤: 严格查找并提取 <statusbar>...</statusbar> 之间的内容\\n    const startIndex = messageContent.indexOf('<statusbar>');\\n    const endIndex = messageContent.indexOf('</statusbar>');\\n    if (startIndex === -1 || endIndex === -1 || endIndex <= startIndex) {\\n        console.error('未在消息中找到有效的 <statusbar>...</statusbar> 结构。');\\n        return '';\\n    }\\n    const contentToProcess = messageContent.substring(startIndex + '<statusbar>'.length, endIndex);\\n    // 从 <statusbar> 块内初步提取可能包含 JSON 的字符串\\n    let potentialJsonString;\\n    const jsonRegex = /```json\\\\s*([\\\\s\\\\S]*?)\\\\s*```/;\\n    const match = contentToProcess.match(jsonRegex);\\n    if (match && match[1]) {\\n        potentialJsonString = match[1].trim();\\n    }\\n    else {\\n        potentialJsonString = contentToProcess.trim();\\n    }\\n    // 第二层保险: 从初步提取的字符串中，精确地只获取第一个 '{' 和最后一个 '}' 之间的内容\\n    const firstBracket = potentialJsonString.indexOf('{');\\n    const lastBracket = potentialJsonString.lastIndexOf('}');\\n    if (firstBracket === -1 || lastBracket === -1 || lastBracket <= firstBracket) {\\n        console.error('在 <statusbar> 块内未找到有效的JSON对象结构。内容:', contentToProcess);\\n        return '';\\n    }\\n    const finalJsonString = potentialJsonString.substring(firstBracket, lastBracket + 1);\\n    // 清理并返回最终的 JSON 字符串 (移除尾随逗号)\\n    return finalJsonString.replace(/,(?=\\\\s*?[\\\\]}])/g, '');\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3BhcnNlci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7R0FJRztBQUNJLFNBQVMsd0JBQXdCLENBQUMsY0FBc0I7SUFDN0QsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3BCLE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUVELGtEQUFrRDtJQUNsRCxNQUFNLFVBQVUsR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3pELE1BQU0sUUFBUSxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7SUFFeEQsSUFBSSxVQUFVLEtBQUssQ0FBQyxDQUFDLElBQUksUUFBUSxLQUFLLENBQUMsQ0FBQyxJQUFJLFFBQVEsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUNuRSxPQUFPLENBQUMsS0FBSyxDQUFDLDJDQUEyQyxDQUFDLENBQUM7UUFDM0QsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBRUQsTUFBTSxnQkFBZ0IsR0FBRyxjQUFjLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxhQUFhLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRS9GLHFDQUFxQztJQUNyQyxJQUFJLG1CQUFtQixDQUFDO0lBQ3hCLE1BQU0sU0FBUyxHQUFHLDRCQUE0QixDQUFDO0lBQy9DLE1BQU0sS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUVoRCxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUN0QixtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDeEMsQ0FBQztTQUFNLENBQUM7UUFDTixtQkFBbUIsR0FBRyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBRUQsa0RBQWtEO0lBQ2xELE1BQU0sWUFBWSxHQUFHLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0RCxNQUFNLFdBQVcsR0FBRyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFekQsSUFBSSxZQUFZLEtBQUssQ0FBQyxDQUFDLElBQUksV0FBVyxLQUFLLENBQUMsQ0FBQyxJQUFJLFdBQVcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUM3RSxPQUFPLENBQUMsS0FBSyxDQUFDLG9DQUFvQyxFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFDdEUsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBRUQsTUFBTSxlQUFlLEdBQUcsbUJBQW1CLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFFckYsNkJBQTZCO0lBQzdCLE9BQU8sZUFBZSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN4RCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/ku4DkuYjmiJHopoHlnKjnjoTlubvkv67ku5nkuJbnlYznp43nlLAvcGFyc2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOS7juWujOaVtOeahOa2iOaBr+aWh+acrOS4reS4peagvOaPkOWPliA8c3RhdHVzYmFyPi4uLjwvc3RhdHVzYmFyPiDlnZflhoXnmoQgSlNPTiDlhoXlrrnjgIJcbiAqIEBwYXJhbSBtZXNzYWdlQ29udGVudCAtIOWujOaVtOeahOiBiuWkqea2iOaBr+Wtl+espuS4suOAglxuICogQHJldHVybnMg5riF55CG5ZCO55qEIEpTT04g5a2X56ym5Liy77yM5aaC5p6c5om+5LiN5Yiw5oiW5peg5pWI5YiZ6L+U5Zue56m65a2X56ym5Liy44CCXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0SnNvbkZyb21TdGF0dXNCYXIobWVzc2FnZUNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghbWVzc2FnZUNvbnRlbnQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvLyDnrKzkuIDlsYLov4fmu6Q6IOS4peagvOafpeaJvuW5tuaPkOWPliA8c3RhdHVzYmFyPi4uLjwvc3RhdHVzYmFyPiDkuYvpl7TnmoTlhoXlrrlcbiAgY29uc3Qgc3RhcnRJbmRleCA9IG1lc3NhZ2VDb250ZW50LmluZGV4T2YoJzxzdGF0dXNiYXI+Jyk7XG4gIGNvbnN0IGVuZEluZGV4ID0gbWVzc2FnZUNvbnRlbnQuaW5kZXhPZignPC9zdGF0dXNiYXI+Jyk7XG5cbiAgaWYgKHN0YXJ0SW5kZXggPT09IC0xIHx8IGVuZEluZGV4ID09PSAtMSB8fCBlbmRJbmRleCA8PSBzdGFydEluZGV4KSB7XG4gICAgY29uc29sZS5lcnJvcign5pyq5Zyo5raI5oGv5Lit5om+5Yiw5pyJ5pWI55qEIDxzdGF0dXNiYXI+Li4uPC9zdGF0dXNiYXI+IOe7k+aehOOAgicpO1xuICAgIHJldHVybiAnJztcbiAgfVxuICBcbiAgY29uc3QgY29udGVudFRvUHJvY2VzcyA9IG1lc3NhZ2VDb250ZW50LnN1YnN0cmluZyhzdGFydEluZGV4ICsgJzxzdGF0dXNiYXI+Jy5sZW5ndGgsIGVuZEluZGV4KTtcblxuICAvLyDku44gPHN0YXR1c2Jhcj4g5Z2X5YaF5Yid5q2l5o+Q5Y+W5Y+v6IO95YyF5ZCrIEpTT04g55qE5a2X56ym5LiyXG4gIGxldCBwb3RlbnRpYWxKc29uU3RyaW5nO1xuICBjb25zdCBqc29uUmVnZXggPSAvYGBganNvblxccyooW1xcc1xcU10qPylcXHMqYGBgLztcbiAgY29uc3QgbWF0Y2ggPSBjb250ZW50VG9Qcm9jZXNzLm1hdGNoKGpzb25SZWdleCk7XG5cbiAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgcG90ZW50aWFsSnNvblN0cmluZyA9IG1hdGNoWzFdLnRyaW0oKTtcbiAgfSBlbHNlIHtcbiAgICBwb3RlbnRpYWxKc29uU3RyaW5nID0gY29udGVudFRvUHJvY2Vzcy50cmltKCk7XG4gIH1cblxuICAvLyDnrKzkuozlsYLkv53pmak6IOS7juWIneatpeaPkOWPlueahOWtl+espuS4suS4re+8jOeyvuehruWcsOWPquiOt+WPluesrOS4gOS4qiAneycg5ZKM5pyA5ZCO5LiA5LiqICd9JyDkuYvpl7TnmoTlhoXlrrlcbiAgY29uc3QgZmlyc3RCcmFja2V0ID0gcG90ZW50aWFsSnNvblN0cmluZy5pbmRleE9mKCd7Jyk7XG4gIGNvbnN0IGxhc3RCcmFja2V0ID0gcG90ZW50aWFsSnNvblN0cmluZy5sYXN0SW5kZXhPZignfScpO1xuXG4gIGlmIChmaXJzdEJyYWNrZXQgPT09IC0xIHx8IGxhc3RCcmFja2V0ID09PSAtMSB8fCBsYXN0QnJhY2tldCA8PSBmaXJzdEJyYWNrZXQpIHtcbiAgICBjb25zb2xlLmVycm9yKCflnKggPHN0YXR1c2Jhcj4g5Z2X5YaF5pyq5om+5Yiw5pyJ5pWI55qESlNPTuWvueixoee7k+aehOOAguWGheWuuTonLCBjb250ZW50VG9Qcm9jZXNzKTtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBjb25zdCBmaW5hbEpzb25TdHJpbmcgPSBwb3RlbnRpYWxKc29uU3RyaW5nLnN1YnN0cmluZyhmaXJzdEJyYWNrZXQsIGxhc3RCcmFja2V0ICsgMSk7XG4gIFxuICAvLyDmuIXnkIblubbov5Tlm57mnIDnu4jnmoQgSlNPTiDlrZfnrKbkuLIgKOenu+mZpOWwvumaj+mAl+WPtylcbiAgcmV0dXJuIGZpbmFsSnNvblN0cmluZy5yZXBsYWNlKC8sKD89XFxzKj9bXFxdfV0pL2csICcnKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/parser.ts\\n\\n}\");\n  },\n  \"./src/什么我要在玄幻修仙世界种田/pokedex.ts\": \n  /*!**************************************!*\\\n  !*** ./src/什么我要在玄幻修仙世界种田/pokedex.ts ***!\n  \\**************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n    eval(\"{__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   createAchievement: () => (/* binding */ createAchievement),\\n/* harmony export */   createPokedexEntry: () => (/* binding */ createPokedexEntry),\\n/* harmony export */   deleteAchievement: () => (/* binding */ deleteAchievement),\\n/* harmony export */   deletePokedexEntry: () => (/* binding */ deletePokedexEntry),\\n/* harmony export */   getAchievements: () => (/* binding */ getAchievements),\\n/* harmony export */   getPokedexData: () => (/* binding */ getPokedexData),\\n/* harmony export */   getRemotePokedex: () => (/* binding */ getRemotePokedex),\\n/* harmony export */   getSystemData: () => (/* binding */ getSystemData),\\n/* harmony export */   readPokedexEntry: () => (/* binding */ readPokedexEntry),\\n/* harmony export */   submitToHuggingFace: () => (/* binding */ submitToHuggingFace),\\n/* harmony export */   updateAchievement: () => (/* binding */ updateAchievement),\\n/* harmony export */   updatePokedexEntry: () => (/* binding */ updatePokedexEntry)\\n/* harmony export */ });\\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \\\"lodash\\\");\\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\\n\\nconst POKEDEX_VARIABLE_PATH = '世界.图鉴';\\n/**\\n * 从全局变量中获取完整的图鉴数据\\n * @returns {Promise<PokedexData>}\\n */\\nasync function getPokedexData() {\\n    const variables = getVariables({ type: 'global' });\\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().get(variables, POKEDEX_VARIABLE_PATH, { 妖兽: [], 植物: [], 物品: [] });\\n}\\n/**\\n * 将完整的图鉴数据保存回全局变量\\n * @param {PokedexData} data - The full pokedex data object.\\n */\\nasync function savePokedexData(data) {\\n    await insertOrAssignVariables({ [POKEDEX_VARIABLE_PATH]: data }, { type: 'global' });\\n}\\n/**\\n * 创建一个新的图鉴条目\\n * @param {PokedexType} type - The type of the entry ('妖兽', '植物', '物品').\\n * @param {PokedexEntry} entryData - The data for the new entry.\\n * @returns {Promise<boolean>} - True if creation was successful, false otherwise.\\n */\\nasync function createPokedexEntry(type, entryData) {\\n    if (!entryData.名称) {\\n        toastr.error('创建失败：条目必须包含“名称”字段。');\\n        return false;\\n    }\\n    const pokedex = await getPokedexData();\\n    if (pokedex[type].some(entry => entry.名称 === entryData.名称)) {\\n        toastr.warning(`创建失败：名为“${entryData.名称}”的${type}已存在。`);\\n        return false;\\n    }\\n    pokedex[type].push(entryData);\\n    await savePokedexData(pokedex);\\n    toastr.success(`成功添加【${entryData.名称}】到${type}图鉴！`);\\n    return true;\\n}\\n/**\\n * 根据名称读取一个特定的图鉴条目\\n * @param {PokedexType} type - The type of the entry.\\n * @param {string} name - The name of the entry to read.\\n * @returns {Promise<PokedexEntry | undefined>}\\n */\\nasync function readPokedexEntry(type, name) {\\n    const pokedex = await getPokedexData();\\n    return pokedex[type].find(entry => entry.名称 === name);\\n}\\n/**\\n * 更新一个现有的图鉴条目\\n * @param {PokedexType} type - The type of the entry.\\n * @param {string} originalName - The original name of the entry to update.\\n * @param {PokedexEntry} updatedData - The new data for the entry.\\n * @returns {Promise<boolean>} - True if update was successful, false otherwise.\\n */\\nasync function updatePokedexEntry(type, originalName, updatedData) {\\n    if (!updatedData.名称) {\\n        toastr.error('更新失败：条目必须包含“名称”字段。');\\n        return false;\\n    }\\n    const pokedex = await getPokedexData();\\n    const entryIndex = pokedex[type].findIndex(entry => entry.名称 === originalName);\\n    if (entryIndex === -1) {\\n        toastr.error(`更新失败：未找到名为“${originalName}”的${type}。`);\\n        return false;\\n    }\\n    // Check for name collision if the name is changed\\n    if (originalName !== updatedData.名称 && pokedex[type].some(entry => entry.名称 === updatedData.名称)) {\\n        toastr.warning(`更新失败：名为“${updatedData.名称}”的${type}已存在。`);\\n        return false;\\n    }\\n    pokedex[type][entryIndex] = updatedData;\\n    await savePokedexData(pokedex);\\n    toastr.success(`成功更新【${updatedData.名称}】！`);\\n    return true;\\n}\\n/**\\n * 删除一个图鉴条目\\n * @param {PokedexType} type - The type of the entry.\\n * @param {string} name - The name of the entry to delete.\\n * @returns {Promise<boolean>} - True if deletion was successful, false otherwise.\\n */\\nasync function deletePokedexEntry(type, name) {\\n    let deleteOccurred = false;\\n    await updateVariablesWith(variables => {\\n        const pokedex = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(variables, POKEDEX_VARIABLE_PATH, { 妖兽: [], 植物: [], 物品: [] });\\n        const initialLength = pokedex[type].length;\\n        pokedex[type] = pokedex[type].filter((entry) => entry.名称 !== name);\\n        if (pokedex[type].length < initialLength) {\\n            deleteOccurred = true;\\n            lodash__WEBPACK_IMPORTED_MODULE_0___default().set(variables, POKEDEX_VARIABLE_PATH, pokedex);\\n        }\\n        return variables;\\n    }, { type: 'global' });\\n    if (deleteOccurred) {\\n        toastr.success(`成功删除【${name}】！`);\\n    }\\n    else {\\n        toastr.warning(`删除失败：未找到名为“${name}”的${type}。`);\\n    }\\n    return deleteOccurred;\\n}\\n/**\\n * 提交新条目到后端服务器\\n * @param {PokedexType} type - The type of the entry.\\n * @param {PokedexEntry} entryData - The data of the new entry.\\n * @param {string} [provider] - Optional name of the provider.\\n */\\nasync function submitToHuggingFace(type, entryData, provider) {\\n    const HUGGING_FACE_API_ENDPOINT = 'https://www-api-forum.rc6s3wcue.nyat.app:59690/api/pokedex';\\n    try {\\n        // 如果有提供者，则添加到条目数据中\\n        const entryWithProvider = provider ? { ...entryData, '贡献者': provider } : entryData;\\n        // 构造与服务器Zod schema匹配的数据格式\\n        const payload = {\\n            type: type,\\n            entry: entryWithProvider,\\n        };\\n        console.log('[Pokedex] Submitting to server:', payload);\\n        const response = await fetch(HUGGING_FACE_API_ENDPOINT, {\\n            method: 'POST',\\n            headers: {\\n                'Content-Type': 'application/json',\\n            },\\n            body: JSON.stringify(payload),\\n        });\\n        if (!response.ok) {\\n            const errorData = await response.json();\\n            console.error('Server responded with an error:', errorData);\\n            throw new Error(`服务器返回错误: ${response.status} - ${errorData.message || '未知错误'}`);\\n        }\\n        const result = await response.json();\\n        console.log('[Pokedex] Submission successful:', result);\\n        toastr.info('新条目已成功分享到社区！');\\n    }\\n    catch (error) {\\n        console.error('[Pokedex] Failed to submit to server:', error);\\n        toastr.error(`分享新条目失败: ${error instanceof Error ? error.message : '请查看控制台'}`);\\n    }\\n}\\n/**\\n * 从后端服务器获取完整的图鉴数据\\n * @returns {Promise<RemotePokedexData | null>}\\n */\\nasync function getRemotePokedex() {\\n    const HUGGING_FACE_API_ENDPOINT = 'https://www-api-forum.rc6s3wcue.nyat.app:59690/api/pokedex';\\n    try {\\n        const response = await fetch(HUGGING_FACE_API_ENDPOINT, {\\n            method: 'GET',\\n            headers: {\\n                'Content-Type': 'application/json',\\n            },\\n        });\\n        if (!response.ok) {\\n            throw new Error(`服务器返回错误: ${response.status}`);\\n        }\\n        const data = await response.json();\\n        // 为空数据提供默认值\\n        const validatedData = {\\n            妖兽: data['妖兽'] || [],\\n            植物: data['植物'] || [],\\n            物品: data['物品'] || [],\\n            成就: data['成就'] || [],\\n        };\\n        return validatedData;\\n    }\\n    catch (error) {\\n        console.error('[Pokedex] Failed to fetch from server:', error);\\n        toastr.error(`从社区获取数据失败: ${error instanceof Error ? error.message : '请查看控制台'}`);\\n        return null;\\n    }\\n}\\nconst ACHIEVEMENT_VARIABLE_PATH = '世界.系统';\\n/**\\n * 从全局变量中获取完整的系统数据\\n * @returns {Promise<any>}\\n */\\nasync function getSystemData() {\\n    const variables = getVariables({ type: 'global' });\\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().get(variables, ACHIEVEMENT_VARIABLE_PATH, { 已完成: [], 成就点数: 0 });\\n}\\n/**\\n * 将完整的系统数据保存回全局变量\\n * @param {any} data - The full system data object.\\n */\\nasync function saveSystemData(data) {\\n    await insertOrAssignVariables({ [ACHIEVEMENT_VARIABLE_PATH]: data }, { type: 'global' });\\n}\\n/**\\n * 从全局变量中获取所有成就\\n * @returns {Promise<PokedexEntry[]>}\\n */\\nasync function getAchievements() {\\n    const systemData = await getSystemData();\\n    return systemData.已完成 || [];\\n}\\n/**\\n * 创建一个新成就\\n * @param {PokedexEntry} entryData - The data for the new achievement.\\n * @returns {Promise<boolean>} - True if creation was successful, false otherwise.\\n */\\nasync function createAchievement(entryData) {\\n    if (!entryData.名称) {\\n        toastr.error('创建失败：成就必须包含“名称”字段。');\\n        return false;\\n    }\\n    const systemData = await getSystemData();\\n    const achievements = systemData.已完成 || [];\\n    if (achievements.some((ach) => ach.名称 === entryData.名称)) {\\n        toastr.warning(`创建失败：名为“${entryData.名称}”的成就已存在。`);\\n        return false;\\n    }\\n    achievements.push(entryData);\\n    systemData.已完成 = achievements;\\n    // 如果条目数据中有点数，则增加总点数\\n    const pointsToAdd = Number(entryData['点数'] || 0);\\n    if (!isNaN(pointsToAdd)) {\\n        systemData.成就点数 = (systemData.成就点数 || 0) + pointsToAdd;\\n    }\\n    await saveSystemData(systemData);\\n    toastr.success(`成功添加新成就【${entryData.名称}】！`);\\n    return true;\\n}\\n/**\\n * 更新一个现有的成就\\n * @param {string} originalName - The original name of the achievement to update.\\n * @param {PokedexEntry} updatedData - The new data for the achievement.\\n * @returns {Promise<boolean>} - True if update was successful, false otherwise.\\n */\\nasync function updateAchievement(originalName, updatedData) {\\n    if (!updatedData.名称) {\\n        toastr.error('更新失败：成就必须包含“名称”字段。');\\n        return false;\\n    }\\n    const systemData = await getSystemData();\\n    const achievements = systemData.已完成 || [];\\n    const entryIndex = achievements.findIndex((ach) => ach.名称 === originalName);\\n    if (entryIndex === -1) {\\n        toastr.error(`更新失败：未找到名为“${originalName}”的成就。`);\\n        return false;\\n    }\\n    if (originalName !== updatedData.名称 && achievements.some((ach) => ach.名称 === updatedData.名称)) {\\n        toastr.warning(`更新失败：名为“${updatedData.名称}”的成就已存在。`);\\n        return false;\\n    }\\n    const oldEntry = achievements[entryIndex];\\n    const oldPoints = Number(oldEntry['点数'] || 0);\\n    const newPoints = Number(updatedData['点数'] || 0);\\n    achievements[entryIndex] = updatedData;\\n    systemData.已完成 = achievements;\\n    // 更新总点数\\n    if (!isNaN(oldPoints) && !isNaN(newPoints)) {\\n        systemData.成就点数 = (systemData.成就点数 || 0) - oldPoints + newPoints;\\n    }\\n    await saveSystemData(systemData);\\n    toastr.success(`成功更新成就【${updatedData.名称}】！`);\\n    return true;\\n}\\n/**\\n * 删除一个成就\\n * @param {string} name - The name of the achievement to delete.\\n * @returns {Promise<boolean>} - True if deletion was successful, false otherwise.\\n */\\nasync function deleteAchievement(name) {\\n    let deleteOccurred = false;\\n    await updateVariablesWith(variables => {\\n        const systemData = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(variables, ACHIEVEMENT_VARIABLE_PATH, { 已完成: [], 成就点数: 0 });\\n        const achievements = systemData.已完成 || [];\\n        const initialLength = achievements.length;\\n        const entryToDelete = achievements.find((ach) => ach.名称 === name);\\n        if (!entryToDelete) {\\n            return variables; // No change\\n        }\\n        systemData.已完成 = achievements.filter((ach) => ach.名称 !== name);\\n        if (systemData.已完成.length < initialLength) {\\n            deleteOccurred = true;\\n            const pointsToRemove = Number(entryToDelete['点数'] || 0);\\n            if (!isNaN(pointsToRemove)) {\\n                systemData.成就点数 = (systemData.成就点数 || 0) - pointsToRemove;\\n            }\\n            lodash__WEBPACK_IMPORTED_MODULE_0___default().set(variables, ACHIEVEMENT_VARIABLE_PATH, systemData);\\n        }\\n        return variables;\\n    }, { type: 'global' });\\n    if (deleteOccurred) {\\n        toastr.success(`成功删除成就【${name}】！`);\\n    }\\n    else {\\n        toastr.warning(`删除失败：未找到名为“${name}”的成就。`);\\n    }\\n    return deleteOccurred;\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3Bva2VkZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUI7QUFldkIsTUFBTSxxQkFBcUIsR0FBRyxPQUFPLENBQUM7QUFFdEM7OztHQUdHO0FBQ0ksS0FBSyxVQUFVLGNBQWM7SUFDbEMsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7SUFDbkQsT0FBTyxpREFBSyxDQUFDLFNBQVMsRUFBRSxxQkFBcUIsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUM3RSxDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsS0FBSyxVQUFVLGVBQWUsQ0FBQyxJQUFpQjtJQUM5QyxNQUFNLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7QUFDdkYsQ0FBQztBQUVEOzs7OztHQUtHO0FBQ0ksS0FBSyxVQUFVLGtCQUFrQixDQUFDLElBQWlCLEVBQUUsU0FBdUI7SUFDakYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNsQixNQUFNLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFDbkMsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBQ0QsTUFBTSxPQUFPLEdBQUcsTUFBTSxjQUFjLEVBQUUsQ0FBQztJQUN2QyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1FBQzNELE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxTQUFTLENBQUMs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QUMsQ0FBQztJQUM1QyxDQUFDO0lBQ0QsT0FBTyxjQUFjLENBQUM7QUFDeEIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3Bva2VkZXgudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbi8vIOWumuS5ieWbvumJtOadoeebruWSjOexu+Wei+eahOWfuuacrOe7k+aehFxuZXhwb3J0IHR5cGUgUG9rZWRleEVudHJ5ID0geyBba2V5OiBzdHJpbmddOiBhbnk7IOWQjeensDogc3RyaW5nIH07XG5leHBvcnQgdHlwZSBQb2tlZGV4VHlwZSA9ICflppblhb0nIHwgJ+akjeeJqScgfCAn54mp5ZOBJztcbmV4cG9ydCB0eXBlIFNoYXJlYWJsZVR5cGUgPSBQb2tlZGV4VHlwZSB8ICfmiJDlsLEnO1xuZXhwb3J0IHR5cGUgUG9rZWRleERhdGEgPSB7XG4gIOWmluWFvTogUG9rZWRleEVudHJ5W107XG4gIOakjeeJqTogUG9rZWRleEVudHJ5W107XG4gIOeJqeWTgTogUG9rZWRleEVudHJ5W107XG59O1xuZXhwb3J0IHR5cGUgUmVtb3RlUG9rZWRleERhdGEgPSBQb2tlZGV4RGF0YSAmIHtcbiAg5oiQ5bCxOiBQb2tlZGV4RW50cnlbXTtcbn07XG5cbmNvbnN0IFBPS0VERVhfVkFSSUFCTEVfUEFUSCA9ICfkuJbnlYwu5Zu+6Ym0JztcblxuLyoqXG4gKiDku47lhajlsYDlj5jph4/kuK3ojrflj5blrozmlbTnmoTlm77pibTmlbDmja5cbiAqIEByZXR1cm5zIHtQcm9taXNlPFBva2VkZXhEYXRhPn1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBva2VkZXhEYXRhKCk6IFByb21pc2U8UG9rZWRleERhdGE+IHtcbiAgY29uc3QgdmFyaWFibGVzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ2dsb2JhbCcgfSk7XG4gIHJldHVybiBfLmdldCh2YXJpYWJsZXMsIFBPS0VERVhfVkFSSUFCTEVfUEFUSCwgeyDlppblhb06IFtdLCDmpI3niak6IFtdLCDnianlk4E6IFtdIH0pO1xufVxuXG4vKipcbiAqIOWwhuWujOaVtOeahOWbvumJtOaVsOaNruS/neWtmOWbnuWFqOWxgOWPmOmHj1xuICogQHBhcmFtIHtQb2tlZGV4RGF0YX0gZGF0YSAtIFRoZSBmdWxsIHBva2VkZXggZGF0YSBvYmplY3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNhdmVQb2tlZGV4RGF0YShkYXRhOiBQb2tlZGV4RGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBpbnNlcnRPckFzc2lnblZhcmlhYmxlcyh7IFtQT0tFREVYX1ZBUklBQkxFX1BBVEhdOiBkYXRhIH0sIHsgdHlwZTogJ2dsb2JhbCcgfSk7XG59XG5cbi8qKlxuICog5Yib5bu65LiA5Liq5paw55qE5Zu+6Ym05p2h55uuXG4gKiBAcGFyYW0ge1Bva2VkZXhUeXBlfSB0eXBlIC0gVGhlIHR5cGUgb2YgdGhlIGVudHJ5ICgn5aaW5YW9JywgJ+akjeeJqScsICfnianlk4EnKS5cbiAqIEBwYXJhbSB7UG9rZWRleEVudHJ5fSBlbnRyeURhdGEgLSBUaGUgZGF0YSBmb3IgdGhlIG5ldyBlbnRyeS5cbiAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSAtIFRydWUgaWYgY3JlYXRpb24gd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVBva2VkZXhFbnRyeSh0eXBlOiBQb2tlZGV4VHlwZSwgZW50cnlEYXRhOiBQb2tlZGV4RW50cnkpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgaWYgKCFlbnRyeURhdGEu5ZCN56ewKSB7XG4gICAgdG9hc3RyLmVycm9yKCfliJvlu7rlpLHotKXvvJrmnaHnm67lv4XpobvljIXlkKvigJzlkI3np7DigJ3lrZfmrrXjgIInKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgcG9rZWRleCA9IGF3YWl0IGdldFBva2VkZXhEYXRhKCk7XG4gIGlmIChwb2tlZGV4W3R5cGVdLnNvbWUoZW50cnkgPT4gZW50cnku5ZCN56ewID09PSBlbnRyeURhdGEu5ZCN56ewKSkge1xuICAgIHRvYXN0ci53YXJuaW5nKGDliJvlu7rlpLHotKXvvJrlkI3kuLrigJwke2VudHJ5RGF0YS7lkI3np7B94oCd55qEJHt0eXBlfeW3suWtmOWcqOOAgmApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBwb2tlZGV4W3R5cGVdLnB1c2goZW50cnlEYXRhKTtcbiAgYXdhaXQgc2F2ZVBva2VkZXhEYXRhKHBva2VkZXgpO1xuICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5re75Yqg44CQJHtlbnRyeURhdGEu5ZCN56ewfeOAkeWIsCR7dHlwZX3lm77pibTvvIFgKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICog5qC55o2u5ZCN56ew6K+75Y+W5LiA5Liq54m55a6a55qE5Zu+6Ym05p2h55uuXG4gKiBAcGFyYW0ge1Bva2VkZXhUeXBlfSB0eXBlIC0gVGhlIHR5cGUgb2YgdGhlIGVudHJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZW50cnkgdG8gcmVhZC5cbiAqIEByZXR1cm5zIHtQcm9taXNlPFBva2VkZXhFbnRyeSB8IHVuZGVmaW5lZD59XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkUG9rZWRleEVudHJ5KHR5cGU6IFBva2VkZXhUeXBlLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFBva2VkZXhFbnRyeSB8IHVuZGVmaW5lZD4ge1xuICBjb25zdCBwb2tlZGV4ID0gYXdhaXQgZ2V0UG9rZWRleERhdGEoKTtcbiAgcmV0dXJuIHBva2VkZXhbdHlwZV0uZmluZChlbnRyeSA9PiBlbnRyeS7lkI3np7AgPT09IG5hbWUpO1xufVxuXG4vKipcbiAqIOabtOaWsOS4gOS4queOsOacieeahOWbvumJtOadoeebrlxuICogQHBhcmFtIHtQb2tlZGV4VHlwZX0gdHlwZSAtIFRoZSB0eXBlIG9mIHRoZSBlbnRyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5hbE5hbWUgLSBUaGUgb3JpZ2luYWwgbmFtZSBvZiB0aGUgZW50cnkgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtQb2tlZGV4RW50cnl9IHVwZGF0ZWREYXRhIC0gVGhlIG5ldyBkYXRhIGZvciB0aGUgZW50cnkuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBUcnVlIGlmIHVwZGF0ZSB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUG9rZWRleEVudHJ5KHR5cGU6IFBva2VkZXhUeXBlLCBvcmlnaW5hbE5hbWU6IHN0cmluZywgdXBkYXRlZERhdGE6IFBva2VkZXhFbnRyeSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBpZiAoIXVwZGF0ZWREYXRhLuWQjeensCkge1xuICAgIHRvYXN0ci5lcnJvcign5pu05paw5aSx6LSl77ya5p2h55uu5b+F6aG75YyF5ZCr4oCc5ZCN56ew4oCd5a2X5q6144CCJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHBva2VkZXggPSBhd2FpdCBnZXRQb2tlZGV4RGF0YSgpO1xuICBjb25zdCBlbnRyeUluZGV4ID0gcG9rZWRleFt0eXBlXS5maW5kSW5kZXgoZW50cnkgPT4gZW50cnku5ZCN56ewID09PSBvcmlnaW5hbE5hbWUpO1xuXG4gIGlmIChlbnRyeUluZGV4ID09PSAtMSkge1xuICAgIHRvYXN0ci5lcnJvcihg5pu05paw5aSx6LSl77ya5pyq5om+5Yiw5ZCN5Li64oCcJHtvcmlnaW5hbE5hbWV94oCd55qEJHt0eXBlfeOAgmApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBuYW1lIGNvbGxpc2lvbiBpZiB0aGUgbmFtZSBpcyBjaGFuZ2VkXG4gIGlmIChvcmlnaW5hbE5hbWUgIT09IHVwZGF0ZWREYXRhLuWQjeensCAmJiBwb2tlZGV4W3R5cGVdLnNvbWUoZW50cnkgPT4gZW50cnku5ZCN56ewID09PSB1cGRhdGVkRGF0YS7lkI3np7ApKSB7XG4gICAgdG9hc3RyLndhcm5pbmcoYOabtOaWsOWksei0pe+8muWQjeS4uuKAnCR7dXBkYXRlZERhdGEu5ZCN56ewfeKAneeahCR7dHlwZX3lt7LlrZjlnKjjgIJgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwb2tlZGV4W3R5cGVdW2VudHJ5SW5kZXhdID0gdXBkYXRlZERhdGE7XG4gIGF3YWl0IHNhdmVQb2tlZGV4RGF0YShwb2tlZGV4KTtcbiAgdG9hc3RyLnN1Y2Nlc3MoYOaIkOWKn+abtOaWsOOAkCR7dXBkYXRlZERhdGEu5ZCN56ewfeOAke+8gWApO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiDliKDpmaTkuIDkuKrlm77pibTmnaHnm65cbiAqIEBwYXJhbSB7UG9rZWRleFR5cGV9IHR5cGUgLSBUaGUgdHlwZSBvZiB0aGUgZW50cnkuXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBlbnRyeSB0byBkZWxldGUuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBUcnVlIGlmIGRlbGV0aW9uIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQb2tlZGV4RW50cnkodHlwZTogUG9rZWRleFR5cGUsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBsZXQgZGVsZXRlT2NjdXJyZWQgPSBmYWxzZTtcbiAgYXdhaXQgdXBkYXRlVmFyaWFibGVzV2l0aCh2YXJpYWJsZXMgPT4ge1xuICAgIGNvbnN0IHBva2VkZXggPSBfLmdldCh2YXJpYWJsZXMsIFBPS0VERVhfVkFSSUFCTEVfUEFUSCwgeyDlppblhb06IFtdLCDmpI3niak6IFtdLCDnianlk4E6IFtdIH0pO1xuICAgIGNvbnN0IGluaXRpYWxMZW5ndGggPSBwb2tlZGV4W3R5cGVdLmxlbmd0aDtcbiAgICBwb2tlZGV4W3R5cGVdID0gcG9rZWRleFt0eXBlXS5maWx0ZXIoKGVudHJ5OiBQb2tlZGV4RW50cnkpID0+IGVudHJ5LuWQjeensCAhPT0gbmFtZSk7XG4gICAgaWYgKHBva2VkZXhbdHlwZV0ubGVuZ3RoIDwgaW5pdGlhbExlbmd0aCkge1xuICAgICAgZGVsZXRlT2NjdXJyZWQgPSB0cnVlO1xuICAgICAgXy5zZXQodmFyaWFibGVzLCBQT0tFREVYX1ZBUklBQkxFX1BBVEgsIHBva2VkZXgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFyaWFibGVzO1xuICB9LCB7IHR5cGU6ICdnbG9iYWwnIH0pO1xuXG4gIGlmIChkZWxldGVPY2N1cnJlZCkge1xuICAgIHRvYXN0ci5zdWNjZXNzKGDmiJDlip/liKDpmaTjgJAke25hbWV944CR77yBYCk7XG4gIH0gZWxzZSB7XG4gICAgdG9hc3RyLndhcm5pbmcoYOWIoOmZpOWksei0pe+8muacquaJvuWIsOWQjeS4uuKAnCR7bmFtZX3igJ3nmoQke3R5cGV944CCYCk7XG4gIH1cbiAgcmV0dXJuIGRlbGV0ZU9jY3VycmVkO1xufVxuXG4vKipcbiAqIOaPkOS6pOaWsOadoeebruWIsOWQjuerr+acjeWKoeWZqFxuICogQHBhcmFtIHtQb2tlZGV4VHlwZX0gdHlwZSAtIFRoZSB0eXBlIG9mIHRoZSBlbnRyeS5cbiAqIEBwYXJhbSB7UG9rZWRleEVudHJ5fSBlbnRyeURhdGEgLSBUaGUgZGF0YSBvZiB0aGUgbmV3IGVudHJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IFtwcm92aWRlcl0gLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdFRvSHVnZ2luZ0ZhY2UodHlwZTogU2hhcmVhYmxlVHlwZSwgZW50cnlEYXRhOiBQb2tlZGV4RW50cnksIHByb3ZpZGVyPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IEhVR0dJTkdfRkFDRV9BUElfRU5EUE9JTlQgPSAnaHR0cHM6Ly93d3ctYXBpLWZvcnVtLnJjNnMzd2N1ZS5ueWF0LmFwcDo1OTY5MC9hcGkvcG9rZWRleCc7XG5cbiAgdHJ5IHtcbiAgICAvLyDlpoLmnpzmnInmj5DkvpvogIXvvIzliJnmt7vliqDliLDmnaHnm67mlbDmja7kuK1cbiAgICBjb25zdCBlbnRyeVdpdGhQcm92aWRlciA9IHByb3ZpZGVyID8geyAuLi5lbnRyeURhdGEsICfotKHnjK7ogIUnOiBwcm92aWRlciB9IDogZW50cnlEYXRhO1xuXG4gICAgLy8g5p6E6YCg5LiO5pyN5Yqh5ZmoWm9kIHNjaGVtYeWMuemFjeeahOaVsOaNruagvOW8j1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgZW50cnk6IGVudHJ5V2l0aFByb3ZpZGVyLFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZygnW1Bva2VkZXhdIFN1Ym1pdHRpbmcgdG8gc2VydmVyOicsIHBheWxvYWQpO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChIVUdHSU5HX0ZBQ0VfQVBJX0VORFBPSU5ULCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlcnZlciByZXNwb25kZWQgd2l0aCBhbiBlcnJvcjonLCBlcnJvckRhdGEpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDmnI3liqHlmajov5Tlm57plJnor686ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7ZXJyb3JEYXRhLm1lc3NhZ2UgfHwgJ+acquefpemUmeivryd9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKCdbUG9rZWRleF0gU3VibWlzc2lvbiBzdWNjZXNzZnVsOicsIHJlc3VsdCk7XG4gICAgdG9hc3RyLmluZm8oJ+aWsOadoeebruW3suaIkOWKn+WIhuS6q+WIsOekvuWMuu+8gScpO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1Bva2VkZXhdIEZhaWxlZCB0byBzdWJtaXQgdG8gc2VydmVyOicsIGVycm9yKTtcbiAgICB0b2FzdHIuZXJyb3IoYOWIhuS6q+aWsOadoeebruWksei0pTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfor7fmn6XnnIvmjqfliLblj7AnfWApO1xuICB9XG59XG5cbi8qKlxuICog5LuO5ZCO56uv5pyN5Yqh5Zmo6I635Y+W5a6M5pW055qE5Zu+6Ym05pWw5o2uXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxSZW1vdGVQb2tlZGV4RGF0YSB8IG51bGw+fVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVtb3RlUG9rZWRleCgpOiBQcm9taXNlPFJlbW90ZVBva2VkZXhEYXRhIHwgbnVsbD4ge1xuICBjb25zdCBIVUdHSU5HX0ZBQ0VfQVBJX0VORFBPSU5UID0gJ2h0dHBzOi8vd3d3LWFwaS1mb3J1bS5yYzZzM3djdWUubnlhdC5hcHA6NTk2OTAvYXBpL3Bva2VkZXgnO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChIVUdHSU5HX0ZBQ0VfQVBJX0VORFBPSU5ULCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihg5pyN5Yqh5Zmo6L+U5Zue6ZSZ6K+vOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIC8vIOS4uuepuuaVsOaNruaPkOS+m+m7mOiupOWAvFxuICAgIGNvbnN0IHZhbGlkYXRlZERhdGE6IFJlbW90ZVBva2VkZXhEYXRhID0ge1xuICAgICAg5aaW5YW9OiBkYXRhWyflppblhb0nXSB8fCBbXSxcbiAgICAgIOakjeeJqTogZGF0YVsn5qSN54mpJ10gfHwgW10sXG4gICAgICDnianlk4E6IGRhdGFbJ+eJqeWTgSddIHx8IFtdLFxuICAgICAg5oiQ5bCxOiBkYXRhWyfmiJDlsLEnXSB8fCBbXSxcbiAgICB9O1xuICAgIHJldHVybiB2YWxpZGF0ZWREYXRhO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1Bva2VkZXhdIEZhaWxlZCB0byBmZXRjaCBmcm9tIHNlcnZlcjonLCBlcnJvcik7XG4gICAgdG9hc3RyLmVycm9yKGDku47npL7ljLrojrflj5bmlbDmja7lpLHotKU6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn6K+35p+l55yL5o6n5Yi25Y+wJ31gKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5jb25zdCBBQ0hJRVZFTUVOVF9WQVJJQUJMRV9QQVRIID0gJ+S4lueVjC7ns7vnu58nO1xuXG4vKipcbiAqIOS7juWFqOWxgOWPmOmHj+S4reiOt+WPluWujOaVtOeahOezu+e7n+aVsOaNrlxuICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN5c3RlbURhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgdmFyaWFibGVzID0gZ2V0VmFyaWFibGVzKHsgdHlwZTogJ2dsb2JhbCcgfSk7XG4gIHJldHVybiBfLmdldCh2YXJpYWJsZXMsIEFDSElFVkVNRU5UX1ZBUklBQkxFX1BBVEgsIHsg5bey5a6M5oiQOiBbXSwg5oiQ5bCx54K55pWwOiAwIH0pO1xufVxuXG4vKipcbiAqIOWwhuWujOaVtOeahOezu+e7n+aVsOaNruS/neWtmOWbnuWFqOWxgOWPmOmHj1xuICogQHBhcmFtIHthbnl9IGRhdGEgLSBUaGUgZnVsbCBzeXN0ZW0gZGF0YSBvYmplY3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNhdmVTeXN0ZW1EYXRhKGRhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBpbnNlcnRPckFzc2lnblZhcmlhYmxlcyh7IFtBQ0hJRVZFTUVOVF9WQVJJQUJMRV9QQVRIXTogZGF0YSB9LCB7IHR5cGU6ICdnbG9iYWwnIH0pO1xufVxuXG4vKipcbiAqIOS7juWFqOWxgOWPmOmHj+S4reiOt+WPluaJgOacieaIkOWwsVxuICogQHJldHVybnMge1Byb21pc2U8UG9rZWRleEVudHJ5W10+fVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWNoaWV2ZW1lbnRzKCk6IFByb21pc2U8UG9rZWRleEVudHJ5W10+IHtcbiAgY29uc3Qgc3lzdGVtRGF0YSA9IGF3YWl0IGdldFN5c3RlbURhdGEoKTtcbiAgcmV0dXJuIHN5c3RlbURhdGEu5bey5a6M5oiQIHx8IFtdO1xufVxuXG4vKipcbiAqIOWIm+W7uuS4gOS4quaWsOaIkOWwsVxuICogQHBhcmFtIHtQb2tlZGV4RW50cnl9IGVudHJ5RGF0YSAtIFRoZSBkYXRhIGZvciB0aGUgbmV3IGFjaGlldmVtZW50LlxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IC0gVHJ1ZSBpZiBjcmVhdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQWNoaWV2ZW1lbnQoZW50cnlEYXRhOiBQb2tlZGV4RW50cnkpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgaWYgKCFlbnRyeURhdGEu5ZCN56ewKSB7XG4gICAgdG9hc3RyLmVycm9yKCfliJvlu7rlpLHotKXvvJrmiJDlsLHlv4XpobvljIXlkKvigJzlkI3np7DigJ3lrZfmrrXjgIInKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3Qgc3lzdGVtRGF0YSA9IGF3YWl0IGdldFN5c3RlbURhdGEoKTtcbiAgY29uc3QgYWNoaWV2ZW1lbnRzID0gc3lzdGVtRGF0YS7lt7LlrozmiJAgfHwgW107XG5cbiAgaWYgKGFjaGlldmVtZW50cy5zb21lKChhY2g6IFBva2VkZXhFbnRyeSkgPT4gYWNoLuWQjeensCA9PT0gZW50cnlEYXRhLuWQjeensCkpIHtcbiAgICB0b2FzdHIud2FybmluZyhg5Yib5bu65aSx6LSl77ya5ZCN5Li64oCcJHtlbnRyeURhdGEu5ZCN56ewfeKAneeahOaIkOWwseW3suWtmOWcqOOAgmApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgYWNoaWV2ZW1lbnRzLnB1c2goZW50cnlEYXRhKTtcbiAgc3lzdGVtRGF0YS7lt7LlrozmiJAgPSBhY2hpZXZlbWVudHM7XG4gIFxuICAvLyDlpoLmnpzmnaHnm67mlbDmja7kuK3mnInngrnmlbDvvIzliJnlop7liqDmgLvngrnmlbBcbiAgY29uc3QgcG9pbnRzVG9BZGQgPSBOdW1iZXIoZW50cnlEYXRhWyfngrnmlbAnXSB8fCAwKTtcbiAgaWYgKCFpc05hTihwb2ludHNUb0FkZCkpIHtcbiAgICAgIHN5c3RlbURhdGEu5oiQ5bCx54K55pWwID0gKHN5c3RlbURhdGEu5oiQ5bCx54K55pWwIHx8IDApICsgcG9pbnRzVG9BZGQ7XG4gIH1cblxuICBhd2FpdCBzYXZlU3lzdGVtRGF0YShzeXN0ZW1EYXRhKTtcbiAgdG9hc3RyLnN1Y2Nlc3MoYOaIkOWKn+a3u+WKoOaWsOaIkOWwseOAkCR7ZW50cnlEYXRhLuWQjeensH3jgJHvvIFgKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICog5pu05paw5LiA5Liq546w5pyJ55qE5oiQ5bCxXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luYWxOYW1lIC0gVGhlIG9yaWdpbmFsIG5hbWUgb2YgdGhlIGFjaGlldmVtZW50IHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7UG9rZWRleEVudHJ5fSB1cGRhdGVkRGF0YSAtIFRoZSBuZXcgZGF0YSBmb3IgdGhlIGFjaGlldmVtZW50LlxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IC0gVHJ1ZSBpZiB1cGRhdGUgd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFjaGlldmVtZW50KG9yaWdpbmFsTmFtZTogc3RyaW5nLCB1cGRhdGVkRGF0YTogUG9rZWRleEVudHJ5KTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGlmICghdXBkYXRlZERhdGEu5ZCN56ewKSB7XG4gICAgdG9hc3RyLmVycm9yKCfmm7TmlrDlpLHotKXvvJrmiJDlsLHlv4XpobvljIXlkKvigJzlkI3np7DigJ3lrZfmrrXjgIInKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3Qgc3lzdGVtRGF0YSA9IGF3YWl0IGdldFN5c3RlbURhdGEoKTtcbiAgY29uc3QgYWNoaWV2ZW1lbnRzID0gc3lzdGVtRGF0YS7lt7LlrozmiJAgfHwgW107XG4gIGNvbnN0IGVudHJ5SW5kZXggPSBhY2hpZXZlbWVudHMuZmluZEluZGV4KChhY2g6IFBva2VkZXhFbnRyeSkgPT4gYWNoLuWQjeensCA9PT0gb3JpZ2luYWxOYW1lKTtcblxuICBpZiAoZW50cnlJbmRleCA9PT0gLTEpIHtcbiAgICB0b2FzdHIuZXJyb3IoYOabtOaWsOWksei0pe+8muacquaJvuWIsOWQjeS4uuKAnCR7b3JpZ2luYWxOYW1lfeKAneeahOaIkOWwseOAgmApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChvcmlnaW5hbE5hbWUgIT09IHVwZGF0ZWREYXRhLuWQjeensCAmJiBhY2hpZXZlbWVudHMuc29tZSgoYWNoOiBQb2tlZGV4RW50cnkpID0+IGFjaC7lkI3np7AgPT09IHVwZGF0ZWREYXRhLuWQjeensCkpIHtcbiAgICB0b2FzdHIud2FybmluZyhg5pu05paw5aSx6LSl77ya5ZCN5Li64oCcJHt1cGRhdGVkRGF0YS7lkI3np7B94oCd55qE5oiQ5bCx5bey5a2Y5Zyo44CCYCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBjb25zdCBvbGRFbnRyeSA9IGFjaGlldmVtZW50c1tlbnRyeUluZGV4XTtcbiAgY29uc3Qgb2xkUG9pbnRzID0gTnVtYmVyKG9sZEVudHJ5WyfngrnmlbAnXSB8fCAwKTtcbiAgY29uc3QgbmV3UG9pbnRzID0gTnVtYmVyKHVwZGF0ZWREYXRhWyfngrnmlbAnXSB8fCAwKTtcblxuICBhY2hpZXZlbWVudHNbZW50cnlJbmRleF0gPSB1cGRhdGVkRGF0YTtcbiAgc3lzdGVtRGF0YS7lt7LlrozmiJAgPSBhY2hpZXZlbWVudHM7XG4gIFxuICAvLyDmm7TmlrDmgLvngrnmlbBcbiAgaWYgKCFpc05hTihvbGRQb2ludHMpICYmICFpc05hTihuZXdQb2ludHMpKSB7XG4gICAgICBzeXN0ZW1EYXRhLuaIkOWwseeCueaVsCA9IChzeXN0ZW1EYXRhLuaIkOWwseeCueaVsCB8fCAwKSAtIG9sZFBvaW50cyArIG5ld1BvaW50cztcbiAgfVxuXG4gIGF3YWl0IHNhdmVTeXN0ZW1EYXRhKHN5c3RlbURhdGEpO1xuICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5pu05paw5oiQ5bCx44CQJHt1cGRhdGVkRGF0YS7lkI3np7B944CR77yBYCk7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIOWIoOmZpOS4gOS4quaIkOWwsVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYWNoaWV2ZW1lbnQgdG8gZGVsZXRlLlxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IC0gVHJ1ZSBpZiBkZWxldGlvbiB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQWNoaWV2ZW1lbnQobmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGxldCBkZWxldGVPY2N1cnJlZCA9IGZhbHNlO1xuICBhd2FpdCB1cGRhdGVWYXJpYWJsZXNXaXRoKHZhcmlhYmxlcyA9PiB7XG4gICAgY29uc3Qgc3lzdGVtRGF0YSA9IF8uZ2V0KHZhcmlhYmxlcywgQUNISUVWRU1FTlRfVkFSSUFCTEVfUEFUSCwgeyDlt7LlrozmiJA6IFtdLCDmiJDlsLHngrnmlbA6IDAgfSk7XG4gICAgY29uc3QgYWNoaWV2ZW1lbnRzID0gc3lzdGVtRGF0YS7lt7LlrozmiJAgfHwgW107XG4gICAgY29uc3QgaW5pdGlhbExlbmd0aCA9IGFjaGlldmVtZW50cy5sZW5ndGg7XG4gICAgXG4gICAgY29uc3QgZW50cnlUb0RlbGV0ZSA9IGFjaGlldmVtZW50cy5maW5kKChhY2g6IFBva2VkZXhFbnRyeSkgPT4gYWNoLuWQjeensCA9PT0gbmFtZSk7XG4gICAgaWYgKCFlbnRyeVRvRGVsZXRlKSB7XG4gICAgICByZXR1cm4gdmFyaWFibGVzOyAvLyBObyBjaGFuZ2VcbiAgICB9XG5cbiAgICBzeXN0ZW1EYXRhLuW3suWujOaIkCA9IGFjaGlldmVtZW50cy5maWx0ZXIoKGFjaDogUG9rZWRleEVudHJ5KSA9PiBhY2gu5ZCN56ewICE9PSBuYW1lKTtcbiAgICBcbiAgICBpZiAoc3lzdGVtRGF0YS7lt7LlrozmiJAubGVuZ3RoIDwgaW5pdGlhbExlbmd0aCkge1xuICAgICAgZGVsZXRlT2NjdXJyZWQgPSB0cnVlO1xuICAgICAgY29uc3QgcG9pbnRzVG9SZW1vdmUgPSBOdW1iZXIoZW50cnlUb0RlbGV0ZVsn54K55pWwJ10gfHwgMCk7XG4gICAgICBpZiAoIWlzTmFOKHBvaW50c1RvUmVtb3ZlKSkge1xuICAgICAgICBzeXN0ZW1EYXRhLuaIkOWwseeCueaVsCA9IChzeXN0ZW1EYXRhLuaIkOWwseeCueaVsCB8fCAwKSAtIHBvaW50c1RvUmVtb3ZlO1xuICAgICAgfVxuICAgICAgXy5zZXQodmFyaWFibGVzLCBBQ0hJRVZFTUVOVF9WQVJJQUJMRV9QQVRILCBzeXN0ZW1EYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhcmlhYmxlcztcbiAgfSwgeyB0eXBlOiAnZ2xvYmFsJyB9KTtcblxuICBpZiAoZGVsZXRlT2NjdXJyZWQpIHtcbiAgICB0b2FzdHIuc3VjY2Vzcyhg5oiQ5Yqf5Yig6Zmk5oiQ5bCx44CQJHtuYW1lfeOAke+8gWApO1xuICB9IGVsc2Uge1xuICAgIHRvYXN0ci53YXJuaW5nKGDliKDpmaTlpLHotKXvvJrmnKrmib7liLDlkI3kuLrigJwke25hbWV94oCd55qE5oiQ5bCx44CCYCk7XG4gIH1cbiAgcmV0dXJuIGRlbGV0ZU9jY3VycmVkO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/pokedex.ts\\n\\n}\");\n  },\n  \"./src/什么我要在玄幻修仙世界种田/systems.ts\": \n  /*!**************************************!*\\\n  !*** ./src/什么我要在玄幻修仙世界种田/systems.ts ***!\n  \\**************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n    eval('{__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   renderSystem: () => (/* binding */ renderSystem)\\n/* harmony export */ });\\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"lodash\");\\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\\n\\nfunction initCustomSlider() {\\n    const slider = document.querySelector(\\'.custom-slider\\');\\n    if (!slider)\\n        return;\\n    const track = slider.querySelector(\\'.custom-slider-track\\');\\n    const slides = Array.from(track.children);\\n    const nextButton = slider.querySelector(\\'.slider-nav-btn.next\\');\\n    const prevButton = slider.querySelector(\\'.slider-nav-btn.prev\\');\\n    const counter = slider.querySelector(\\'.slider-counter\\');\\n    if (!track || slides.length === 0 || !nextButton || !prevButton || !counter)\\n        return;\\n    let currentIndex = 0;\\n    const totalSlides = slides.length;\\n    const updateSlider = () => {\\n        const slideWidth = slides[0].offsetWidth;\\n        track.style.transform = `translateX(-${currentIndex * slideWidth}px)`;\\n        // Update counter\\n        counter.textContent = `${currentIndex + 1} / ${totalSlides}`;\\n        // Update button states\\n        prevButton.disabled = currentIndex === 0;\\n        nextButton.disabled = currentIndex === totalSlides - 1;\\n    };\\n    nextButton.addEventListener(\\'click\\', () => {\\n        if (currentIndex < totalSlides - 1) {\\n            currentIndex++;\\n            updateSlider();\\n        }\\n    });\\n    prevButton.addEventListener(\\'click\\', () => {\\n        if (currentIndex > 0) {\\n            currentIndex--;\\n            updateSlider();\\n        }\\n    });\\n    // Initial setup\\n    updateSlider();\\n    // Recalculate on resize\\n    new ResizeObserver(updateSlider).observe(slider);\\n}\\n/**\\n * 渲染技能面板系统\\n * @param systemData - 从变量中获取的系统数据\\n * @param container - 用于渲染的HTML容器元素\\n */\\nfunction renderSkillPanel(systemData, container) {\\n    const skills = systemData[\\'技能\\'] || [];\\n    let contentHtml = \\'\\';\\n    if (skills.length === 0) {\\n        contentHtml = `<p class=\"text-secondary text-sm italic\">${systemData[\\'提示\\'] || \\'尚未获得任何技能。\\'}</p>`;\\n    }\\n    else {\\n        contentHtml = \\'<ul class=\"space-y-3\">\\';\\n        skills.forEach((skill) => {\\n            const name = skill[\\'名称\\'] || \\'未知技能\\';\\n            const level = skill[\\'等级\\'] || 1;\\n            const exp = skill[\\'熟练度\\'] || { value: 0, max: 100 };\\n            const percentage = (exp.value / exp.max) * 100;\\n            contentHtml += `\\n        <li>\\n          <div class=\"flex justify-between items-center mb-1\">\\n            <span class=\"font-semibold text-primary\">${name}</span>\\n            <span class=\"text-sm font-mono text-secondary\">Lv. ${level}</span>\\n          </div>\\n          <div class=\"progress-bar-bg w-full rounded-full h-2.5\">\\n            <div class=\"progress-bar-fg bg-accent h-2.5 rounded-full\" style=\"width: ${percentage}%\"></div>\\n          </div>\\n          <div class=\"text-right text-xs font-mono text-secondary mt-1\">${exp.value} / ${exp.max}</div>\\n        </li>\\n      `;\\n        });\\n        contentHtml += \\'</ul>\\';\\n    }\\n    container.innerHTML = `\\n    <div class=\"bg-main rounded-xl border border-dim p-3.5 shadow-sm card-hover theme-transition\">\\n      <h3 class=\"font-bold text-lg mb-2 pb-1 border-b border-dim theme-transition\">\\n        ⚙️ ${systemData[\\'名称\\'] || \\'技能面板\\'}\\n      </h3>\\n      ${contentHtml}\\n    </div>\\n  `;\\n}\\n/**\\n * 渲染成就系统\\n * @param systemData - 从变量中获取的系统数据\\n * @param container - 用于渲染的HTML容器元素\\n */\\nfunction renderAchievementSystem(systemData, container) {\\n    const points = systemData[\\'成就点数\\'] || 0;\\n    const completed = systemData[\\'已完成\\'] || [];\\n    let achievementsHtml = \\'\\';\\n    if (completed.length === 0) {\\n        achievementsHtml = `<p class=\"text-secondary text-sm italic\">尚未解锁任何成就。</p>`;\\n    }\\n    else {\\n        achievementsHtml = \\'<ul class=\"space-y-3\">\\';\\n        completed.forEach((ach) => {\\n            const name = ach[\\'名称\\'] || \\'未知成就\\';\\n            const desc = ach[\\'描述\\'] || \\'没有描述。\\';\\n            // 将整个成就对象字符串化以用于 data-details\\n            const details = JSON.stringify(ach);\\n            achievementsHtml += `\\n        <li class=\"clickable-item rounded-lg p-3 hover:bg-secondary transition-colors\" data-details=\\'${details}\\'>\\n          <div class=\"flex items-center\">\\n            <i class=\"fas fa-trophy text-yellow-400 mr-3 fa-lg\"></i>\\n            <p class=\"font-semibold text-primary\">${name}</p>\\n          </div>\\n          <p class=\"text-sm text-secondary pl-8 mt-1\">${desc}</p>\\n        </li>\\n      `;\\n        });\\n        achievementsHtml += \\'</ul>\\';\\n    }\\n    container.innerHTML = `\\n    <div class=\"bg-main rounded-xl border border-dim p-3.5 shadow-sm card-hover theme-transition\">\\n      <div class=\"flex justify-between items-center mb-2 pb-1 border-b border-dim\">\\n        <h3 class=\"font-bold text-lg theme-transition\">\\n          🏆 ${systemData[\\'名称\\'] || \\'成就系统\\'}\\n        </h3>\\n        <div class=\"font-bold text-accent text-lg\" title=\"成就点数\">\\n          ${points} <i class=\"fas fa-star text-xs\"></i>\\n        </div>\\n      </div>\\n      ${achievementsHtml}\\n      <div class=\"mt-4 pt-3 border-t border-dim text-center\">\\n        <button id=\"redeem-rewards-btn\" class=\"btn-primary w-full sm:w-auto\">\\n          <i class=\"fas fa-gift mr-2\"></i>兑换奖励\\n        </button>\\n      </div>\\n    </div>\\n  `;\\n}\\nfunction renderBarterSystem(systemData, container) {\\n    const myItems = systemData[\\'我的物品\\'] || [];\\n    const availableItems = systemData[\\'可换取的物品\\'] || [];\\n    const totalValue = lodash__WEBPACK_IMPORTED_MODULE_0___default().sumBy(myItems, (item) => (item[\\'数量\\'] || 0) * (item[\\'价值\\'] || 0));\\n    // --- My Items Section ---\\n    let myItemsHtml = `<div class=\"bg-secondary/30 rounded-lg p-3 shadow-inner\">`;\\n    if (myItems.length > 0) {\\n        myItemsHtml += `<ul class=\"space-y-2 text-sm\">`;\\n        myItems.forEach((item) => {\\n            myItemsHtml += `\\n        <li class=\"flex justify-between items-center p-2 rounded-md bg-main/30\">\\n          <div>\\n            <span class=\"font-semibold text-primary\">${item[\\'名称\\']}</span>\\n            <span class=\"text-xs text-secondary ml-2\">(价值: ${item[\\'价值\\']})</span>\\n          </div>\\n          <span class=\"font-mono text-accent font-semibold\">x ${item[\\'数量\\']}</span>\\n        </li>\\n      `;\\n        });\\n        myItemsHtml += `</ul>`;\\n    }\\n    else {\\n        myItemsHtml += `<p class=\"text-secondary text-sm italic text-center p-4\">你没有可用于交换的物品。</p>`;\\n    }\\n    myItemsHtml += \\'</div>\\';\\n    // --- Available Items Section ---\\n    let availableItemsHtml = `\\n    <div class=\"custom-slider\">\\n      <div class=\"custom-slider-track\">\\n  `;\\n    if (availableItems.length > 0) {\\n        availableItems.forEach((item) => {\\n            const canAfford = totalValue >= (item[\\'价值\\'] || 0);\\n            availableItemsHtml += `\\n        <div class=\"custom-slider-slide\">\\n          <div class=\"bg-main rounded-xl border border-dim shadow-lg overflow-hidden flex flex-col h-full\">\\n            <div class=\"p-4 bg-secondary/30 min-h-[8rem] flex items-center\">\\n                <p class=\"text-secondary text-sm\">${item[\\'描述\\'] || \\'暂无描述\\'}</p>\\n            </div>\\n            <div class=\"p-4 flex flex-col flex-grow\">\\n                <h5 class=\"font-bold text-primary text-lg flex-grow mb-2\">${item[\\'名称\\']}</h5>\\n                <div class=\"flex justify-between items-center mb-4\">\\n                    <span class=\"text-2xl font-bold text-accent\">${item[\\'价值\\']} <i class=\"fas fa-coins text-lg\"></i></span>\\n                    <span class=\"bg-accent/20 text-accent text-xs font-bold px-2 py-1 rounded-full\">库存: ${item[\\'库存\\']}</span>\\n                </div>\\n                <button \\n                    class=\"barter-btn w-full mt-auto bg-accent hover:bg-accent-hover text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\\n                    data-name=\"${item[\\'名称\\']}\" \\n                    data-cost=\"${item[\\'价值\\']}\"\\n                    ${!canAfford ? \\'disabled\\' : \\'\\'}\\n                    title=\"${canAfford ? `兑换 ${item[\\'名称\\']}` : `价值不足 (需要 ${item[\\'价值\\']})`}\"\\n                >\\n                    <i class=\"fas fa-exchange-alt\"></i>\\n                    <span>${canAfford ? \\'兑换\\' : \\'价值不足\\'}</span>\\n                </button>\\n            </div>\\n          </div>\\n        </div>\\n      `;\\n        });\\n    }\\n    else {\\n        availableItemsHtml += `<div class=\"custom-slider-slide\"><p class=\"text-secondary text-sm italic text-center p-4\">当前没有可换取的物品。</p></div>`;\\n    }\\n    availableItemsHtml += `\\n      </div>\\n      <div class=\"slider-controls\">\\n        <button class=\"slider-nav-btn prev\"><i class=\"fas fa-chevron-left\"></i></button>\\n        <span class=\"slider-counter\"></span>\\n        <button class=\"slider-nav-btn next\"><i class=\"fas fa-chevron-right\"></i></button>\\n      </div>\\n    </div>\\n  `;\\n    container.innerHTML = `\\n    <div class=\"bg-main rounded-xl border border-dim p-4 shadow-sm card-hover theme-transition\">\\n      <div class=\"flex justify-between items-center mb-3 pb-2 border-b border-dim\">\\n        <h3 class=\"font-bold text-lg theme-transition flex items-center\">\\n          <i class=\"fas fa-store mr-2 text-accent\"></i> ${systemData[\\'名称\\'] || \\'以物换物\\'}\\n        </h3>\\n        <div class=\"font-bold text-accent text-lg\" title=\"我的总价值\">\\n          ${totalValue} <i class=\"fas fa-coins text-xs\"></i>\\n        </div>\\n      </div>\\n      <div class=\"space-y-6 mt-4\">\\n        <div>\\n          <h4 class=\"font-semibold text-base mb-2 text-primary/80\">我的物品</h4>\\n          ${myItemsHtml}\\n        </div>\\n        <div>\\n          <div class=\"flex justify-between items-center mb-2\">\\n            <h4 class=\"font-semibold text-base text-primary/80\">可换取的物品</h4>\\n            <button id=\"refresh-barter-btn\" class=\"text-sm text-accent hover:text-accent-hover transition-colors p-1 rounded hover:bg-secondary\" title=\"刷新可换取物品\">\\n              <i class=\"fas fa-sync-alt\"></i> 刷新\\n            </button>\\n          </div>\\n          ${availableItemsHtml}\\n        </div>\\n      </div>\\n      <div class=\"mt-4 pt-3 border-t border-dim text-center\">\\n        <p class=\"text-xs text-secondary\">${systemData[\\'提示\\'] || \\'用你的物品积累价值，换取所需之物。\\'}</p>\\n      </div>\\n    </div>\\n  `;\\n    setTimeout(() => initCustomSlider(), 0);\\n}\\n/**\\n * 渲染签到系统\\n * @param systemData - 从变量中获取的系统数据\\n * @param container - 用于渲染的HTML容器元素\\n */\\nfunction renderSignInSystem(systemData, container) {\\n    const today = new Date().getDate();\\n    const signedInDays = systemData[\\'已签到\\'] || [];\\n    const canSignIn = !signedInDays.includes(today);\\n    const consecutiveDays = systemData[\\'连续签到\\'] || 0;\\n    const monthlyCard = systemData[\\'月卡\\'] || \\'未激活\\';\\n    const monthlyCardHTML = monthlyCard === \\'未激活\\'\\n        ? `${monthlyCard} <button id=\"activate-monthly-card-btn\" class=\"text-xs ml-2 px-2 py-0.5 rounded bg-accent/20 hover:bg-accent/40 text-accent transition-colors\" title=\"向AI询问激活月卡的条件\">激活</button>`\\n        : monthlyCard;\\n    let calendarHtml = \\'<div id=\"calendar-grid\" class=\"grid grid-cols-7 gap-1 text-center text-xs\">\\';\\n    const daysInMonth = new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate();\\n    for (let i = 1; i <= daysInMonth; i++) {\\n        const isToday = i === today;\\n        const isSignedIn = signedInDays.includes(i);\\n        let dayClass = \\'w-8 h-8 flex items-center justify-center rounded-full transition-colors duration-300 \\';\\n        if (isToday && !isSignedIn) { // Only apply special style if it\\'s today AND not signed in yet\\n            dayClass += \\'bg-accent/30 text-accent font-bold ring-2 ring-accent \\';\\n        }\\n        else {\\n            dayClass += \\'bg-secondary/50 \\';\\n        }\\n        if (isSignedIn) {\\n            dayClass += \\'bg-green-500/50 text-white\\';\\n            calendarHtml += `<div class=\"${dayClass}\" title=\"第${i}天：已签到\" data-day=\"${i}\"><i class=\"fas fa-check\"></i></div>`;\\n        }\\n        else {\\n            calendarHtml += `<div class=\"${dayClass}\" title=\"第${i}天：未签到\" data-day=\"${i}\">${i}</div>`;\\n        }\\n    }\\n    calendarHtml += \\'</div>\\';\\n    container.innerHTML = `\\n    <div class=\"bg-main rounded-xl border border-dim p-3.5 shadow-sm card-hover theme-transition\">\\n      <h3 class=\"font-bold text-lg mb-3 pb-2 border-b border-dim theme-transition\">\\n        🗓️ ${systemData[\\'名称\\'] || \\'签到系统\\'}\\n      </h3>\\n      <div class=\"space-y-4\">\\n        ${calendarHtml}\\n        <div class=\"text-center text-sm text-secondary space-y-1 pt-2\">\\n            <p>连续签到: <span class=\"font-bold text-accent\">${consecutiveDays}</span> 天</p>\\n            <p>月卡状态: <span class=\"font-bold text-accent\">${monthlyCardHTML}</span></p>\\n        </div>\\n        <button id=\"sign-in-btn\" class=\"btn-primary w-full\" ${!canSignIn ? \\'disabled\\' : \\'\\'}>\\n          <i class=\"fas fa-calendar-check mr-2\"></i>${canSignIn ? \\'今日签到\\' : \\'今日已签到\\'}\\n        </button>\\n      </div>\\n    </div>\\n  `;\\n}\\n/**\\n * 系统渲染的主函数\\n * @param systemData - 从变量中获取的系统数据\\n * @param container - 用于渲染的HTML容器元素\\n */\\nfunction renderSystem(systemData, container) {\\n    if (!systemData || lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(systemData)) {\\n        container.innerHTML = `\\n      <div class=\"text-center py-4 text-secondary theme-transition italic\">\\n        <i class=\"fas fa-info-circle mr-1\"></i>未绑定系统\\n      </div>\\n    `;\\n        return;\\n    }\\n    const systemName = systemData[\\'名称\\'];\\n    switch (systemName) {\\n        case \\'技能面板\\':\\n            renderSkillPanel(systemData, container);\\n            break;\\n        case \\'成就系统\\':\\n            renderAchievementSystem(systemData, container);\\n            break;\\n        case \\'以物换物系统\\':\\n            renderBarterSystem(systemData, container);\\n            break;\\n        case \\'签到系统\\':\\n            renderSignInSystem(systemData, container);\\n            break;\\n        // 在这里可以为其他系统添加 case\\n        default:\\n            container.innerHTML = `\\n        <div class=\"text-center py-4 text-secondary theme-transition italic\">\\n          <i class=\"fas fa-question-circle mr-1\"></i>未知的系统类型: ${systemName}\\n        </div>\\n      `;\\n            break;\\n    }\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3N5c3RlbXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVCO0FBRXZCLFNBQVMsZ0JBQWdCO0lBQ3ZCLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQWdCLENBQUM7SUFDdkUsSUFBSSxDQUFDLE1BQU07UUFBRSxPQUFPO0lBRXBCLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQWdCLENBQUM7SUFDMUUsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFrQixDQUFDO0lBQzNELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQXNCLENBQUM7SUFDckYsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBc0IsQ0FBQztJQUNyRixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFnQixDQUFDO0lBRXZFLElBQUksQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxPQUFPO1FBQUUsT0FBTztJQUVwRixJQUFJLFlBQVksR0FBRyxDQUFDLENBQUM7SUFDckIsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUVsQyxNQUFNLFlBQVksR0FBRyxHQUFHLEVBQUU7UUFDeEIsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztRQUN6QyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxlQUFlLFlBQVksR0FBRyxVQUFVLEtBQUssQ0FBQztRQUV0RSxpQkFBaUI7UUFDakIsT0FBTyxDQUFDLFdBQVcsR0FBRyxHQUFHLFlBQVksR0FBRyxD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Ozs7R0FJL0UsQ0FBQztBQUNKLENBQUM7QUFHRDs7OztHQUlHO0FBQ0ksU0FBUyxZQUFZLENBQUMsVUFBZSxFQUFFLFNBQXNCO0lBQ2xFLElBQUksQ0FBQyxVQUFVLElBQUkscURBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDO1FBQ3pDLFNBQVMsQ0FBQyxTQUFTLEdBQUc7Ozs7S0FJckIsQ0FBQztRQUNGLE9BQU87SUFDVCxDQUFDO0lBRUQsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLFFBQVEsVUFBVSxFQUFFLENBQUM7UUFDbkIsS0FBSyxNQUFNO1lBQ1QsZ0JBQWdCLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3hDLE1BQU07UUFDUixLQUFLLE1BQU07WUFDVCx1QkFBdUIsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFDL0MsTUFBTTtRQUNSLEtBQUssUUFBUTtZQUNYLGtCQUFrQixDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUMxQyxNQUFNO1FBQ1IsS0FBSyxNQUFNO1lBQ1Qsa0JBQWtCLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQzFDLE1BQU07UUFDUixvQkFBb0I7UUFDcEI7WUFDRSxTQUFTLENBQUMsU0FBUyxHQUFHOztnRUFFb0MsVUFBVTs7T0FFbkUsQ0FBQztZQUNGLE1BQU07SUFDVixDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3N5c3RlbXMudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmZ1bmN0aW9uIGluaXRDdXN0b21TbGlkZXIoKSB7XG4gIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tc2xpZGVyJykgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmICghc2xpZGVyKSByZXR1cm47XG5cbiAgY29uc3QgdHJhY2sgPSBzbGlkZXIucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zbGlkZXItdHJhY2snKSBhcyBIVE1MRWxlbWVudDtcbiAgY29uc3Qgc2xpZGVzID0gQXJyYXkuZnJvbSh0cmFjay5jaGlsZHJlbikgYXMgSFRNTEVsZW1lbnRbXTtcbiAgY29uc3QgbmV4dEJ1dHRvbiA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLW5hdi1idG4ubmV4dCcpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICBjb25zdCBwcmV2QnV0dG9uID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItbmF2LWJ0bi5wcmV2JykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIGNvbnN0IGNvdW50ZXIgPSBzbGlkZXIucXVlcnlTZWxlY3RvcignLnNsaWRlci1jb3VudGVyJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgaWYgKCF0cmFjayB8fCBzbGlkZXMubGVuZ3RoID09PSAwIHx8ICFuZXh0QnV0dG9uIHx8ICFwcmV2QnV0dG9uIHx8ICFjb3VudGVyKSByZXR1cm47XG5cbiAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XG4gIGNvbnN0IHRvdGFsU2xpZGVzID0gc2xpZGVzLmxlbmd0aDtcblxuICBjb25zdCB1cGRhdGVTbGlkZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2xpZGVXaWR0aCA9IHNsaWRlc1swXS5vZmZzZXRXaWR0aDtcbiAgICB0cmFjay5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHtjdXJyZW50SW5kZXggKiBzbGlkZVdpZHRofXB4KWA7XG4gICAgXG4gICAgLy8gVXBkYXRlIGNvdW50ZXJcbiAgICBjb3VudGVyLnRleHRDb250ZW50ID0gYCR7Y3VycmVudEluZGV4ICsgMX0gLyAke3RvdGFsU2xpZGVzfWA7XG5cbiAgICAvLyBVcGRhdGUgYnV0dG9uIHN0YXRlc1xuICAgIHByZXZCdXR0b24uZGlzYWJsZWQgPSBjdXJyZW50SW5kZXggPT09IDA7XG4gICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IGN1cnJlbnRJbmRleCA9PT0gdG90YWxTbGlkZXMgLSAxO1xuICB9O1xuXG4gIG5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRJbmRleCA8IHRvdGFsU2xpZGVzIC0gMSkge1xuICAgICAgY3VycmVudEluZGV4Kys7XG4gICAgICB1cGRhdGVTbGlkZXIoKTtcbiAgICB9XG4gIH0pO1xuXG4gIHByZXZCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRJbmRleCA+IDApIHtcbiAgICAgIGN1cnJlbnRJbmRleC0tO1xuICAgICAgdXBkYXRlU2xpZGVyKCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBJbml0aWFsIHNldHVwXG4gIHVwZGF0ZVNsaWRlcigpO1xuICBcbiAgLy8gUmVjYWxjdWxhdGUgb24gcmVzaXplXG4gIG5ldyBSZXNpemVPYnNlcnZlcih1cGRhdGVTbGlkZXIpLm9ic2VydmUoc2xpZGVyKTtcbn1cblxuLyoqXG4gKiDmuLLmn5PmioDog73pnaLmnb/ns7vnu59cbiAqIEBwYXJhbSBzeXN0ZW1EYXRhIC0g5LuO5Y+Y6YeP5Lit6I635Y+W55qE57O757uf5pWw5o2uXG4gKiBAcGFyYW0gY29udGFpbmVyIC0g55So5LqO5riy5p+T55qESFRNTOWuueWZqOWFg+e0oFxuICovXG5mdW5jdGlvbiByZW5kZXJTa2lsbFBhbmVsKHN5c3RlbURhdGE6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICBjb25zdCBza2lsbHMgPSBzeXN0ZW1EYXRhWyfmioDog70nXSB8fCBbXTtcbiAgbGV0IGNvbnRlbnRIdG1sID0gJyc7XG5cbiAgaWYgKHNraWxscy5sZW5ndGggPT09IDApIHtcbiAgICBjb250ZW50SHRtbCA9IGA8cCBjbGFzcz1cInRleHQtc2Vjb25kYXJ5IHRleHQtc20gaXRhbGljXCI+JHtzeXN0ZW1EYXRhWyfmj5DnpLonXSB8fCAn5bCa5pyq6I635b6X5Lu75L2V5oqA6IO944CCJ308L3A+YDtcbiAgfSBlbHNlIHtcbiAgICBjb250ZW50SHRtbCA9ICc8dWwgY2xhc3M9XCJzcGFjZS15LTNcIj4nO1xuICAgIHNraWxscy5mb3JFYWNoKChza2lsbDogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lID0gc2tpbGxbJ+WQjeensCddIHx8ICfmnKrnn6XmioDog70nO1xuICAgICAgY29uc3QgbGV2ZWwgPSBza2lsbFsn562J57qnJ10gfHwgMTtcbiAgICAgIGNvbnN0IGV4cCA9IHNraWxsWyfnhp/nu4PluqYnXSB8fCB7IHZhbHVlOiAwLCBtYXg6IDEwMCB9O1xuICAgICAgY29uc3QgcGVyY2VudGFnZSA9IChleHAudmFsdWUgLyBleHAubWF4KSAqIDEwMDtcblxuICAgICAgY29udGVudEh0bWwgKz0gYFxuICAgICAgICA8bGk+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0xXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvbnQtc2VtaWJvbGQgdGV4dC1wcmltYXJ5XCI+JHtuYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1zbSBmb250LW1vbm8gdGV4dC1zZWNvbmRhcnlcIj5Mdi4gJHtsZXZlbH08L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhci1iZyB3LWZ1bGwgcm91bmRlZC1mdWxsIGgtMi41XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyLWZnIGJnLWFjY2VudCBoLTIuNSByb3VuZGVkLWZ1bGxcIiBzdHlsZT1cIndpZHRoOiAke3BlcmNlbnRhZ2V9JVwiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXJpZ2h0IHRleHQteHMgZm9udC1tb25vIHRleHQtc2Vjb25kYXJ5IG10LTFcIj4ke2V4cC52YWx1ZX0gLyAke2V4cC5tYXh9PC9kaXY+XG4gICAgICAgIDwvbGk+XG4gICAgICBgO1xuICAgIH0pO1xuICAgIGNvbnRlbnRIdG1sICs9ICc8L3VsPic7XG4gIH1cblxuICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJiZy1tYWluIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1kaW0gcC0zLjUgc2hhZG93LXNtIGNhcmQtaG92ZXIgdGhlbWUtdHJhbnNpdGlvblwiPlxuICAgICAgPGgzIGNsYXNzPVwiZm9udC1ib2xkIHRleHQtbGcgbWItMiBwYi0xIGJvcmRlci1iIGJvcmRlci1kaW0gdGhlbWUtdHJhbnNpdGlvblwiPlxuICAgICAgICDimpnvuI8gJHtzeXN0ZW1EYXRhWyflkI3np7AnXSB8fCAn5oqA6IO96Z2i5p2/J31cbiAgICAgIDwvaDM+XG4gICAgICAke2NvbnRlbnRIdG1sfVxuICAgIDwvZGl2PlxuICBgO1xufVxuXG4vKipcbiAqIOa4suafk+aIkOWwseezu+e7n1xuICogQHBhcmFtIHN5c3RlbURhdGEgLSDku47lj5jph4/kuK3ojrflj5bnmoTns7vnu5/mlbDmja5cbiAqIEBwYXJhbSBjb250YWluZXIgLSDnlKjkuo7muLLmn5PnmoRIVE1M5a655Zmo5YWD57SgXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckFjaGlldmVtZW50U3lzdGVtKHN5c3RlbURhdGE6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICBjb25zdCBwb2ludHMgPSBzeXN0ZW1EYXRhWyfmiJDlsLHngrnmlbAnXSB8fCAwO1xuICBjb25zdCBjb21wbGV0ZWQgPSBzeXN0ZW1EYXRhWyflt7LlrozmiJAnXSB8fCBbXTtcbiAgXG4gIGxldCBhY2hpZXZlbWVudHNIdG1sID0gJyc7XG4gIGlmIChjb21wbGV0ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgYWNoaWV2ZW1lbnRzSHRtbCA9IGA8cCBjbGFzcz1cInRleHQtc2Vjb25kYXJ5IHRleHQtc20gaXRhbGljXCI+5bCa5pyq6Kej6ZSB5Lu75L2V5oiQ5bCx44CCPC9wPmA7XG4gIH0gZWxzZSB7XG4gICAgYWNoaWV2ZW1lbnRzSHRtbCA9ICc8dWwgY2xhc3M9XCJzcGFjZS15LTNcIj4nO1xuICAgIGNvbXBsZXRlZC5mb3JFYWNoKChhY2g6IGFueSkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGFjaFsn5ZCN56ewJ10gfHwgJ+acquefpeaIkOWwsSc7XG4gICAgICBjb25zdCBkZXNjID0gYWNoWyfmj4/ov7AnXSB8fCAn5rKh5pyJ5o+P6L+w44CCJztcbiAgICAgIC8vIOWwhuaVtOS4quaIkOWwseWvueixoeWtl+espuS4suWMluS7peeUqOS6jiBkYXRhLWRldGFpbHNcbiAgICAgIGNvbnN0IGRldGFpbHMgPSBKU09OLnN0cmluZ2lmeShhY2gpO1xuXG4gICAgICBhY2hpZXZlbWVudHNIdG1sICs9IGBcbiAgICAgICAgPGxpIGNsYXNzPVwiY2xpY2thYmxlLWl0ZW0gcm91bmRlZC1sZyBwLTMgaG92ZXI6Ymctc2Vjb25kYXJ5IHRyYW5zaXRpb24tY29sb3JzXCIgZGF0YS1kZXRhaWxzPScke2RldGFpbHN9Jz5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRyb3BoeSB0ZXh0LXllbGxvdy00MDAgbXItMyBmYS1sZ1wiPjwvaT5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXByaW1hcnlcIj4ke25hbWV9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1zbSB0ZXh0LXNlY29uZGFyeSBwbC04IG10LTFcIj4ke2Rlc2N9PC9wPlxuICAgICAgICA8L2xpPlxuICAgICAgYDtcbiAgICB9KTtcbiAgICBhY2hpZXZlbWVudHNIdG1sICs9ICc8L3VsPic7XG4gIH1cblxuICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJiZy1tYWluIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1kaW0gcC0zLjUgc2hhZG93LXNtIGNhcmQtaG92ZXIgdGhlbWUtdHJhbnNpdGlvblwiPlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0yIHBiLTEgYm9yZGVyLWIgYm9yZGVyLWRpbVwiPlxuICAgICAgICA8aDMgY2xhc3M9XCJmb250LWJvbGQgdGV4dC1sZyB0aGVtZS10cmFuc2l0aW9uXCI+XG4gICAgICAgICAg8J+PhiAke3N5c3RlbURhdGFbJ+WQjeensCddIHx8ICfmiJDlsLHns7vnu58nfVxuICAgICAgICA8L2gzPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9udC1ib2xkIHRleHQtYWNjZW50IHRleHQtbGdcIiB0aXRsZT1cIuaIkOWwseeCueaVsFwiPlxuICAgICAgICAgICR7cG9pbnRzfSA8aSBjbGFzcz1cImZhcyBmYS1zdGFyIHRleHQteHNcIj48L2k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICAke2FjaGlldmVtZW50c0h0bWx9XG4gICAgICA8ZGl2IGNsYXNzPVwibXQtNCBwdC0zIGJvcmRlci10IGJvcmRlci1kaW0gdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cInJlZGVlbS1yZXdhcmRzLWJ0blwiIGNsYXNzPVwiYnRuLXByaW1hcnkgdy1mdWxsIHNtOnctYXV0b1wiPlxuICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWdpZnQgbXItMlwiPjwvaT7lhZHmjaLlpZblirFcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQmFydGVyU3lzdGVtKHN5c3RlbURhdGE6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICBjb25zdCBteUl0ZW1zID0gc3lzdGVtRGF0YVsn5oiR55qE54mp5ZOBJ10gfHwgW107XG4gIGNvbnN0IGF2YWlsYWJsZUl0ZW1zID0gc3lzdGVtRGF0YVsn5Y+v5o2i5Y+W55qE54mp5ZOBJ10gfHwgW107XG4gIGNvbnN0IHRvdGFsVmFsdWUgPSBfLnN1bUJ5KG15SXRlbXMsIChpdGVtOiBhbnkpID0+IChpdGVtWyfmlbDph48nXSB8fCAwKSAqIChpdGVtWyfku7flgLwnXSB8fCAwKSk7XG5cbiAgLy8gLS0tIE15IEl0ZW1zIFNlY3Rpb24gLS0tXG4gIGxldCBteUl0ZW1zSHRtbCA9IGA8ZGl2IGNsYXNzPVwiYmctc2Vjb25kYXJ5LzMwIHJvdW5kZWQtbGcgcC0zIHNoYWRvdy1pbm5lclwiPmA7XG4gIGlmIChteUl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICBteUl0ZW1zSHRtbCArPSBgPHVsIGNsYXNzPVwic3BhY2UteS0yIHRleHQtc21cIj5gO1xuICAgIG15SXRlbXMuZm9yRWFjaCgoaXRlbTogYW55KSA9PiB7XG4gICAgICBteUl0ZW1zSHRtbCArPSBgXG4gICAgICAgIDxsaSBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBwLTIgcm91bmRlZC1tZCBiZy1tYWluLzMwXCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXByaW1hcnlcIj4ke2l0ZW1bJ+WQjeensCddfTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC14cyB0ZXh0LXNlY29uZGFyeSBtbC0yXCI+KOS7t+WAvDogJHtpdGVtWyfku7flgLwnXX0pPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9udC1tb25vIHRleHQtYWNjZW50IGZvbnQtc2VtaWJvbGRcIj54ICR7aXRlbVsn5pWw6YePJ119PC9zcGFuPlxuICAgICAgICA8L2xpPlxuICAgICAgYDtcbiAgICB9KTtcbiAgICBteUl0ZW1zSHRtbCArPSBgPC91bD5gO1xuICB9IGVsc2Uge1xuICAgIG15SXRlbXNIdG1sICs9IGA8cCBjbGFzcz1cInRleHQtc2Vjb25kYXJ5IHRleHQtc20gaXRhbGljIHRleHQtY2VudGVyIHAtNFwiPuS9oOayoeacieWPr+eUqOS6juS6pOaNoueahOeJqeWTgeOAgjwvcD5gO1xuICB9XG4gIG15SXRlbXNIdG1sICs9ICc8L2Rpdj4nO1xuXG4gIC8vIC0tLSBBdmFpbGFibGUgSXRlbXMgU2VjdGlvbiAtLS1cbiAgbGV0IGF2YWlsYWJsZUl0ZW1zSHRtbCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwiY3VzdG9tLXNsaWRlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cImN1c3RvbS1zbGlkZXItdHJhY2tcIj5cbiAgYDtcbiAgaWYgKGF2YWlsYWJsZUl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICBhdmFpbGFibGVJdGVtcy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGNhbkFmZm9yZCA9IHRvdGFsVmFsdWUgPj0gKGl0ZW1bJ+S7t+WAvCddIHx8IDApO1xuICAgICAgYXZhaWxhYmxlSXRlbXNIdG1sICs9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImN1c3RvbS1zbGlkZXItc2xpZGVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmctbWFpbiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZGltIHNoYWRvdy1sZyBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCBoLWZ1bGxcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLTQgYmctc2Vjb25kYXJ5LzMwIG1pbi1oLVs4cmVtXSBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1zZWNvbmRhcnkgdGV4dC1zbVwiPiR7aXRlbVsn5o+P6L+wJ10gfHwgJ+aaguaXoOaPj+i/sCd9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicC00IGZsZXggZmxleC1jb2wgZmxleC1ncm93XCI+XG4gICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwiZm9udC1ib2xkIHRleHQtcHJpbWFyeSB0ZXh0LWxnIGZsZXgtZ3JvdyBtYi0yXCI+JHtpdGVtWyflkI3np7AnXX08L2g1PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWFjY2VudFwiPiR7aXRlbVsn5Lu35YC8J119IDxpIGNsYXNzPVwiZmFzIGZhLWNvaW5zIHRleHQtbGdcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJnLWFjY2VudC8yMCB0ZXh0LWFjY2VudCB0ZXh0LXhzIGZvbnQtYm9sZCBweC0yIHB5LTEgcm91bmRlZC1mdWxsXCI+5bqT5a2YOiAke2l0ZW1bJ+W6k+WtmCddfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJhcnRlci1idG4gdy1mdWxsIG10LWF1dG8gYmctYWNjZW50IGhvdmVyOmJnLWFjY2VudC1ob3ZlciB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDAgZGlzYWJsZWQ6YmctZ3JheS02MDAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yXCJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS1uYW1lPVwiJHtpdGVtWyflkI3np7AnXX1cIiBcbiAgICAgICAgICAgICAgICAgICAgZGF0YS1jb3N0PVwiJHtpdGVtWyfku7flgLwnXX1cIlxuICAgICAgICAgICAgICAgICAgICAkeyFjYW5BZmZvcmQgPyAnZGlzYWJsZWQnIDogJyd9XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiJHtjYW5BZmZvcmQgPyBg5YWR5o2iICR7aXRlbVsn5ZCN56ewJ119YCA6IGDku7flgLzkuI3otrMgKOmcgOimgSAke2l0ZW1bJ+S7t+WAvCddfSlgfVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1leGNoYW5nZS1hbHRcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7Y2FuQWZmb3JkID8gJ+WFkeaNoicgOiAn5Lu35YC85LiN6LazJ308L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGF2YWlsYWJsZUl0ZW1zSHRtbCArPSBgPGRpdiBjbGFzcz1cImN1c3RvbS1zbGlkZXItc2xpZGVcIj48cCBjbGFzcz1cInRleHQtc2Vjb25kYXJ5IHRleHQtc20gaXRhbGljIHRleHQtY2VudGVyIHAtNFwiPuW9k+WJjeayoeacieWPr+aNouWPlueahOeJqeWTgeOAgjwvcD48L2Rpdj5gO1xuICB9XG4gIGF2YWlsYWJsZUl0ZW1zSHRtbCArPSBgXG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZXItY29udHJvbHNcIj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInNsaWRlci1uYXYtYnRuIHByZXZcIj48aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLWxlZnRcIj48L2k+PC9idXR0b24+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwic2xpZGVyLWNvdW50ZXJcIj48L3NwYW4+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJzbGlkZXItbmF2LWJ0biBuZXh0XCI+PGkgY2xhc3M9XCJmYXMgZmEtY2hldnJvbi1yaWdodFwiPjwvaT48L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xuXG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImJnLW1haW4gcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWRpbSBwLTQgc2hhZG93LXNtIGNhcmQtaG92ZXIgdGhlbWUtdHJhbnNpdGlvblwiPlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0zIHBiLTIgYm9yZGVyLWIgYm9yZGVyLWRpbVwiPlxuICAgICAgICA8aDMgY2xhc3M9XCJmb250LWJvbGQgdGV4dC1sZyB0aGVtZS10cmFuc2l0aW9uIGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtc3RvcmUgbXItMiB0ZXh0LWFjY2VudFwiPjwvaT4gJHtzeXN0ZW1EYXRhWyflkI3np7AnXSB8fCAn5Lul54mp5o2i54mpJ31cbiAgICAgICAgPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWFjY2VudCB0ZXh0LWxnXCIgdGl0bGU9XCLmiJHnmoTmgLvku7flgLxcIj5cbiAgICAgICAgICAke3RvdGFsVmFsdWV9IDxpIGNsYXNzPVwiZmFzIGZhLWNvaW5zIHRleHQteHNcIj48L2k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteS02IG10LTRcIj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8aDQgY2xhc3M9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSBtYi0yIHRleHQtcHJpbWFyeS84MFwiPuaIkeeahOeJqeWTgTwvaDQ+XG4gICAgICAgICAgJHtteUl0ZW1zSHRtbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0yXCI+XG4gICAgICAgICAgICA8aDQgY2xhc3M9XCJmb250LXNlbWlib2xkIHRleHQtYmFzZSB0ZXh0LXByaW1hcnkvODBcIj7lj6/mjaLlj5bnmoTnianlk4E8L2g0PlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInJlZnJlc2gtYmFydGVyLWJ0blwiIGNsYXNzPVwidGV4dC1zbSB0ZXh0LWFjY2VudCBob3Zlcjp0ZXh0LWFjY2VudC1ob3ZlciB0cmFuc2l0aW9uLWNvbG9ycyBwLTEgcm91bmRlZCBob3ZlcjpiZy1zZWNvbmRhcnlcIiB0aXRsZT1cIuWIt+aWsOWPr+aNouWPlueJqeWTgVwiPlxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1zeW5jLWFsdFwiPjwvaT4g5Yi35pawXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAke2F2YWlsYWJsZUl0ZW1zSHRtbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtdC00IHB0LTMgYm9yZGVyLXQgYm9yZGVyLWRpbSB0ZXh0LWNlbnRlclwiPlxuICAgICAgICA8cCBjbGFzcz1cInRleHQteHMgdGV4dC1zZWNvbmRhcnlcIj4ke3N5c3RlbURhdGFbJ+aPkOekuiddIHx8ICfnlKjkvaDnmoTnianlk4Hnp6/ntK/ku7flgLzvvIzmjaLlj5bmiYDpnIDkuYvnianjgIInfTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgO1xuICBzZXRUaW1lb3V0KCgpID0+IGluaXRDdXN0b21TbGlkZXIoKSwgMCk7XG59XG5cbi8qKlxuICog5riy5p+T562+5Yiw57O757ufXG4gKiBAcGFyYW0gc3lzdGVtRGF0YSAtIOS7juWPmOmHj+S4reiOt+WPlueahOezu+e7n+aVsOaNrlxuICogQHBhcmFtIGNvbnRhaW5lciAtIOeUqOS6jua4suafk+eahEhUTUzlrrnlmajlhYPntKBcbiAqL1xuZnVuY3Rpb24gcmVuZGVyU2lnbkluU3lzdGVtKHN5c3RlbURhdGE6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpO1xuICBjb25zdCBzaWduZWRJbkRheXMgPSBzeXN0ZW1EYXRhWyflt7Lnrb7liLAnXSB8fCBbXTtcbiAgY29uc3QgY2FuU2lnbkluID0gIXNpZ25lZEluRGF5cy5pbmNsdWRlcyh0b2RheSk7XG4gIGNvbnN0IGNvbnNlY3V0aXZlRGF5cyA9IHN5c3RlbURhdGFbJ+i/nue7reetvuWIsCddIHx8IDA7XG4gIGNvbnN0IG1vbnRobHlDYXJkID0gc3lzdGVtRGF0YVsn5pyI5Y2hJ10gfHwgJ+acqua/gOa0uyc7XG4gIGNvbnN0IG1vbnRobHlDYXJkSFRNTCA9IG1vbnRobHlDYXJkID09PSAn5pyq5r+A5rS7J1xuICAgID8gYCR7bW9udGhseUNhcmR9IDxidXR0b24gaWQ9XCJhY3RpdmF0ZS1tb250aGx5LWNhcmQtYnRuXCIgY2xhc3M9XCJ0ZXh0LXhzIG1sLTIgcHgtMiBweS0wLjUgcm91bmRlZCBiZy1hY2NlbnQvMjAgaG92ZXI6YmctYWNjZW50LzQwIHRleHQtYWNjZW50IHRyYW5zaXRpb24tY29sb3JzXCIgdGl0bGU9XCLlkJFBSeivoumXrua/gOa0u+aciOWNoeeahOadoeS7tlwiPua/gOa0uzwvYnV0dG9uPmBcbiAgICA6IG1vbnRobHlDYXJkO1xuXG4gIGxldCBjYWxlbmRhckh0bWwgPSAnPGRpdiBpZD1cImNhbGVuZGFyLWdyaWRcIiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTcgZ2FwLTEgdGV4dC1jZW50ZXIgdGV4dC14c1wiPic7XG4gIGNvbnN0IGRheXNJbk1vbnRoID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgKyAxLCAwKS5nZXREYXRlKCk7XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZGF5c0luTW9udGg7IGkrKykge1xuICAgIGNvbnN0IGlzVG9kYXkgPSBpID09PSB0b2RheTtcbiAgICBjb25zdCBpc1NpZ25lZEluID0gc2lnbmVkSW5EYXlzLmluY2x1ZGVzKGkpO1xuICAgIGxldCBkYXlDbGFzcyA9ICd3LTggaC04IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDAgJztcblxuICAgIGlmIChpc1RvZGF5ICYmICFpc1NpZ25lZEluKSB7IC8vIE9ubHkgYXBwbHkgc3BlY2lhbCBzdHlsZSBpZiBpdCdzIHRvZGF5IEFORCBub3Qgc2lnbmVkIGluIHlldFxuICAgICAgZGF5Q2xhc3MgKz0gJ2JnLWFjY2VudC8zMCB0ZXh0LWFjY2VudCBmb250LWJvbGQgcmluZy0yIHJpbmctYWNjZW50ICc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRheUNsYXNzICs9ICdiZy1zZWNvbmRhcnkvNTAgJztcbiAgICB9XG5cbiAgICBpZiAoaXNTaWduZWRJbikge1xuICAgICAgZGF5Q2xhc3MgKz0gJ2JnLWdyZWVuLTUwMC81MCB0ZXh0LXdoaXRlJztcbiAgICAgIGNhbGVuZGFySHRtbCArPSBgPGRpdiBjbGFzcz1cIiR7ZGF5Q2xhc3N9XCIgdGl0bGU9XCLnrKwke2l95aSp77ya5bey562+5YiwXCIgZGF0YS1kYXk9XCIke2l9XCI+PGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+PC9kaXY+YDtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsZW5kYXJIdG1sICs9IGA8ZGl2IGNsYXNzPVwiJHtkYXlDbGFzc31cIiB0aXRsZT1cIuesrCR7aX3lpKnvvJrmnKrnrb7liLBcIiBkYXRhLWRheT1cIiR7aX1cIj4ke2l9PC9kaXY+YDtcbiAgICB9XG4gIH1cbiAgY2FsZW5kYXJIdG1sICs9ICc8L2Rpdj4nO1xuXG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImJnLW1haW4gcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWRpbSBwLTMuNSBzaGFkb3ctc20gY2FyZC1ob3ZlciB0aGVtZS10cmFuc2l0aW9uXCI+XG4gICAgICA8aDMgY2xhc3M9XCJmb250LWJvbGQgdGV4dC1sZyBtYi0zIHBiLTIgYm9yZGVyLWIgYm9yZGVyLWRpbSB0aGVtZS10cmFuc2l0aW9uXCI+XG4gICAgICAgIPCfl5PvuI8gJHtzeXN0ZW1EYXRhWyflkI3np7AnXSB8fCAn562+5Yiw57O757ufJ31cbiAgICAgIDwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwic3BhY2UteS00XCI+XG4gICAgICAgICR7Y2FsZW5kYXJIdG1sfVxuICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgdGV4dC1zbSB0ZXh0LXNlY29uZGFyeSBzcGFjZS15LTEgcHQtMlwiPlxuICAgICAgICAgICAgPHA+6L+e57ut562+5YiwOiA8c3BhbiBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWFjY2VudFwiPiR7Y29uc2VjdXRpdmVEYXlzfTwvc3Bhbj4g5aSpPC9wPlxuICAgICAgICAgICAgPHA+5pyI5Y2h54q25oCBOiA8c3BhbiBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWFjY2VudFwiPiR7bW9udGhseUNhcmRIVE1MfTwvc3Bhbj48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YnV0dG9uIGlkPVwic2lnbi1pbi1idG5cIiBjbGFzcz1cImJ0bi1wcmltYXJ5IHctZnVsbFwiICR7IWNhblNpZ25JbiA/ICdkaXNhYmxlZCcgOiAnJ30+XG4gICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtY2FsZW5kYXItY2hlY2sgbXItMlwiPjwvaT4ke2NhblNpZ25JbiA/ICfku4rml6Xnrb7liLAnIDogJ+S7iuaXpeW3suetvuWIsCd9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG59XG5cblxuLyoqXG4gKiDns7vnu5/muLLmn5PnmoTkuLvlh73mlbBcbiAqIEBwYXJhbSBzeXN0ZW1EYXRhIC0g5LuO5Y+Y6YeP5Lit6I635Y+W55qE57O757uf5pWw5o2uXG4gKiBAcGFyYW0gY29udGFpbmVyIC0g55So5LqO5riy5p+T55qESFRNTOWuueWZqOWFg+e0oFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3lzdGVtKHN5c3RlbURhdGE6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICBpZiAoIXN5c3RlbURhdGEgfHwgXy5pc0VtcHR5KHN5c3RlbURhdGEpKSB7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBweS00IHRleHQtc2Vjb25kYXJ5IHRoZW1lLXRyYW5zaXRpb24gaXRhbGljXCI+XG4gICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWluZm8tY2lyY2xlIG1yLTFcIj48L2k+5pyq57uR5a6a57O757ufXG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHN5c3RlbU5hbWUgPSBzeXN0ZW1EYXRhWyflkI3np7AnXTtcbiAgc3dpdGNoIChzeXN0ZW1OYW1lKSB7XG4gICAgY2FzZSAn5oqA6IO96Z2i5p2/JzpcbiAgICAgIHJlbmRlclNraWxsUGFuZWwoc3lzdGVtRGF0YSwgY29udGFpbmVyKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ+aIkOWwseezu+e7nyc6XG4gICAgICByZW5kZXJBY2hpZXZlbWVudFN5c3RlbShzeXN0ZW1EYXRhLCBjb250YWluZXIpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAn5Lul54mp5o2i54mp57O757ufJzpcbiAgICAgIHJlbmRlckJhcnRlclN5c3RlbShzeXN0ZW1EYXRhLCBjb250YWluZXIpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAn562+5Yiw57O757ufJzpcbiAgICAgIHJlbmRlclNpZ25JblN5c3RlbShzeXN0ZW1EYXRhLCBjb250YWluZXIpO1xuICAgICAgYnJlYWs7XG4gICAgLy8g5Zyo6L+Z6YeM5Y+v5Lul5Li65YW25LuW57O757uf5re75YqgIGNhc2VcbiAgICBkZWZhdWx0OlxuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHB5LTQgdGV4dC1zZWNvbmRhcnkgdGhlbWUtdHJhbnNpdGlvbiBpdGFsaWNcIj5cbiAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1xdWVzdGlvbi1jaXJjbGUgbXItMVwiPjwvaT7mnKrnn6XnmoTns7vnu5/nsbvlnos6ICR7c3lzdGVtTmFtZX1cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgICAgYnJlYWs7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/systems.ts\\n\\n}');\n  },\n  \"./src/什么我要在玄幻修仙世界种田/version.ts\": \n  /*!**************************************!*\\\n  !*** ./src/什么我要在玄幻修仙世界种田/version.ts ***!\n  \\**************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n    eval(\"{__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   checkForUpdates: () => (/* binding */ checkForUpdates),\\n/* harmony export */   getChangelog: () => (/* binding */ getChangelog),\\n/* harmony export */   showChangelogModal: () => (/* binding */ showChangelogModal),\\n/* harmony export */   updateCardFiles: () => (/* binding */ updateCardFiles)\\n/* harmony export */ });\\n/* harmony import */ var _update_script__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../update-script */ \\\"./src/update-script.ts\\\");\\n\\n// 请将这里的 URL 替换为你的 GitHub 仓库的 Raw 地址\\nconst GITHUB_REPO_RAW_URL = 'https://raw.githubusercontent.com/HerSophia/Verdant-Spirit-Dao/main/';\\n// 当前版本号，需要与 version.json 保持一致\\nconst LOCAL_VERSION = 'v0.3.1';\\n/**\\n * 检查是否有新版本并获取更新日志\\n * @returns {Promise<UpdateInfo | null>}\\n */\\n/**\\n * 仅从远程获取并解析更新日志。\\n * @returns {Promise<string>} 返回HTML格式的更新日志。\\n */\\nasync function getChangelog() {\\n    try {\\n        const changelogResponse = await fetch(`${GITHUB_REPO_RAW_URL}changlog.md`);\\n        if (changelogResponse.ok) {\\n            const changelogMd = await changelogResponse.text();\\n            return marked.parse(changelogMd);\\n        }\\n        return '<p>无法加载更新日志。</p>';\\n    }\\n    catch (e) {\\n        console.error(\\\"获取更新日志失败:\\\", e);\\n        toastr.error('获取更新日志失败，请查看控制台。');\\n        return '<p>获取更新日志失败。</p>';\\n    }\\n}\\nasync function checkForUpdates() {\\n    try {\\n        // 从 GitHub 获取最新的 version.json\\n        const versionResponse = await fetch(`${GITHUB_REPO_RAW_URL}version.json`);\\n        if (!versionResponse.ok) {\\n            throw new Error(`无法获取 version.json: ${versionResponse.statusText}`);\\n        }\\n        const versionData = await versionResponse.json();\\n        const remoteVersion = `v${versionData.version}`;\\n        const hasUpdate = remoteVersion.localeCompare(LOCAL_VERSION, undefined, { numeric: true, sensitivity: 'base' }) > 0;\\n        const changelogHtml = await getChangelog();\\n        let filesToUpdate = undefined;\\n        if (hasUpdate) {\\n            filesToUpdate = versionData.files_to_update || [];\\n        }\\n        return {\\n            hasUpdate,\\n            remoteVersion,\\n            changelogHtml,\\n            filesToUpdate,\\n        };\\n    }\\n    catch (error) {\\n        console.error('检查更新失败:', error);\\n        toastr.error('检查更新失败，请查看控制台获取更多信息。');\\n        return null;\\n    }\\n}\\n/**\\n * 创建并显示更新日志模态框\\n * @param {string} contentHtml - 要显示的 HTML 内容\\n * @param {boolean} hasUpdate - 是否有可用更新\\n */\\nfunction showChangelogModal(contentHtml, hasUpdate) {\\n    // 移除已存在的模态框，防止重复\\n    $('#changelog-modal-overlay').remove();\\n    const modalHtml = `\\n    <div id=\\\"changelog-modal-overlay\\\" class=\\\"modal-overlay\\\">\\n      <div class=\\\"modal-content\\\">\\n        <button id=\\\"changelog-modal-close-btn\\\" class=\\\"modal-close-btn\\\">&times;</button>\\n        <div class=\\\"modal-body prose prose-invert max-w-none\\\">\\n          ${contentHtml}\\n        </div>\\n        <div class=\\\"modal-footer\\\" style=\\\"text-align: right; margin-top: 1rem;\\\">\\n          ${hasUpdate ? '<button id=\\\"update-now-btn\\\" class=\\\"btn-primary\\\">立即更新</button>' : ''}\\n        </div>\\n      </div>\\n    </div>\\n  `;\\n    $('body').append(modalHtml);\\n    const $modalOverlay = $('#changelog-modal-overlay');\\n    $modalOverlay.removeClass('hidden');\\n    $('#changelog-modal-close-btn, #changelog-modal-overlay').on('click', function (e) {\\n        if (e.target === this) {\\n            $modalOverlay.addClass('hidden').remove();\\n        }\\n    });\\n    if (hasUpdate) {\\n        $('#update-now-btn').on('click', async function () {\\n            const btn = $(this);\\n            btn.prop('disabled', true).text('更新中...');\\n            try {\\n                const updateInfo = await checkForUpdates();\\n                if (updateInfo?.hasUpdate && updateInfo.filesToUpdate) {\\n                    await updateCardFiles(updateInfo.filesToUpdate);\\n                    toastr.success('所有文件更新完成！');\\n                    $modalOverlay.addClass('hidden').remove();\\n                }\\n                else {\\n                    toastr.warning('未找到需要更新的文件或版本已是最新。');\\n                }\\n            }\\n            catch (error) {\\n                toastr.error(`更新过程中发生错误: ${error.message}`);\\n                btn.prop('disabled', false).text('立即更新');\\n            }\\n        });\\n    }\\n}\\n/**\\n * 从远程仓库获取并更新角色卡相关文件。\\n * @param {string[]} filesToUpdate - 需要更新的文件路径列表。\\n */\\nasync function updateCardFiles(filesToUpdate) {\\n    toastr.info(`开始更新 ${filesToUpdate.length} 个文件...`);\\n    for (const filePath of filesToUpdate) {\\n        try {\\n            const response = await fetch(`${GITHUB_REPO_RAW_URL}${filePath}`);\\n            if (!response.ok) {\\n                throw new Error(`下载文件失败 ${filePath}: ${response.statusText}`);\\n            }\\n            const fileContent = await response.text();\\n            await (0,_update_script__WEBPACK_IMPORTED_MODULE_0__.processFileUpdate)(filePath, fileContent);\\n        }\\n        catch (error) {\\n            console.error(`更新文件 ${filePath} 失败:`, error);\\n            toastr.error(`更新文件 ${filePath} 失败: ${error.message}`);\\n            // 选择继续更新其他文件，而不是中断整个过程\\n        }\\n    }\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3ZlcnNpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUQ7QUFHckQsb0NBQW9DO0FBQ3BDLE1BQU0sbUJBQW1CLEdBQUcsc0VBQXNFLENBQUM7QUFFbkcsOEJBQThCO0FBQzlCLE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQztBQVMvQjs7O0dBR0c7QUFDSDs7O0dBR0c7QUFDSSxLQUFLLFVBQVUsWUFBWTtJQUNoQyxJQUFJLENBQUM7UUFDSCxNQUFNLGlCQUFpQixHQUFHLE1BQU0sS0FBSyxDQUFDLEdBQUcsbUJBQW1CLGFBQWEsQ0FBQyxDQUFDO1FBQzNFLElBQUksaUJBQWlCLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDekIsTUFBTSxXQUFXLEdBQUcsTUFBTSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNuRCxPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFXLENBQUM7UUFDN0MsQ0FBQztRQUNELE9BQU8sa0JBQWtCLENBQUM7SUFDNUIsQ0FBQztJQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM5QixNQUFNLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDakMsT0FBTyxrQkFBa0IsQ0FBQztJQUM1QixDQUFDO0FBQ0gsQ0FBQztBQUVNLEtBQUssVUFBVSxlQUFlO0lBQ25DLElBQUksQ0FBQztRQUNILDhCQUE4QjtRQUM5QixNQUFNLGVBQWUsR0FBRyxNQUFNLEtBQUssQ0FBQyxHQUFHLG1CQUFtQixjQUFjLENBQUMsQ0FBQztRQUMxRSxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3hCLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLGVBQWUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO1FBQ3RFLENBQUM7UUFDRCxNQUFN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QzVDLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM3QyxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0FBQ0gsQ0FBQztBQUVEOzs7R0FHRztBQUNJLEtBQUssVUFBVSxlQUFlLENBQUMsYUFBdUI7SUFDekQsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLGFBQWEsQ0FBQyxNQUFNLFNBQVMsQ0FBQyxDQUFDO0lBRW5ELEtBQUssTUFBTSxRQUFRLElBQUksYUFBYSxFQUFFLENBQUM7UUFDbkMsSUFBSSxDQUFDO1lBQ0QsTUFBTSxRQUFRLEdBQUcsTUFBTSxLQUFLLENBQUMsR0FBRyxtQkFBbUIsR0FBRyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBQ2xFLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ2YsTUFBTSxJQUFJLEtBQUssQ0FBQyxVQUFVLFFBQVEsS0FBSyxRQUFRLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztZQUNsRSxDQUFDO1lBQ0QsTUFBTSxXQUFXLEdBQUcsTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDMUMsTUFBTSxpRUFBaUIsQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDbkQsQ0FBQztRQUFDLE9BQU8sS0FBVSxFQUFFLENBQUM7WUFDbEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLFFBQVEsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxRQUFRLFFBQVEsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFDdEQsdUJBQXVCO1FBQzNCLENBQUM7SUFDTCxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5LuA5LmI5oiR6KaB5Zyo546E5bm75L+u5LuZ5LiW55WM56eN55SwL3ZlcnNpb24udHM/Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb2Nlc3NGaWxlVXBkYXRlIH0gZnJvbSAnLi4vdXBkYXRlLXNjcmlwdCc7XG5kZWNsYXJlIGNvbnN0IG1hcmtlZDogYW55O1xuXG4vLyDor7flsIbov5nph4znmoQgVVJMIOabv+aNouS4uuS9oOeahCBHaXRIdWIg5LuT5bqT55qEIFJhdyDlnLDlnYBcbmNvbnN0IEdJVEhVQl9SRVBPX1JBV19VUkwgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0hlclNvcGhpYS9WZXJkYW50LVNwaXJpdC1EYW8vbWFpbi8nO1xuXG4vLyDlvZPliY3niYjmnKzlj7fvvIzpnIDopoHkuI4gdmVyc2lvbi5qc29uIOS/neaMgeS4gOiHtFxuY29uc3QgTE9DQUxfVkVSU0lPTiA9ICd2MC4zLjEnO1xuXG5pbnRlcmZhY2UgVXBkYXRlSW5mbyB7XG4gIGhhc1VwZGF0ZTogYm9vbGVhbjtcbiAgcmVtb3RlVmVyc2lvbjogc3RyaW5nO1xuICBjaGFuZ2Vsb2dIdG1sOiBzdHJpbmcgfCBudWxsO1xuICBmaWxlc1RvVXBkYXRlPzogc3RyaW5nW107XG59XG5cbi8qKlxuICog5qOA5p+l5piv5ZCm5pyJ5paw54mI5pys5bm26I635Y+W5pu05paw5pel5b+XXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxVcGRhdGVJbmZvIHwgbnVsbD59XG4gKi9cbi8qKlxuICog5LuF5LuO6L+c56iL6I635Y+W5bm26Kej5p6Q5pu05paw5pel5b+X44CCXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSDov5Tlm55IVE1M5qC85byP55qE5pu05paw5pel5b+X44CCXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDaGFuZ2Vsb2coKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjaGFuZ2Vsb2dSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0dJVEhVQl9SRVBPX1JBV19VUkx9Y2hhbmdsb2cubWRgKTtcbiAgICBpZiAoY2hhbmdlbG9nUmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGNoYW5nZWxvZ01kID0gYXdhaXQgY2hhbmdlbG9nUmVzcG9uc2UudGV4dCgpO1xuICAgICAgcmV0dXJuIG1hcmtlZC5wYXJzZShjaGFuZ2Vsb2dNZCkgYXMgc3RyaW5nO1xuICAgIH1cbiAgICByZXR1cm4gJzxwPuaXoOazleWKoOi9veabtOaWsOaXpeW/l+OAgjwvcD4nO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuiOt+WPluabtOaWsOaXpeW/l+Wksei0pTpcIiwgZSk7XG4gICAgdG9hc3RyLmVycm9yKCfojrflj5bmm7TmlrDml6Xlv5flpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7DjgIInKTtcbiAgICByZXR1cm4gJzxwPuiOt+WPluabtOaWsOaXpeW/l+Wksei0peOAgjwvcD4nO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0ZvclVwZGF0ZXMoKTogUHJvbWlzZTxVcGRhdGVJbmZvIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIC8vIOS7jiBHaXRIdWIg6I635Y+W5pyA5paw55qEIHZlcnNpb24uanNvblxuICAgIGNvbnN0IHZlcnNpb25SZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0dJVEhVQl9SRVBPX1JBV19VUkx9dmVyc2lvbi5qc29uYCk7XG4gICAgaWYgKCF2ZXJzaW9uUmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihg5peg5rOV6I635Y+WIHZlcnNpb24uanNvbjogJHt2ZXJzaW9uUmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgY29uc3QgdmVyc2lvbkRhdGEgPSBhd2FpdCB2ZXJzaW9uUmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnN0IHJlbW90ZVZlcnNpb24gPSBgdiR7dmVyc2lvbkRhdGEudmVyc2lvbn1gO1xuXG4gICAgY29uc3QgaGFzVXBkYXRlID0gcmVtb3RlVmVyc2lvbi5sb2NhbGVDb21wYXJlKExPQ0FMX1ZFUlNJT04sIHVuZGVmaW5lZCwgeyBudW1lcmljOiB0cnVlLCBzZW5zaXRpdml0eTogJ2Jhc2UnIH0pID4gMDtcblxuICAgIGNvbnN0IGNoYW5nZWxvZ0h0bWwgPSBhd2FpdCBnZXRDaGFuZ2Vsb2coKTtcblxuICAgIGxldCBmaWxlc1RvVXBkYXRlOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoaGFzVXBkYXRlKSB7XG4gICAgICBmaWxlc1RvVXBkYXRlID0gdmVyc2lvbkRhdGEuZmlsZXNfdG9fdXBkYXRlIHx8IFtdO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBoYXNVcGRhdGUsXG4gICAgICByZW1vdGVWZXJzaW9uLFxuICAgICAgY2hhbmdlbG9nSHRtbCxcbiAgICAgIGZpbGVzVG9VcGRhdGUsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfmo4Dmn6Xmm7TmlrDlpLHotKU6JywgZXJyb3IpO1xuICAgIHRvYXN0ci5lcnJvcign5qOA5p+l5pu05paw5aSx6LSl77yM6K+35p+l55yL5o6n5Yi25Y+w6I635Y+W5pu05aSa5L+h5oGv44CCJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiDliJvlu7rlubbmmL7npLrmm7TmlrDml6Xlv5fmqKHmgIHmoYZcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50SHRtbCAtIOimgeaYvuekuueahCBIVE1MIOWGheWuuVxuICogQHBhcmFtIHtib29sZWFufSBoYXNVcGRhdGUgLSDmmK/lkKbmnInlj6/nlKjmm7TmlrBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dDaGFuZ2Vsb2dNb2RhbChjb250ZW50SHRtbDogc3RyaW5nLCBoYXNVcGRhdGU6IGJvb2xlYW4pIHtcbiAgLy8g56e76Zmk5bey5a2Y5Zyo55qE5qih5oCB5qGG77yM6Ziy5q2i6YeN5aSNXG4gICQoJyNjaGFuZ2Vsb2ctbW9kYWwtb3ZlcmxheScpLnJlbW92ZSgpO1xuXG4gIGNvbnN0IG1vZGFsSHRtbCA9IGBcbiAgICA8ZGl2IGlkPVwiY2hhbmdlbG9nLW1vZGFsLW92ZXJsYXlcIiBjbGFzcz1cIm1vZGFsLW92ZXJsYXlcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgIDxidXR0b24gaWQ9XCJjaGFuZ2Vsb2ctbW9kYWwtY2xvc2UtYnRuXCIgY2xhc3M9XCJtb2RhbC1jbG9zZS1idG5cIj4mdGltZXM7PC9idXR0b24+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5IHByb3NlIHByb3NlLWludmVydCBtYXgtdy1ub25lXCI+XG4gICAgICAgICAgJHtjb250ZW50SHRtbH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIiBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0OyBtYXJnaW4tdG9wOiAxcmVtO1wiPlxuICAgICAgICAgICR7aGFzVXBkYXRlID8gJzxidXR0b24gaWQ9XCJ1cGRhdGUtbm93LWJ0blwiIGNsYXNzPVwiYnRuLXByaW1hcnlcIj7nq4vljbPmm7TmlrA8L2J1dHRvbj4nIDogJyd9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG5cbiAgJCgnYm9keScpLmFwcGVuZChtb2RhbEh0bWwpO1xuXG4gIGNvbnN0ICRtb2RhbE92ZXJsYXkgPSAkKCcjY2hhbmdlbG9nLW1vZGFsLW92ZXJsYXknKTtcbiAgJG1vZGFsT3ZlcmxheS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cbiAgJCgnI2NoYW5nZWxvZy1tb2RhbC1jbG9zZS1idG4sICNjaGFuZ2Vsb2ctbW9kYWwtb3ZlcmxheScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMpIHtcbiAgICAgICRtb2RhbE92ZXJsYXkuYWRkQ2xhc3MoJ2hpZGRlbicpLnJlbW92ZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGhhc1VwZGF0ZSkge1xuICAgICQoJyN1cGRhdGUtbm93LWJ0bicpLm9uKCdjbGljaycsIGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgYnRuID0gJCh0aGlzKTtcbiAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLnRleHQoJ+abtOaWsOS4rS4uLicpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVJbmZvID0gYXdhaXQgY2hlY2tGb3JVcGRhdGVzKCk7XG4gICAgICAgICAgaWYgKHVwZGF0ZUluZm8/Lmhhc1VwZGF0ZSAmJiB1cGRhdGVJbmZvLmZpbGVzVG9VcGRhdGUpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlQ2FyZEZpbGVzKHVwZGF0ZUluZm8uZmlsZXNUb1VwZGF0ZSk7XG4gICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCfmiYDmnInmlofku7bmm7TmlrDlrozmiJDvvIEnKTtcbiAgICAgICAgICAgICAgJG1vZGFsT3ZlcmxheS5hZGRDbGFzcygnaGlkZGVuJykucmVtb3ZlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+acquaJvuWIsOmcgOimgeabtOaWsOeahOaWh+S7tuaIlueJiOacrOW3suaYr+acgOaWsOOAgicpO1xuICAgICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICB0b2FzdHIuZXJyb3IoYOabtOaWsOi/h+eoi+S4reWPkeeUn+mUmeivrzogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgIGJ0bi5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS50ZXh0KCfnq4vljbPmm7TmlrAnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIOS7jui/nOeoi+S7k+W6k+iOt+WPluW5tuabtOaWsOinkuiJsuWNoeebuOWFs+aWh+S7tuOAglxuICogQHBhcmFtIHtzdHJpbmdbXX0gZmlsZXNUb1VwZGF0ZSAtIOmcgOimgeabtOaWsOeahOaWh+S7tui3r+W+hOWIl+ihqOOAglxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ2FyZEZpbGVzKGZpbGVzVG9VcGRhdGU6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdG9hc3RyLmluZm8oYOW8gOWni+abtOaWsCAke2ZpbGVzVG9VcGRhdGUubGVuZ3RofSDkuKrmlofku7YuLi5gKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGZpbGVzVG9VcGRhdGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7R0lUSFVCX1JFUE9fUkFXX1VSTH0ke2ZpbGVQYXRofWApO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg5LiL6L295paH5Lu25aSx6LSlICR7ZmlsZVBhdGh9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NGaWxlVXBkYXRlKGZpbGVQYXRoLCBmaWxlQ29udGVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOabtOaWsOaWh+S7tiAke2ZpbGVQYXRofSDlpLHotKU6YCwgZXJyb3IpO1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKGDmm7TmlrDmlofku7YgJHtmaWxlUGF0aH0g5aSx6LSlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAvLyDpgInmi6nnu6fnu63mm7TmlrDlhbbku5bmlofku7bvvIzogIzkuI3mmK/kuK3mlq3mlbTkuKrov4fnqItcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///./src/什么我要在玄幻修仙世界种田/version.ts\\n\\n}\");\n  },\n  lodash: \n  /*!********************!*\\\n  !*** external \"_\" ***!\n  \\********************/ module => {\n    module.exports = _;\n  },\n  toastr: \n  /*!*************************!*\\\n  !*** external \"toastr\" ***!\n  \\*************************/ module => {\n    module.exports = toastr;\n  }\n};\n\nvar __webpack_module_cache__ = {};\n\nfunction __webpack_require__(moduleId) {\n  var cachedModule = __webpack_module_cache__[moduleId];\n  if (cachedModule !== undefined) {\n    return cachedModule.exports;\n  }\n  var module = __webpack_module_cache__[moduleId] = {\n    exports: {}\n  };\n  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n  return module.exports;\n}\n\n(() => {\n  __webpack_require__.n = module => {\n    var getter = module && module.__esModule ? () => module[\"default\"] : () => module;\n    __webpack_require__.d(getter, {\n      a: getter\n    });\n    return getter;\n  };\n})();\n\n(() => {\n  __webpack_require__.d = (exports, definition) => {\n    for (var key in definition) {\n      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n        Object.defineProperty(exports, key, {\n          enumerable: true,\n          get: definition[key]\n        });\n      }\n    }\n  };\n})();\n\n(() => {\n  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n})();\n\n(() => {\n  __webpack_require__.r = exports => {\n    if (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {\n      Object.defineProperty(exports, Symbol.toStringTag, {\n        value: \"Module\"\n      });\n    }\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n  };\n})();\n\nvar __webpack_exports__ = __webpack_require__(\"./src/什么我要在玄幻修仙世界种田/index.ts\");</script></body>\n```",
    "trimStrings": [],
    "placement": [
        1,
        2
    ],
    "disabled": false,
    "markdownOnly": true,
    "promptOnly": false,
    "runOnEdit": true,
    "substituteRegex": 0,
    "minDepth": null,
    "maxDepth": null
}